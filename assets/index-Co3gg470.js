(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function sA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cp={exports:{}},$c={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw;function rA(){if(dw)return $c;dw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:t,type:r,key:h,ref:o!==void 0?o:null,props:c}}return $c.Fragment=e,$c.jsx=n,$c.jsxs=n,$c}var hw;function iA(){return hw||(hw=1,Cp.exports=rA()),Cp.exports}var l=iA(),Rp={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw;function aA(){if(fw)return Ue;fw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function T(V){return V===null||typeof V!="object"?null:(V=_&&V[_]||V["@@iterator"],typeof V=="function"?V:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,$={};function I(V,le,ye){this.props=V,this.context=le,this.refs=$,this.updater=ye||R}I.prototype.isReactComponent={},I.prototype.setState=function(V,le){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,le,"setState")},I.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Q(){}Q.prototype=I.prototype;function F(V,le,ye){this.props=V,this.context=le,this.refs=$,this.updater=ye||R}var z=F.prototype=new Q;z.constructor=F,U(z,I.prototype),z.isPureReactComponent=!0;var ce=Array.isArray,he={H:null,A:null,T:null,S:null,V:null},ue=Object.prototype.hasOwnProperty;function k(V,le,ye,ee,oe,pe){return ye=pe.ref,{$$typeof:t,type:V,key:le,ref:ye!==void 0?ye:null,props:pe}}function N(V,le){return k(V.type,le,void 0,void 0,void 0,V.props)}function C(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function L(V){var le={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ye){return le[ye]})}var O=/\/+/g;function M(V,le){return typeof V=="object"&&V!==null&&V.key!=null?L(""+V.key):le.toString(36)}function S(){}function Ne(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(S,S):(V.status="pending",V.then(function(le){V.status==="pending"&&(V.status="fulfilled",V.value=le)},function(le){V.status==="pending"&&(V.status="rejected",V.reason=le)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Le(V,le,ye,ee,oe){var pe=typeof V;(pe==="undefined"||pe==="boolean")&&(V=null);var fe=!1;if(V===null)fe=!0;else switch(pe){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(V.$$typeof){case t:case e:fe=!0;break;case v:return fe=V._init,Le(fe(V._payload),le,ye,ee,oe)}}if(fe)return oe=oe(V),fe=ee===""?"."+M(V,0):ee,ce(oe)?(ye="",fe!=null&&(ye=fe.replace(O,"$&/")+"/"),Le(oe,le,ye,"",function(Kn){return Kn})):oe!=null&&(C(oe)&&(oe=N(oe,ye+(oe.key==null||V&&V.key===oe.key?"":(""+oe.key).replace(O,"$&/")+"/")+fe)),le.push(oe)),1;fe=0;var Ie=ee===""?".":ee+":";if(ce(V))for(var tt=0;tt<V.length;tt++)ee=V[tt],pe=Ie+M(ee,tt),fe+=Le(ee,le,ye,pe,oe);else if(tt=T(V),typeof tt=="function")for(V=tt.call(V),tt=0;!(ee=V.next()).done;)ee=ee.value,pe=Ie+M(ee,tt++),fe+=Le(ee,le,ye,pe,oe);else if(pe==="object"){if(typeof V.then=="function")return Le(Ne(V),le,ye,ee,oe);throw le=String(V),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return fe}function q(V,le,ye){if(V==null)return V;var ee=[],oe=0;return Le(V,ee,"","",function(pe){return le.call(ye,pe,oe++)}),ee}function re(V){if(V._status===-1){var le=V._result;le=le(),le.then(function(ye){(V._status===0||V._status===-1)&&(V._status=1,V._result=ye)},function(ye){(V._status===0||V._status===-1)&&(V._status=2,V._result=ye)}),V._status===-1&&(V._status=0,V._result=le)}if(V._status===1)return V._result.default;throw V._result}var ge=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function Be(){}return Ue.Children={map:q,forEach:function(V,le,ye){q(V,function(){le.apply(this,arguments)},ye)},count:function(V){var le=0;return q(V,function(){le++}),le},toArray:function(V){return q(V,function(le){return le})||[]},only:function(V){if(!C(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ue.Component=I,Ue.Fragment=n,Ue.Profiler=o,Ue.PureComponent=F,Ue.StrictMode=r,Ue.Suspense=g,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=he,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(V){return he.H.useMemoCache(V)}},Ue.cache=function(V){return function(){return V.apply(null,arguments)}},Ue.cloneElement=function(V,le,ye){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ee=U({},V.props),oe=V.key,pe=void 0;if(le!=null)for(fe in le.ref!==void 0&&(pe=void 0),le.key!==void 0&&(oe=""+le.key),le)!ue.call(le,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&le.ref===void 0||(ee[fe]=le[fe]);var fe=arguments.length-2;if(fe===1)ee.children=ye;else if(1<fe){for(var Ie=Array(fe),tt=0;tt<fe;tt++)Ie[tt]=arguments[tt+2];ee.children=Ie}return k(V.type,oe,void 0,void 0,pe,ee)},Ue.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:c,_context:V},V},Ue.createElement=function(V,le,ye){var ee,oe={},pe=null;if(le!=null)for(ee in le.key!==void 0&&(pe=""+le.key),le)ue.call(le,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(oe[ee]=le[ee]);var fe=arguments.length-2;if(fe===1)oe.children=ye;else if(1<fe){for(var Ie=Array(fe),tt=0;tt<fe;tt++)Ie[tt]=arguments[tt+2];oe.children=Ie}if(V&&V.defaultProps)for(ee in fe=V.defaultProps,fe)oe[ee]===void 0&&(oe[ee]=fe[ee]);return k(V,pe,void 0,void 0,null,oe)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(V){return{$$typeof:p,render:V}},Ue.isValidElement=C,Ue.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:re}},Ue.memo=function(V,le){return{$$typeof:y,type:V,compare:le===void 0?null:le}},Ue.startTransition=function(V){var le=he.T,ye={};he.T=ye;try{var ee=V(),oe=he.S;oe!==null&&oe(ye,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Be,ge)}catch(pe){ge(pe)}finally{he.T=le}},Ue.unstable_useCacheRefresh=function(){return he.H.useCacheRefresh()},Ue.use=function(V){return he.H.use(V)},Ue.useActionState=function(V,le,ye){return he.H.useActionState(V,le,ye)},Ue.useCallback=function(V,le){return he.H.useCallback(V,le)},Ue.useContext=function(V){return he.H.useContext(V)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(V,le){return he.H.useDeferredValue(V,le)},Ue.useEffect=function(V,le,ye){var ee=he.H;if(typeof ye=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(V,le)},Ue.useId=function(){return he.H.useId()},Ue.useImperativeHandle=function(V,le,ye){return he.H.useImperativeHandle(V,le,ye)},Ue.useInsertionEffect=function(V,le){return he.H.useInsertionEffect(V,le)},Ue.useLayoutEffect=function(V,le){return he.H.useLayoutEffect(V,le)},Ue.useMemo=function(V,le){return he.H.useMemo(V,le)},Ue.useOptimistic=function(V,le){return he.H.useOptimistic(V,le)},Ue.useReducer=function(V,le,ye){return he.H.useReducer(V,le,ye)},Ue.useRef=function(V){return he.H.useRef(V)},Ue.useState=function(V){return he.H.useState(V)},Ue.useSyncExternalStore=function(V,le,ye){return he.H.useSyncExternalStore(V,le,ye)},Ue.useTransition=function(){return he.H.useTransition()},Ue.version="19.1.1",Ue}var mw;function Dg(){return mw||(mw=1,Rp.exports=aA()),Rp.exports}var D=Dg();const $n=sA(D);var Ip={exports:{}},Gc={},kp={exports:{}},Dp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pw;function oA(){return pw||(pw=1,(function(t){function e(q,re){var ge=q.length;q.push(re);e:for(;0<ge;){var Be=ge-1>>>1,V=q[Be];if(0<o(V,re))q[Be]=re,q[ge]=V,ge=Be;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var re=q[0],ge=q.pop();if(ge!==re){q[0]=ge;e:for(var Be=0,V=q.length,le=V>>>1;Be<le;){var ye=2*(Be+1)-1,ee=q[ye],oe=ye+1,pe=q[oe];if(0>o(ee,ge))oe<V&&0>o(pe,ee)?(q[Be]=pe,q[oe]=ge,Be=oe):(q[Be]=ee,q[ye]=ge,Be=ye);else if(oe<V&&0>o(pe,ge))q[Be]=pe,q[oe]=ge,Be=oe;else break e}}return re}function o(q,re){var ge=q.sortIndex-re.sortIndex;return ge!==0?ge:q.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();t.unstable_now=function(){return h.now()-p}}var g=[],y=[],v=1,_=null,T=3,R=!1,U=!1,$=!1,I=!1,Q=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function ce(q){for(var re=n(y);re!==null;){if(re.callback===null)r(y);else if(re.startTime<=q)r(y),re.sortIndex=re.expirationTime,e(g,re);else break;re=n(y)}}function he(q){if($=!1,ce(q),!U)if(n(g)!==null)U=!0,ue||(ue=!0,M());else{var re=n(y);re!==null&&Le(he,re.startTime-q)}}var ue=!1,k=-1,N=5,C=-1;function L(){return I?!0:!(t.unstable_now()-C<N)}function O(){if(I=!1,ue){var q=t.unstable_now();C=q;var re=!0;try{e:{U=!1,$&&($=!1,F(k),k=-1),R=!0;var ge=T;try{t:{for(ce(q),_=n(g);_!==null&&!(_.expirationTime>q&&L());){var Be=_.callback;if(typeof Be=="function"){_.callback=null,T=_.priorityLevel;var V=Be(_.expirationTime<=q);if(q=t.unstable_now(),typeof V=="function"){_.callback=V,ce(q),re=!0;break t}_===n(g)&&r(g),ce(q)}else r(g);_=n(g)}if(_!==null)re=!0;else{var le=n(y);le!==null&&Le(he,le.startTime-q),re=!1}}break e}finally{_=null,T=ge,R=!1}re=void 0}}finally{re?M():ue=!1}}}var M;if(typeof z=="function")M=function(){z(O)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,Ne=S.port2;S.port1.onmessage=O,M=function(){Ne.postMessage(null)}}else M=function(){Q(O,0)};function Le(q,re){k=Q(function(){q(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(q){switch(T){case 1:case 2:case 3:var re=3;break;default:re=T}var ge=T;T=re;try{return q()}finally{T=ge}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(q,re){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ge=T;T=q;try{return re()}finally{T=ge}},t.unstable_scheduleCallback=function(q,re,ge){var Be=t.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Be+ge:Be):ge=Be,q){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ge+V,q={id:v++,callback:re,priorityLevel:q,startTime:ge,expirationTime:V,sortIndex:-1},ge>Be?(q.sortIndex=ge,e(y,q),n(g)===null&&q===n(y)&&($?(F(k),k=-1):$=!0,Le(he,ge-Be))):(q.sortIndex=V,e(g,q),U||R||(U=!0,ue||(ue=!0,M()))),q},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(q){var re=T;return function(){var ge=T;T=re;try{return q.apply(this,arguments)}finally{T=ge}}}})(Dp)),Dp}var gw;function lA(){return gw||(gw=1,kp.exports=oA()),kp.exports}var Pp={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yw;function cA(){if(yw)return bn;yw=1;var t=Dg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:g,containerInfo:y,implementation:v}}var h=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,bn.createPortal=function(g,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,v)},bn.flushSync=function(g){var y=h.T,v=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=y,r.p=v,r.d.f()}},bn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},bn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},bn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var v=y.as,_=p(v,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,R=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:R}):v==="script"&&r.d.X(g,{crossOrigin:_,integrity:T,fetchPriority:R,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},bn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=p(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},bn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,_=p(v,y.crossOrigin);r.d.L(g,v,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},bn.preloadModule=function(g,y){if(typeof g=="string")if(y){var v=p(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},bn.requestFormReset=function(g){r.d.r(g)},bn.unstable_batchedUpdates=function(g,y){return g(y)},bn.useFormState=function(g,y,v){return h.H.useFormState(g,y,v)},bn.useFormStatus=function(){return h.H.useHostTransitionStatus()},bn.version="19.1.1",bn}var xw;function uA(){if(xw)return Pp.exports;xw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Pp.exports=cA(),Pp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw;function dA(){if(vw)return Gc;vw=1;var t=lA(),e=Dg(),n=uA();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function c(s){var i=s,a=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(a=i.return),s=i.return;while(s)}return i.tag===3?a:null}function h(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function p(s){if(c(s)!==s)throw Error(r(188))}function g(s){var i=s.alternate;if(!i){if(i=c(s),i===null)throw Error(r(188));return i!==s?null:s}for(var a=s,u=i;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return p(f),s;if(m===u)return p(f),i;m=m.sibling}throw Error(r(188))}if(a.return!==u.return)a=f,u=m;else{for(var b=!1,E=f.child;E;){if(E===a){b=!0,a=f,u=m;break}if(E===u){b=!0,u=f,a=m;break}E=E.sibling}if(!b){for(E=m.child;E;){if(E===a){b=!0,a=m,u=f;break}if(E===u){b=!0,u=m,a=f;break}E=E.sibling}if(!b)throw Error(r(189))}}if(a.alternate!==u)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?s:i}function y(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=y(s),i!==null)return i;s=s.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),z=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function M(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var S=Symbol.for("react.client.reference");function Ne(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===S?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case I:return"Profiler";case $:return"StrictMode";case he:return"Suspense";case ue:return"SuspenseList";case C:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case R:return"Portal";case z:return(s.displayName||"Context")+".Provider";case F:return(s._context.displayName||"Context")+".Consumer";case ce:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case k:return i=s.displayName||null,i!==null?i:Ne(s.type)||"Memo";case N:i=s._payload,s=s._init;try{return Ne(s(i))}catch{}}return null}var Le=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Be=[],V=-1;function le(s){return{current:s}}function ye(s){0>V||(s.current=Be[V],Be[V]=null,V--)}function ee(s,i){V++,Be[V]=s.current,s.current=i}var oe=le(null),pe=le(null),fe=le(null),Ie=le(null);function tt(s,i){switch(ee(fe,i),ee(pe,s),ee(oe,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?Uv(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=Uv(i),s=Bv(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ye(oe),ee(oe,s)}function Kn(){ye(oe),ye(pe),ye(fe)}function ua(s){s.memoizedState!==null&&ee(Ie,s);var i=oe.current,a=Bv(i,s.type);i!==a&&(ee(pe,s),ee(oe,a))}function ii(s){pe.current===s&&(ye(oe),ye(pe)),Ie.current===s&&(ye(Ie),Bc._currentValue=ge)}var ai=Object.prototype.hasOwnProperty,_r=t.unstable_scheduleCallback,oi=t.unstable_cancelCallback,_o=t.unstable_shouldYield,da=t.unstable_requestPaint,yn=t.unstable_now,ha=t.unstable_getCurrentPriorityLevel,It=t.unstable_ImmediatePriority,kt=t.unstable_UserBlockingPriority,ls=t.unstable_NormalPriority,We=t.unstable_LowPriority,fa=t.unstable_IdlePriority,Hl=t.log,Er=t.unstable_setDisableYieldValue,Gs=null,qt=null;function xn(s){if(typeof Hl=="function"&&Er(s),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Gs,s)}catch{}}var Wt=Math.clz32?Math.clz32:Mn,ma=Math.log,Nr=Math.LN2;function Mn(s){return s>>>=0,s===0?32:31-(ma(s)/Nr|0)|0}var jn=256,Yn=4194304;function Dt(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ze(s,i,a){var u=s.pendingLanes;if(u===0)return 0;var f=0,m=s.suspendedLanes,b=s.pingedLanes;s=s.warmLanes;var E=u&134217727;return E!==0?(u=E&~m,u!==0?f=Dt(u):(b&=E,b!==0?f=Dt(b):a||(a=E&~s,a!==0&&(f=Dt(a))))):(E=u&~m,E!==0?f=Dt(E):b!==0?f=Dt(b):a||(a=u&~s,a!==0&&(f=Dt(a)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:f}function Ns(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function Tr(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function li(){var s=jn;return jn<<=1,(jn&4194048)===0&&(jn=256),s}function Ts(){var s=Yn;return Yn<<=1,(Yn&62914560)===0&&(Yn=4194304),s}function Ks(s){for(var i=[],a=0;31>a;a++)i.push(s);return i}function j(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function de(s,i,a,u,f,m){var b=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var E=s.entanglements,P=s.expirationTimes,Y=s.hiddenUpdates;for(a=b&~a;0<a;){var te=31-Wt(a),ie=1<<te;E[te]=0,P[te]=-1;var X=Y[te];if(X!==null)for(Y[te]=null,te=0;te<X.length;te++){var W=X[te];W!==null&&(W.lane&=-536870913)}a&=~ie}u!==0&&we(s,u,0),m!==0&&f===0&&s.tag!==0&&(s.suspendedLanes|=m&~(b&~i))}function we(s,i,a){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-Wt(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|a&4194090}function Ve(s,i){var a=s.entangledLanes|=i;for(s=s.entanglements;a;){var u=31-Wt(a),f=1<<u;f&i|s[u]&i&&(s[u]|=i),a&=~f}}function bt(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function _t(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function it(){var s=re.p;return s!==0?s:(s=window.event,s===void 0?32:iw(s.type))}function Ht(s,i){var a=re.p;try{return re.p=s,i()}finally{re.p=a}}var Zt=Math.random().toString(36).slice(2),Pt="__reactFiber$"+Zt,un="__reactProps$"+Zt,Ar="__reactContainer$"+Zt,pa="__reactEvents$"+Zt,ga="__reactListeners$"+Zt,Of="__reactHandles$"+Zt,As="__reactResources$"+Zt,ci="__reactMarker$"+Zt;function Eo(s){delete s[Pt],delete s[un],delete s[pa],delete s[ga],delete s[Of]}function Ys(s){var i=s[Pt];if(i)return i;for(var a=s.parentNode;a;){if(i=a[Ar]||a[Pt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(s=Hv(s);s!==null;){if(a=s[Pt])return a;s=Hv(s)}return i}s=a,a=s.parentNode}return null}function Qs(s){if(s=s[Pt]||s[Ar]){var i=s.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return s}return null}function ui(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function di(s){var i=s[As];return i||(i=s[As]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ot(s){s[ci]=!0}var Lu=new Set,ya={};function Xs(s,i){Ws(s,i),Ws(s+"Capture",i)}function Ws(s,i){for(ya[s]=i,s=0;s<i.length;s++)Lu.add(i[s])}var xa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zs={},No={};function Mf(s){return ai.call(No,s)?!0:ai.call(Zs,s)?!1:xa.test(s)?No[s]=!0:(Zs[s]=!0,!1)}function va(s,i,a){if(Mf(i))if(a===null)s.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+a)}}function wa(s,i,a){if(a===null)s.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+a)}}function cs(s,i,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(i,a,""+u)}}var ba,To;function jr(s){if(ba===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ba=i&&i[1]||"",To=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ba+s+To}var Ao=!1;function jo(s,i){if(!s||Ao)return"";Ao=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(W){var X=W}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(W){X=W}s.call(ie.prototype)}}else{try{throw Error()}catch(W){X=W}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),b=m[0],E=m[1];if(b&&E){var P=b.split(`
`),Y=E.split(`
`);for(f=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(u===P.length||f===Y.length)for(u=P.length-1,f=Y.length-1;1<=u&&0<=f&&P[u]!==Y[f];)f--;for(;1<=u&&0<=f;u--,f--)if(P[u]!==Y[f]){if(u!==1||f!==1)do if(u--,f--,0>f||P[u]!==Y[f]){var te=`
`+P[u].replace(" at new "," at ");return s.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",s.displayName)),te}while(1<=u&&0<=f);break}}}finally{Ao=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?jr(a):""}function Lf(s){switch(s.tag){case 26:case 27:case 5:return jr(s.type);case 16:return jr("Lazy");case 13:return jr("Suspense");case 19:return jr("SuspenseList");case 0:case 15:return jo(s.type,!1);case 11:return jo(s.type.render,!1);case 1:return jo(s.type,!0);case 31:return jr("Activity");default:return""}}function js(s){try{var i="";do i+=Lf(s),s=s.return;while(s);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Tt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function hi(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function _a(s){var i=hi(s)?"checked":"value",a=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),u=""+s[i];if(!s.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return f.call(this)},set:function(b){u=""+b,m.call(this,b)}}),Object.defineProperty(s,i,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function fi(s){s._valueTracker||(s._valueTracker=_a(s))}function ut(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return s&&(u=hi(s)?s.checked?"true":"false":s.value),s=u,s!==a?(i.setValue(s),!0):!1}function Sr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ea=/[\n"\\]/g;function sn(s){return s.replace(Ea,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function $l(s,i,a,u,f,m,b,E){s.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?s.type=b:s.removeAttribute("type"),i!=null?b==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+Tt(i)):s.value!==""+Tt(i)&&(s.value=""+Tt(i)):b!=="submit"&&b!=="reset"||s.removeAttribute("value"),i!=null?Kl(s,b,Tt(i)):a!=null?Kl(s,b,Tt(a)):u!=null&&s.removeAttribute("value"),f==null&&m!=null&&(s.defaultChecked=!!m),f!=null&&(s.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.name=""+Tt(E):s.removeAttribute("name")}function Gl(s,i,a,u,f,m,b,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(s.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;a=a!=null?""+Tt(a):"",i=i!=null?""+Tt(i):a,E||i===s.value||(s.value=i),s.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=E?s.checked:!!u,s.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.name=b)}function Kl(s,i,a){i==="number"&&Sr(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function mi(s,i,a,u){if(s=s.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<s.length;a++)f=i.hasOwnProperty("$"+s[a].value),s[a].selected!==f&&(s[a].selected=f),f&&u&&(s[a].defaultSelected=!0)}else{for(a=""+Tt(a),i=null,f=0;f<s.length;f++){if(s[f].value===a){s[f].selected=!0,u&&(s[f].defaultSelected=!0);return}i!==null||s[f].disabled||(i=s[f])}i!==null&&(i.selected=!0)}}function Vu(s,i,a){if(i!=null&&(i=""+Tt(i),i!==s.value&&(s.value=i),a==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=a!=null?""+Tt(a):""}function Uu(s,i,a,u){if(i==null){if(u!=null){if(a!=null)throw Error(r(92));if(Le(u)){if(1<u.length)throw Error(r(93));u=u[0]}a=u}a==null&&(a=""),i=a}a=Tt(i),s.defaultValue=a,u=s.textContent,u===a&&u!==""&&u!==null&&(s.value=u)}function us(s,i){if(i){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=i;return}}s.textContent=i}var Cr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yl(s,i,a){var u=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,a):typeof a!="number"||a===0||Cr.has(i)?i==="float"?s.cssFloat=a:s[i]=(""+a).trim():s[i]=a+"px"}function Ql(s,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&a[f]!==u&&Yl(s,f,u)}else for(var m in i)i.hasOwnProperty(m)&&Yl(s,m,i[m])}function So(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ss(s){return zu.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Xl=null;function Wl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var pi=null,Sn=null;function Fu(s){var i=Qs(s);if(i&&(s=i.stateNode)){var a=s[un]||null;e:switch(s=i.stateNode,i.type){case"input":if($l(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+sn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==s&&u.form===s.form){var f=u[un]||null;if(!f)throw Error(r(90));$l(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)u=a[i],u.form===s.form&&ut(u)}break e;case"textarea":Vu(s,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&mi(s,!!a.multiple,i,!1)}}}var Na=!1;function Ta(s,i,a){if(Na)return s(i,a);Na=!0;try{var u=s(i);return u}finally{if(Na=!1,(pi!==null||Sn!==null)&&(Id(),pi&&(i=pi,s=Sn,Sn=pi=null,Fu(i),s)))for(i=0;i<s.length;i++)Fu(s[i])}}function gi(s,i){var a=s.stateNode;if(a===null)return null;var u=a[un]||null;if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rr=!1;if(Cn)try{var yi={};Object.defineProperty(yi,"passive",{get:function(){Rr=!0}}),window.addEventListener("test",yi,yi),window.removeEventListener("test",yi,yi)}catch{Rr=!1}var ds=null,pt=null,Co=null;function qu(){if(Co)return Co;var s,i=pt,a=i.length,u,f="value"in ds?ds.value:ds.textContent,m=f.length;for(s=0;s<a&&i[s]===f[s];s++);var b=a-s;for(u=1;u<=b&&i[a-u]===f[m-u];u++);return Co=f.slice(s,1<u?1-u:void 0)}function Aa(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function ja(){return!0}function Zl(){return!1}function Jt(s){function i(a,u,f,m,b){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var E in s)s.hasOwnProperty(E)&&(a=s[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ja:Zl,this.isPropagationStopped=Zl,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ja)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ja)},persist:function(){},isPersistent:ja}),i}var vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sa=Jt(vn),Ca=v({},vn,{view:0,detail:0}),Ra=Jt(Ca),Ro,Ia,Js,ka=v({},Ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Do,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Js&&(Js&&s.type==="mousemove"?(Ro=s.screenX-Js.screenX,Ia=s.screenY-Js.screenY):Ia=Ro=0,Js=s),Ro)},movementY:function(s){return"movementY"in s?s.movementY:Ia}}),Da=Jt(ka),Vf=v({},ka,{dataTransfer:0}),Hu=Jt(Vf),Pa=v({},Ca,{relatedTarget:0}),Io=Jt(Pa),$u=v({},vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Jl=Jt($u),ec=v({},vn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Gu=Jt(ec),ko=v({},vn,{data:0}),tc=Jt(ko),Ku={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ir={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qu(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Yu[s])?!!i[s]:!1}function Do(){return Qu}var Xu=v({},Ca,{key:function(s){if(s.key){var i=Ku[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Aa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ir[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Do,charCode:function(s){return s.type==="keypress"?Aa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Aa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Po=Jt(Xu),Rn=v({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=Jt(Rn),Wu=v({},Ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Do}),xi=Jt(Wu),d=v({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=Jt(d),w=v({},ka,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),A=Jt(w),K=v({},vn,{newState:0,oldState:0}),Z=Jt(K),me=[9,13,27,32],Oe=Cn&&"CompositionEvent"in window,vt=null;Cn&&"documentMode"in document&&(vt=document.documentMode);var at=Cn&&"TextEvent"in window&&!vt,Mt=Cn&&(!Oe||vt&&8<vt&&11>=vt),Qn=" ",er=!1;function Cs(s,i){switch(s){case"keyup":return me.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rs(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Is=!1;function sc(s,i){switch(s){case"compositionend":return Rs(i);case"keypress":return i.which!==32?null:(er=!0,Qn);case"textInput":return s=i.data,s===Qn&&er?null:s;default:return null}}function RN(s,i){if(Is)return s==="compositionend"||!Oe&&Cs(s,i)?(s=qu(),Co=pt=ds=null,Is=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Mt&&i.locale!=="ko"?null:i.data;default:return null}}var IN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J0(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!IN[s.type]:i==="textarea"}function ey(s,i,a,u){pi?Sn?Sn.push(u):Sn=[u]:pi=u,i=Ld(i,"onChange"),0<i.length&&(a=new Sa("onChange","change",null,a,u),s.push({event:a,listeners:i}))}var rc=null,ic=null;function kN(s){Pv(s,0)}function Zu(s){var i=ui(s);if(ut(i))return s}function ty(s,i){if(s==="change")return i}var ny=!1;if(Cn){var Uf;if(Cn){var Bf="oninput"in document;if(!Bf){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),Bf=typeof sy.oninput=="function"}Uf=Bf}else Uf=!1;ny=Uf&&(!document.documentMode||9<document.documentMode)}function ry(){rc&&(rc.detachEvent("onpropertychange",iy),ic=rc=null)}function iy(s){if(s.propertyName==="value"&&Zu(ic)){var i=[];ey(i,ic,s,Wl(s)),Ta(kN,i)}}function DN(s,i,a){s==="focusin"?(ry(),rc=i,ic=a,rc.attachEvent("onpropertychange",iy)):s==="focusout"&&ry()}function PN(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Zu(ic)}function ON(s,i){if(s==="click")return Zu(i)}function MN(s,i){if(s==="input"||s==="change")return Zu(i)}function LN(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Xn=typeof Object.is=="function"?Object.is:LN;function ac(s,i){if(Xn(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var a=Object.keys(s),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!ai.call(i,f)||!Xn(s[f],i[f]))return!1}return!0}function ay(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function oy(s,i){var a=ay(s);s=0;for(var u;a;){if(a.nodeType===3){if(u=s+a.textContent.length,s<=i&&u>=i)return{node:a,offset:i-s};s=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ay(a)}}function ly(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?ly(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function cy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=Sr(s.document);i instanceof s.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)s=i.contentWindow;else break;i=Sr(s.document)}return i}function zf(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var VN=Cn&&"documentMode"in document&&11>=document.documentMode,Oo=null,Ff=null,oc=null,qf=!1;function uy(s,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;qf||Oo==null||Oo!==Sr(u)||(u=Oo,"selectionStart"in u&&zf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),oc&&ac(oc,u)||(oc=u,u=Ld(Ff,"onSelect"),0<u.length&&(i=new Sa("onSelect","select",null,i,a),s.push({event:i,listeners:u}),i.target=Oo)))}function Oa(s,i){var a={};return a[s.toLowerCase()]=i.toLowerCase(),a["Webkit"+s]="webkit"+i,a["Moz"+s]="moz"+i,a}var Mo={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionrun:Oa("Transition","TransitionRun"),transitionstart:Oa("Transition","TransitionStart"),transitioncancel:Oa("Transition","TransitionCancel"),transitionend:Oa("Transition","TransitionEnd")},Hf={},dy={};Cn&&(dy=document.createElement("div").style,"AnimationEvent"in window||(delete Mo.animationend.animation,delete Mo.animationiteration.animation,delete Mo.animationstart.animation),"TransitionEvent"in window||delete Mo.transitionend.transition);function Ma(s){if(Hf[s])return Hf[s];if(!Mo[s])return s;var i=Mo[s],a;for(a in i)if(i.hasOwnProperty(a)&&a in dy)return Hf[s]=i[a];return s}var hy=Ma("animationend"),fy=Ma("animationiteration"),my=Ma("animationstart"),UN=Ma("transitionrun"),BN=Ma("transitionstart"),zN=Ma("transitioncancel"),py=Ma("transitionend"),gy=new Map,$f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$f.push("scrollEnd");function ks(s,i){gy.set(s,i),Xs(i,[s])}var yy=new WeakMap;function hs(s,i){if(typeof s=="object"&&s!==null){var a=yy.get(s);return a!==void 0?a:(i={value:s,source:i,stack:js(i)},yy.set(s,i),i)}return{value:s,source:i,stack:js(i)}}var fs=[],Lo=0,Gf=0;function Ju(){for(var s=Lo,i=Gf=Lo=0;i<s;){var a=fs[i];fs[i++]=null;var u=fs[i];fs[i++]=null;var f=fs[i];fs[i++]=null;var m=fs[i];if(fs[i++]=null,u!==null&&f!==null){var b=u.pending;b===null?f.next=f:(f.next=b.next,b.next=f),u.pending=f}m!==0&&xy(a,f,m)}}function ed(s,i,a,u){fs[Lo++]=s,fs[Lo++]=i,fs[Lo++]=a,fs[Lo++]=u,Gf|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Kf(s,i,a,u){return ed(s,i,a,u),td(s)}function Vo(s,i){return ed(s,null,null,i),td(s)}function xy(s,i,a){s.lanes|=a;var u=s.alternate;u!==null&&(u.lanes|=a);for(var f=!1,m=s.return;m!==null;)m.childLanes|=a,u=m.alternate,u!==null&&(u.childLanes|=a),m.tag===22&&(s=m.stateNode,s===null||s._visibility&1||(f=!0)),s=m,m=m.return;return s.tag===3?(m=s.stateNode,f&&i!==null&&(f=31-Wt(a),s=m.hiddenUpdates,u=s[f],u===null?s[f]=[i]:u.push(i),i.lane=a|536870912),m):null}function td(s){if(50<kc)throw kc=0,Jm=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Uo={};function FN(s,i,a,u){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(s,i,a,u){return new FN(s,i,a,u)}function Yf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function kr(s,i){var a=s.alternate;return a===null?(a=Wn(s.tag,i,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=i,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,i=s.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function vy(s,i){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,i=a.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function nd(s,i,a,u,f,m){var b=0;if(u=s,typeof s=="function")Yf(s)&&(b=1);else if(typeof s=="string")b=HT(s,a,oe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case C:return s=Wn(31,a,i,f),s.elementType=C,s.lanes=m,s;case U:return La(a.children,f,m,i);case $:b=8,f|=24;break;case I:return s=Wn(12,a,i,f|2),s.elementType=I,s.lanes=m,s;case he:return s=Wn(13,a,i,f),s.elementType=he,s.lanes=m,s;case ue:return s=Wn(19,a,i,f),s.elementType=ue,s.lanes=m,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Q:case z:b=10;break e;case F:b=9;break e;case ce:b=11;break e;case k:b=14;break e;case N:b=16,u=null;break e}b=29,a=Error(r(130,s===null?"null":typeof s,"")),u=null}return i=Wn(b,a,i,f),i.elementType=s,i.type=u,i.lanes=m,i}function La(s,i,a,u){return s=Wn(7,s,u,i),s.lanes=a,s}function Qf(s,i,a){return s=Wn(6,s,null,i),s.lanes=a,s}function Xf(s,i,a){return i=Wn(4,s.children!==null?s.children:[],s.key,i),i.lanes=a,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var Bo=[],zo=0,sd=null,rd=0,ms=[],ps=0,Va=null,Dr=1,Pr="";function Ua(s,i){Bo[zo++]=rd,Bo[zo++]=sd,sd=s,rd=i}function wy(s,i,a){ms[ps++]=Dr,ms[ps++]=Pr,ms[ps++]=Va,Va=s;var u=Dr;s=Pr;var f=32-Wt(u)-1;u&=~(1<<f),a+=1;var m=32-Wt(i)+f;if(30<m){var b=f-f%5;m=(u&(1<<b)-1).toString(32),u>>=b,f-=b,Dr=1<<32-Wt(i)+f|a<<f|u,Pr=m+s}else Dr=1<<m|a<<f|u,Pr=s}function Wf(s){s.return!==null&&(Ua(s,1),wy(s,1,0))}function Zf(s){for(;s===sd;)sd=Bo[--zo],Bo[zo]=null,rd=Bo[--zo],Bo[zo]=null;for(;s===Va;)Va=ms[--ps],ms[ps]=null,Pr=ms[--ps],ms[ps]=null,Dr=ms[--ps],ms[ps]=null}var In=null,St=null,nt=!1,Ba=null,tr=!1,Jf=Error(r(519));function za(s){var i=Error(r(418,""));throw uc(hs(i,s)),Jf}function by(s){var i=s.stateNode,a=s.type,u=s.memoizedProps;switch(i[Pt]=s,i[un]=u,a){case"dialog":He("cancel",i),He("close",i);break;case"iframe":case"object":case"embed":He("load",i);break;case"video":case"audio":for(a=0;a<Pc.length;a++)He(Pc[a],i);break;case"source":He("error",i);break;case"img":case"image":case"link":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"input":He("invalid",i),Gl(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),fi(i);break;case"select":He("invalid",i);break;case"textarea":He("invalid",i),Uu(i,u.value,u.defaultValue,u.children),fi(i)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||u.suppressHydrationWarning===!0||Vv(i.textContent,a)?(u.popover!=null&&(He("beforetoggle",i),He("toggle",i)),u.onScroll!=null&&He("scroll",i),u.onScrollEnd!=null&&He("scrollend",i),u.onClick!=null&&(i.onclick=Vd),i=!0):i=!1,i||za(s)}function _y(s){for(In=s.return;In;)switch(In.tag){case 5:case 13:tr=!1;return;case 27:case 3:tr=!0;return;default:In=In.return}}function lc(s){if(s!==In)return!1;if(!nt)return _y(s),nt=!0,!1;var i=s.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||pp(s.type,s.memoizedProps)),a=!a),a&&St&&za(s),_y(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8)if(a=s.data,a==="/$"){if(i===0){St=Ps(s.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;s=s.nextSibling}St=null}}else i===27?(i=St,Pi(s.type)?(s=vp,vp=null,St=s):St=i):St=In?Ps(s.stateNode.nextSibling):null;return!0}function cc(){St=In=null,nt=!1}function Ey(){var s=Ba;return s!==null&&(Un===null?Un=s:Un.push.apply(Un,s),Ba=null),s}function uc(s){Ba===null?Ba=[s]:Ba.push(s)}var em=le(null),Fa=null,Or=null;function vi(s,i,a){ee(em,i._currentValue),i._currentValue=a}function Mr(s){s._currentValue=em.current,ye(em)}function tm(s,i,a){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===a)break;s=s.return}}function nm(s,i,a,u){var f=s.child;for(f!==null&&(f.return=s);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var P=0;P<i.length;P++)if(E.context===i[P]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),tm(m.return,a,s),u||(b=null);break e}m=E.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(r(341));b.lanes|=a,m=b.alternate,m!==null&&(m.lanes|=a),tm(b,a,s),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===s){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function dc(s,i,a,u){s=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var E=f.type;Xn(f.pendingProps.value,b.value)||(s!==null?s.push(E):s=[E])}}else if(f===Ie.current){if(b=f.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(s!==null?s.push(Bc):s=[Bc])}f=f.return}s!==null&&nm(i,s,a,u),i.flags|=262144}function id(s){for(s=s.firstContext;s!==null;){if(!Xn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function qa(s){Fa=s,Or=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function wn(s){return Ny(Fa,s)}function ad(s,i){return Fa===null&&qa(s),Ny(s,i)}function Ny(s,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Or===null){if(s===null)throw Error(r(308));Or=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else Or=Or.next=i;return a}var qN=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(a,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(a){return a()})}},HN=t.unstable_scheduleCallback,$N=t.unstable_NormalPriority,en={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sm(){return{controller:new qN,data:new Map,refCount:0}}function hc(s){s.refCount--,s.refCount===0&&HN($N,function(){s.controller.abort()})}var fc=null,rm=0,Fo=0,qo=null;function GN(s,i){if(fc===null){var a=fc=[];rm=0,Fo=ap(),qo={status:"pending",value:void 0,then:function(u){a.push(u)}}}return rm++,i.then(Ty,Ty),i}function Ty(){if(--rm===0&&fc!==null){qo!==null&&(qo.status="fulfilled");var s=fc;fc=null,Fo=0,qo=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function KN(s,i){var a=[],u={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),u}var Ay=q.S;q.S=function(s,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&GN(s,i),Ay!==null&&Ay(s,i)};var Ha=le(null);function im(){var s=Ha.current;return s!==null?s:gt.pooledCache}function od(s,i){i===null?ee(Ha,Ha.current):ee(Ha,i.pool)}function jy(){var s=im();return s===null?null:{parent:en._currentValue,pool:s}}var mc=Error(r(460)),Sy=Error(r(474)),ld=Error(r(542)),am={then:function(){}};function Cy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function cd(){}function Ry(s,i,a){switch(a=s[a],a===void 0?s.push(i):a!==i&&(i.then(cd,cd),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,ky(s),s;default:if(typeof i.status=="string")i.then(cd,cd);else{if(s=gt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,ky(s),s}throw pc=i,mc}}var pc=null;function Iy(){if(pc===null)throw Error(r(459));var s=pc;return pc=null,s}function ky(s){if(s===mc||s===ld)throw Error(r(483))}var wi=!1;function om(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lm(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function bi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function _i(s,i,a){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(ot&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=td(s),xy(s,null,a),i}return ed(s,u,i,a),td(s)}function gc(s,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var u=i.lanes;u&=s.pendingLanes,a|=u,i.lanes=a,Ve(s,a)}}function cm(s,i){var a=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,a=a.next}while(a!==null);m===null?f=m=i:m=m.next=i}else f=m=i;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=i:s.next=i,a.lastBaseUpdate=i}var um=!1;function yc(){if(um){var s=qo;if(s!==null)throw s}}function xc(s,i,a,u){um=!1;var f=s.updateQueue;wi=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var P=E,Y=P.next;P.next=null,b===null?m=Y:b.next=Y,b=P;var te=s.alternate;te!==null&&(te=te.updateQueue,E=te.lastBaseUpdate,E!==b&&(E===null?te.firstBaseUpdate=Y:E.next=Y,te.lastBaseUpdate=P))}if(m!==null){var ie=f.baseState;b=0,te=Y=P=null,E=m;do{var X=E.lane&-536870913,W=X!==E.lane;if(W?(Qe&X)===X:(u&X)===X){X!==0&&X===Fo&&(um=!0),te!==null&&(te=te.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ke=s,je=E;X=i;var ft=a;switch(je.tag){case 1:if(ke=je.payload,typeof ke=="function"){ie=ke.call(ft,ie,X);break e}ie=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=je.payload,X=typeof ke=="function"?ke.call(ft,ie,X):ke,X==null)break e;ie=v({},ie,X);break e;case 2:wi=!0}}X=E.callback,X!==null&&(s.flags|=64,W&&(s.flags|=8192),W=f.callbacks,W===null?f.callbacks=[X]:W.push(X))}else W={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},te===null?(Y=te=W,P=ie):te=te.next=W,b|=X;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;W=E,E=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);te===null&&(P=ie),f.baseState=P,f.firstBaseUpdate=Y,f.lastBaseUpdate=te,m===null&&(f.shared.lanes=0),Ri|=b,s.lanes=b,s.memoizedState=ie}}function Dy(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function Py(s,i){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)Dy(a[s],i)}var Ho=le(null),ud=le(0);function Oy(s,i){s=qr,ee(ud,s),ee(Ho,i),qr=s|i.baseLanes}function dm(){ee(ud,qr),ee(Ho,Ho.current)}function hm(){qr=ud.current,ye(Ho),ye(ud)}var Ei=0,ze=null,dt=null,$t=null,dd=!1,$o=!1,$a=!1,hd=0,vc=0,Go=null,YN=0;function Lt(){throw Error(r(321))}function fm(s,i){if(i===null)return!1;for(var a=0;a<i.length&&a<s.length;a++)if(!Xn(s[a],i[a]))return!1;return!0}function mm(s,i,a,u,f,m){return Ei=m,ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,q.H=s===null||s.memoizedState===null?xx:vx,$a=!1,m=a(u,f),$a=!1,$o&&(m=Ly(i,a,u,f)),My(s),m}function My(s){q.H=xd;var i=dt!==null&&dt.next!==null;if(Ei=0,$t=dt=ze=null,dd=!1,vc=0,Go=null,i)throw Error(r(300));s===null||rn||(s=s.dependencies,s!==null&&id(s)&&(rn=!0))}function Ly(s,i,a,u){ze=s;var f=0;do{if($o&&(Go=null),vc=0,$o=!1,25<=f)throw Error(r(301));if(f+=1,$t=dt=null,s.updateQueue!=null){var m=s.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}q.H=tT,m=i(a,u)}while($o);return m}function QN(){var s=q.H,i=s.useState()[0];return i=typeof i.then=="function"?wc(i):i,s=s.useState()[0],(dt!==null?dt.memoizedState:null)!==s&&(ze.flags|=1024),i}function pm(){var s=hd!==0;return hd=0,s}function gm(s,i,a){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~a}function ym(s){if(dd){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}dd=!1}Ei=0,$t=dt=ze=null,$o=!1,vc=hd=0,Go=null}function Ln(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?ze.memoizedState=$t=s:$t=$t.next=s,$t}function Gt(){if(dt===null){var s=ze.alternate;s=s!==null?s.memoizedState:null}else s=dt.next;var i=$t===null?ze.memoizedState:$t.next;if(i!==null)$t=i,dt=s;else{if(s===null)throw ze.alternate===null?Error(r(467)):Error(r(310));dt=s,s={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},$t===null?ze.memoizedState=$t=s:$t=$t.next=s}return $t}function xm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wc(s){var i=vc;return vc+=1,Go===null&&(Go=[]),s=Ry(Go,s,i),i=ze,($t===null?i.memoizedState:$t.next)===null&&(i=i.alternate,q.H=i===null||i.memoizedState===null?xx:vx),s}function fd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return wc(s);if(s.$$typeof===z)return wn(s)}throw Error(r(438,String(s)))}function vm(s){var i=null,a=ze.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var u=ze.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=xm(),ze.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(s),u=0;u<s;u++)a[u]=L;return i.index++,a}function Lr(s,i){return typeof i=="function"?i(s):i}function md(s){var i=Gt();return wm(i,dt,s)}function wm(s,i,a){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var f=s.baseQueue,m=u.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}i.baseQueue=f=m,u.pending=null}if(m=s.baseState,f===null)s.memoizedState=m;else{i=f.next;var E=b=null,P=null,Y=i,te=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(Qe&ie)===ie:(Ei&ie)===ie){var X=Y.revertLane;if(X===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===Fo&&(te=!0);else if((Ei&X)===X){Y=Y.next,X===Fo&&(te=!0);continue}else ie={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(E=P=ie,b=m):P=P.next=ie,ze.lanes|=X,Ri|=X;ie=Y.action,$a&&a(m,ie),m=Y.hasEagerState?Y.eagerState:a(m,ie)}else X={lane:ie,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(E=P=X,b=m):P=P.next=X,ze.lanes|=ie,Ri|=ie;Y=Y.next}while(Y!==null&&Y!==i);if(P===null?b=m:P.next=E,!Xn(m,s.memoizedState)&&(rn=!0,te&&(a=qo,a!==null)))throw a;s.memoizedState=m,s.baseState=b,s.baseQueue=P,u.lastRenderedState=m}return f===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function bm(s){var i=Gt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=s;var u=a.dispatch,f=a.pending,m=i.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do m=s(m,b.action),b=b.next;while(b!==f);Xn(m,i.memoizedState)||(rn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,u]}function Vy(s,i,a){var u=ze,f=Gt(),m=nt;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=i();var b=!Xn((dt||f).memoizedState,a);b&&(f.memoizedState=a,rn=!0),f=f.queue;var E=zy.bind(null,u,f,s);if(bc(2048,8,E,[s]),f.getSnapshot!==i||b||$t!==null&&$t.memoizedState.tag&1){if(u.flags|=2048,Ko(9,pd(),By.bind(null,u,f,a,i),null),gt===null)throw Error(r(349));m||(Ei&124)!==0||Uy(u,i,a)}return a}function Uy(s,i,a){s.flags|=16384,s={getSnapshot:i,value:a},i=ze.updateQueue,i===null?(i=xm(),ze.updateQueue=i,i.stores=[s]):(a=i.stores,a===null?i.stores=[s]:a.push(s))}function By(s,i,a,u){i.value=a,i.getSnapshot=u,Fy(i)&&qy(s)}function zy(s,i,a){return a(function(){Fy(i)&&qy(s)})}function Fy(s){var i=s.getSnapshot;s=s.value;try{var a=i();return!Xn(s,a)}catch{return!0}}function qy(s){var i=Vo(s,2);i!==null&&ns(i,s,2)}function _m(s){var i=Ln();if(typeof s=="function"){var a=s;if(s=a(),$a){xn(!0);try{a()}finally{xn(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:s},i}function Hy(s,i,a,u){return s.baseState=a,wm(s,dt,typeof u=="function"?u:Lr)}function XN(s,i,a,u,f){if(yd(s))throw Error(r(485));if(s=i.action,s!==null){var m={payload:f,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};q.T!==null?a(!0):m.isTransition=!1,u(m),a=i.pending,a===null?(m.next=i.pending=m,$y(i,m)):(m.next=a.next,i.pending=a.next=m)}}function $y(s,i){var a=i.action,u=i.payload,f=s.state;if(i.isTransition){var m=q.T,b={};q.T=b;try{var E=a(f,u),P=q.S;P!==null&&P(b,E),Gy(s,i,E)}catch(Y){Em(s,i,Y)}finally{q.T=m}}else try{m=a(f,u),Gy(s,i,m)}catch(Y){Em(s,i,Y)}}function Gy(s,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Ky(s,i,u)},function(u){return Em(s,i,u)}):Ky(s,i,a)}function Ky(s,i,a){i.status="fulfilled",i.value=a,Yy(i),s.state=a,i=s.pending,i!==null&&(a=i.next,a===i?s.pending=null:(a=a.next,i.next=a,$y(s,a)))}function Em(s,i,a){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=a,Yy(i),i=i.next;while(i!==u)}s.action=null}function Yy(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function Qy(s,i){return i}function Xy(s,i){if(nt){var a=gt.formState;if(a!==null){e:{var u=ze;if(nt){if(St){t:{for(var f=St,m=tr;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ps(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){St=Ps(f.nextSibling),u=f.data==="F!";break e}}za(u)}u=!1}u&&(i=a[0])}}return a=Ln(),a.memoizedState=a.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qy,lastRenderedState:i},a.queue=u,a=px.bind(null,ze,u),u.dispatch=a,u=_m(!1),m=Sm.bind(null,ze,!1,u.queue),u=Ln(),f={state:i,dispatch:null,action:s,pending:null},u.queue=f,a=XN.bind(null,ze,f,m,a),f.dispatch=a,u.memoizedState=s,[i,a,!1]}function Wy(s){var i=Gt();return Zy(i,dt,s)}function Zy(s,i,a){if(i=wm(s,i,Qy)[0],s=md(Lr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=wc(i)}catch(b){throw b===mc?ld:b}else u=i;i=Gt();var f=i.queue,m=f.dispatch;return a!==i.memoizedState&&(ze.flags|=2048,Ko(9,pd(),WN.bind(null,f,a),null)),[u,m,s]}function WN(s,i){s.action=i}function Jy(s){var i=Gt(),a=dt;if(a!==null)return Zy(i,a,s);Gt(),i=i.memoizedState,a=Gt();var u=a.queue.dispatch;return a.memoizedState=s,[i,u,!1]}function Ko(s,i,a,u){return s={tag:s,create:a,deps:u,inst:i,next:null},i=ze.updateQueue,i===null&&(i=xm(),ze.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=s.next=s:(u=a.next,a.next=s,s.next=u,i.lastEffect=s),s}function pd(){return{destroy:void 0,resource:void 0}}function ex(){return Gt().memoizedState}function gd(s,i,a,u){var f=Ln();u=u===void 0?null:u,ze.flags|=s,f.memoizedState=Ko(1|i,pd(),a,u)}function bc(s,i,a,u){var f=Gt();u=u===void 0?null:u;var m=f.memoizedState.inst;dt!==null&&u!==null&&fm(u,dt.memoizedState.deps)?f.memoizedState=Ko(i,m,a,u):(ze.flags|=s,f.memoizedState=Ko(1|i,m,a,u))}function tx(s,i){gd(8390656,8,s,i)}function nx(s,i){bc(2048,8,s,i)}function sx(s,i){return bc(4,2,s,i)}function rx(s,i){return bc(4,4,s,i)}function ix(s,i){if(typeof i=="function"){s=s();var a=i(s);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function ax(s,i,a){a=a!=null?a.concat([s]):null,bc(4,4,ix.bind(null,i,s),a)}function Nm(){}function ox(s,i){var a=Gt();i=i===void 0?null:i;var u=a.memoizedState;return i!==null&&fm(i,u[1])?u[0]:(a.memoizedState=[s,i],s)}function lx(s,i){var a=Gt();i=i===void 0?null:i;var u=a.memoizedState;if(i!==null&&fm(i,u[1]))return u[0];if(u=s(),$a){xn(!0);try{s()}finally{xn(!1)}}return a.memoizedState=[u,i],u}function Tm(s,i,a){return a===void 0||(Ei&1073741824)!==0?s.memoizedState=i:(s.memoizedState=a,s=dv(),ze.lanes|=s,Ri|=s,a)}function cx(s,i,a,u){return Xn(a,i)?a:Ho.current!==null?(s=Tm(s,a,u),Xn(s,i)||(rn=!0),s):(Ei&42)===0?(rn=!0,s.memoizedState=a):(s=dv(),ze.lanes|=s,Ri|=s,i)}function ux(s,i,a,u,f){var m=re.p;re.p=m!==0&&8>m?m:8;var b=q.T,E={};q.T=E,Sm(s,!1,i,a);try{var P=f(),Y=q.S;if(Y!==null&&Y(E,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var te=KN(P,u);_c(s,i,te,ts(s))}else _c(s,i,u,ts(s))}catch(ie){_c(s,i,{then:function(){},status:"rejected",reason:ie},ts())}finally{re.p=m,q.T=b}}function ZN(){}function Am(s,i,a,u){if(s.tag!==5)throw Error(r(476));var f=dx(s).queue;ux(s,f,i,ge,a===null?ZN:function(){return hx(s),a(u)})}function dx(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:ge},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:a},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function hx(s){var i=dx(s).next.queue;_c(s,i,{},ts())}function jm(){return wn(Bc)}function fx(){return Gt().memoizedState}function mx(){return Gt().memoizedState}function JN(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var a=ts();s=bi(a);var u=_i(i,s,a);u!==null&&(ns(u,i,a),gc(u,i,a)),i={cache:sm()},s.payload=i;return}i=i.return}}function eT(s,i,a){var u=ts();a={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},yd(s)?gx(i,a):(a=Kf(s,i,a,u),a!==null&&(ns(a,s,u),yx(a,i,u)))}function px(s,i,a){var u=ts();_c(s,i,a,u)}function _c(s,i,a,u){var f={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(yd(s))gx(i,f);else{var m=s.alternate;if(s.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var b=i.lastRenderedState,E=m(b,a);if(f.hasEagerState=!0,f.eagerState=E,Xn(E,b))return ed(s,i,f,0),gt===null&&Ju(),!1}catch{}finally{}if(a=Kf(s,i,f,u),a!==null)return ns(a,s,u),yx(a,i,u),!0}return!1}function Sm(s,i,a,u){if(u={lane:2,revertLane:ap(),action:u,hasEagerState:!1,eagerState:null,next:null},yd(s)){if(i)throw Error(r(479))}else i=Kf(s,a,u,2),i!==null&&ns(i,s,2)}function yd(s){var i=s.alternate;return s===ze||i!==null&&i===ze}function gx(s,i){$o=dd=!0;var a=s.pending;a===null?i.next=i:(i.next=a.next,a.next=i),s.pending=i}function yx(s,i,a){if((a&4194048)!==0){var u=i.lanes;u&=s.pendingLanes,a|=u,i.lanes=a,Ve(s,a)}}var xd={readContext:wn,use:fd,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt,useHostTransitionStatus:Lt,useFormState:Lt,useActionState:Lt,useOptimistic:Lt,useMemoCache:Lt,useCacheRefresh:Lt},xx={readContext:wn,use:fd,useCallback:function(s,i){return Ln().memoizedState=[s,i===void 0?null:i],s},useContext:wn,useEffect:tx,useImperativeHandle:function(s,i,a){a=a!=null?a.concat([s]):null,gd(4194308,4,ix.bind(null,i,s),a)},useLayoutEffect:function(s,i){return gd(4194308,4,s,i)},useInsertionEffect:function(s,i){gd(4,2,s,i)},useMemo:function(s,i){var a=Ln();i=i===void 0?null:i;var u=s();if($a){xn(!0);try{s()}finally{xn(!1)}}return a.memoizedState=[u,i],u},useReducer:function(s,i,a){var u=Ln();if(a!==void 0){var f=a(i);if($a){xn(!0);try{a(i)}finally{xn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:f},u.queue=s,s=s.dispatch=eT.bind(null,ze,s),[u.memoizedState,s]},useRef:function(s){var i=Ln();return s={current:s},i.memoizedState=s},useState:function(s){s=_m(s);var i=s.queue,a=px.bind(null,ze,i);return i.dispatch=a,[s.memoizedState,a]},useDebugValue:Nm,useDeferredValue:function(s,i){var a=Ln();return Tm(a,s,i)},useTransition:function(){var s=_m(!1);return s=ux.bind(null,ze,s.queue,!0,!1),Ln().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,a){var u=ze,f=Ln();if(nt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),gt===null)throw Error(r(349));(Qe&124)!==0||Uy(u,i,a)}f.memoizedState=a;var m={value:a,getSnapshot:i};return f.queue=m,tx(zy.bind(null,u,m,s),[s]),u.flags|=2048,Ko(9,pd(),By.bind(null,u,m,a,i),null),a},useId:function(){var s=Ln(),i=gt.identifierPrefix;if(nt){var a=Pr,u=Dr;a=(u&~(1<<32-Wt(u)-1)).toString(32)+a,i="«"+i+"R"+a,a=hd++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=YN++,i="«"+i+"r"+a.toString(32)+"»";return s.memoizedState=i},useHostTransitionStatus:jm,useFormState:Xy,useActionState:Xy,useOptimistic:function(s){var i=Ln();i.memoizedState=i.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Sm.bind(null,ze,!0,a),a.dispatch=i,[s,i]},useMemoCache:vm,useCacheRefresh:function(){return Ln().memoizedState=JN.bind(null,ze)}},vx={readContext:wn,use:fd,useCallback:ox,useContext:wn,useEffect:nx,useImperativeHandle:ax,useInsertionEffect:sx,useLayoutEffect:rx,useMemo:lx,useReducer:md,useRef:ex,useState:function(){return md(Lr)},useDebugValue:Nm,useDeferredValue:function(s,i){var a=Gt();return cx(a,dt.memoizedState,s,i)},useTransition:function(){var s=md(Lr)[0],i=Gt().memoizedState;return[typeof s=="boolean"?s:wc(s),i]},useSyncExternalStore:Vy,useId:fx,useHostTransitionStatus:jm,useFormState:Wy,useActionState:Wy,useOptimistic:function(s,i){var a=Gt();return Hy(a,dt,s,i)},useMemoCache:vm,useCacheRefresh:mx},tT={readContext:wn,use:fd,useCallback:ox,useContext:wn,useEffect:nx,useImperativeHandle:ax,useInsertionEffect:sx,useLayoutEffect:rx,useMemo:lx,useReducer:bm,useRef:ex,useState:function(){return bm(Lr)},useDebugValue:Nm,useDeferredValue:function(s,i){var a=Gt();return dt===null?Tm(a,s,i):cx(a,dt.memoizedState,s,i)},useTransition:function(){var s=bm(Lr)[0],i=Gt().memoizedState;return[typeof s=="boolean"?s:wc(s),i]},useSyncExternalStore:Vy,useId:fx,useHostTransitionStatus:jm,useFormState:Jy,useActionState:Jy,useOptimistic:function(s,i){var a=Gt();return dt!==null?Hy(a,dt,s,i):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:vm,useCacheRefresh:mx},Yo=null,Ec=0;function vd(s){var i=Ec;return Ec+=1,Yo===null&&(Yo=[]),Ry(Yo,s,i)}function Nc(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function wd(s,i){throw i.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function wx(s){var i=s._init;return i(s._payload)}function bx(s){function i(H,B){if(s){var G=H.deletions;G===null?(H.deletions=[B],H.flags|=16):G.push(B)}}function a(H,B){if(!s)return null;for(;B!==null;)i(H,B),B=B.sibling;return null}function u(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function f(H,B){return H=kr(H,B),H.index=0,H.sibling=null,H}function m(H,B,G){return H.index=G,s?(G=H.alternate,G!==null?(G=G.index,G<B?(H.flags|=67108866,B):G):(H.flags|=67108866,B)):(H.flags|=1048576,B)}function b(H){return s&&H.alternate===null&&(H.flags|=67108866),H}function E(H,B,G,ne){return B===null||B.tag!==6?(B=Qf(G,H.mode,ne),B.return=H,B):(B=f(B,G),B.return=H,B)}function P(H,B,G,ne){var be=G.type;return be===U?te(H,B,G.props.children,ne,G.key):B!==null&&(B.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===N&&wx(be)===B.type)?(B=f(B,G.props),Nc(B,G),B.return=H,B):(B=nd(G.type,G.key,G.props,null,H.mode,ne),Nc(B,G),B.return=H,B)}function Y(H,B,G,ne){return B===null||B.tag!==4||B.stateNode.containerInfo!==G.containerInfo||B.stateNode.implementation!==G.implementation?(B=Xf(G,H.mode,ne),B.return=H,B):(B=f(B,G.children||[]),B.return=H,B)}function te(H,B,G,ne,be){return B===null||B.tag!==7?(B=La(G,H.mode,ne,be),B.return=H,B):(B=f(B,G),B.return=H,B)}function ie(H,B,G){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Qf(""+B,H.mode,G),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case T:return G=nd(B.type,B.key,B.props,null,H.mode,G),Nc(G,B),G.return=H,G;case R:return B=Xf(B,H.mode,G),B.return=H,B;case N:var ne=B._init;return B=ne(B._payload),ie(H,B,G)}if(Le(B)||M(B))return B=La(B,H.mode,G,null),B.return=H,B;if(typeof B.then=="function")return ie(H,vd(B),G);if(B.$$typeof===z)return ie(H,ad(H,B),G);wd(H,B)}return null}function X(H,B,G,ne){var be=B!==null?B.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return be!==null?null:E(H,B,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case T:return G.key===be?P(H,B,G,ne):null;case R:return G.key===be?Y(H,B,G,ne):null;case N:return be=G._init,G=be(G._payload),X(H,B,G,ne)}if(Le(G)||M(G))return be!==null?null:te(H,B,G,ne,null);if(typeof G.then=="function")return X(H,B,vd(G),ne);if(G.$$typeof===z)return X(H,B,ad(H,G),ne);wd(H,G)}return null}function W(H,B,G,ne,be){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return H=H.get(G)||null,E(B,H,""+ne,be);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case T:return H=H.get(ne.key===null?G:ne.key)||null,P(B,H,ne,be);case R:return H=H.get(ne.key===null?G:ne.key)||null,Y(B,H,ne,be);case N:var Fe=ne._init;return ne=Fe(ne._payload),W(H,B,G,ne,be)}if(Le(ne)||M(ne))return H=H.get(G)||null,te(B,H,ne,be,null);if(typeof ne.then=="function")return W(H,B,G,vd(ne),be);if(ne.$$typeof===z)return W(H,B,G,ad(B,ne),be);wd(B,ne)}return null}function ke(H,B,G,ne){for(var be=null,Fe=null,_e=B,Se=B=0,on=null;_e!==null&&Se<G.length;Se++){_e.index>Se?(on=_e,_e=null):on=_e.sibling;var Je=X(H,_e,G[Se],ne);if(Je===null){_e===null&&(_e=on);break}s&&_e&&Je.alternate===null&&i(H,_e),B=m(Je,B,Se),Fe===null?be=Je:Fe.sibling=Je,Fe=Je,_e=on}if(Se===G.length)return a(H,_e),nt&&Ua(H,Se),be;if(_e===null){for(;Se<G.length;Se++)_e=ie(H,G[Se],ne),_e!==null&&(B=m(_e,B,Se),Fe===null?be=_e:Fe.sibling=_e,Fe=_e);return nt&&Ua(H,Se),be}for(_e=u(_e);Se<G.length;Se++)on=W(_e,H,Se,G[Se],ne),on!==null&&(s&&on.alternate!==null&&_e.delete(on.key===null?Se:on.key),B=m(on,B,Se),Fe===null?be=on:Fe.sibling=on,Fe=on);return s&&_e.forEach(function(Ui){return i(H,Ui)}),nt&&Ua(H,Se),be}function je(H,B,G,ne){if(G==null)throw Error(r(151));for(var be=null,Fe=null,_e=B,Se=B=0,on=null,Je=G.next();_e!==null&&!Je.done;Se++,Je=G.next()){_e.index>Se?(on=_e,_e=null):on=_e.sibling;var Ui=X(H,_e,Je.value,ne);if(Ui===null){_e===null&&(_e=on);break}s&&_e&&Ui.alternate===null&&i(H,_e),B=m(Ui,B,Se),Fe===null?be=Ui:Fe.sibling=Ui,Fe=Ui,_e=on}if(Je.done)return a(H,_e),nt&&Ua(H,Se),be;if(_e===null){for(;!Je.done;Se++,Je=G.next())Je=ie(H,Je.value,ne),Je!==null&&(B=m(Je,B,Se),Fe===null?be=Je:Fe.sibling=Je,Fe=Je);return nt&&Ua(H,Se),be}for(_e=u(_e);!Je.done;Se++,Je=G.next())Je=W(_e,H,Se,Je.value,ne),Je!==null&&(s&&Je.alternate!==null&&_e.delete(Je.key===null?Se:Je.key),B=m(Je,B,Se),Fe===null?be=Je:Fe.sibling=Je,Fe=Je);return s&&_e.forEach(function(nA){return i(H,nA)}),nt&&Ua(H,Se),be}function ft(H,B,G,ne){if(typeof G=="object"&&G!==null&&G.type===U&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case T:e:{for(var be=G.key;B!==null;){if(B.key===be){if(be=G.type,be===U){if(B.tag===7){a(H,B.sibling),ne=f(B,G.props.children),ne.return=H,H=ne;break e}}else if(B.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===N&&wx(be)===B.type){a(H,B.sibling),ne=f(B,G.props),Nc(ne,G),ne.return=H,H=ne;break e}a(H,B);break}else i(H,B);B=B.sibling}G.type===U?(ne=La(G.props.children,H.mode,ne,G.key),ne.return=H,H=ne):(ne=nd(G.type,G.key,G.props,null,H.mode,ne),Nc(ne,G),ne.return=H,H=ne)}return b(H);case R:e:{for(be=G.key;B!==null;){if(B.key===be)if(B.tag===4&&B.stateNode.containerInfo===G.containerInfo&&B.stateNode.implementation===G.implementation){a(H,B.sibling),ne=f(B,G.children||[]),ne.return=H,H=ne;break e}else{a(H,B);break}else i(H,B);B=B.sibling}ne=Xf(G,H.mode,ne),ne.return=H,H=ne}return b(H);case N:return be=G._init,G=be(G._payload),ft(H,B,G,ne)}if(Le(G))return ke(H,B,G,ne);if(M(G)){if(be=M(G),typeof be!="function")throw Error(r(150));return G=be.call(G),je(H,B,G,ne)}if(typeof G.then=="function")return ft(H,B,vd(G),ne);if(G.$$typeof===z)return ft(H,B,ad(H,G),ne);wd(H,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,B!==null&&B.tag===6?(a(H,B.sibling),ne=f(B,G),ne.return=H,H=ne):(a(H,B),ne=Qf(G,H.mode,ne),ne.return=H,H=ne),b(H)):a(H,B)}return function(H,B,G,ne){try{Ec=0;var be=ft(H,B,G,ne);return Yo=null,be}catch(_e){if(_e===mc||_e===ld)throw _e;var Fe=Wn(29,_e,null,H.mode);return Fe.lanes=ne,Fe.return=H,Fe}finally{}}}var Qo=bx(!0),_x=bx(!1),gs=le(null),nr=null;function Ni(s){var i=s.alternate;ee(tn,tn.current&1),ee(gs,s),nr===null&&(i===null||Ho.current!==null||i.memoizedState!==null)&&(nr=s)}function Ex(s){if(s.tag===22){if(ee(tn,tn.current),ee(gs,s),nr===null){var i=s.alternate;i!==null&&i.memoizedState!==null&&(nr=s)}}else Ti()}function Ti(){ee(tn,tn.current),ee(gs,gs.current)}function Vr(s){ye(gs),nr===s&&(nr=null),ye(tn)}var tn=le(0);function bd(s){for(var i=s;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||xp(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Cm(s,i,a,u){i=s.memoizedState,a=a(u,i),a=a==null?i:v({},i,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var Rm={enqueueSetState:function(s,i,a){s=s._reactInternals;var u=ts(),f=bi(u);f.payload=i,a!=null&&(f.callback=a),i=_i(s,f,u),i!==null&&(ns(i,s,u),gc(i,s,u))},enqueueReplaceState:function(s,i,a){s=s._reactInternals;var u=ts(),f=bi(u);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=_i(s,f,u),i!==null&&(ns(i,s,u),gc(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var a=ts(),u=bi(a);u.tag=2,i!=null&&(u.callback=i),i=_i(s,u,a),i!==null&&(ns(i,s,a),gc(i,s,a))}};function Nx(s,i,a,u,f,m,b){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,m,b):i.prototype&&i.prototype.isPureReactComponent?!ac(a,u)||!ac(f,m):!0}function Tx(s,i,a,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==s&&Rm.enqueueReplaceState(i,i.state,null)}function Ga(s,i){var a=i;if("ref"in i){a={};for(var u in i)u!=="ref"&&(a[u]=i[u])}if(s=s.defaultProps){a===i&&(a=v({},a));for(var f in s)a[f]===void 0&&(a[f]=s[f])}return a}var _d=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Ax(s){_d(s)}function jx(s){console.error(s)}function Sx(s){_d(s)}function Ed(s,i){try{var a=s.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Cx(s,i,a){try{var u=s.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Im(s,i,a){return a=bi(a),a.tag=3,a.payload={element:null},a.callback=function(){Ed(s,i)},a}function Rx(s){return s=bi(s),s.tag=3,s}function Ix(s,i,a,u){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;s.payload=function(){return f(m)},s.callback=function(){Cx(i,a,u)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(s.callback=function(){Cx(i,a,u),typeof f!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function nT(s,i,a,u,f){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=a.alternate,i!==null&&dc(i,a,f,!0),a=gs.current,a!==null){switch(a.tag){case 13:return nr===null?tp():a.alternate===null&&Ct===0&&(Ct=3),a.flags&=-257,a.flags|=65536,a.lanes=f,u===am?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([u]):i.add(u),sp(s,u,f)),!1;case 22:return a.flags|=65536,u===am?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([u]):a.add(u)),sp(s,u,f)),!1}throw Error(r(435,a.tag))}return sp(s,u,f),tp(),!1}if(nt)return i=gs.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Jf&&(s=Error(r(422),{cause:u}),uc(hs(s,a)))):(u!==Jf&&(i=Error(r(423),{cause:u}),uc(hs(i,a))),s=s.current.alternate,s.flags|=65536,f&=-f,s.lanes|=f,u=hs(u,a),f=Im(s.stateNode,u,f),cm(s,f),Ct!==4&&(Ct=2)),!1;var m=Error(r(520),{cause:u});if(m=hs(m,a),Ic===null?Ic=[m]:Ic.push(m),Ct!==4&&(Ct=2),i===null)return!0;u=hs(u,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,s=f&-f,a.lanes|=s,s=Im(a.stateNode,u,s),cm(a,s),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ii===null||!Ii.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Rx(f),Ix(f,s,a,u),cm(a,f),!1}a=a.return}while(a!==null);return!1}var kx=Error(r(461)),rn=!1;function dn(s,i,a,u){i.child=s===null?_x(i,null,a,u):Qo(i,s.child,a,u)}function Dx(s,i,a,u,f){a=a.render;var m=i.ref;if("ref"in u){var b={};for(var E in u)E!=="ref"&&(b[E]=u[E])}else b=u;return qa(i),u=mm(s,i,a,b,m,f),E=pm(),s!==null&&!rn?(gm(s,i,f),Ur(s,i,f)):(nt&&E&&Wf(i),i.flags|=1,dn(s,i,u,f),i.child)}function Px(s,i,a,u,f){if(s===null){var m=a.type;return typeof m=="function"&&!Yf(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,Ox(s,i,m,u,f)):(s=nd(a.type,null,u,i,i.mode,f),s.ref=i.ref,s.return=i,i.child=s)}if(m=s.child,!Um(s,f)){var b=m.memoizedProps;if(a=a.compare,a=a!==null?a:ac,a(b,u)&&s.ref===i.ref)return Ur(s,i,f)}return i.flags|=1,s=kr(m,u),s.ref=i.ref,s.return=i,i.child=s}function Ox(s,i,a,u,f){if(s!==null){var m=s.memoizedProps;if(ac(m,u)&&s.ref===i.ref)if(rn=!1,i.pendingProps=u=m,Um(s,f))(s.flags&131072)!==0&&(rn=!0);else return i.lanes=s.lanes,Ur(s,i,f)}return km(s,i,a,u,f)}function Mx(s,i,a){var u=i.pendingProps,f=u.children,m=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=m!==null?m.baseLanes|a:a,s!==null){for(f=i.child=s.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~u}else i.childLanes=0,i.child=null;return Lx(s,i,u,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&od(i,m!==null?m.cachePool:null),m!==null?Oy(i,m):dm(),Ex(i);else return i.lanes=i.childLanes=536870912,Lx(s,i,m!==null?m.baseLanes|a:a,a)}else m!==null?(od(i,m.cachePool),Oy(i,m),Ti(),i.memoizedState=null):(s!==null&&od(i,null),dm(),Ti());return dn(s,i,f,a),i.child}function Lx(s,i,a,u){var f=im();return f=f===null?null:{parent:en._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},s!==null&&od(i,null),dm(),Ex(i),s!==null&&dc(s,i,u,!0),null}function Nd(s,i){var a=i.ref;if(a===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(s===null||s.ref!==a)&&(i.flags|=4194816)}}function km(s,i,a,u,f){return qa(i),a=mm(s,i,a,u,void 0,f),u=pm(),s!==null&&!rn?(gm(s,i,f),Ur(s,i,f)):(nt&&u&&Wf(i),i.flags|=1,dn(s,i,a,f),i.child)}function Vx(s,i,a,u,f,m){return qa(i),i.updateQueue=null,a=Ly(i,u,a,f),My(s),u=pm(),s!==null&&!rn?(gm(s,i,m),Ur(s,i,m)):(nt&&u&&Wf(i),i.flags|=1,dn(s,i,a,m),i.child)}function Ux(s,i,a,u,f){if(qa(i),i.stateNode===null){var m=Uo,b=a.contextType;typeof b=="object"&&b!==null&&(m=wn(b)),m=new a(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Rm,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},om(i),b=a.contextType,m.context=typeof b=="object"&&b!==null?wn(b):Uo,m.state=i.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Cm(i,a,b,u),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&Rm.enqueueReplaceState(m,m.state,null),xc(i,u,m,f),yc(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){m=i.stateNode;var E=i.memoizedProps,P=Ga(a,E);m.props=P;var Y=m.context,te=a.contextType;b=Uo,typeof te=="object"&&te!==null&&(b=wn(te));var ie=a.getDerivedStateFromProps;te=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,te||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||Y!==b)&&Tx(i,m,u,b),wi=!1;var X=i.memoizedState;m.state=X,xc(i,u,m,f),yc(),Y=i.memoizedState,E||X!==Y||wi?(typeof ie=="function"&&(Cm(i,a,ie,u),Y=i.memoizedState),(P=wi||Nx(i,a,P,u,X,Y,b))?(te||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Y),m.props=u,m.state=Y,m.context=b,u=P):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,lm(s,i),b=i.memoizedProps,te=Ga(a,b),m.props=te,ie=i.pendingProps,X=m.context,Y=a.contextType,P=Uo,typeof Y=="object"&&Y!==null&&(P=wn(Y)),E=a.getDerivedStateFromProps,(Y=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==ie||X!==P)&&Tx(i,m,u,P),wi=!1,X=i.memoizedState,m.state=X,xc(i,u,m,f),yc();var W=i.memoizedState;b!==ie||X!==W||wi||s!==null&&s.dependencies!==null&&id(s.dependencies)?(typeof E=="function"&&(Cm(i,a,E,u),W=i.memoizedState),(te=wi||Nx(i,a,te,u,X,W,P)||s!==null&&s.dependencies!==null&&id(s.dependencies))?(Y||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,W,P),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,W,P)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===s.memoizedProps&&X===s.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&X===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=W),m.props=u,m.state=W,m.context=P,u=te):(typeof m.componentDidUpdate!="function"||b===s.memoizedProps&&X===s.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&X===s.memoizedState||(i.flags|=1024),u=!1)}return m=u,Nd(s,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,s!==null&&u?(i.child=Qo(i,s.child,null,f),i.child=Qo(i,null,a,f)):dn(s,i,a,f),i.memoizedState=m.state,s=i.child):s=Ur(s,i,f),s}function Bx(s,i,a,u){return cc(),i.flags|=256,dn(s,i,a,u),i.child}var Dm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pm(s){return{baseLanes:s,cachePool:jy()}}function Om(s,i,a){return s=s!==null?s.childLanes&~a:0,i&&(s|=ys),s}function zx(s,i,a){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,b;if((b=m)||(b=s!==null&&s.memoizedState===null?!1:(tn.current&2)!==0),b&&(f=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,s===null){if(nt){if(f?Ni(i):Ti(),nt){var E=St,P;if(P=E){e:{for(P=E,E=tr;P.nodeType!==8;){if(!E){E=null;break e}if(P=Ps(P.nextSibling),P===null){E=null;break e}}E=P}E!==null?(i.memoizedState={dehydrated:E,treeContext:Va!==null?{id:Dr,overflow:Pr}:null,retryLane:536870912,hydrationErrors:null},P=Wn(18,null,null,0),P.stateNode=E,P.return=i,i.child=P,In=i,St=null,P=!0):P=!1}P||za(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return xp(E)?i.lanes=32:i.lanes=536870912,null;Vr(i)}return E=u.children,u=u.fallback,f?(Ti(),f=i.mode,E=Td({mode:"hidden",children:E},f),u=La(u,f,a,null),E.return=i,u.return=i,E.sibling=u,i.child=E,f=i.child,f.memoizedState=Pm(a),f.childLanes=Om(s,b,a),i.memoizedState=Dm,u):(Ni(i),Mm(i,E))}if(P=s.memoizedState,P!==null&&(E=P.dehydrated,E!==null)){if(m)i.flags&256?(Ni(i),i.flags&=-257,i=Lm(s,i,a)):i.memoizedState!==null?(Ti(),i.child=s.child,i.flags|=128,i=null):(Ti(),f=u.fallback,E=i.mode,u=Td({mode:"visible",children:u.children},E),f=La(f,E,a,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,Qo(i,s.child,null,a),u=i.child,u.memoizedState=Pm(a),u.childLanes=Om(s,b,a),i.memoizedState=Dm,i=f);else if(Ni(i),xp(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var Y=b.dgst;b=Y,u=Error(r(419)),u.stack="",u.digest=b,uc({value:u,source:null,stack:null}),i=Lm(s,i,a)}else if(rn||dc(s,i,a,!1),b=(a&s.childLanes)!==0,rn||b){if(b=gt,b!==null&&(u=a&-a,u=(u&42)!==0?1:bt(u),u=(u&(b.suspendedLanes|a))!==0?0:u,u!==0&&u!==P.retryLane))throw P.retryLane=u,Vo(s,u),ns(b,s,u),kx;E.data==="$?"||tp(),i=Lm(s,i,a)}else E.data==="$?"?(i.flags|=192,i.child=s.child,i=null):(s=P.treeContext,St=Ps(E.nextSibling),In=i,nt=!0,Ba=null,tr=!1,s!==null&&(ms[ps++]=Dr,ms[ps++]=Pr,ms[ps++]=Va,Dr=s.id,Pr=s.overflow,Va=i),i=Mm(i,u.children),i.flags|=4096);return i}return f?(Ti(),f=u.fallback,E=i.mode,P=s.child,Y=P.sibling,u=kr(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,Y!==null?f=kr(Y,f):(f=La(f,E,a,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,E=s.child.memoizedState,E===null?E=Pm(a):(P=E.cachePool,P!==null?(Y=en._currentValue,P=P.parent!==Y?{parent:Y,pool:Y}:P):P=jy(),E={baseLanes:E.baseLanes|a,cachePool:P}),f.memoizedState=E,f.childLanes=Om(s,b,a),i.memoizedState=Dm,u):(Ni(i),a=s.child,s=a.sibling,a=kr(a,{mode:"visible",children:u.children}),a.return=i,a.sibling=null,s!==null&&(b=i.deletions,b===null?(i.deletions=[s],i.flags|=16):b.push(s)),i.child=a,i.memoizedState=null,a)}function Mm(s,i){return i=Td({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function Td(s,i){return s=Wn(22,s,null,i),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Lm(s,i,a){return Qo(i,s.child,null,a),s=Mm(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Fx(s,i,a){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),tm(s.return,i,a)}function Vm(s,i,a,u,f){var m=s.memoizedState;m===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=a,m.tailMode=f)}function qx(s,i,a){var u=i.pendingProps,f=u.revealOrder,m=u.tail;if(dn(s,i,u.children,a),u=tn.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Fx(s,a,i);else if(s.tag===19)Fx(s,a,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(ee(tn,u),f){case"forwards":for(a=i.child,f=null;a!==null;)s=a.alternate,s!==null&&bd(s)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Vm(i,!1,f,a,m);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(s=f.alternate,s!==null&&bd(s)===null){i.child=f;break}s=f.sibling,f.sibling=a,a=f,f=s}Vm(i,!0,a,null,m);break;case"together":Vm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ur(s,i,a){if(s!==null&&(i.dependencies=s.dependencies),Ri|=i.lanes,(a&i.childLanes)===0)if(s!==null){if(dc(s,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,a=kr(s,s.pendingProps),i.child=a,a.return=i;s.sibling!==null;)s=s.sibling,a=a.sibling=kr(s,s.pendingProps),a.return=i;a.sibling=null}return i.child}function Um(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&id(s)))}function sT(s,i,a){switch(i.tag){case 3:tt(i,i.stateNode.containerInfo),vi(i,en,s.memoizedState.cache),cc();break;case 27:case 5:ua(i);break;case 4:tt(i,i.stateNode.containerInfo);break;case 10:vi(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ni(i),i.flags|=128,null):(a&i.child.childLanes)!==0?zx(s,i,a):(Ni(i),s=Ur(s,i,a),s!==null?s.sibling:null);Ni(i);break;case 19:var f=(s.flags&128)!==0;if(u=(a&i.childLanes)!==0,u||(dc(s,i,a,!1),u=(a&i.childLanes)!==0),f){if(u)return qx(s,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ee(tn,tn.current),u)break;return null;case 22:case 23:return i.lanes=0,Mx(s,i,a);case 24:vi(i,en,s.memoizedState.cache)}return Ur(s,i,a)}function Hx(s,i,a){if(s!==null)if(s.memoizedProps!==i.pendingProps)rn=!0;else{if(!Um(s,a)&&(i.flags&128)===0)return rn=!1,sT(s,i,a);rn=(s.flags&131072)!==0}else rn=!1,nt&&(i.flags&1048576)!==0&&wy(i,rd,i.index);switch(i.lanes=0,i.tag){case 16:e:{s=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")Yf(u)?(s=Ga(u,s),i.tag=1,i=Ux(null,i,u,s,a)):(i.tag=0,i=km(null,i,u,s,a));else{if(u!=null){if(f=u.$$typeof,f===ce){i.tag=11,i=Dx(null,i,u,s,a);break e}else if(f===k){i.tag=14,i=Px(null,i,u,s,a);break e}}throw i=Ne(u)||u,Error(r(306,i,""))}}return i;case 0:return km(s,i,i.type,i.pendingProps,a);case 1:return u=i.type,f=Ga(u,i.pendingProps),Ux(s,i,u,f,a);case 3:e:{if(tt(i,i.stateNode.containerInfo),s===null)throw Error(r(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,lm(s,i),xc(i,u,null,a);var b=i.memoizedState;if(u=b.cache,vi(i,en,u),u!==m.cache&&nm(i,[en],a,!0),yc(),u=b.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Bx(s,i,u,a);break e}else if(u!==f){f=hs(Error(r(424)),i),uc(f),i=Bx(s,i,u,a);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(St=Ps(s.firstChild),In=i,nt=!0,Ba=null,tr=!0,a=_x(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(cc(),u===f){i=Ur(s,i,a);break e}dn(s,i,u,a)}i=i.child}return i;case 26:return Nd(s,i),s===null?(a=Yv(i.type,null,i.pendingProps,null))?i.memoizedState=a:nt||(a=i.type,s=i.pendingProps,u=Ud(fe.current).createElement(a),u[Pt]=i,u[un]=s,fn(u,a,s),Ot(u),i.stateNode=u):i.memoizedState=Yv(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return ua(i),s===null&&nt&&(u=i.stateNode=$v(i.type,i.pendingProps,fe.current),In=i,tr=!0,f=St,Pi(i.type)?(vp=f,St=Ps(u.firstChild)):St=f),dn(s,i,i.pendingProps.children,a),Nd(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&nt&&((f=u=St)&&(u=IT(u,i.type,i.pendingProps,tr),u!==null?(i.stateNode=u,In=i,St=Ps(u.firstChild),tr=!1,f=!0):f=!1),f||za(i)),ua(i),f=i.type,m=i.pendingProps,b=s!==null?s.memoizedProps:null,u=m.children,pp(f,m)?u=null:b!==null&&pp(f,b)&&(i.flags|=32),i.memoizedState!==null&&(f=mm(s,i,QN,null,null,a),Bc._currentValue=f),Nd(s,i),dn(s,i,u,a),i.child;case 6:return s===null&&nt&&((s=a=St)&&(a=kT(a,i.pendingProps,tr),a!==null?(i.stateNode=a,In=i,St=null,s=!0):s=!1),s||za(i)),null;case 13:return zx(s,i,a);case 4:return tt(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=Qo(i,null,u,a):dn(s,i,u,a),i.child;case 11:return Dx(s,i,i.type,i.pendingProps,a);case 7:return dn(s,i,i.pendingProps,a),i.child;case 8:return dn(s,i,i.pendingProps.children,a),i.child;case 12:return dn(s,i,i.pendingProps.children,a),i.child;case 10:return u=i.pendingProps,vi(i,i.type,u.value),dn(s,i,u.children,a),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,qa(i),f=wn(f),u=u(f),i.flags|=1,dn(s,i,u,a),i.child;case 14:return Px(s,i,i.type,i.pendingProps,a);case 15:return Ox(s,i,i.type,i.pendingProps,a);case 19:return qx(s,i,a);case 31:return u=i.pendingProps,a=i.mode,u={mode:u.mode,children:u.children},s===null?(a=Td(u,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=kr(s.child,u),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Mx(s,i,a);case 24:return qa(i),u=wn(en),s===null?(f=im(),f===null&&(f=gt,m=sm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),i.memoizedState={parent:u,cache:f},om(i),vi(i,en,f)):((s.lanes&a)!==0&&(lm(s,i),xc(i,null,null,a),yc()),f=s.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),vi(i,en,u)):(u=m.cache,vi(i,en,u),u!==f.cache&&nm(i,[en],a,!0))),dn(s,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Br(s){s.flags|=4}function $x(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Jv(i)){if(i=gs.current,i!==null&&((Qe&4194048)===Qe?nr!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||i!==nr))throw pc=am,Sy;s.flags|=8192}}function Ad(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?Ts():536870912,s.lanes|=i,Jo|=i)}function Tc(s,i){if(!nt)switch(s.tailMode){case"hidden":i=s.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function At(s){var i=s.alternate!==null&&s.alternate.child===s.child,a=0,u=0;if(i)for(var f=s.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=s,f=f.sibling;else for(f=s.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=s,f=f.sibling;return s.subtreeFlags|=u,s.childLanes=a,i}function rT(s,i,a){var u=i.pendingProps;switch(Zf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(i),null;case 1:return At(i),null;case 3:return a=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Mr(en),Kn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(lc(i)?Br(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ey())),At(i),null;case 26:return a=i.memoizedState,s===null?(Br(i),a!==null?(At(i),$x(i,a)):(At(i),i.flags&=-16777217)):a?a!==s.memoizedState?(Br(i),At(i),$x(i,a)):(At(i),i.flags&=-16777217):(s.memoizedProps!==u&&Br(i),At(i),i.flags&=-16777217),null;case 27:ii(i),a=fe.current;var f=i.type;if(s!==null&&i.stateNode!=null)s.memoizedProps!==u&&Br(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return At(i),null}s=oe.current,lc(i)?by(i):(s=$v(f,u,a),i.stateNode=s,Br(i))}return At(i),null;case 5:if(ii(i),a=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&Br(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return At(i),null}if(s=oe.current,lc(i))by(i);else{switch(f=Ud(fe.current),s){case 1:s=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:s=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":s=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":s=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":s=f.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?f.createElement(a,{is:u.is}):f.createElement(a)}}s[Pt]=i,s[un]=u;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)s.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=s;e:switch(fn(s,a,u),a){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Br(i)}}return At(i),i.flags&=-16777217,null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&Br(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=fe.current,lc(i)){if(s=i.stateNode,a=i.memoizedProps,u=null,f=In,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}s[Pt]=i,s=!!(s.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Vv(s.nodeValue,a)),s||za(i)}else s=Ud(s).createTextNode(u),s[Pt]=i,i.stateNode=s}return At(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(f=lc(i),u!==null&&u.dehydrated!==null){if(s===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Pt]=i}else cc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;At(i),f=!1}else f=Ey(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Vr(i),i):(Vr(i),null)}if(Vr(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=u!==null,s=s!==null&&s.memoizedState!==null,a){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return a!==s&&a&&(i.child.flags|=8192),Ad(i,i.updateQueue),At(i),null;case 4:return Kn(),s===null&&up(i.stateNode.containerInfo),At(i),null;case 10:return Mr(i.type),At(i),null;case 19:if(ye(tn),f=i.memoizedState,f===null)return At(i),null;if(u=(i.flags&128)!==0,m=f.rendering,m===null)if(u)Tc(f,!1);else{if(Ct!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(m=bd(s),m!==null){for(i.flags|=128,Tc(f,!1),s=m.updateQueue,i.updateQueue=s,Ad(i,s),i.subtreeFlags=0,s=a,a=i.child;a!==null;)vy(a,s),a=a.sibling;return ee(tn,tn.current&1|2),i.child}s=s.sibling}f.tail!==null&&yn()>Cd&&(i.flags|=128,u=!0,Tc(f,!1),i.lanes=4194304)}else{if(!u)if(s=bd(m),s!==null){if(i.flags|=128,u=!0,s=s.updateQueue,i.updateQueue=s,Ad(i,s),Tc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!nt)return At(i),null}else 2*yn()-f.renderingStartTime>Cd&&a!==536870912&&(i.flags|=128,u=!0,Tc(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(s=f.last,s!==null?s.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=yn(),i.sibling=null,s=tn.current,ee(tn,u?s&1|2:s&1),i):(At(i),null);case 22:case 23:return Vr(i),hm(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(a&536870912)!==0&&(i.flags&128)===0&&(At(i),i.subtreeFlags&6&&(i.flags|=8192)):At(i),a=i.updateQueue,a!==null&&Ad(i,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==a&&(i.flags|=2048),s!==null&&ye(Ha),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Mr(en),At(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function iT(s,i){switch(Zf(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Mr(en),Kn(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return ii(i),null;case 13:if(Vr(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));cc()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return ye(tn),null;case 4:return Kn(),null;case 10:return Mr(i.type),null;case 22:case 23:return Vr(i),hm(),s!==null&&ye(Ha),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return Mr(en),null;case 25:return null;default:return null}}function Gx(s,i){switch(Zf(i),i.tag){case 3:Mr(en),Kn();break;case 26:case 27:case 5:ii(i);break;case 4:Kn();break;case 13:Vr(i);break;case 19:ye(tn);break;case 10:Mr(i.type);break;case 22:case 23:Vr(i),hm(),s!==null&&ye(Ha);break;case 24:Mr(en)}}function Ac(s,i){try{var a=i.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var f=u.next;a=f;do{if((a.tag&s)===s){u=void 0;var m=a.create,b=a.inst;u=m(),b.destroy=u}a=a.next}while(a!==f)}}catch(E){mt(i,i.return,E)}}function Ai(s,i,a){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&s)===s){var b=u.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,f=i;var P=a,Y=E;try{Y()}catch(te){mt(f,P,te)}}}u=u.next}while(u!==m)}}catch(te){mt(i,i.return,te)}}function Kx(s){var i=s.updateQueue;if(i!==null){var a=s.stateNode;try{Py(i,a)}catch(u){mt(s,s.return,u)}}}function Yx(s,i,a){a.props=Ga(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(u){mt(s,i,u)}}function jc(s,i){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof a=="function"?s.refCleanup=a(u):a.current=u}}catch(f){mt(s,i,f)}}function sr(s,i){var a=s.ref,u=s.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(f){mt(s,i,f)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){mt(s,i,f)}else a.current=null}function Qx(s){var i=s.type,a=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(f){mt(s,s.return,f)}}function Bm(s,i,a){try{var u=s.stateNode;AT(u,s.type,a,i),u[un]=i}catch(f){mt(s,s.return,f)}}function Xx(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Pi(s.type)||s.tag===4}function zm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Xx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Pi(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Fm(s,i,a){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(s),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Vd));else if(u!==4&&(u===27&&Pi(s.type)&&(a=s.stateNode,i=null),s=s.child,s!==null))for(Fm(s,i,a),s=s.sibling;s!==null;)Fm(s,i,a),s=s.sibling}function jd(s,i,a){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?a.insertBefore(s,i):a.appendChild(s);else if(u!==4&&(u===27&&Pi(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(jd(s,i,a),s=s.sibling;s!==null;)jd(s,i,a),s=s.sibling}function Wx(s){var i=s.stateNode,a=s.memoizedProps;try{for(var u=s.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);fn(i,u,a),i[Pt]=s,i[un]=a}catch(m){mt(s,s.return,m)}}var zr=!1,Vt=!1,qm=!1,Zx=typeof WeakSet=="function"?WeakSet:Set,an=null;function aT(s,i){if(s=s.containerInfo,fp=$d,s=cy(s),zf(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var b=0,E=-1,P=-1,Y=0,te=0,ie=s,X=null;t:for(;;){for(var W;ie!==a||f!==0&&ie.nodeType!==3||(E=b+f),ie!==m||u!==0&&ie.nodeType!==3||(P=b+u),ie.nodeType===3&&(b+=ie.nodeValue.length),(W=ie.firstChild)!==null;)X=ie,ie=W;for(;;){if(ie===s)break t;if(X===a&&++Y===f&&(E=b),X===m&&++te===u&&(P=b),(W=ie.nextSibling)!==null)break;ie=X,X=ie.parentNode}ie=W}a=E===-1||P===-1?null:{start:E,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(mp={focusedElem:s,selectionRange:a},$d=!1,an=i;an!==null;)if(i=an,s=i.child,(i.subtreeFlags&1024)!==0&&s!==null)s.return=i,an=s;else for(;an!==null;){switch(i=an,m=i.alternate,s=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&m!==null){s=void 0,a=i,f=m.memoizedProps,m=m.memoizedState,u=a.stateNode;try{var ke=Ga(a.type,f,a.elementType===a.type);s=u.getSnapshotBeforeUpdate(ke,m),u.__reactInternalSnapshotBeforeUpdate=s}catch(je){mt(a,a.return,je)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,a=s.nodeType,a===9)yp(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":yp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,an=s;break}an=i.return}}function Jx(s,i,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:ji(s,a),u&4&&Ac(5,a);break;case 1:if(ji(s,a),u&4)if(s=a.stateNode,i===null)try{s.componentDidMount()}catch(b){mt(a,a.return,b)}else{var f=Ga(a.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(f,i,s.__reactInternalSnapshotBeforeUpdate)}catch(b){mt(a,a.return,b)}}u&64&&Kx(a),u&512&&jc(a,a.return);break;case 3:if(ji(s,a),u&64&&(s=a.updateQueue,s!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Py(s,i)}catch(b){mt(a,a.return,b)}}break;case 27:i===null&&u&4&&Wx(a);case 26:case 5:ji(s,a),i===null&&u&4&&Qx(a),u&512&&jc(a,a.return);break;case 12:ji(s,a);break;case 13:ji(s,a),u&4&&nv(s,a),u&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=pT.bind(null,a),DT(s,a))));break;case 22:if(u=a.memoizedState!==null||zr,!u){i=i!==null&&i.memoizedState!==null||Vt,f=zr;var m=Vt;zr=u,(Vt=i)&&!m?Si(s,a,(a.subtreeFlags&8772)!==0):ji(s,a),zr=f,Vt=m}break;case 30:break;default:ji(s,a)}}function ev(s){var i=s.alternate;i!==null&&(s.alternate=null,ev(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&Eo(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Et=null,Vn=!1;function Fr(s,i,a){for(a=a.child;a!==null;)tv(s,i,a),a=a.sibling}function tv(s,i,a){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Gs,a)}catch{}switch(a.tag){case 26:Vt||sr(a,i),Fr(s,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Vt||sr(a,i);var u=Et,f=Vn;Pi(a.type)&&(Et=a.stateNode,Vn=!1),Fr(s,i,a),Mc(a.stateNode),Et=u,Vn=f;break;case 5:Vt||sr(a,i);case 6:if(u=Et,f=Vn,Et=null,Fr(s,i,a),Et=u,Vn=f,Et!==null)if(Vn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(a.stateNode)}catch(m){mt(a,i,m)}else try{Et.removeChild(a.stateNode)}catch(m){mt(a,i,m)}break;case 18:Et!==null&&(Vn?(s=Et,qv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),Hc(s)):qv(Et,a.stateNode));break;case 4:u=Et,f=Vn,Et=a.stateNode.containerInfo,Vn=!0,Fr(s,i,a),Et=u,Vn=f;break;case 0:case 11:case 14:case 15:Vt||Ai(2,a,i),Vt||Ai(4,a,i),Fr(s,i,a);break;case 1:Vt||(sr(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Yx(a,i,u)),Fr(s,i,a);break;case 21:Fr(s,i,a);break;case 22:Vt=(u=Vt)||a.memoizedState!==null,Fr(s,i,a),Vt=u;break;default:Fr(s,i,a)}}function nv(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Hc(s)}catch(a){mt(i,i.return,a)}}function oT(s){switch(s.tag){case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new Zx),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new Zx),i;default:throw Error(r(435,s.tag))}}function Hm(s,i){var a=oT(s);i.forEach(function(u){var f=gT.bind(null,s,u);a.has(u)||(a.add(u),u.then(f,f))})}function Zn(s,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u],m=s,b=i,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(Pi(E.type)){Et=E.stateNode,Vn=!1;break e}break;case 5:Et=E.stateNode,Vn=!1;break e;case 3:case 4:Et=E.stateNode.containerInfo,Vn=!0;break e}E=E.return}if(Et===null)throw Error(r(160));tv(m,b,f),Et=null,Vn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)sv(i,s),i=i.sibling}var Ds=null;function sv(s,i){var a=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Zn(i,s),Jn(s),u&4&&(Ai(3,s,s.return),Ac(3,s),Ai(5,s,s.return));break;case 1:Zn(i,s),Jn(s),u&512&&(Vt||a===null||sr(a,a.return)),u&64&&zr&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var f=Ds;if(Zn(i,s),Jn(s),u&512&&(Vt||a===null||sr(a,a.return)),u&4){var m=a!==null?a.memoizedState:null;if(u=s.memoizedState,a===null)if(u===null)if(s.stateNode===null){e:{u=s.type,a=s.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ci]||m[Pt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),fn(m,u,a),m[Pt]=s,Ot(m),u=m;break e;case"link":var b=Wv("link","href",f).get(u+(a.href||""));if(b){for(var E=0;E<b.length;E++)if(m=b[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(E,1);break t}}m=f.createElement(u),fn(m,u,a),f.head.appendChild(m);break;case"meta":if(b=Wv("meta","content",f).get(u+(a.content||""))){for(E=0;E<b.length;E++)if(m=b[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(E,1);break t}}m=f.createElement(u),fn(m,u,a),f.head.appendChild(m);break;default:throw Error(r(468,u))}m[Pt]=s,Ot(m),u=m}s.stateNode=u}else Zv(f,s.type,s.stateNode);else s.stateNode=Xv(f,u,s.memoizedProps);else m!==u?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,u===null?Zv(f,s.type,s.stateNode):Xv(f,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Bm(s,s.memoizedProps,a.memoizedProps)}break;case 27:Zn(i,s),Jn(s),u&512&&(Vt||a===null||sr(a,a.return)),a!==null&&u&4&&Bm(s,s.memoizedProps,a.memoizedProps);break;case 5:if(Zn(i,s),Jn(s),u&512&&(Vt||a===null||sr(a,a.return)),s.flags&32){f=s.stateNode;try{us(f,"")}catch(W){mt(s,s.return,W)}}u&4&&s.stateNode!=null&&(f=s.memoizedProps,Bm(s,f,a!==null?a.memoizedProps:f)),u&1024&&(qm=!0);break;case 6:if(Zn(i,s),Jn(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,a=s.stateNode;try{a.nodeValue=u}catch(W){mt(s,s.return,W)}}break;case 3:if(Fd=null,f=Ds,Ds=Bd(i.containerInfo),Zn(i,s),Ds=f,Jn(s),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Hc(i.containerInfo)}catch(W){mt(s,s.return,W)}qm&&(qm=!1,rv(s));break;case 4:u=Ds,Ds=Bd(s.stateNode.containerInfo),Zn(i,s),Jn(s),Ds=u;break;case 12:Zn(i,s),Jn(s);break;case 13:Zn(i,s),Jn(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Xm=yn()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Hm(s,u)));break;case 22:f=s.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,Y=zr,te=Vt;if(zr=Y||f,Vt=te||P,Zn(i,s),Vt=te,zr=Y,Jn(s),u&8192)e:for(i=s.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||P||zr||Vt||Ka(s)),a=null,i=s;;){if(i.tag===5||i.tag===26){if(a===null){P=a=i;try{if(m=P.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=P.stateNode;var ie=P.memoizedProps.style,X=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(W){mt(P,P.return,W)}}}else if(i.tag===6){if(a===null){P=i;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(W){mt(P,P.return,W)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Hm(s,a))));break;case 19:Zn(i,s),Jn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Hm(s,u)));break;case 30:break;case 21:break;default:Zn(i,s),Jn(s)}}function Jn(s){var i=s.flags;if(i&2){try{for(var a,u=s.return;u!==null;){if(Xx(u)){a=u;break}u=u.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,m=zm(s);jd(s,m,f);break;case 5:var b=a.stateNode;a.flags&32&&(us(b,""),a.flags&=-33);var E=zm(s);jd(s,E,b);break;case 3:case 4:var P=a.stateNode.containerInfo,Y=zm(s);Fm(s,Y,P);break;default:throw Error(r(161))}}catch(te){mt(s,s.return,te)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function rv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;rv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function ji(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Jx(s,i.alternate,i),i=i.sibling}function Ka(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Ai(4,i,i.return),Ka(i);break;case 1:sr(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Yx(i,i.return,a),Ka(i);break;case 27:Mc(i.stateNode);case 26:case 5:sr(i,i.return),Ka(i);break;case 22:i.memoizedState===null&&Ka(i);break;case 30:Ka(i);break;default:Ka(i)}s=s.sibling}}function Si(s,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=s,m=i,b=m.flags;switch(m.tag){case 0:case 11:case 15:Si(f,m,a),Ac(4,m);break;case 1:if(Si(f,m,a),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){mt(u,u.return,Y)}if(u=m,f=u.updateQueue,f!==null){var E=u.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)Dy(P[f],E)}catch(Y){mt(u,u.return,Y)}}a&&b&64&&Kx(m),jc(m,m.return);break;case 27:Wx(m);case 26:case 5:Si(f,m,a),a&&u===null&&b&4&&Qx(m),jc(m,m.return);break;case 12:Si(f,m,a);break;case 13:Si(f,m,a),a&&b&4&&nv(f,m);break;case 22:m.memoizedState===null&&Si(f,m,a),jc(m,m.return);break;case 30:break;default:Si(f,m,a)}i=i.sibling}}function $m(s,i){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&hc(a))}function Gm(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&hc(s))}function rr(s,i,a,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)iv(s,i,a,u),i=i.sibling}function iv(s,i,a,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:rr(s,i,a,u),f&2048&&Ac(9,i);break;case 1:rr(s,i,a,u);break;case 3:rr(s,i,a,u),f&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&hc(s)));break;case 12:if(f&2048){rr(s,i,a,u),s=i.stateNode;try{var m=i.memoizedProps,b=m.id,E=m.onPostCommit;typeof E=="function"&&E(b,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(P){mt(i,i.return,P)}}else rr(s,i,a,u);break;case 13:rr(s,i,a,u);break;case 23:break;case 22:m=i.stateNode,b=i.alternate,i.memoizedState!==null?m._visibility&2?rr(s,i,a,u):Sc(s,i):m._visibility&2?rr(s,i,a,u):(m._visibility|=2,Xo(s,i,a,u,(i.subtreeFlags&10256)!==0)),f&2048&&$m(b,i);break;case 24:rr(s,i,a,u),f&2048&&Gm(i.alternate,i);break;default:rr(s,i,a,u)}}function Xo(s,i,a,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=s,b=i,E=a,P=u,Y=b.flags;switch(b.tag){case 0:case 11:case 15:Xo(m,b,E,P,f),Ac(8,b);break;case 23:break;case 22:var te=b.stateNode;b.memoizedState!==null?te._visibility&2?Xo(m,b,E,P,f):Sc(m,b):(te._visibility|=2,Xo(m,b,E,P,f)),f&&Y&2048&&$m(b.alternate,b);break;case 24:Xo(m,b,E,P,f),f&&Y&2048&&Gm(b.alternate,b);break;default:Xo(m,b,E,P,f)}i=i.sibling}}function Sc(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=s,u=i,f=u.flags;switch(u.tag){case 22:Sc(a,u),f&2048&&$m(u.alternate,u);break;case 24:Sc(a,u),f&2048&&Gm(u.alternate,u);break;default:Sc(a,u)}i=i.sibling}}var Cc=8192;function Wo(s){if(s.subtreeFlags&Cc)for(s=s.child;s!==null;)av(s),s=s.sibling}function av(s){switch(s.tag){case 26:Wo(s),s.flags&Cc&&s.memoizedState!==null&&GT(Ds,s.memoizedState,s.memoizedProps);break;case 5:Wo(s);break;case 3:case 4:var i=Ds;Ds=Bd(s.stateNode.containerInfo),Wo(s),Ds=i;break;case 22:s.memoizedState===null&&(i=s.alternate,i!==null&&i.memoizedState!==null?(i=Cc,Cc=16777216,Wo(s),Cc=i):Wo(s));break;default:Wo(s)}}function ov(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function Rc(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];an=u,cv(u,s)}ov(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)lv(s),s=s.sibling}function lv(s){switch(s.tag){case 0:case 11:case 15:Rc(s),s.flags&2048&&Ai(9,s,s.return);break;case 3:Rc(s);break;case 12:Rc(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Sd(s)):Rc(s);break;default:Rc(s)}}function Sd(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];an=u,cv(u,s)}ov(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Ai(8,i,i.return),Sd(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Sd(i));break;default:Sd(i)}s=s.sibling}}function cv(s,i){for(;an!==null;){var a=an;switch(a.tag){case 0:case 11:case 15:Ai(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:hc(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,an=u;else e:for(a=s;an!==null;){u=an;var f=u.sibling,m=u.return;if(ev(u),u===a){an=null;break e}if(f!==null){f.return=m,an=f;break e}an=m}}}var lT={getCacheForType:function(s){var i=wn(en),a=i.data.get(s);return a===void 0&&(a=s(),i.data.set(s,a)),a}},cT=typeof WeakMap=="function"?WeakMap:Map,ot=0,gt=null,qe=null,Qe=0,lt=0,es=null,Ci=!1,Zo=!1,Km=!1,qr=0,Ct=0,Ri=0,Ya=0,Ym=0,ys=0,Jo=0,Ic=null,Un=null,Qm=!1,Xm=0,Cd=1/0,Rd=null,Ii=null,hn=0,ki=null,el=null,tl=0,Wm=0,Zm=null,uv=null,kc=0,Jm=null;function ts(){if((ot&2)!==0&&Qe!==0)return Qe&-Qe;if(q.T!==null){var s=Fo;return s!==0?s:ap()}return it()}function dv(){ys===0&&(ys=(Qe&536870912)===0||nt?li():536870912);var s=gs.current;return s!==null&&(s.flags|=32),ys}function ns(s,i,a){(s===gt&&(lt===2||lt===9)||s.cancelPendingCommit!==null)&&(nl(s,0),Di(s,Qe,ys,!1)),j(s,a),((ot&2)===0||s!==gt)&&(s===gt&&((ot&2)===0&&(Ya|=a),Ct===4&&Di(s,Qe,ys,!1)),ir(s))}function hv(s,i,a){if((ot&6)!==0)throw Error(r(327));var u=!a&&(i&124)===0&&(i&s.expiredLanes)===0||Ns(s,i),f=u?hT(s,i):np(s,i,!0),m=u;do{if(f===0){Zo&&!u&&Di(s,i,0,!1);break}else{if(a=s.current.alternate,m&&!uT(a)){f=np(s,i,!1),m=!1;continue}if(f===2){if(m=i,s.errorRecoveryDisabledLanes&m)var b=0;else b=s.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var E=s;f=Ic;var P=E.current.memoizedState.isDehydrated;if(P&&(nl(E,b).flags|=256),b=np(E,b,!1),b!==2){if(Km&&!P){E.errorRecoveryDisabledLanes|=m,Ya|=m,f=4;break e}m=Un,Un=f,m!==null&&(Un===null?Un=m:Un.push.apply(Un,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){nl(s,0),Di(s,i,0,!0);break}e:{switch(u=s,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Di(u,i,ys,!Ci);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Xm+300-yn(),10<f)){if(Di(u,i,ys,!Ci),Ze(u,0,!0)!==0)break e;u.timeoutHandle=zv(fv.bind(null,u,a,Un,Rd,Qm,i,ys,Ya,Jo,Ci,m,2,-0,0),f);break e}fv(u,a,Un,Rd,Qm,i,ys,Ya,Jo,Ci,m,0,-0,0)}}break}while(!0);ir(s)}function fv(s,i,a,u,f,m,b,E,P,Y,te,ie,X,W){if(s.timeoutHandle=-1,ie=i.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(Uc={stylesheets:null,count:0,unsuspend:$T},av(i),ie=KT(),ie!==null)){s.cancelPendingCommit=ie(wv.bind(null,s,i,m,a,u,f,b,E,P,te,1,X,W)),Di(s,m,b,!Y);return}wv(s,i,m,a,u,f,b,E,P)}function uT(s){for(var i=s;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var f=a[u],m=f.getSnapshot;f=f.value;try{if(!Xn(m(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Di(s,i,a,u){i&=~Ym,i&=~Ya,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var f=i;0<f;){var m=31-Wt(f),b=1<<m;u[m]=-1,f&=~b}a!==0&&we(s,a,i)}function Id(){return(ot&6)===0?(Dc(0),!1):!0}function ep(){if(qe!==null){if(lt===0)var s=qe.return;else s=qe,Or=Fa=null,ym(s),Yo=null,Ec=0,s=qe;for(;s!==null;)Gx(s.alternate,s),s=s.return;qe=null}}function nl(s,i){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,ST(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),ep(),gt=s,qe=a=kr(s.current,null),Qe=i,lt=0,es=null,Ci=!1,Zo=Ns(s,i),Km=!1,Jo=ys=Ym=Ya=Ri=Ct=0,Un=Ic=null,Qm=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var f=31-Wt(u),m=1<<f;i|=s[f],u&=~m}return qr=i,Ju(),a}function mv(s,i){ze=null,q.H=xd,i===mc||i===ld?(i=Iy(),lt=3):i===Sy?(i=Iy(),lt=4):lt=i===kx?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,es=i,qe===null&&(Ct=1,Ed(s,hs(i,s.current)))}function pv(){var s=q.H;return q.H=xd,s===null?xd:s}function gv(){var s=q.A;return q.A=lT,s}function tp(){Ct=4,Ci||(Qe&4194048)!==Qe&&gs.current!==null||(Zo=!0),(Ri&134217727)===0&&(Ya&134217727)===0||gt===null||Di(gt,Qe,ys,!1)}function np(s,i,a){var u=ot;ot|=2;var f=pv(),m=gv();(gt!==s||Qe!==i)&&(Rd=null,nl(s,i)),i=!1;var b=Ct;e:do try{if(lt!==0&&qe!==null){var E=qe,P=es;switch(lt){case 8:ep(),b=6;break e;case 3:case 2:case 9:case 6:gs.current===null&&(i=!0);var Y=lt;if(lt=0,es=null,sl(s,E,P,Y),a&&Zo){b=0;break e}break;default:Y=lt,lt=0,es=null,sl(s,E,P,Y)}}dT(),b=Ct;break}catch(te){mv(s,te)}while(!0);return i&&s.shellSuspendCounter++,Or=Fa=null,ot=u,q.H=f,q.A=m,qe===null&&(gt=null,Qe=0,Ju()),b}function dT(){for(;qe!==null;)yv(qe)}function hT(s,i){var a=ot;ot|=2;var u=pv(),f=gv();gt!==s||Qe!==i?(Rd=null,Cd=yn()+500,nl(s,i)):Zo=Ns(s,i);e:do try{if(lt!==0&&qe!==null){i=qe;var m=es;t:switch(lt){case 1:lt=0,es=null,sl(s,i,m,1);break;case 2:case 9:if(Cy(m)){lt=0,es=null,xv(i);break}i=function(){lt!==2&&lt!==9||gt!==s||(lt=7),ir(s)},m.then(i,i);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:Cy(m)?(lt=0,es=null,xv(i)):(lt=0,es=null,sl(s,i,m,7));break;case 5:var b=null;switch(qe.tag){case 26:b=qe.memoizedState;case 5:case 27:var E=qe;if(!b||Jv(b)){lt=0,es=null;var P=E.sibling;if(P!==null)qe=P;else{var Y=E.return;Y!==null?(qe=Y,kd(Y)):qe=null}break t}}lt=0,es=null,sl(s,i,m,5);break;case 6:lt=0,es=null,sl(s,i,m,6);break;case 8:ep(),Ct=6;break e;default:throw Error(r(462))}}fT();break}catch(te){mv(s,te)}while(!0);return Or=Fa=null,q.H=u,q.A=f,ot=a,qe!==null?0:(gt=null,Qe=0,Ju(),Ct)}function fT(){for(;qe!==null&&!_o();)yv(qe)}function yv(s){var i=Hx(s.alternate,s,qr);s.memoizedProps=s.pendingProps,i===null?kd(s):qe=i}function xv(s){var i=s,a=i.alternate;switch(i.tag){case 15:case 0:i=Vx(a,i,i.pendingProps,i.type,void 0,Qe);break;case 11:i=Vx(a,i,i.pendingProps,i.type.render,i.ref,Qe);break;case 5:ym(i);default:Gx(a,i),i=qe=vy(i,qr),i=Hx(a,i,qr)}s.memoizedProps=s.pendingProps,i===null?kd(s):qe=i}function sl(s,i,a,u){Or=Fa=null,ym(i),Yo=null,Ec=0;var f=i.return;try{if(nT(s,f,i,a,Qe)){Ct=1,Ed(s,hs(a,s.current)),qe=null;return}}catch(m){if(f!==null)throw qe=f,m;Ct=1,Ed(s,hs(a,s.current)),qe=null;return}i.flags&32768?(nt||u===1?s=!0:Zo||(Qe&536870912)!==0?s=!1:(Ci=s=!0,(u===2||u===9||u===3||u===6)&&(u=gs.current,u!==null&&u.tag===13&&(u.flags|=16384))),vv(i,s)):kd(i)}function kd(s){var i=s;do{if((i.flags&32768)!==0){vv(i,Ci);return}s=i.return;var a=rT(i.alternate,i,qr);if(a!==null){qe=a;return}if(i=i.sibling,i!==null){qe=i;return}qe=i=s}while(i!==null);Ct===0&&(Ct=5)}function vv(s,i){do{var a=iT(s.alternate,s);if(a!==null){a.flags&=32767,qe=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(s=s.sibling,s!==null)){qe=s;return}qe=s=a}while(s!==null);Ct=6,qe=null}function wv(s,i,a,u,f,m,b,E,P){s.cancelPendingCommit=null;do Dd();while(hn!==0);if((ot&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(m=i.lanes|i.childLanes,m|=Gf,de(s,a,m,b,E,P),s===gt&&(qe=gt=null,Qe=0),el=i,ki=s,tl=a,Wm=m,Zm=f,uv=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,yT(ls,function(){return Tv(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=q.T,q.T=null,f=re.p,re.p=2,b=ot,ot|=4;try{aT(s,i,a)}finally{ot=b,re.p=f,q.T=u}}hn=1,bv(),_v(),Ev()}}function bv(){if(hn===1){hn=0;var s=ki,i=el,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=q.T,q.T=null;var u=re.p;re.p=2;var f=ot;ot|=4;try{sv(i,s);var m=mp,b=cy(s.containerInfo),E=m.focusedElem,P=m.selectionRange;if(b!==E&&E&&E.ownerDocument&&ly(E.ownerDocument.documentElement,E)){if(P!==null&&zf(E)){var Y=P.start,te=P.end;if(te===void 0&&(te=Y),"selectionStart"in E)E.selectionStart=Y,E.selectionEnd=Math.min(te,E.value.length);else{var ie=E.ownerDocument||document,X=ie&&ie.defaultView||window;if(X.getSelection){var W=X.getSelection(),ke=E.textContent.length,je=Math.min(P.start,ke),ft=P.end===void 0?je:Math.min(P.end,ke);!W.extend&&je>ft&&(b=ft,ft=je,je=b);var H=oy(E,je),B=oy(E,ft);if(H&&B&&(W.rangeCount!==1||W.anchorNode!==H.node||W.anchorOffset!==H.offset||W.focusNode!==B.node||W.focusOffset!==B.offset)){var G=ie.createRange();G.setStart(H.node,H.offset),W.removeAllRanges(),je>ft?(W.addRange(G),W.extend(B.node,B.offset)):(G.setEnd(B.node,B.offset),W.addRange(G))}}}}for(ie=[],W=E;W=W.parentNode;)W.nodeType===1&&ie.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ie.length;E++){var ne=ie[E];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}$d=!!fp,mp=fp=null}finally{ot=f,re.p=u,q.T=a}}s.current=i,hn=2}}function _v(){if(hn===2){hn=0;var s=ki,i=el,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=q.T,q.T=null;var u=re.p;re.p=2;var f=ot;ot|=4;try{Jx(s,i.alternate,i)}finally{ot=f,re.p=u,q.T=a}}hn=3}}function Ev(){if(hn===4||hn===3){hn=0,da();var s=ki,i=el,a=tl,u=uv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?hn=5:(hn=0,el=ki=null,Nv(s,s.pendingLanes));var f=s.pendingLanes;if(f===0&&(Ii=null),_t(a),i=i.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Gs,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=q.T,f=re.p,re.p=2,q.T=null;try{for(var m=s.onRecoverableError,b=0;b<u.length;b++){var E=u[b];m(E.value,{componentStack:E.stack})}}finally{q.T=i,re.p=f}}(tl&3)!==0&&Dd(),ir(s),f=s.pendingLanes,(a&4194090)!==0&&(f&42)!==0?s===Jm?kc++:(kc=0,Jm=s):kc=0,Dc(0)}}function Nv(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,hc(i)))}function Dd(s){return bv(),_v(),Ev(),Tv()}function Tv(){if(hn!==5)return!1;var s=ki,i=Wm;Wm=0;var a=_t(tl),u=q.T,f=re.p;try{re.p=32>a?32:a,q.T=null,a=Zm,Zm=null;var m=ki,b=tl;if(hn=0,el=ki=null,tl=0,(ot&6)!==0)throw Error(r(331));var E=ot;if(ot|=4,lv(m.current),iv(m,m.current,b,a),ot=E,Dc(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Gs,m)}catch{}return!0}finally{re.p=f,q.T=u,Nv(s,i)}}function Av(s,i,a){i=hs(a,i),i=Im(s.stateNode,i,2),s=_i(s,i,2),s!==null&&(j(s,2),ir(s))}function mt(s,i,a){if(s.tag===3)Av(s,s,a);else for(;i!==null;){if(i.tag===3){Av(i,s,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ii===null||!Ii.has(u))){s=hs(a,s),a=Rx(2),u=_i(i,a,2),u!==null&&(Ix(a,u,i,s),j(u,2),ir(u));break}}i=i.return}}function sp(s,i,a){var u=s.pingCache;if(u===null){u=s.pingCache=new cT;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(a)||(Km=!0,f.add(a),s=mT.bind(null,s,i,a),i.then(s,s))}function mT(s,i,a){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,gt===s&&(Qe&a)===a&&(Ct===4||Ct===3&&(Qe&62914560)===Qe&&300>yn()-Xm?(ot&2)===0&&nl(s,0):Ym|=a,Jo===Qe&&(Jo=0)),ir(s)}function jv(s,i){i===0&&(i=Ts()),s=Vo(s,i),s!==null&&(j(s,i),ir(s))}function pT(s){var i=s.memoizedState,a=0;i!==null&&(a=i.retryLane),jv(s,a)}function gT(s,i){var a=0;switch(s.tag){case 13:var u=s.stateNode,f=s.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),jv(s,a)}function yT(s,i){return _r(s,i)}var Pd=null,rl=null,rp=!1,Od=!1,ip=!1,Qa=0;function ir(s){s!==rl&&s.next===null&&(rl===null?Pd=rl=s:rl=rl.next=s),Od=!0,rp||(rp=!0,vT())}function Dc(s,i){if(!ip&&Od){ip=!0;do for(var a=!1,u=Pd;u!==null;){if(s!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var b=u.suspendedLanes,E=u.pingedLanes;m=(1<<31-Wt(42|s)+1)-1,m&=f&~(b&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Iv(u,m))}else m=Qe,m=Ze(u,u===gt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Ns(u,m)||(a=!0,Iv(u,m));u=u.next}while(a);ip=!1}}function xT(){Sv()}function Sv(){Od=rp=!1;var s=0;Qa!==0&&(jT()&&(s=Qa),Qa=0);for(var i=yn(),a=null,u=Pd;u!==null;){var f=u.next,m=Cv(u,i);m===0?(u.next=null,a===null?Pd=f:a.next=f,f===null&&(rl=a)):(a=u,(s!==0||(m&3)!==0)&&(Od=!0)),u=f}Dc(s)}function Cv(s,i){for(var a=s.suspendedLanes,u=s.pingedLanes,f=s.expirationTimes,m=s.pendingLanes&-62914561;0<m;){var b=31-Wt(m),E=1<<b,P=f[b];P===-1?((E&a)===0||(E&u)!==0)&&(f[b]=Tr(E,i)):P<=i&&(s.expiredLanes|=E),m&=~E}if(i=gt,a=Qe,a=Ze(s,s===i?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,a===0||s===i&&(lt===2||lt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&oi(u),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||Ns(s,a)){if(i=a&-a,i===s.callbackPriority)return i;switch(u!==null&&oi(u),_t(a)){case 2:case 8:a=kt;break;case 32:a=ls;break;case 268435456:a=fa;break;default:a=ls}return u=Rv.bind(null,s),a=_r(a,u),s.callbackPriority=i,s.callbackNode=a,i}return u!==null&&u!==null&&oi(u),s.callbackPriority=2,s.callbackNode=null,2}function Rv(s,i){if(hn!==0&&hn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(Dd()&&s.callbackNode!==a)return null;var u=Qe;return u=Ze(s,s===gt?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(hv(s,u,i),Cv(s,yn()),s.callbackNode!=null&&s.callbackNode===a?Rv.bind(null,s):null)}function Iv(s,i){if(Dd())return null;hv(s,i,!0)}function vT(){CT(function(){(ot&6)!==0?_r(It,xT):Sv()})}function ap(){return Qa===0&&(Qa=li()),Qa}function kv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ss(""+s)}function Dv(s,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,s.id&&a.setAttribute("form",s.id),i.parentNode.insertBefore(a,i),s=new FormData(s),a.parentNode.removeChild(a),s}function wT(s,i,a,u,f){if(i==="submit"&&a&&a.stateNode===f){var m=kv((f[un]||null).action),b=u.submitter;b&&(i=(i=b[un]||null)?kv(i.formAction):b.getAttribute("formAction"),i!==null&&(m=i,b=null));var E=new Sa("action","action",null,u,f);s.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qa!==0){var P=b?Dv(f,b):new FormData(f);Am(a,{pending:!0,data:P,method:f.method,action:m},null,P)}}else typeof m=="function"&&(E.preventDefault(),P=b?Dv(f,b):new FormData(f),Am(a,{pending:!0,data:P,method:f.method,action:m},m,P))},currentTarget:f}]})}}for(var op=0;op<$f.length;op++){var lp=$f[op],bT=lp.toLowerCase(),_T=lp[0].toUpperCase()+lp.slice(1);ks(bT,"on"+_T)}ks(hy,"onAnimationEnd"),ks(fy,"onAnimationIteration"),ks(my,"onAnimationStart"),ks("dblclick","onDoubleClick"),ks("focusin","onFocus"),ks("focusout","onBlur"),ks(UN,"onTransitionRun"),ks(BN,"onTransitionStart"),ks(zN,"onTransitionCancel"),ks(py,"onTransitionEnd"),Ws("onMouseEnter",["mouseout","mouseover"]),Ws("onMouseLeave",["mouseout","mouseover"]),Ws("onPointerEnter",["pointerout","pointerover"]),Ws("onPointerLeave",["pointerout","pointerover"]),Xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ET=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pc));function Pv(s,i){i=(i&4)!==0;for(var a=0;a<s.length;a++){var u=s[a],f=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var b=u.length-1;0<=b;b--){var E=u[b],P=E.instance,Y=E.currentTarget;if(E=E.listener,P!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=Y;try{m(f)}catch(te){_d(te)}f.currentTarget=null,m=P}else for(b=0;b<u.length;b++){if(E=u[b],P=E.instance,Y=E.currentTarget,E=E.listener,P!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=Y;try{m(f)}catch(te){_d(te)}f.currentTarget=null,m=P}}}}function He(s,i){var a=i[pa];a===void 0&&(a=i[pa]=new Set);var u=s+"__bubble";a.has(u)||(Ov(i,s,2,!1),a.add(u))}function cp(s,i,a){var u=0;i&&(u|=4),Ov(a,s,u,i)}var Md="_reactListening"+Math.random().toString(36).slice(2);function up(s){if(!s[Md]){s[Md]=!0,Lu.forEach(function(a){a!=="selectionchange"&&(ET.has(a)||cp(a,!1,s),cp(a,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Md]||(i[Md]=!0,cp("selectionchange",!1,i))}}function Ov(s,i,a,u){switch(iw(i)){case 2:var f=XT;break;case 8:f=WT;break;default:f=Np}a=f.bind(null,i,a,s),f=void 0,!Rr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?s.addEventListener(i,a,{capture:!0,passive:f}):s.addEventListener(i,a,!0):f!==void 0?s.addEventListener(i,a,{passive:f}):s.addEventListener(i,a,!1)}function dp(s,i,a,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var E=u.stateNode.containerInfo;if(E===f)break;if(b===4)for(b=u.return;b!==null;){var P=b.tag;if((P===3||P===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;E!==null;){if(b=Ys(E),b===null)return;if(P=b.tag,P===5||P===6||P===26||P===27){u=m=b;continue e}E=E.parentNode}}u=u.return}Ta(function(){var Y=m,te=Wl(a),ie=[];e:{var X=gy.get(s);if(X!==void 0){var W=Sa,ke=s;switch(s){case"keypress":if(Aa(a)===0)break e;case"keydown":case"keyup":W=Po;break;case"focusin":ke="focus",W=Io;break;case"focusout":ke="blur",W=Io;break;case"beforeblur":case"afterblur":W=Io;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=xi;break;case hy:case fy:case my:W=Jl;break;case py:W=x;break;case"scroll":case"scrollend":W=Ra;break;case"wheel":W=A;break;case"copy":case"cut":case"paste":W=Gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=nc;break;case"toggle":case"beforetoggle":W=Z}var je=(i&4)!==0,ft=!je&&(s==="scroll"||s==="scrollend"),H=je?X!==null?X+"Capture":null:X;je=[];for(var B=Y,G;B!==null;){var ne=B;if(G=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||G===null||H===null||(ne=gi(B,H),ne!=null&&je.push(Oc(B,ne,G))),ft)break;B=B.return}0<je.length&&(X=new W(X,ke,null,a,te),ie.push({event:X,listeners:je}))}}if((i&7)===0){e:{if(X=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",X&&a!==Xl&&(ke=a.relatedTarget||a.fromElement)&&(Ys(ke)||ke[Ar]))break e;if((W||X)&&(X=te.window===te?te:(X=te.ownerDocument)?X.defaultView||X.parentWindow:window,W?(ke=a.relatedTarget||a.toElement,W=Y,ke=ke?Ys(ke):null,ke!==null&&(ft=c(ke),je=ke.tag,ke!==ft||je!==5&&je!==27&&je!==6)&&(ke=null)):(W=null,ke=Y),W!==ke)){if(je=Da,ne="onMouseLeave",H="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(je=nc,ne="onPointerLeave",H="onPointerEnter",B="pointer"),ft=W==null?X:ui(W),G=ke==null?X:ui(ke),X=new je(ne,B+"leave",W,a,te),X.target=ft,X.relatedTarget=G,ne=null,Ys(te)===Y&&(je=new je(H,B+"enter",ke,a,te),je.target=G,je.relatedTarget=ft,ne=je),ft=ne,W&&ke)t:{for(je=W,H=ke,B=0,G=je;G;G=il(G))B++;for(G=0,ne=H;ne;ne=il(ne))G++;for(;0<B-G;)je=il(je),B--;for(;0<G-B;)H=il(H),G--;for(;B--;){if(je===H||H!==null&&je===H.alternate)break t;je=il(je),H=il(H)}je=null}else je=null;W!==null&&Mv(ie,X,W,je,!1),ke!==null&&ft!==null&&Mv(ie,ft,ke,je,!0)}}e:{if(X=Y?ui(Y):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var be=ty;else if(J0(X))if(ny)be=MN;else{be=PN;var Fe=DN}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Y&&So(Y.elementType)&&(be=ty):be=ON;if(be&&(be=be(s,Y))){ey(ie,be,a,te);break e}Fe&&Fe(s,X,Y),s==="focusout"&&Y&&X.type==="number"&&Y.memoizedProps.value!=null&&Kl(X,"number",X.value)}switch(Fe=Y?ui(Y):window,s){case"focusin":(J0(Fe)||Fe.contentEditable==="true")&&(Oo=Fe,Ff=Y,oc=null);break;case"focusout":oc=Ff=Oo=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,uy(ie,a,te);break;case"selectionchange":if(VN)break;case"keydown":case"keyup":uy(ie,a,te)}var _e;if(Oe)e:{switch(s){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Is?Cs(s,a)&&(Se="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(Mt&&a.locale!=="ko"&&(Is||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Is&&(_e=qu()):(ds=te,pt="value"in ds?ds.value:ds.textContent,Is=!0)),Fe=Ld(Y,Se),0<Fe.length&&(Se=new tc(Se,s,null,a,te),ie.push({event:Se,listeners:Fe}),_e?Se.data=_e:(_e=Rs(a),_e!==null&&(Se.data=_e)))),(_e=at?sc(s,a):RN(s,a))&&(Se=Ld(Y,"onBeforeInput"),0<Se.length&&(Fe=new tc("onBeforeInput","beforeinput",null,a,te),ie.push({event:Fe,listeners:Se}),Fe.data=_e)),wT(ie,s,Y,a,te)}Pv(ie,i)})}function Oc(s,i,a){return{instance:s,listener:i,currentTarget:a}}function Ld(s,i){for(var a=i+"Capture",u=[];s!==null;){var f=s,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=gi(s,a),f!=null&&u.unshift(Oc(s,f,m)),f=gi(s,i),f!=null&&u.push(Oc(s,f,m))),s.tag===3)return u;s=s.return}return[]}function il(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Mv(s,i,a,u,f){for(var m=i._reactName,b=[];a!==null&&a!==u;){var E=a,P=E.alternate,Y=E.stateNode;if(E=E.tag,P!==null&&P===u)break;E!==5&&E!==26&&E!==27||Y===null||(P=Y,f?(Y=gi(a,m),Y!=null&&b.unshift(Oc(a,Y,P))):f||(Y=gi(a,m),Y!=null&&b.push(Oc(a,Y,P)))),a=a.return}b.length!==0&&s.push({event:i,listeners:b})}var NT=/\r\n?/g,TT=/\u0000|\uFFFD/g;function Lv(s){return(typeof s=="string"?s:""+s).replace(NT,`
`).replace(TT,"")}function Vv(s,i){return i=Lv(i),Lv(s)===i}function Vd(){}function ht(s,i,a,u,f,m){switch(a){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||us(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&us(s,""+u);break;case"className":wa(s,"class",u);break;case"tabIndex":wa(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":wa(s,a,u);break;case"style":Ql(s,u,m);break;case"data":if(i!=="object"){wa(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||a!=="href")){s.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(a);break}u=Ss(""+u),s.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&ht(s,i,"name",f.name,f,null),ht(s,i,"formEncType",f.formEncType,f,null),ht(s,i,"formMethod",f.formMethod,f,null),ht(s,i,"formTarget",f.formTarget,f,null)):(ht(s,i,"encType",f.encType,f,null),ht(s,i,"method",f.method,f,null),ht(s,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(a);break}u=Ss(""+u),s.setAttribute(a,u);break;case"onClick":u!=null&&(s.onclick=Vd);break;case"onScroll":u!=null&&He("scroll",s);break;case"onScrollEnd":u!=null&&He("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=a}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}a=Ss(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(a,""+u):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":u===!0?s.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(a,u):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(a,u):s.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(a):s.setAttribute(a,u);break;case"popover":He("beforetoggle",s),He("toggle",s),va(s,"popover",u);break;case"xlinkActuate":cs(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":cs(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":cs(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":cs(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":cs(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":cs(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":cs(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":cs(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":cs(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":va(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Bu.get(a)||a,va(s,a,u))}}function hp(s,i,a,u,f,m){switch(a){case"style":Ql(s,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=a}}break;case"children":typeof u=="string"?us(s,u):(typeof u=="number"||typeof u=="bigint")&&us(s,""+u);break;case"onScroll":u!=null&&He("scroll",s);break;case"onScrollEnd":u!=null&&He("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Vd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ya.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),m=s[un]||null,m=m!=null?m[a]:null,typeof m=="function"&&s.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(i,u,f);break e}a in s?s[a]=u:u===!0?s.setAttribute(a,""):va(s,a,u)}}}function fn(s,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",s),He("load",s);var u=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var b=a[m];if(b!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ht(s,i,m,b,a,null)}}f&&ht(s,i,"srcSet",a.srcSet,a,null),u&&ht(s,i,"src",a.src,a,null);return;case"input":He("invalid",s);var E=m=b=f=null,P=null,Y=null;for(u in a)if(a.hasOwnProperty(u)){var te=a[u];if(te!=null)switch(u){case"name":f=te;break;case"type":b=te;break;case"checked":P=te;break;case"defaultChecked":Y=te;break;case"value":m=te;break;case"defaultValue":E=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,i));break;default:ht(s,i,u,te,a,null)}}Gl(s,m,E,P,Y,b,f,!1),fi(s);return;case"select":He("invalid",s),u=b=m=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":b=E;break;case"multiple":u=E;default:ht(s,i,f,E,a,null)}i=m,a=b,s.multiple=!!u,i!=null?mi(s,!!u,i,!1):a!=null&&mi(s,!!u,a,!0);return;case"textarea":He("invalid",s),m=f=u=null;for(b in a)if(a.hasOwnProperty(b)&&(E=a[b],E!=null))switch(b){case"value":u=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:ht(s,i,b,E,a,null)}Uu(s,u,f,m),fi(s);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(u=a[P],u!=null))switch(P){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ht(s,i,P,u,a,null)}return;case"dialog":He("beforetoggle",s),He("toggle",s),He("cancel",s),He("close",s);break;case"iframe":case"object":He("load",s);break;case"video":case"audio":for(u=0;u<Pc.length;u++)He(Pc[u],s);break;case"image":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"embed":case"source":case"link":He("error",s),He("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(u=a[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ht(s,i,Y,u,a,null)}return;default:if(So(i)){for(te in a)a.hasOwnProperty(te)&&(u=a[te],u!==void 0&&hp(s,i,te,u,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(u=a[E],u!=null&&ht(s,i,E,u,a,null))}function AT(s,i,a,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,E=null,P=null,Y=null,te=null;for(W in a){var ie=a[W];if(a.hasOwnProperty(W)&&ie!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":P=ie;default:u.hasOwnProperty(W)||ht(s,i,W,null,u,ie)}}for(var X in u){var W=u[X];if(ie=a[X],u.hasOwnProperty(X)&&(W!=null||ie!=null))switch(X){case"type":m=W;break;case"name":f=W;break;case"checked":Y=W;break;case"defaultChecked":te=W;break;case"value":b=W;break;case"defaultValue":E=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,i));break;default:W!==ie&&ht(s,i,X,W,u,ie)}}$l(s,b,E,P,Y,te,m,f);return;case"select":W=b=E=X=null;for(m in a)if(P=a[m],a.hasOwnProperty(m)&&P!=null)switch(m){case"value":break;case"multiple":W=P;default:u.hasOwnProperty(m)||ht(s,i,m,null,u,P)}for(f in u)if(m=u[f],P=a[f],u.hasOwnProperty(f)&&(m!=null||P!=null))switch(f){case"value":X=m;break;case"defaultValue":E=m;break;case"multiple":b=m;default:m!==P&&ht(s,i,f,m,u,P)}i=E,a=b,u=W,X!=null?mi(s,!!a,X,!1):!!u!=!!a&&(i!=null?mi(s,!!a,i,!0):mi(s,!!a,a?[]:"",!1));return;case"textarea":W=X=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ht(s,i,E,null,u,f)}for(b in u)if(f=u[b],m=a[b],u.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":X=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&ht(s,i,b,f,u,m)}Vu(s,X,W);return;case"option":for(var ke in a)if(X=a[ke],a.hasOwnProperty(ke)&&X!=null&&!u.hasOwnProperty(ke))switch(ke){case"selected":s.selected=!1;break;default:ht(s,i,ke,null,u,X)}for(P in u)if(X=u[P],W=a[P],u.hasOwnProperty(P)&&X!==W&&(X!=null||W!=null))switch(P){case"selected":s.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ht(s,i,P,X,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in a)X=a[je],a.hasOwnProperty(je)&&X!=null&&!u.hasOwnProperty(je)&&ht(s,i,je,null,u,X);for(Y in u)if(X=u[Y],W=a[Y],u.hasOwnProperty(Y)&&X!==W&&(X!=null||W!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,i));break;default:ht(s,i,Y,X,u,W)}return;default:if(So(i)){for(var ft in a)X=a[ft],a.hasOwnProperty(ft)&&X!==void 0&&!u.hasOwnProperty(ft)&&hp(s,i,ft,void 0,u,X);for(te in u)X=u[te],W=a[te],!u.hasOwnProperty(te)||X===W||X===void 0&&W===void 0||hp(s,i,te,X,u,W);return}}for(var H in a)X=a[H],a.hasOwnProperty(H)&&X!=null&&!u.hasOwnProperty(H)&&ht(s,i,H,null,u,X);for(ie in u)X=u[ie],W=a[ie],!u.hasOwnProperty(ie)||X===W||X==null&&W==null||ht(s,i,ie,X,u,W)}var fp=null,mp=null;function Ud(s){return s.nodeType===9?s:s.ownerDocument}function Uv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bv(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function pp(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var gp=null;function jT(){var s=window.event;return s&&s.type==="popstate"?s===gp?!1:(gp=s,!0):(gp=null,!1)}var zv=typeof setTimeout=="function"?setTimeout:void 0,ST=typeof clearTimeout=="function"?clearTimeout:void 0,Fv=typeof Promise=="function"?Promise:void 0,CT=typeof queueMicrotask=="function"?queueMicrotask:typeof Fv<"u"?function(s){return Fv.resolve(null).then(s).catch(RT)}:zv;function RT(s){setTimeout(function(){throw s})}function Pi(s){return s==="head"}function qv(s,i){var a=i,u=0,f=0;do{var m=a.nextSibling;if(s.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<u&&8>u){a=u;var b=s.ownerDocument;if(a&1&&Mc(b.documentElement),a&2&&Mc(b.body),a&4)for(a=b.head,Mc(a),b=a.firstChild;b;){var E=b.nextSibling,P=b.nodeName;b[ci]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=E}}if(f===0){s.removeChild(m),Hc(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:u=a.charCodeAt(0)-48;else u=0;a=m}while(a);Hc(i)}function yp(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":yp(a),Eo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function IT(s,i,a,u){for(;s.nodeType===1;){var f=a;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[ci])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(m=s.getAttribute("rel"),m==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(m!==f.rel||s.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||s.getAttribute("title")!==(f.title==null?null:f.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(m=s.getAttribute("src"),(m!==(f.src==null?null:f.src)||s.getAttribute("type")!==(f.type==null?null:f.type)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&s.getAttribute("name")===m)return s}else return s;if(s=Ps(s.nextSibling),s===null)break}return null}function kT(s,i,a){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=Ps(s.nextSibling),s===null))return null;return s}function xp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function DT(s,i){var a=s.ownerDocument;if(s.data!=="$?"||a.readyState==="complete")i();else{var u=function(){i(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Ps(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return s}var vp=null;function Hv(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return s;i--}else a==="/$"&&i++}s=s.previousSibling}return null}function $v(s,i,a){switch(i=Ud(a),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Mc(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);Eo(s)}var xs=new Map,Gv=new Set;function Bd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Hr=re.d;re.d={f:PT,r:OT,D:MT,C:LT,L:VT,m:UT,X:zT,S:BT,M:FT};function PT(){var s=Hr.f(),i=Id();return s||i}function OT(s){var i=Qs(s);i!==null&&i.tag===5&&i.type==="form"?hx(i):Hr.r(s)}var al=typeof document>"u"?null:document;function Kv(s,i,a){var u=al;if(u&&typeof i=="string"&&i){var f=sn(i);f='link[rel="'+s+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Gv.has(f)||(Gv.add(f),s={rel:s,crossOrigin:a,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),fn(i,"link",s),Ot(i),u.head.appendChild(i)))}}function MT(s){Hr.D(s),Kv("dns-prefetch",s,null)}function LT(s,i){Hr.C(s,i),Kv("preconnect",s,i)}function VT(s,i,a){Hr.L(s,i,a);var u=al;if(u&&s&&i){var f='link[rel="preload"][as="'+sn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+sn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+sn(a.imageSizes)+'"]')):f+='[href="'+sn(s)+'"]';var m=f;switch(i){case"style":m=ol(s);break;case"script":m=ll(s)}xs.has(m)||(s=v({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:s,as:i},a),xs.set(m,s),u.querySelector(f)!==null||i==="style"&&u.querySelector(Lc(m))||i==="script"&&u.querySelector(Vc(m))||(i=u.createElement("link"),fn(i,"link",s),Ot(i),u.head.appendChild(i)))}}function UT(s,i){Hr.m(s,i);var a=al;if(a&&s){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+sn(u)+'"][href="'+sn(s)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ll(s)}if(!xs.has(m)&&(s=v({rel:"modulepreload",href:s},i),xs.set(m,s),a.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Vc(m)))return}u=a.createElement("link"),fn(u,"link",s),Ot(u),a.head.appendChild(u)}}}function BT(s,i,a){Hr.S(s,i,a);var u=al;if(u&&s){var f=di(u).hoistableStyles,m=ol(s);i=i||"default";var b=f.get(m);if(!b){var E={loading:0,preload:null};if(b=u.querySelector(Lc(m)))E.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":i},a),(a=xs.get(m))&&wp(s,a);var P=b=u.createElement("link");Ot(P),fn(P,"link",s),P._p=new Promise(function(Y,te){P.onload=Y,P.onerror=te}),P.addEventListener("load",function(){E.loading|=1}),P.addEventListener("error",function(){E.loading|=2}),E.loading|=4,zd(b,i,u)}b={type:"stylesheet",instance:b,count:1,state:E},f.set(m,b)}}}function zT(s,i){Hr.X(s,i);var a=al;if(a&&s){var u=di(a).hoistableScripts,f=ll(s),m=u.get(f);m||(m=a.querySelector(Vc(f)),m||(s=v({src:s,async:!0},i),(i=xs.get(f))&&bp(s,i),m=a.createElement("script"),Ot(m),fn(m,"link",s),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function FT(s,i){Hr.M(s,i);var a=al;if(a&&s){var u=di(a).hoistableScripts,f=ll(s),m=u.get(f);m||(m=a.querySelector(Vc(f)),m||(s=v({src:s,async:!0,type:"module"},i),(i=xs.get(f))&&bp(s,i),m=a.createElement("script"),Ot(m),fn(m,"link",s),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Yv(s,i,a,u){var f=(f=fe.current)?Bd(f):null;if(!f)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ol(a.href),a=di(f).hoistableStyles,u=a.get(i),u||(u={type:"style",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=ol(a.href);var m=di(f).hoistableStyles,b=m.get(s);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(s,b),(m=f.querySelector(Lc(s)))&&!m._p&&(b.instance=m,b.state.loading=5),xs.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},xs.set(s,a),m||qT(f,s,a,b.state))),i&&u===null)throw Error(r(528,""));return b}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ll(a),a=di(f).hoistableScripts,u=a.get(i),u||(u={type:"script",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function ol(s){return'href="'+sn(s)+'"'}function Lc(s){return'link[rel="stylesheet"]['+s+"]"}function Qv(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function qT(s,i,a,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),fn(i,"link",a),Ot(i),s.head.appendChild(i))}function ll(s){return'[src="'+sn(s)+'"]'}function Vc(s){return"script[async]"+s}function Xv(s,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+sn(a.href)+'"]');if(u)return i.instance=u,Ot(u),u;var f=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Ot(u),fn(u,"style",f),zd(u,a.precedence,s),i.instance=u;case"stylesheet":f=ol(a.href);var m=s.querySelector(Lc(f));if(m)return i.state.loading|=4,i.instance=m,Ot(m),m;u=Qv(a),(f=xs.get(f))&&wp(u,f),m=(s.ownerDocument||s).createElement("link"),Ot(m);var b=m;return b._p=new Promise(function(E,P){b.onload=E,b.onerror=P}),fn(m,"link",u),i.state.loading|=4,zd(m,a.precedence,s),i.instance=m;case"script":return m=ll(a.src),(f=s.querySelector(Vc(m)))?(i.instance=f,Ot(f),f):(u=a,(f=xs.get(m))&&(u=v({},a),bp(u,f)),s=s.ownerDocument||s,f=s.createElement("script"),Ot(f),fn(f,"link",u),s.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,zd(u,a.precedence,s));return i.instance}function zd(s,i,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,b=0;b<u.length;b++){var E=u[b];if(E.dataset.precedence===i)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(s,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(s,i.firstChild))}function wp(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function bp(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Fd=null;function Wv(s,i,a){if(Fd===null){var u=new Map,f=Fd=new Map;f.set(a,u)}else f=Fd,u=f.get(a),u||(u=new Map,f.set(a,u));if(u.has(s))return u;for(u.set(s,null),a=a.getElementsByTagName(s),f=0;f<a.length;f++){var m=a[f];if(!(m[ci]||m[Pt]||s==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(i)||"";b=s+b;var E=u.get(b);E?E.push(m):u.set(b,[m])}}return u}function Zv(s,i,a){s=s.ownerDocument||s,s.head.insertBefore(a,i==="title"?s.querySelector("head > title"):null)}function HT(s,i,a){if(a===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Jv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Uc=null;function $T(){}function GT(s,i,a){if(Uc===null)throw Error(r(475));var u=Uc;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=ol(a.href),m=s.querySelector(Lc(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=qd.bind(u),s.then(u,u)),i.state.loading|=4,i.instance=m,Ot(m);return}m=s.ownerDocument||s,a=Qv(a),(f=xs.get(f))&&wp(a,f),m=m.createElement("link"),Ot(m);var b=m;b._p=new Promise(function(E,P){b.onload=E,b.onerror=P}),fn(m,"link",a),i.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=qd.bind(u),s.addEventListener("load",i),s.addEventListener("error",i))}}function KT(){if(Uc===null)throw Error(r(475));var s=Uc;return s.stylesheets&&s.count===0&&_p(s,s.stylesheets),0<s.count?function(i){var a=setTimeout(function(){if(s.stylesheets&&_p(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=i,function(){s.unsuspend=null,clearTimeout(a)}}:null}function qd(){if(this.count--,this.count===0){if(this.stylesheets)_p(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Hd=null;function _p(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Hd=new Map,i.forEach(YT,s),Hd=null,qd.call(s))}function YT(s,i){if(!(i.state.loading&4)){var a=Hd.get(s);if(a)var u=a.get(null);else{a=new Map,Hd.set(s,a);for(var f=s.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),u=b)}u&&a.set(null,u)}f=i.instance,b=f.getAttribute("data-precedence"),m=a.get(b)||u,m===u&&a.set(null,f),a.set(b,f),this.count++,u=qd.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(f,s.firstChild)),i.state.loading|=4}}var Bc={$$typeof:z,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function QT(s,i,a,u,f,m,b,E){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ks(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ks(0),this.hiddenUpdates=Ks(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function ew(s,i,a,u,f,m,b,E,P,Y,te,ie){return s=new QT(s,i,a,b,E,P,Y,ie),i=1,m===!0&&(i|=24),m=Wn(3,null,null,i),s.current=m,m.stateNode=s,i=sm(),i.refCount++,s.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:a,cache:i},om(m),s}function tw(s){return s?(s=Uo,s):Uo}function nw(s,i,a,u,f,m){f=tw(f),u.context===null?u.context=f:u.pendingContext=f,u=bi(i),u.payload={element:a},m=m===void 0?null:m,m!==null&&(u.callback=m),a=_i(s,u,i),a!==null&&(ns(a,s,i),gc(a,s,i))}function sw(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<i?a:i}}function Ep(s,i){sw(s,i),(s=s.alternate)&&sw(s,i)}function rw(s){if(s.tag===13){var i=Vo(s,67108864);i!==null&&ns(i,s,67108864),Ep(s,67108864)}}var $d=!0;function XT(s,i,a,u){var f=q.T;q.T=null;var m=re.p;try{re.p=2,Np(s,i,a,u)}finally{re.p=m,q.T=f}}function WT(s,i,a,u){var f=q.T;q.T=null;var m=re.p;try{re.p=8,Np(s,i,a,u)}finally{re.p=m,q.T=f}}function Np(s,i,a,u){if($d){var f=Tp(u);if(f===null)dp(s,i,u,Gd,a),aw(s,u);else if(JT(f,s,i,a,u))u.stopPropagation();else if(aw(s,u),i&4&&-1<ZT.indexOf(s)){for(;f!==null;){var m=Qs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Dt(m.pendingLanes);if(b!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var P=1<<31-Wt(b);E.entanglements[1]|=P,b&=~P}ir(m),(ot&6)===0&&(Cd=yn()+500,Dc(0))}}break;case 13:E=Vo(m,2),E!==null&&ns(E,m,2),Id(),Ep(m,2)}if(m=Tp(u),m===null&&dp(s,i,u,Gd,a),m===f)break;f=m}f!==null&&u.stopPropagation()}else dp(s,i,u,null,a)}}function Tp(s){return s=Wl(s),Ap(s)}var Gd=null;function Ap(s){if(Gd=null,s=Ys(s),s!==null){var i=c(s);if(i===null)s=null;else{var a=i.tag;if(a===13){if(s=h(i),s!==null)return s;s=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Gd=s,null}function iw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ha()){case It:return 2;case kt:return 8;case ls:case We:return 32;case fa:return 268435456;default:return 32}default:return 32}}var jp=!1,Oi=null,Mi=null,Li=null,zc=new Map,Fc=new Map,Vi=[],ZT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function aw(s,i){switch(s){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":zc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(i.pointerId)}}function qc(s,i,a,u,f,m){return s===null||s.nativeEvent!==m?(s={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=Qs(i),i!==null&&rw(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),s)}function JT(s,i,a,u,f){switch(i){case"focusin":return Oi=qc(Oi,s,i,a,u,f),!0;case"dragenter":return Mi=qc(Mi,s,i,a,u,f),!0;case"mouseover":return Li=qc(Li,s,i,a,u,f),!0;case"pointerover":var m=f.pointerId;return zc.set(m,qc(zc.get(m)||null,s,i,a,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Fc.set(m,qc(Fc.get(m)||null,s,i,a,u,f)),!0}return!1}function ow(s){var i=Ys(s.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){s.blockedOn=i,Ht(s.priority,function(){if(a.tag===13){var u=ts();u=bt(u);var f=Vo(a,u);f!==null&&ns(f,a,u),Ep(a,u)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Kd(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var a=Tp(s.nativeEvent);if(a===null){a=s.nativeEvent;var u=new a.constructor(a.type,a);Xl=u,a.target.dispatchEvent(u),Xl=null}else return i=Qs(a),i!==null&&rw(i),s.blockedOn=a,!1;i.shift()}return!0}function lw(s,i,a){Kd(s)&&a.delete(i)}function eA(){jp=!1,Oi!==null&&Kd(Oi)&&(Oi=null),Mi!==null&&Kd(Mi)&&(Mi=null),Li!==null&&Kd(Li)&&(Li=null),zc.forEach(lw),Fc.forEach(lw)}function Yd(s,i){s.blockedOn===i&&(s.blockedOn=null,jp||(jp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,eA)))}var Qd=null;function cw(s){Qd!==s&&(Qd=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Qd===s&&(Qd=null);for(var i=0;i<s.length;i+=3){var a=s[i],u=s[i+1],f=s[i+2];if(typeof u!="function"){if(Ap(u||a)===null)continue;break}var m=Qs(a);m!==null&&(s.splice(i,3),i-=3,Am(m,{pending:!0,data:f,method:a.method,action:u},u,f))}}))}function Hc(s){function i(P){return Yd(P,s)}Oi!==null&&Yd(Oi,s),Mi!==null&&Yd(Mi,s),Li!==null&&Yd(Li,s),zc.forEach(i),Fc.forEach(i);for(var a=0;a<Vi.length;a++){var u=Vi[a];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Vi.length&&(a=Vi[0],a.blockedOn===null);)ow(a),a.blockedOn===null&&Vi.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var f=a[u],m=a[u+1],b=f[un]||null;if(typeof m=="function")b||cw(a);else if(b){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[un]||null)E=b.formAction;else if(Ap(f)!==null)continue}else E=b.action;typeof E=="function"?a[u+1]=E:(a.splice(u,3),u-=3),cw(a)}}}function Sp(s){this._internalRoot=s}Xd.prototype.render=Sp.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,u=ts();nw(a,u,s,i,null,null)},Xd.prototype.unmount=Sp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;nw(s.current,2,null,s,null,null),Id(),i[Ar]=null}};function Xd(s){this._internalRoot=s}Xd.prototype.unstable_scheduleHydration=function(s){if(s){var i=it();s={blockedOn:null,target:s,priority:i};for(var a=0;a<Vi.length&&i!==0&&i<Vi[a].priority;a++);Vi.splice(a,0,s),a===0&&ow(s)}};var uw=e.version;if(uw!=="19.1.1")throw Error(r(527,uw,"19.1.1"));re.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=g(i),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var tA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{Gs=Wd.inject(tA),qt=Wd}catch{}}return Gc.createRoot=function(s,i){if(!o(s))throw Error(r(299));var a=!1,u="",f=Ax,m=jx,b=Sx,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=ew(s,1,!1,null,null,a,u,f,m,b,E,null),s[Ar]=i.current,up(s),new Sp(i)},Gc.hydrateRoot=function(s,i,a){if(!o(s))throw Error(r(299));var u=!1,f="",m=Ax,b=jx,E=Sx,P=null,Y=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(P=a.unstable_transitionCallbacks),a.formState!==void 0&&(Y=a.formState)),i=ew(s,1,!0,i,a??null,u,f,m,b,E,P,Y),i.context=tw(null),a=i.current,u=ts(),u=bt(u),f=bi(u),f.callback=null,_i(a,f,u),a=u,i.current.lanes=a,j(i,a),ir(i),s[Ar]=i.current,up(s),new Xd(i)},Gc.version="19.1.1",Gc}var ww;function hA(){if(ww)return Ip.exports;ww=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ip.exports=dA(),Ip.exports}var fA=hA();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bw="popstate";function mA(t={}){function e(o,c){let{pathname:h="/",search:p="",hash:g=""}=uo(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),tg("",{pathname:h,search:p,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let h=o.document.querySelector("base"),p="";if(h&&h.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof c=="string"?c:au(c))}function r(o,c){bs(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return gA(e,n,r,t)}function Nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pA(){return Math.random().toString(36).substring(2,10)}function _w(t,e){return{usr:t.state,key:t.key,idx:e}}function tg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?uo(e):e,state:n,key:e&&e.key||r||pA()}}function au({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function uo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function gA(t,e,n,r={}){let{window:o=document.defaultView,v5Compat:c=!1}=r,h=o.history,p="POP",g=null,y=v();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function v(){return(h.state||{idx:null}).idx}function _(){p="POP";let I=v(),Q=I==null?null:I-y;y=I,g&&g({action:p,location:$.location,delta:Q})}function T(I,Q){p="PUSH";let F=tg($.location,I,Q);n&&n(F,I),y=v()+1;let z=_w(F,y),ce=$.createHref(F);try{h.pushState(z,"",ce)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;o.location.assign(ce)}c&&g&&g({action:p,location:$.location,delta:1})}function R(I,Q){p="REPLACE";let F=tg($.location,I,Q);n&&n(F,I),y=v();let z=_w(F,y),ce=$.createHref(F);h.replaceState(z,"",ce),c&&g&&g({action:p,location:$.location,delta:0})}function U(I){return yA(I)}let $={get action(){return p},get location(){return t(o,h)},listen(I){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(bw,_),g=I,()=>{o.removeEventListener(bw,_),g=null}},createHref(I){return e(o,I)},createURL:U,encodeLocation(I){let Q=U(I);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:T,replace:R,go(I){return h.go(I)}};return $}function yA(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Nt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:au(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function S2(t,e,n="/"){return xA(t,e,n,!1)}function xA(t,e,n,r){let o=typeof e=="string"?uo(e):e,c=Wr(o.pathname||"/",n);if(c==null)return null;let h=C2(t);vA(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=RA(c);p=SA(h[g],y,r)}return p}function C2(t,e=[],n=[],r="",o=!1){let c=(h,p,g=o,y)=>{let v={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&g)return;Nt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let _=Kr([r,v.relativePath]),T=n.concat(v);h.children&&h.children.length>0&&(Nt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),C2(h.children,e,T,_,g)),!(h.path==null&&!h.index)&&e.push({path:_,score:AA(_,h.index),routesMeta:T})};return t.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))c(h,p);else for(let g of R2(h.path))c(h,p,!0,g)}),e}function R2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let h=R2(r.join("/")),p=[];return p.push(...h.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...h),p.map(g=>t.startsWith("/")&&g===""?"/":g)}function vA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var wA=/^:[\w-]+$/,bA=3,_A=2,EA=1,NA=10,TA=-2,Ew=t=>t==="*";function AA(t,e){let n=t.split("/"),r=n.length;return n.some(Ew)&&(r+=TA),e&&(r+=_A),n.filter(o=>!Ew(o)).reduce((o,c)=>o+(wA.test(c)?bA:c===""?EA:NA),r)}function jA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function SA(t,e,n=!1){let{routesMeta:r}=t,o={},c="/",h=[];for(let p=0;p<r.length;++p){let g=r[p],y=p===r.length-1,v=c==="/"?e:e.slice(c.length)||"/",_=wh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},v),T=g.route;if(!_&&y&&n&&!r[r.length-1].route.index&&(_=wh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!_)return null;Object.assign(o,_.params),h.push({params:o,pathname:Kr([c,_.pathname]),pathnameBase:PA(Kr([c,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(c=Kr([c,_.pathnameBase]))}return h}function wh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CA(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((y,{paramName:v,isOptional:_},T)=>{if(v==="*"){let U=p[T]||"";h=c.slice(0,c.length-U.length).replace(/(.)\/+$/,"$1")}const R=p[T];return _&&!R?y[v]=void 0:y[v]=(R||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:h,pattern:t}}function CA(t,e=!1,n=!0){bs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function RA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bs(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Wr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function IA(t,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?uo(t):t;return{pathname:n?n.startsWith("/")?n:kA(n,e):e,search:OA(r),hash:MA(o)}}function kA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Op(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Pg(t){let e=DA(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Og(t,e,n,r=!1){let o;typeof t=="string"?o=uo(t):(o={...t},Nt(!o.pathname||!o.pathname.includes("?"),Op("?","pathname","search",o)),Nt(!o.pathname||!o.pathname.includes("#"),Op("#","pathname","hash",o)),Nt(!o.search||!o.search.includes("#"),Op("#","search","hash",o)));let c=t===""||o.pathname==="",h=c?"/":o.pathname,p;if(h==null)p=n;else{let _=e.length-1;if(!r&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),_-=1;o.pathname=T.join("/")}p=_>=0?e[_]:"/"}let g=IA(o,p),y=h&&h!=="/"&&h.endsWith("/"),v=(c||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||v)&&(g.pathname+="/"),g}var Kr=t=>t.join("/").replace(/\/\/+/g,"/"),PA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),OA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,MA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function LA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var I2=["POST","PUT","PATCH","DELETE"];new Set(I2);var VA=["GET",...I2];new Set(VA);var kl=D.createContext(null);kl.displayName="DataRouter";var ef=D.createContext(null);ef.displayName="DataRouterState";D.createContext(!1);var k2=D.createContext({isTransitioning:!1});k2.displayName="ViewTransition";var UA=D.createContext(new Map);UA.displayName="Fetchers";var BA=D.createContext(null);BA.displayName="Await";var Fs=D.createContext(null);Fs.displayName="Navigation";var gu=D.createContext(null);gu.displayName="Location";var qs=D.createContext({outlet:null,matches:[],isDataRoute:!1});qs.displayName="Route";var Mg=D.createContext(null);Mg.displayName="RouteError";function zA(t,{relative:e}={}){Nt(Dl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(Fs),{hash:o,pathname:c,search:h}=yu(t,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:Kr([n,c])),r.createHref({pathname:p,search:h,hash:o})}function Dl(){return D.useContext(gu)!=null}function oa(){return Nt(Dl(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(gu).location}var D2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function P2(t){D.useContext(Fs).static||D.useLayoutEffect(t)}function Hs(){let{isDataRoute:t}=D.useContext(qs);return t?tj():FA()}function FA(){Nt(Dl(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(kl),{basename:e,navigator:n}=D.useContext(Fs),{matches:r}=D.useContext(qs),{pathname:o}=oa(),c=JSON.stringify(Pg(r)),h=D.useRef(!1);return P2(()=>{h.current=!0}),D.useCallback((g,y={})=>{if(bs(h.current,D2),!h.current)return;if(typeof g=="number"){n.go(g);return}let v=Og(g,JSON.parse(c),o,y.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Kr([e,v.pathname])),(y.replace?n.replace:n.push)(v,y.state,y)},[e,n,c,o,t])}D.createContext(null);function qA(){let{matches:t}=D.useContext(qs),e=t[t.length-1];return e?e.params:{}}function yu(t,{relative:e}={}){let{matches:n}=D.useContext(qs),{pathname:r}=oa(),o=JSON.stringify(Pg(n));return D.useMemo(()=>Og(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function HA(t,e){return O2(t,e)}function O2(t,e,n,r,o){Nt(Dl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=D.useContext(Fs),{matches:h}=D.useContext(qs),p=h[h.length-1],g=p?p.params:{},y=p?p.pathname:"/",v=p?p.pathnameBase:"/",_=p&&p.route;{let F=_&&_.path||"";M2(y,!_||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let T=oa(),R;if(e){let F=typeof e=="string"?uo(e):e;Nt(v==="/"||F.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${F.pathname}" was given in the \`location\` prop.`),R=F}else R=T;let U=R.pathname||"/",$=U;if(v!=="/"){let F=v.replace(/^\//,"").split("/");$="/"+U.replace(/^\//,"").split("/").slice(F.length).join("/")}let I=S2(t,{pathname:$});bs(_||I!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),bs(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=QA(I&&I.map(F=>Object.assign({},F,{params:Object.assign({},g,F.params),pathname:Kr([v,c.encodeLocation?c.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?v:Kr([v,c.encodeLocation?c.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),h,n,r,o);return e&&Q?D.createElement(gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},Q):Q}function $A(){let t=ej(),e=LA(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",t),h=D.createElement(D.Fragment,null,D.createElement("p",null,"💿 Hey developer 👋"),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:c},"ErrorBoundary")," or"," ",D.createElement("code",{style:c},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:o},n):null,h)}var GA=D.createElement($A,null),KA=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?D.createElement(qs.Provider,{value:this.props.routeContext},D.createElement(Mg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function YA({routeContext:t,match:e,children:n}){let r=D.useContext(kl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(qs.Provider,{value:t},n)}function QA(t,e=[],n=null,r=null,o=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,h=n?.errors;if(h!=null){let y=c.findIndex(v=>v.route.id&&h?.[v.route.id]!==void 0);Nt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let p=!1,g=-1;if(n)for(let y=0;y<c.length;y++){let v=c[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=y),v.route.id){let{loaderData:_,errors:T}=n,R=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!T||T[v.route.id]===void 0);if(v.route.lazy||R){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((y,v,_)=>{let T,R=!1,U=null,$=null;n&&(T=h&&v.route.id?h[v.route.id]:void 0,U=v.route.errorElement||GA,p&&(g<0&&_===0?(M2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,$=null):g===_&&(R=!0,$=v.route.hydrateFallbackElement||null)));let I=e.concat(c.slice(0,_+1)),Q=()=>{let F;return T?F=U:R?F=$:v.route.Component?F=D.createElement(v.route.Component,null):v.route.element?F=v.route.element:F=y,D.createElement(YA,{match:v,routeContext:{outlet:y,matches:I,isDataRoute:n!=null},children:F})};return n&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?D.createElement(KA,{location:n.location,revalidation:n.revalidation,component:U,error:T,children:Q(),routeContext:{outlet:null,matches:I,isDataRoute:!0},unstable_onError:r}):Q()},null)}function Lg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XA(t){let e=D.useContext(kl);return Nt(e,Lg(t)),e}function WA(t){let e=D.useContext(ef);return Nt(e,Lg(t)),e}function ZA(t){let e=D.useContext(qs);return Nt(e,Lg(t)),e}function Vg(t){let e=ZA(t),n=e.matches[e.matches.length-1];return Nt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function JA(){return Vg("useRouteId")}function ej(){let t=D.useContext(Mg),e=WA("useRouteError"),n=Vg("useRouteError");return t!==void 0?t:e.errors?.[n]}function tj(){let{router:t}=XA("useNavigate"),e=Vg("useNavigate"),n=D.useRef(!1);return P2(()=>{n.current=!0}),D.useCallback(async(o,c={})=>{bs(n.current,D2),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...c}))},[t,e])}var Nw={};function M2(t,e,n){!e&&!Nw[t]&&(Nw[t]=!0,bs(!1,n))}D.memo(nj);function nj({routes:t,future:e,state:n,unstable_onError:r}){return O2(t,void 0,n,r,e)}function Mp({to:t,replace:e,state:n,relative:r}){Nt(Dl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=D.useContext(Fs);bs(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=D.useContext(qs),{pathname:h}=oa(),p=Hs(),g=Og(t,Pg(c),h,r==="path"),y=JSON.stringify(g);return D.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:r})},[p,y,r,e,n]),null}function kn(t){Nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sj({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:c=!1}){Nt(!Dl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=t.replace(/^\/*/,"/"),p=D.useMemo(()=>({basename:h,navigator:o,static:c,future:{}}),[h,o,c]);typeof n=="string"&&(n=uo(n));let{pathname:g="/",search:y="",hash:v="",state:_=null,key:T="default"}=n,R=D.useMemo(()=>{let U=Wr(g,h);return U==null?null:{location:{pathname:U,search:y,hash:v,state:_,key:T},navigationType:r}},[h,g,y,v,_,T,r]);return bs(R!=null,`<Router basename="${h}"> is not able to match the URL "${g}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:D.createElement(Fs.Provider,{value:p},D.createElement(gu.Provider,{children:e,value:R}))}function rj({children:t,location:e}){return HA(ng(t),e)}function ng(t,e=[]){let n=[];return D.Children.forEach(t,(r,o)=>{if(!D.isValidElement(r))return;let c=[...e,o];if(r.type===D.Fragment){n.push.apply(n,ng(r.props.children,c));return}Nt(r.type===kn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=ng(r.props.children,c)),n.push(h)}),n}var lh="get",ch="application/x-www-form-urlencoded";function tf(t){return t!=null&&typeof t.tagName=="string"}function ij(t){return tf(t)&&t.tagName.toLowerCase()==="button"}function aj(t){return tf(t)&&t.tagName.toLowerCase()==="form"}function oj(t){return tf(t)&&t.tagName.toLowerCase()==="input"}function lj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cj(t,e){return t.button===0&&(!e||e==="_self")&&!lj(t)}var Zd=null;function uj(){if(Zd===null)try{new FormData(document.createElement("form"),0),Zd=!1}catch{Zd=!0}return Zd}var dj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lp(t){return t!=null&&!dj.has(t)?(bs(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ch}"`),null):t}function hj(t,e){let n,r,o,c,h;if(aj(t)){let p=t.getAttribute("action");r=p?Wr(p,e):null,n=t.getAttribute("method")||lh,o=Lp(t.getAttribute("enctype"))||ch,c=new FormData(t)}else if(ij(t)||oj(t)&&(t.type==="submit"||t.type==="image")){let p=t.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=t.getAttribute("formaction")||p.getAttribute("action");if(r=g?Wr(g,e):null,n=t.getAttribute("formmethod")||p.getAttribute("method")||lh,o=Lp(t.getAttribute("formenctype"))||Lp(p.getAttribute("enctype"))||ch,c=new FormData(p,t),!uj()){let{name:y,type:v,value:_}=t;if(v==="image"){let T=y?`${y}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else y&&c.append(y,_)}}else{if(tf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=lh,r=null,o=ch,h=t}return c&&o==="text/plain"&&(h=c,c=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:c,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ug(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fj(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Wr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function mj(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pj(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function gj(t,e,n){let r=await Promise.all(t.map(async o=>{let c=e.routes[o.route.id];if(c){let h=await mj(c,n);return h.links?h.links():[]}return[]}));return wj(r.flat(1).filter(pj).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Tw(t,e,n,r,o,c){let h=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,y)=>h(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{let v=r.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let _=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function yj(t,e,{includeHydrateFallback:n}={}){return xj(t.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function xj(t){return[...new Set(t)]}function vj(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function wj(t,e){let n=new Set;return new Set(e),t.reduce((r,o)=>{let c=JSON.stringify(vj(o));return n.has(c)||(n.add(c),r.push({key:c,link:o})),r},[])}function L2(){let t=D.useContext(kl);return Ug(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function bj(){let t=D.useContext(ef);return Ug(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Bg=D.createContext(void 0);Bg.displayName="FrameworkContext";function V2(){let t=D.useContext(Bg);return Ug(t,"You must render this element inside a <HydratedRouter> element"),t}function _j(t,e){let n=D.useContext(Bg),[r,o]=D.useState(!1),[c,h]=D.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:v,onTouchStart:_}=e,T=D.useRef(null);D.useEffect(()=>{if(t==="render"&&h(!0),t==="viewport"){let $=Q=>{Q.forEach(F=>{h(F.isIntersecting)})},I=new IntersectionObserver($,{threshold:.5});return T.current&&I.observe(T.current),()=>{I.disconnect()}}},[t]),D.useEffect(()=>{if(r){let $=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout($)}}},[r]);let R=()=>{o(!0)},U=()=>{o(!1),h(!1)};return n?t!=="intent"?[c,T,{}]:[c,T,{onFocus:Kc(p,R),onBlur:Kc(g,U),onMouseEnter:Kc(y,R),onMouseLeave:Kc(v,U),onTouchStart:Kc(_,R)}]:[!1,T,{}]}function Kc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Ej({page:t,...e}){let{router:n}=L2(),r=D.useMemo(()=>S2(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?D.createElement(Tj,{page:t,matches:r,...e}):null}function Nj(t){let{manifest:e,routeModules:n}=V2(),[r,o]=D.useState([]);return D.useEffect(()=>{let c=!1;return gj(t,e,n).then(h=>{c||o(h)}),()=>{c=!0}},[t,e,n]),r}function Tj({page:t,matches:e,...n}){let r=oa(),{manifest:o,routeModules:c}=V2(),{basename:h}=L2(),{loaderData:p,matches:g}=bj(),y=D.useMemo(()=>Tw(t,e,g,o,r,"data"),[t,e,g,o,r]),v=D.useMemo(()=>Tw(t,e,g,o,r,"assets"),[t,e,g,o,r]),_=D.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let U=new Set,$=!1;if(e.forEach(Q=>{let F=o.routes[Q.route.id];!F||!F.hasLoader||(!y.some(z=>z.route.id===Q.route.id)&&Q.route.id in p&&c[Q.route.id]?.shouldRevalidate||F.hasClientLoader?$=!0:U.add(Q.route.id))}),U.size===0)return[];let I=fj(t,h,"data");return $&&U.size>0&&I.searchParams.set("_routes",e.filter(Q=>U.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[I.pathname+I.search]},[h,p,r,o,y,e,t,c]),T=D.useMemo(()=>yj(v,o),[v,o]),R=Nj(v);return D.createElement(D.Fragment,null,_.map(U=>D.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...n})),T.map(U=>D.createElement("link",{key:U,rel:"modulepreload",href:U,...n})),R.map(({key:U,link:$})=>D.createElement("link",{key:U,nonce:n.nonce,...$})))}function Aj(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var U2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{U2&&(window.__reactRouterVersion="7.9.1")}catch{}function jj({basename:t,children:e,window:n}){let r=D.useRef();r.current==null&&(r.current=mA({window:n,v5Compat:!0}));let o=r.current,[c,h]=D.useState({action:o.action,location:o.location}),p=D.useCallback(g=>{D.startTransition(()=>h(g))},[h]);return D.useLayoutEffect(()=>o.listen(p),[o,p]),D.createElement(sj,{basename:t,children:e,location:c.location,navigationType:c.action,navigator:o})}var B2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$e=D.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:c,replace:h,state:p,target:g,to:y,preventScrollReset:v,viewTransition:_,...T},R){let{basename:U}=D.useContext(Fs),$=typeof y=="string"&&B2.test(y),I,Q=!1;if(typeof y=="string"&&$&&(I=y,U2))try{let C=new URL(window.location.href),L=y.startsWith("//")?new URL(C.protocol+y):new URL(y),O=Wr(L.pathname,U);L.origin===C.origin&&O!=null?y=O+L.search+L.hash:Q=!0}catch{bs(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=zA(y,{relative:o}),[z,ce,he]=_j(r,T),ue=Ij(y,{replace:h,state:p,target:g,preventScrollReset:v,relative:o,viewTransition:_});function k(C){e&&e(C),C.defaultPrevented||ue(C)}let N=D.createElement("a",{...T,...he,href:I||F,onClick:Q||c?e:k,ref:Aj(R,ce),target:g,"data-discover":!$&&n==="render"?"true":void 0});return z&&!$?D.createElement(D.Fragment,null,N,D.createElement(Ej,{page:F})):N});$e.displayName="Link";var Sj=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:c,to:h,viewTransition:p,children:g,...y},v){let _=yu(h,{relative:y.relative}),T=oa(),R=D.useContext(ef),{navigator:U,basename:$}=D.useContext(Fs),I=R!=null&&Mj(_)&&p===!0,Q=U.encodeLocation?U.encodeLocation(_).pathname:_.pathname,F=T.pathname,z=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;n||(F=F.toLowerCase(),z=z?z.toLowerCase():null,Q=Q.toLowerCase()),z&&$&&(z=Wr(z,$)||z);const ce=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let he=F===Q||!o&&F.startsWith(Q)&&F.charAt(ce)==="/",ue=z!=null&&(z===Q||!o&&z.startsWith(Q)&&z.charAt(Q.length)==="/"),k={isActive:he,isPending:ue,isTransitioning:I},N=he?e:void 0,C;typeof r=="function"?C=r(k):C=[r,he?"active":null,ue?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let L=typeof c=="function"?c(k):c;return D.createElement($e,{...y,"aria-current":N,className:C,ref:v,style:L,to:h,viewTransition:p},typeof g=="function"?g(k):g)});Sj.displayName="NavLink";var Cj=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:c,method:h=lh,action:p,onSubmit:g,relative:y,preventScrollReset:v,viewTransition:_,...T},R)=>{let U=Pj(),$=Oj(p,{relative:y}),I=h.toLowerCase()==="get"?"get":"post",Q=typeof p=="string"&&B2.test(p),F=z=>{if(g&&g(z),z.defaultPrevented)return;z.preventDefault();let ce=z.nativeEvent.submitter,he=ce?.getAttribute("formmethod")||h;U(ce||z.currentTarget,{fetcherKey:e,method:he,navigate:n,replace:o,state:c,relative:y,preventScrollReset:v,viewTransition:_})};return D.createElement("form",{ref:R,method:I,action:$,onSubmit:r?g:F,...T,"data-discover":!Q&&t==="render"?"true":void 0})});Cj.displayName="Form";function Rj(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function z2(t){let e=D.useContext(kl);return Nt(e,Rj(t)),e}function Ij(t,{target:e,replace:n,state:r,preventScrollReset:o,relative:c,viewTransition:h}={}){let p=Hs(),g=oa(),y=yu(t,{relative:c});return D.useCallback(v=>{if(cj(v,e)){v.preventDefault();let _=n!==void 0?n:au(g)===au(y);p(t,{replace:_,state:r,preventScrollReset:o,relative:c,viewTransition:h})}},[g,p,y,n,r,e,t,o,c,h])}var kj=0,Dj=()=>`__${String(++kj)}__`;function Pj(){let{router:t}=z2("useSubmit"),{basename:e}=D.useContext(Fs),n=JA();return D.useCallback(async(r,o={})=>{let{action:c,method:h,encType:p,formData:g,body:y}=hj(r,e);if(o.navigate===!1){let v=o.fetcherKey||Dj();await t.fetch(v,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||p,flushSync:o.flushSync})}else await t.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function Oj(t,{relative:e}={}){let{basename:n}=D.useContext(Fs),r=D.useContext(qs);Nt(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),c={...yu(t||".",{relative:e})},h=oa();if(t==null){c.search=h.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(v=>v==="")){p.delete("index"),g.filter(_=>_).forEach(_=>p.append("index",_));let v=p.toString();c.search=v?`?${v}`:""}}return(!t||t===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Kr([n,c.pathname])),au(c)}function Mj(t,{relative:e}={}){let n=D.useContext(k2);Nt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=z2("useViewTransitionState"),o=yu(t,{relative:e});if(!n.isTransitioning)return!1;let c=Wr(n.currentLocation.pathname,r)||n.currentLocation.pathname,h=Wr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return wh(o.pathname,h)!=null||wh(o.pathname,c)!=null}const Lj=()=>{};var Aw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Vj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=t[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=t[n++],h=t[n++],p=t[n++],g=((o&7)<<18|(c&63)<<12|(h&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=t[n++],h=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},q2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const c=t[o],h=o+1<t.length,p=h?t[o+1]:0,g=o+2<t.length,y=g?t[o+2]:0,v=c>>2,_=(c&3)<<4|p>>4;let T=(p&15)<<2|y>>6,R=y&63;g||(R=64,h||(T=64)),r.push(n[v],n[_],n[T],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(F2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const c=n[t.charAt(o++)],p=o<t.length?n[t.charAt(o)]:0;++o;const y=o<t.length?n[t.charAt(o)]:64;++o;const _=o<t.length?n[t.charAt(o)]:64;if(++o,c==null||p==null||y==null||_==null)throw new Uj;const T=c<<2|p>>4;if(r.push(T),y!==64){const R=p<<4&240|y>>2;if(r.push(R),_!==64){const U=y<<6&192|_;r.push(U)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Uj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bj=function(t){const e=F2(t);return q2.encodeByteArray(e,!0)},bh=function(t){return Bj(t).replace(/\./g,"")},H2=function(t){try{return q2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=()=>zj().__FIREBASE_DEFAULTS__,qj=()=>{if(typeof process>"u"||typeof Aw>"u")return;const t=Aw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Hj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&H2(t[1]);return e&&JSON.parse(e)},nf=()=>{try{return Lj()||Fj()||qj()||Hj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$2=t=>nf()?.emulatorHosts?.[t],G2=t=>{const e=$2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},K2=()=>nf()?.config,Y2=t=>nf()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,c=t.sub||t.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...t};return[bh(JSON.stringify(n)),bh(JSON.stringify(h)),""].join(".")}const eu={};function Gj(){const t={prod:[],emulator:[]};for(const e of Object.keys(eu))eu[e]?t.emulator.push(e):t.prod.push(e);return t}function Kj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let jw=!1;function Fg(t,e){if(typeof window>"u"||typeof document>"u"||!ho(window.location.host)||eu[t]===e||eu[t]||jw)return;eu[t]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",c=Gj().prod.length>0;function h(){const T=document.getElementById(r);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{jw=!0,h()},T}function v(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=Kj(r),R=n("text"),U=document.getElementById(R)||document.createElement("span"),$=n("learnmore"),I=document.getElementById($)||document.createElement("a"),Q=n("preprendIcon"),F=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const z=T.element;p(z),v(I,$);const ce=y();g(F,Q),z.append(F,U,I,ce),document.body.appendChild(z)}c?(U.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function Qj(){const t=nf()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Xj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Zj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jj(){const t=Tn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eS(){return!Qj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tS(){try{return typeof indexedDB=="object"}catch{return!1}}function nS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="FirebaseError";class vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sS,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?rS(c,r):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new vr(o,p,r)}}function rS(t,e){return t.replace(iS,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const iS=/\{\$([^}]+)}/g;function aS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=t[o],h=e[o];if(Sw(c)&&Sw(h)){if(!Zr(c,h))return!1}else if(c!==h)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Sw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Qc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function oS(t,e){const n=new lS(t,e);return n.subscribe.bind(n)}class lS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Vp),o.error===void 0&&(o.error=Vp),o.complete===void 0&&(o.complete=Vp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t){return t&&t._delegate?t._delegate:t}class Zi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $j;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hS(e))try{this.getOrInitializeService({instanceIdentifier:Wa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wa){return this.instances.has(e)}getOptions(e=Wa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&h.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wa){return this.component?this.component.multipleInstances?e:Wa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dS(t){return t===Wa?void 0:t}function hS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ge||(Ge={}));const mS={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},pS=Ge.INFO,gS={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},yS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=gS[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qg{constructor(e){this.name=e,this._logLevel=pS,this._logHandler=yS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const xS=(t,e)=>e.some(n=>t instanceof n);let Cw,Rw;function vS(){return Cw||(Cw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wS(){return Rw||(Rw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X2=new WeakMap,sg=new WeakMap,W2=new WeakMap,Up=new WeakMap,Hg=new WeakMap;function bS(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",c),t.removeEventListener("error",h)},c=()=>{n(Ki(t.result)),o()},h=()=>{r(t.error),o()};t.addEventListener("success",c),t.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&X2.set(n,t)}).catch(()=>{}),Hg.set(e,t),e}function _S(t){if(sg.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",c),t.removeEventListener("error",h),t.removeEventListener("abort",h)},c=()=>{n(),o()},h=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",c),t.addEventListener("error",h),t.addEventListener("abort",h)});sg.set(t,e)}let rg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||W2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ki(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ES(t){rg=t(rg)}function NS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bp(this),e,...n);return W2.set(r,e.sort?e.sort():[e]),Ki(r)}:wS().includes(t)?function(...e){return t.apply(Bp(this),e),Ki(X2.get(this))}:function(...e){return Ki(t.apply(Bp(this),e))}}function TS(t){return typeof t=="function"?NS(t):(t instanceof IDBTransaction&&_S(t),xS(t,vS())?new Proxy(t,rg):t)}function Ki(t){if(t instanceof IDBRequest)return bS(t);if(Up.has(t))return Up.get(t);const e=TS(t);return e!==t&&(Up.set(t,e),Hg.set(e,t)),e}const Bp=t=>Hg.get(t);function AS(t,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const h=indexedDB.open(t,e),p=Ki(h);return r&&h.addEventListener("upgradeneeded",g=>{r(Ki(h.result),g.oldVersion,g.newVersion,Ki(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const jS=["get","getKey","getAll","getAllKeys","count"],SS=["put","add","delete","clear"],zp=new Map;function Iw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zp.get(e))return zp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=SS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||jS.includes(n)))return;const c=async function(h,...p){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return zp.set(e,c),c}ES(t=>({...t,get:(e,n,r)=>Iw(e,n)||t.get(e,n,r),has:(e,n)=>!!Iw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function RS(t){return t.getComponent()?.type==="VERSION"}const ig="@firebase/app",kw="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new qg("@firebase/app"),IS="@firebase/app-compat",kS="@firebase/analytics-compat",DS="@firebase/analytics",PS="@firebase/app-check-compat",OS="@firebase/app-check",MS="@firebase/auth",LS="@firebase/auth-compat",VS="@firebase/database",US="@firebase/data-connect",BS="@firebase/database-compat",zS="@firebase/functions",FS="@firebase/functions-compat",qS="@firebase/installations",HS="@firebase/installations-compat",$S="@firebase/messaging",GS="@firebase/messaging-compat",KS="@firebase/performance",YS="@firebase/performance-compat",QS="@firebase/remote-config",XS="@firebase/remote-config-compat",WS="@firebase/storage",ZS="@firebase/storage-compat",JS="@firebase/firestore",e4="@firebase/ai",t4="@firebase/firestore-compat",n4="firebase",s4="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="[DEFAULT]",r4={[ig]:"fire-core",[IS]:"fire-core-compat",[DS]:"fire-analytics",[kS]:"fire-analytics-compat",[OS]:"fire-app-check",[PS]:"fire-app-check-compat",[MS]:"fire-auth",[LS]:"fire-auth-compat",[VS]:"fire-rtdb",[US]:"fire-data-connect",[BS]:"fire-rtdb-compat",[zS]:"fire-fn",[FS]:"fire-fn-compat",[qS]:"fire-iid",[HS]:"fire-iid-compat",[$S]:"fire-fcm",[GS]:"fire-fcm-compat",[KS]:"fire-perf",[YS]:"fire-perf-compat",[QS]:"fire-rc",[XS]:"fire-rc-compat",[WS]:"fire-gcs",[ZS]:"fire-gcs-compat",[JS]:"fire-fst",[t4]:"fire-fst-compat",[e4]:"fire-vertex","fire-js":"fire-js",[n4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,i4=new Map,og=new Map;function Dw(t,e){try{t.container.addComponent(e)}catch(n){Jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ro(t){const e=t.name;if(og.has(e))return Jr.debug(`There were multiple attempts to register component ${e}.`),!1;og.set(e,t);for(const n of _h.values())Dw(n,t);for(const n of i4.values())Dw(n,t);return!0}function sf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new xu("app","Firebase",a4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=s4;function Z2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ag,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Yi.create("bad-app-name",{appName:String(o)});if(n||(n=K2()),!n)throw Yi.create("no-options");const c=_h.get(o);if(c){if(Zr(n,c.options)&&Zr(r,c.config))return c;throw Yi.create("duplicate-app",{appName:o})}const h=new fS(o);for(const g of og.values())h.addComponent(g);const p=new o4(n,r,h);return _h.set(o,p),p}function $g(t=ag){const e=_h.get(t);if(!e&&t===ag&&K2())return Z2();if(!e)throw Yi.create("no-app",{appName:t});return e}function cr(t,e,n){let r=r4[t]??t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jr.warn(h.join(" "));return}ro(new Zi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4="firebase-heartbeat-database",c4=1,ou="firebase-heartbeat-store";let Fp=null;function J2(){return Fp||(Fp=AS(l4,c4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ou)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yi.create("idb-open",{originalErrorMessage:t.message})})),Fp}async function u4(t){try{const n=(await J2()).transaction(ou),r=await n.objectStore(ou).get(e1(t));return await n.done,r}catch(e){if(e instanceof vr)Jr.warn(e.message);else{const n=Yi.create("idb-get",{originalErrorMessage:e?.message});Jr.warn(n.message)}}}async function Pw(t,e){try{const r=(await J2()).transaction(ou,"readwrite");await r.objectStore(ou).put(e,e1(t)),await r.done}catch(n){if(n instanceof vr)Jr.warn(n.message);else{const r=Yi.create("idb-set",{originalErrorMessage:n?.message});Jr.warn(r.message)}}}function e1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=1024,h4=30;class f4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new p4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ow();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>h4){const o=g4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Jr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ow(),{heartbeatsToSend:n,unsentEntries:r}=m4(this._heartbeatsCache.heartbeats),o=bh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Jr.warn(e),""}}}function Ow(){return new Date().toISOString().substring(0,10)}function m4(t,e=d4){const n=[];let r=t.slice();for(const o of t){const c=n.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),Mw(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Mw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class p4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tS()?nS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await u4(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Pw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Pw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Mw(t){return bh(JSON.stringify({version:2,heartbeats:t})).length}function g4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t){ro(new Zi("platform-logger",e=>new CS(e),"PRIVATE")),ro(new Zi("heartbeat",e=>new f4(e),"PRIVATE")),cr(ig,kw,t),cr(ig,kw,"esm2020"),cr("fire-js","")}y4("");function t1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const x4=t1,n1=new xu("auth","Firebase",t1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new qg("@firebase/auth");function v4(t,...e){Eh.logLevel<=Ge.WARN&&Eh.warn(`Auth (${fo}): ${t}`,...e)}function uh(t,...e){Eh.logLevel<=Ge.ERROR&&Eh.error(`Auth (${fo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t,...e){throw Kg(t,...e)}function Vs(t,...e){return Kg(t,...e)}function Gg(t,e,n){const r={...x4(),[e]:n};return new xu("auth","Firebase",r).create(e,{appName:t.name})}function Yr(t){return Gg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function w4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&_s(t,"argument-error"),Gg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return n1.create(t,...e)}function Ce(t,e,...n){if(!t)throw Kg(e,...n)}function $r(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uh(e),new Error(e)}function ei(t,e){t||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(){return typeof self<"u"&&self.location?.href||""}function b4(){return Lw()==="http:"||Lw()==="https:"}function Lw(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(b4()||Wj()||"connection"in navigator)?navigator.onLine:!0}function E4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ei(n>e,"Short delay should be less than long delay!"),this.isMobile=Yj()||Zj()}get(){return _4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t,e){ei(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],A4=new wu(3e4,6e4);function si(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function wr(t,e,n,r,o={}){return r1(t,o,async()=>{let c={},h={};r&&(e==="GET"?h=r:c={body:JSON.stringify(r)});const p=vu({key:t.config.apiKey,...h}).slice(1),g=await t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);const y={method:e,headers:g,...c};return Xj()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&ho(t.emulatorConfig.host)&&(y.credentials="include"),s1.fetch()(await i1(t,t.config.apiHost,n,p),y)})}async function r1(t,e,n){t._canInitEmulator=!1;const r={...N4,...e};try{const o=new S4(t),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw Jd(t,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const p=c.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jd(t,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Jd(t,"email-already-in-use",h);if(g==="USER_DISABLED")throw Jd(t,"user-disabled",h);const v=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Gg(t,v,y);_s(t,v)}}catch(o){if(o instanceof vr)throw o;_s(t,"network-request-failed",{message:String(o)})}}async function bu(t,e,n,r,o={}){const c=await wr(t,e,n,r,o);return"mfaPendingCredential"in c&&_s(t,"multi-factor-auth-required",{_serverResponse:c}),c}async function i1(t,e,n,r){const o=`${e}${n}?${r}`,c=t,h=c.config.emulator?Yg(t.config,o):`${t.config.apiScheme}://${o}`;return T4.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function j4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class S4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vs(this.auth,"network-request-failed")),A4.get())})}}function Jd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Vs(t,e,r);return o.customData._tokenResponse=n,o}function Vw(t){return t!==void 0&&t.enterprise!==void 0}class C4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return j4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function R4(t,e){return wr(t,"GET","/v2/recaptchaConfig",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(t,e){return wr(t,"POST","/v1/accounts:delete",e)}async function Nh(t,e){return wr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function k4(t,e=!1){const n=Rt(t),r=await n.getIdToken(e),o=Qg(r);Ce(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c?.sign_in_provider;return{claims:o,token:r,authTime:tu(qp(o.auth_time)),issuedAtTime:tu(qp(o.iat)),expirationTime:tu(qp(o.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function qp(t){return Number(t)*1e3}function Qg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return uh("JWT malformed, contained fewer than 3 sections"),null;try{const o=H2(n);return o?JSON.parse(o):(uh("Failed to decode base64 JWT payload"),null)}catch(o){return uh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Uw(t){const e=Qg(t);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vr&&D4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function D4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tu(this.lastLoginAt),this.creationTime=tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(t){const e=t.auth,n=await t.getIdToken(),r=await bl(t,Nh(e,{idToken:n}));Ce(r?.users.length,e,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const c=o.providerUserInfo?.length?a1(o.providerUserInfo):[],h=M4(t.providerData,c),p=t.isAnonymous,g=!(t.email&&o.passwordHash)&&!h?.length,y=p?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new cg(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(t,v)}async function O4(t){const e=Rt(t);await Th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function M4(t,e){return[...t.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function a1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L4(t,e){const n=await r1(t,{},async()=>{const r=vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=t.config,h=await i1(t,o,"/v1/token",`key=${c}`),p=await t._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return t.emulatorConfig&&ho(t.emulatorConfig.host)&&(g.credentials="include"),s1.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function V4(t,e){return wr(t,"POST","/v2/accounts:revokeToken",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Uw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const n=Uw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await L4(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,h=new fl;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(Ce(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Ce(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fl,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t,e){Ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ms{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new P4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await bl(this,this.stsTokenManager.getToken(this.auth,e));return Ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return k4(this,e)}reload(){return O4(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ms({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Th(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(Yr(this.auth));const e=await this.getIdToken();return await bl(this,I4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:R,providerData:U,stsTokenManager:$}=n;Ce(_&&$,e,"internal-error");const I=fl.fromJSON(this.name,$);Ce(typeof _=="string",e,"internal-error"),Bi(r,e.name),Bi(o,e.name),Ce(typeof T=="boolean",e,"internal-error"),Ce(typeof R=="boolean",e,"internal-error"),Bi(c,e.name),Bi(h,e.name),Bi(p,e.name),Bi(g,e.name),Bi(y,e.name),Bi(v,e.name);const Q=new Ms({uid:_,auth:e,email:o,emailVerified:T,displayName:r,isAnonymous:R,photoURL:h,phoneNumber:c,tenantId:p,stsTokenManager:I,createdAt:y,lastLoginAt:v});return U&&Array.isArray(U)&&(Q.providerData=U.map(F=>({...F}))),g&&(Q._redirectEventId=g),Q}static async _fromIdTokenResponse(e,n,r=!1){const o=new fl;o.updateFromServerResponse(n);const c=new Ms({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Th(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Ce(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?a1(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!c?.length,p=new fl;p.updateFromIdToken(r);const g=new Ms({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new cg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=new Map;function Gr(t){ei(t instanceof Function,"Expected a class definition");let e=Bw.get(t);return e?(ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}o1.type="NONE";const zw=o1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t,e,n){return`firebase:${t}:${e}:${n}`}class ml{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=dh(this.userKey,o.apiKey,c),this.fullPersistenceKey=dh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nh(this.auth,{idToken:e}).catch(()=>{});return n?Ms._fromGetAccountInfoResponse(this.auth,n,e):null}return Ms._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ml(Gr(zw),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Gr(zw);const h=dh(r,e.config.apiKey,e.name);let p=null;for(const y of n)try{const v=await y._get(h);if(v){let _;if(typeof v=="string"){const T=await Nh(e,{idToken:v}).catch(()=>{});if(!T)break;_=await Ms._fromGetAccountInfoResponse(e,T,v)}else _=Ms._fromJSON(e,v);y!==c&&(p=_),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new ml(c,e,r):(c=g[0],p&&await c._set(h,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(h)}catch{}})),new ml(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(l1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f1(e))return"Blackberry";if(m1(e))return"Webos";if(c1(e))return"Safari";if((e.includes("chrome/")||u1(e))&&!e.includes("edge/"))return"Chrome";if(h1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function l1(t=Tn()){return/firefox\//i.test(t)}function c1(t=Tn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u1(t=Tn()){return/crios\//i.test(t)}function d1(t=Tn()){return/iemobile/i.test(t)}function h1(t=Tn()){return/android/i.test(t)}function f1(t=Tn()){return/blackberry/i.test(t)}function m1(t=Tn()){return/webos/i.test(t)}function Xg(t=Tn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function U4(t=Tn()){return Xg(t)&&!!window.navigator?.standalone}function B4(){return Jj()&&document.documentMode===10}function p1(t=Tn()){return Xg(t)||h1(t)||m1(t)||f1(t)||/windows phone/i.test(t)||d1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e=[]){let n;switch(t){case"Browser":n=Fw(Tn());break;case"Worker":n=`${Fw(Tn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((h,p)=>{try{const g=e(c);h(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4(t,e={}){return wr(t,"GET","/v2/passwordPolicy",si(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=6;class H4{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??q4,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qw(this),this.idTokenSubscription=new qw(this),this.beforeStateQueue=new z4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=n1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ml.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nh(this,{idToken:e}),r=await Ms._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Fn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,h=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&p?.user&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Th(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=E4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fn(this.app))return Promise.reject(Yr(this));const n=e?Rt(e):null;return n&&Ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(Yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fn(this.app)?Promise.reject(Yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await F4(this),n=new H4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await V4(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gr(e)||this._popupRedirectResolver;Ce(n,this,"argument-error"),this.redirectPersistenceManager=await ml.create(this,[Gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(p,this,"internal-error"),p.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=g1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&v4(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ri(t){return Rt(t)}class qw{constructor(e){this.auth=e,this.observer=null,this.addObserver=oS(n=>this.observer=n)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function G4(t){rf=t}function y1(t){return rf.loadJS(t)}function K4(){return rf.recaptchaEnterpriseScript}function Y4(){return rf.gapiScript}function Q4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class X4{constructor(){this.enterprise=new W4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class W4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Z4="recaptcha-enterprise",x1="NO_RECAPTCHA";class J4{constructor(e){this.type=Z4,this.auth=ri(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,p)=>{R4(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new C4(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,h(y.siteKey)}}).catch(g=>{p(g)})})}function o(c,h,p){const g=window.grecaptcha;Vw(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{h(y)}).catch(()=>{h(x1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new X4().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{r(this.auth).then(p=>{if(!n&&Vw(window.grecaptcha))o(p,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=K4();g.length!==0&&(g+=p),y1(g).then(()=>{o(p,c,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function Hw(t,e,n,r=!1,o=!1){const c=new J4(t);let h;if(o)h=x1;else try{h=await c.verify(n)}catch{h=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Ah(t,e,n,r,o){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Hw(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Hw(t,e,n,n==="getOobCode");return r(t,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t,e){const n=sf(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Zr(c,e??{}))return o;_s(o,"already-initialized")}return n.initialize({options:e})}function tC(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Gr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function nC(t,e,n){const r=ri(t);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=v1(e),{host:h,port:p}=sC(e),g=p===null?"":`:${p}`,y={url:`${c}//${h}${g}/`},v=Object.freeze({host:h,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(Zr(y,r.config.emulator)&&Zr(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,ho(h)?(zg(`${c}//${h}${g}`),Fg("Auth",!0)):rC()}function v1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sC(t){const e=v1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:$w(r.substr(c.length+1))}}else{const[c,h]=r.split(":");return{host:c,port:$w(h)}}}function $w(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,n){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}async function iC(t,e){return wr(t,"POST","/v1/accounts:update",e)}async function aC(t,e){return wr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(t,e){return bu(t,"POST","/v1/accounts:signInWithPassword",si(t,e))}async function lC(t,e){return wr(t,"POST","/v1/accounts:sendOobCode",si(t,e))}async function cC(t,e){return lC(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(t,e){return bu(t,"POST","/v1/accounts:signInWithEmailLink",si(t,e))}async function dC(t,e){return bu(t,"POST","/v1/accounts:signInWithEmailLink",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends Wg{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new lu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new lu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(e,n,"signInWithPassword",oC);case"emailLink":return uC(e,{email:this._email,oobCode:this._password});default:_s(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(e,r,"signUpPassword",aC);case"emailLink":return dC(e,{idToken:n,email:this._email,oobCode:this._password});default:_s(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t,e){return bu(t,"POST","/v1/accounts:signInWithIdp",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="http://localhost";class io extends Wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_s("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const h=new io(r,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return pl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,pl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,pl(e,n)}buildRequest(){const e={requestUri:hC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mC(t){const e=Yc(Qc(t)).link,n=e?Yc(Qc(e)).deep_link_id:null,r=Yc(Qc(t)).deep_link_id;return(r?Yc(Qc(r)).link:null)||r||n||e||t}class Zg{constructor(e){const n=Yc(Qc(e)),r=n.apiKey??null,o=n.oobCode??null,c=fC(n.mode??null);Ce(r&&o&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=mC(e);try{return new Zg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.providerId=mo.PROVIDER_ID}static credential(e,n){return lu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Zg.parseLink(n);return Ce(r,"argument-error"),lu._fromEmailAndCode(e,r.code,r.tenantId)}}mo.PROVIDER_ID="password";mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends Jg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends _u{constructor(){super("facebook.com")}static credential(e){return io._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return io._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.GOOGLE_SIGN_IN_METHOD="google.com";lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends _u{constructor(){super("github.com")}static credential(e){return io._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.GITHUB_SIGN_IN_METHOD="github.com";Fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends _u{constructor(){super("twitter.com")}static credential(e,n){return io._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qi.credential(n,r)}catch{return null}}}qi.TWITTER_SIGN_IN_METHOD="twitter.com";qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(t,e){return bu(t,"POST","/v1/accounts:signUp",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await Ms._fromIdTokenResponse(e,r,o),h=Gw(r);return new ao({user:c,providerId:h,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=Gw(r);return new ao({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function Gw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh extends vr{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,jh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new jh(e,n,r,o)}}function w1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?jh._fromErrorAndOperation(t,c,e,r):c})}async function gC(t,e,n=!1){const r=await bl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ao._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b1(t,e,n=!1){const{auth:r}=t;if(Fn(r.app))return Promise.reject(Yr(r));const o="reauthenticate";try{const c=await bl(t,w1(r,o,e,t),n);Ce(c.idToken,r,"internal-error");const h=Qg(c.idToken);Ce(h,r,"internal-error");const{sub:p}=h;return Ce(t.uid===p,r,"user-mismatch"),ao._forOperation(t,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&_s(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(t,e,n=!1){if(Fn(t.app))return Promise.reject(Yr(t));const r="signIn",o=await w1(t,r,e),c=await ao._fromIdTokenResponse(t,r,o);return n||await t._updateCurrentUser(c.user),c}async function yC(t,e){return _1(ri(t),e)}async function xC(t,e){return b1(Rt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(t){const e=ri(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vC(t,e,n){const r=ri(t);await Ah(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",cC)}async function wC(t,e,n){if(Fn(t.app))return Promise.reject(Yr(t));const r=ri(t),h=await Ah(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&E1(t),g}),p=await ao._fromIdTokenResponse(r,"signIn",h);return await r._updateCurrentUser(p.user),p}function bC(t,e,n){return Fn(t.app)?Promise.reject(Yr(t)):yC(Rt(t),mo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&E1(t),r})}function _C(t,e){return EC(Rt(t),null,e)}async function EC(t,e,n){const{auth:r}=t,c={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(c.password=n);const h=await bl(t,iC(r,c));await t._updateTokensIfNecessary(h,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t,e){return Rt(t).setPersistence(e)}function TC(t,e,n,r){return Rt(t).onIdTokenChanged(e,n,r)}function AC(t,e,n){return Rt(t).beforeAuthStateChanged(e,n)}function jC(t,e,n,r){return Rt(t).onAuthStateChanged(e,n,r)}function SC(t){return Rt(t).signOut()}const Sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sh,"1"),this.storage.removeItem(Sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=1e3,RC=10;class T1 extends N1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!n&&this.localCache[r]===h||this.notifyListeners(r,h)},c=this.storage.getItem(r);B4()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,RC):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}T1.type="LOCAL";const A1=T1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1 extends N1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}j1.type="SESSION";const S1=j1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new af(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(h).map(async y=>y(n.origin,c)),g=await IC(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}af.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((p,g)=>{const y=e0("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(_){const T=_;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(T.data.response);break;default:clearTimeout(v),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function DC(t){ur().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function PC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OC(){return navigator?.serviceWorker?.controller||null}function MC(){return C1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="firebaseLocalStorageDb",LC=1,Ch="firebaseLocalStorage",I1="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function of(t,e){return t.transaction([Ch],e?"readwrite":"readonly").objectStore(Ch)}function VC(){const t=indexedDB.deleteDatabase(R1);return new Eu(t).toPromise()}function ug(){const t=indexedDB.open(R1,LC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ch,{keyPath:I1})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ch)?e(r):(r.close(),await VC(),e(await ug()))})})}async function Kw(t,e,n){const r=of(t,!0).put({[I1]:e,value:n});return new Eu(r).toPromise()}async function UC(t,e){const n=of(t,!1).get(e),r=await new Eu(n).toPromise();return r===void 0?null:r.value}function Yw(t,e){const n=of(t,!0).delete(e);return new Eu(n).toPromise()}const BC=800,zC=3;class k1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ug(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return C1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=af._getInstance(MC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await PC(),!this.activeServiceWorker)return;this.sender=new kC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ug();return await Kw(e,Sh,"1"),await Yw(e,Sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Kw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>UC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=of(o,!1).getAll();return new Eu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}k1.type="LOCAL";const FC=k1;new wu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t,e){return e?Gr(e):(Ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends Wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return pl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qC(t){return _1(t.auth,new t0(t),t.bypassAuthState)}function HC(t){const{auth:e,user:n}=t;return Ce(n,e,"internal-error"),b1(n,new t0(t),t.bypassAuthState)}async function $C(t){const{auth:e,user:n}=t;return Ce(n,e,"internal-error"),gC(n,new t0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qC;case"linkViaPopup":case"linkViaRedirect":return $C;case"reauthViaPopup":case"reauthViaRedirect":return HC;default:_s(this.auth,"internal-error")}}resolve(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=new wu(2e3,1e4);async function O1(t,e,n){if(Fn(t.app))return Promise.reject(Vs(t,"operation-not-supported-in-this-environment"));const r=ri(t);w4(t,e,Jg);const o=D1(r,n);return new Za(r,"signInViaPopup",e,o).executeNotNull()}class Za extends P1{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,Za.currentPopupAction&&Za.currentPopupAction.cancel(),Za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){ei(this.filter.length===1,"Popup operations only handle one event");const e=e0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Za.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GC.get())};e()}}Za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="pendingRedirect",hh=new Map;class YC extends P1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hh.get(this.auth._key());if(!e){try{const r=await QC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hh.set(this.auth._key(),e)}return this.bypassAuthState||hh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QC(t,e){const n=ZC(e),r=WC(t);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function XC(t,e){hh.set(t._key(),e)}function WC(t){return Gr(t._redirectPersistence)}function ZC(t){return dh(KC,t.config.apiKey,t.name)}async function JC(t,e,n=!1){if(Fn(t.app))return Promise.reject(Yr(t));const r=ri(t),o=D1(r,e),h=await new YC(r,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=600*1e3;class t5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!n5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!M1(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Vs(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qw(e))}saveEventToCache(e){this.cachedEventUids.add(Qw(e)),this.lastProcessedEventTime=Date.now()}}function Qw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function M1({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function n5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s5(t,e={}){return wr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i5=/^https?/;async function a5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await s5(t);for(const n of e)try{if(o5(n))return}catch{}_s(t,"unauthorized-domain")}function o5(t){const e=lg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const h=new URL(t);return h.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===r}if(!i5.test(n))return!1;if(r5.test(t))return r===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=new wu(3e4,6e4);function Xw(){const t=ur().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function c5(t){return new Promise((e,n)=>{function r(){Xw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xw(),n(Vs(t,"network-request-failed"))},timeout:l5.get()})}if(ur().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ur().gapi?.load)r();else{const o=Q4("iframefcb");return ur()[o]=()=>{gapi.load?r():n(Vs(t,"network-request-failed"))},y1(`${Y4()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw fh=null,e})}let fh=null;function u5(t){return fh=fh||c5(t),fh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=new wu(5e3,15e3),h5="__/auth/iframe",f5="emulator/auth/iframe",m5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function g5(t){const e=t.config;Ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Yg(e,f5):`https://${t.config.authDomain}/${h5}`,r={apiKey:e.apiKey,appName:t.name,v:fo},o=p5.get(t.config.apiHost);o&&(r.eid=o);const c=t._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${vu(r).slice(1)}`}async function y5(t){const e=await u5(t),n=ur().gapi;return Ce(n,t,"internal-error"),e.open({where:document.body,url:g5(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:m5,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const h=Vs(t,"network-request-failed"),p=ur().setTimeout(()=>{c(h)},d5.get());function g(){ur().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},v5=500,w5=600,b5="_blank",_5="http://localhost";class Ww{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function E5(t,e,n,r=v5,o=w5){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={...x5,width:r.toString(),height:o.toString(),top:c,left:h},y=Tn().toLowerCase();n&&(p=u1(y)?b5:n),l1(y)&&(e=e||_5,g.scrollbars="yes");const v=Object.entries(g).reduce((T,[R,U])=>`${T}${R}=${U},`,"");if(U4(y)&&p!=="_self")return N5(e||"",p),new Ww(null);const _=window.open(e||"",p,v);Ce(_,t,"popup-blocked");try{_.focus()}catch{}return new Ww(_)}function N5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5="__/auth/handler",A5="emulator/auth/handler",j5=encodeURIComponent("fac");async function Zw(t,e,n,r,o,c){Ce(t.config.authDomain,t,"auth-domain-config-required"),Ce(t.config.apiKey,t,"invalid-api-key");const h={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:fo,eventId:o};if(e instanceof Jg){e.setDefaultLanguage(t.languageCode),h.providerId=e.providerId||"",aS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))h[v]=_}if(e instanceof _u){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(h.scopes=v.join(","))}t.tenantId&&(h.tid=t.tenantId);const p=h;for(const v of Object.keys(p))p[v]===void 0&&delete p[v];const g=await t._getAppCheckToken(),y=g?`#${j5}=${encodeURIComponent(g)}`:"";return`${S5(t)}?${vu(p).slice(1)}${y}`}function S5({config:t}){return t.emulator?Yg(t,A5):`https://${t.authDomain}/${T5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="webStorageSupport";class C5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S1,this._completeRedirectFn=JC,this._overrideRedirectResult=XC}async _openPopup(e,n,r,o){ei(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Zw(e,n,r,lg(),o);return E5(e,c,e0())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await Zw(e,n,r,lg(),o);return DC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(ei(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await y5(e),r=new t5(e);return n.register("authEvent",o=>(Ce(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hp,{type:Hp},o=>{const c=o?.[0]?.[Hp];c!==void 0&&n(!!c),_s(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=a5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return p1()||c1()||Xg()}}const R5=C5;var Jw="@firebase/auth",eb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D5(t){ro(new Zi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=r.options;Ce(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:h,authDomain:p,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:g1(t)},y=new $4(r,o,c,g);return tC(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ro(new Zi("auth-internal",e=>{const n=ri(e.getProvider("auth").getImmediate());return(r=>new I5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(Jw,eb,k5(t)),cr(Jw,eb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=300,O5=Y2("authIdTokenMaxAge")||P5;let tb=null;const M5=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>O5)return;const o=n?.token;tb!==o&&(tb=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function L5(t=$g()){const e=sf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=eC(t,{popupRedirectResolver:R5,persistence:[FC,A1,S1]}),r=Y2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const h=M5(c.toString());AC(n,h,()=>h(n.currentUser)),TC(n,p=>h(p))}}const o=$2("auth");return o&&nC(n,`http://${o}`),n}function V5(){return document.getElementsByTagName("head")?.[0]??document}G4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=o=>{const c=Vs("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",V5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D5("Browser");var U5="firebase",B5="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(U5,B5,"app");var nb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qi,L1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,N){function C(){}C.prototype=N.prototype,k.F=N.prototype,k.prototype=new C,k.prototype.constructor=k,k.D=function(L,O,M){for(var S=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)S[Ne-2]=arguments[Ne];return N.prototype[O].apply(L,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,N,C){C||(C=0);const L=Array(16);if(typeof N=="string")for(var O=0;O<16;++O)L[O]=N.charCodeAt(C++)|N.charCodeAt(C++)<<8|N.charCodeAt(C++)<<16|N.charCodeAt(C++)<<24;else for(O=0;O<16;++O)L[O]=N[C++]|N[C++]<<8|N[C++]<<16|N[C++]<<24;N=k.g[0],C=k.g[1],O=k.g[2];let M=k.g[3],S;S=N+(M^C&(O^M))+L[0]+3614090360&4294967295,N=C+(S<<7&4294967295|S>>>25),S=M+(O^N&(C^O))+L[1]+3905402710&4294967295,M=N+(S<<12&4294967295|S>>>20),S=O+(C^M&(N^C))+L[2]+606105819&4294967295,O=M+(S<<17&4294967295|S>>>15),S=C+(N^O&(M^N))+L[3]+3250441966&4294967295,C=O+(S<<22&4294967295|S>>>10),S=N+(M^C&(O^M))+L[4]+4118548399&4294967295,N=C+(S<<7&4294967295|S>>>25),S=M+(O^N&(C^O))+L[5]+1200080426&4294967295,M=N+(S<<12&4294967295|S>>>20),S=O+(C^M&(N^C))+L[6]+2821735955&4294967295,O=M+(S<<17&4294967295|S>>>15),S=C+(N^O&(M^N))+L[7]+4249261313&4294967295,C=O+(S<<22&4294967295|S>>>10),S=N+(M^C&(O^M))+L[8]+1770035416&4294967295,N=C+(S<<7&4294967295|S>>>25),S=M+(O^N&(C^O))+L[9]+2336552879&4294967295,M=N+(S<<12&4294967295|S>>>20),S=O+(C^M&(N^C))+L[10]+4294925233&4294967295,O=M+(S<<17&4294967295|S>>>15),S=C+(N^O&(M^N))+L[11]+2304563134&4294967295,C=O+(S<<22&4294967295|S>>>10),S=N+(M^C&(O^M))+L[12]+1804603682&4294967295,N=C+(S<<7&4294967295|S>>>25),S=M+(O^N&(C^O))+L[13]+4254626195&4294967295,M=N+(S<<12&4294967295|S>>>20),S=O+(C^M&(N^C))+L[14]+2792965006&4294967295,O=M+(S<<17&4294967295|S>>>15),S=C+(N^O&(M^N))+L[15]+1236535329&4294967295,C=O+(S<<22&4294967295|S>>>10),S=N+(O^M&(C^O))+L[1]+4129170786&4294967295,N=C+(S<<5&4294967295|S>>>27),S=M+(C^O&(N^C))+L[6]+3225465664&4294967295,M=N+(S<<9&4294967295|S>>>23),S=O+(N^C&(M^N))+L[11]+643717713&4294967295,O=M+(S<<14&4294967295|S>>>18),S=C+(M^N&(O^M))+L[0]+3921069994&4294967295,C=O+(S<<20&4294967295|S>>>12),S=N+(O^M&(C^O))+L[5]+3593408605&4294967295,N=C+(S<<5&4294967295|S>>>27),S=M+(C^O&(N^C))+L[10]+38016083&4294967295,M=N+(S<<9&4294967295|S>>>23),S=O+(N^C&(M^N))+L[15]+3634488961&4294967295,O=M+(S<<14&4294967295|S>>>18),S=C+(M^N&(O^M))+L[4]+3889429448&4294967295,C=O+(S<<20&4294967295|S>>>12),S=N+(O^M&(C^O))+L[9]+568446438&4294967295,N=C+(S<<5&4294967295|S>>>27),S=M+(C^O&(N^C))+L[14]+3275163606&4294967295,M=N+(S<<9&4294967295|S>>>23),S=O+(N^C&(M^N))+L[3]+4107603335&4294967295,O=M+(S<<14&4294967295|S>>>18),S=C+(M^N&(O^M))+L[8]+1163531501&4294967295,C=O+(S<<20&4294967295|S>>>12),S=N+(O^M&(C^O))+L[13]+2850285829&4294967295,N=C+(S<<5&4294967295|S>>>27),S=M+(C^O&(N^C))+L[2]+4243563512&4294967295,M=N+(S<<9&4294967295|S>>>23),S=O+(N^C&(M^N))+L[7]+1735328473&4294967295,O=M+(S<<14&4294967295|S>>>18),S=C+(M^N&(O^M))+L[12]+2368359562&4294967295,C=O+(S<<20&4294967295|S>>>12),S=N+(C^O^M)+L[5]+4294588738&4294967295,N=C+(S<<4&4294967295|S>>>28),S=M+(N^C^O)+L[8]+2272392833&4294967295,M=N+(S<<11&4294967295|S>>>21),S=O+(M^N^C)+L[11]+1839030562&4294967295,O=M+(S<<16&4294967295|S>>>16),S=C+(O^M^N)+L[14]+4259657740&4294967295,C=O+(S<<23&4294967295|S>>>9),S=N+(C^O^M)+L[1]+2763975236&4294967295,N=C+(S<<4&4294967295|S>>>28),S=M+(N^C^O)+L[4]+1272893353&4294967295,M=N+(S<<11&4294967295|S>>>21),S=O+(M^N^C)+L[7]+4139469664&4294967295,O=M+(S<<16&4294967295|S>>>16),S=C+(O^M^N)+L[10]+3200236656&4294967295,C=O+(S<<23&4294967295|S>>>9),S=N+(C^O^M)+L[13]+681279174&4294967295,N=C+(S<<4&4294967295|S>>>28),S=M+(N^C^O)+L[0]+3936430074&4294967295,M=N+(S<<11&4294967295|S>>>21),S=O+(M^N^C)+L[3]+3572445317&4294967295,O=M+(S<<16&4294967295|S>>>16),S=C+(O^M^N)+L[6]+76029189&4294967295,C=O+(S<<23&4294967295|S>>>9),S=N+(C^O^M)+L[9]+3654602809&4294967295,N=C+(S<<4&4294967295|S>>>28),S=M+(N^C^O)+L[12]+3873151461&4294967295,M=N+(S<<11&4294967295|S>>>21),S=O+(M^N^C)+L[15]+530742520&4294967295,O=M+(S<<16&4294967295|S>>>16),S=C+(O^M^N)+L[2]+3299628645&4294967295,C=O+(S<<23&4294967295|S>>>9),S=N+(O^(C|~M))+L[0]+4096336452&4294967295,N=C+(S<<6&4294967295|S>>>26),S=M+(C^(N|~O))+L[7]+1126891415&4294967295,M=N+(S<<10&4294967295|S>>>22),S=O+(N^(M|~C))+L[14]+2878612391&4294967295,O=M+(S<<15&4294967295|S>>>17),S=C+(M^(O|~N))+L[5]+4237533241&4294967295,C=O+(S<<21&4294967295|S>>>11),S=N+(O^(C|~M))+L[12]+1700485571&4294967295,N=C+(S<<6&4294967295|S>>>26),S=M+(C^(N|~O))+L[3]+2399980690&4294967295,M=N+(S<<10&4294967295|S>>>22),S=O+(N^(M|~C))+L[10]+4293915773&4294967295,O=M+(S<<15&4294967295|S>>>17),S=C+(M^(O|~N))+L[1]+2240044497&4294967295,C=O+(S<<21&4294967295|S>>>11),S=N+(O^(C|~M))+L[8]+1873313359&4294967295,N=C+(S<<6&4294967295|S>>>26),S=M+(C^(N|~O))+L[15]+4264355552&4294967295,M=N+(S<<10&4294967295|S>>>22),S=O+(N^(M|~C))+L[6]+2734768916&4294967295,O=M+(S<<15&4294967295|S>>>17),S=C+(M^(O|~N))+L[13]+1309151649&4294967295,C=O+(S<<21&4294967295|S>>>11),S=N+(O^(C|~M))+L[4]+4149444226&4294967295,N=C+(S<<6&4294967295|S>>>26),S=M+(C^(N|~O))+L[11]+3174756917&4294967295,M=N+(S<<10&4294967295|S>>>22),S=O+(N^(M|~C))+L[2]+718787259&4294967295,O=M+(S<<15&4294967295|S>>>17),S=C+(M^(O|~N))+L[9]+3951481745&4294967295,k.g[0]=k.g[0]+N&4294967295,k.g[1]=k.g[1]+(O+(S<<21&4294967295|S>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+M&4294967295}r.prototype.v=function(k,N){N===void 0&&(N=k.length);const C=N-this.blockSize,L=this.C;let O=this.h,M=0;for(;M<N;){if(O==0)for(;M<=C;)o(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<N;)if(L[O++]=k.charCodeAt(M++),O==this.blockSize){o(this,L),O=0;break}}else for(;M<N;)if(L[O++]=k[M++],O==this.blockSize){o(this,L),O=0;break}}this.h=O,this.o+=N},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var N=1;N<k.length-8;++N)k[N]=0;N=this.o*8;for(var C=k.length-8;C<k.length;++C)k[C]=N&255,N/=256;for(this.v(k),k=Array(16),N=0,C=0;C<4;++C)for(let L=0;L<32;L+=8)k[N++]=this.g[C]>>>L&255;return k};function c(k,N){var C=p;return Object.prototype.hasOwnProperty.call(C,k)?C[k]:C[k]=N(k)}function h(k,N){this.h=N;const C=[];let L=!0;for(let O=k.length-1;O>=0;O--){const M=k[O]|0;L&&M==N||(C[O]=M,L=!1)}this.g=C}var p={};function g(k){return-128<=k&&k<128?c(k,function(N){return new h([N|0],N<0?-1:0)}):new h([k|0],k<0?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return _;if(k<0)return I(y(-k));const N=[];let C=1;for(let L=0;k>=C;L++)N[L]=k/C|0,C*=4294967296;return new h(N,0)}function v(k,N){if(k.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(k.charAt(0)=="-")return I(v(k.substring(1),N));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(N,8));let L=_;for(let M=0;M<k.length;M+=8){var O=Math.min(8,k.length-M);const S=parseInt(k.substring(M,M+O),N);O<8?(O=y(Math.pow(N,O)),L=L.j(O).add(y(S))):(L=L.j(C),L=L.add(y(S)))}return L}var _=g(0),T=g(1),R=g(16777216);t=h.prototype,t.m=function(){if($(this))return-I(this).m();let k=0,N=1;for(let C=0;C<this.g.length;C++){const L=this.i(C);k+=(L>=0?L:4294967296+L)*N,N*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(U(this))return"0";if($(this))return"-"+I(this).toString(k);const N=y(Math.pow(k,6));var C=this;let L="";for(;;){const O=ce(C,N).g;C=Q(C,O.j(N));let M=((C.g.length>0?C.g[0]:C.h)>>>0).toString(k);if(C=O,U(C))return M+L;for(;M.length<6;)M="0"+M;L=M+L}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function U(k){if(k.h!=0)return!1;for(let N=0;N<k.g.length;N++)if(k.g[N]!=0)return!1;return!0}function $(k){return k.h==-1}t.l=function(k){return k=Q(this,k),$(k)?-1:U(k)?0:1};function I(k){const N=k.g.length,C=[];for(let L=0;L<N;L++)C[L]=~k.g[L];return new h(C,~k.h).add(T)}t.abs=function(){return $(this)?I(this):this},t.add=function(k){const N=Math.max(this.g.length,k.g.length),C=[];let L=0;for(let O=0;O<=N;O++){let M=L+(this.i(O)&65535)+(k.i(O)&65535),S=(M>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);L=S>>>16,M&=65535,S&=65535,C[O]=S<<16|M}return new h(C,C[C.length-1]&-2147483648?-1:0)};function Q(k,N){return k.add(I(N))}t.j=function(k){if(U(this)||U(k))return _;if($(this))return $(k)?I(this).j(I(k)):I(I(this).j(k));if($(k))return I(this.j(I(k)));if(this.l(R)<0&&k.l(R)<0)return y(this.m()*k.m());const N=this.g.length+k.g.length,C=[];for(var L=0;L<2*N;L++)C[L]=0;for(L=0;L<this.g.length;L++)for(let O=0;O<k.g.length;O++){const M=this.i(L)>>>16,S=this.i(L)&65535,Ne=k.i(O)>>>16,Le=k.i(O)&65535;C[2*L+2*O]+=S*Le,F(C,2*L+2*O),C[2*L+2*O+1]+=M*Le,F(C,2*L+2*O+1),C[2*L+2*O+1]+=S*Ne,F(C,2*L+2*O+1),C[2*L+2*O+2]+=M*Ne,F(C,2*L+2*O+2)}for(k=0;k<N;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=N;k<2*N;k++)C[k]=0;return new h(C,0)};function F(k,N){for(;(k[N]&65535)!=k[N];)k[N+1]+=k[N]>>>16,k[N]&=65535,N++}function z(k,N){this.g=k,this.h=N}function ce(k,N){if(U(N))throw Error("division by zero");if(U(k))return new z(_,_);if($(k))return N=ce(I(k),N),new z(I(N.g),I(N.h));if($(N))return N=ce(k,I(N)),new z(I(N.g),N.h);if(k.g.length>30){if($(k)||$(N))throw Error("slowDivide_ only works with positive integers.");for(var C=T,L=N;L.l(k)<=0;)C=he(C),L=he(L);var O=ue(C,1),M=ue(L,1);for(L=ue(L,2),C=ue(C,2);!U(L);){var S=M.add(L);S.l(k)<=0&&(O=O.add(C),M=S),L=ue(L,1),C=ue(C,1)}return N=Q(k,O.j(N)),new z(O,N)}for(O=_;k.l(N)>=0;){for(C=Math.max(1,Math.floor(k.m()/N.m())),L=Math.ceil(Math.log(C)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),M=y(C),S=M.j(N);$(S)||S.l(k)>0;)C-=L,M=y(C),S=M.j(N);U(M)&&(M=T),O=O.add(M),k=Q(k,S)}return new z(O,k)}t.B=function(k){return ce(this,k).h},t.and=function(k){const N=Math.max(this.g.length,k.g.length),C=[];for(let L=0;L<N;L++)C[L]=this.i(L)&k.i(L);return new h(C,this.h&k.h)},t.or=function(k){const N=Math.max(this.g.length,k.g.length),C=[];for(let L=0;L<N;L++)C[L]=this.i(L)|k.i(L);return new h(C,this.h|k.h)},t.xor=function(k){const N=Math.max(this.g.length,k.g.length),C=[];for(let L=0;L<N;L++)C[L]=this.i(L)^k.i(L);return new h(C,this.h^k.h)};function he(k){const N=k.g.length+1,C=[];for(let L=0;L<N;L++)C[L]=k.i(L)<<1|k.i(L-1)>>>31;return new h(C,k.h)}function ue(k,N){const C=N>>5;N%=32;const L=k.g.length-C,O=[];for(let M=0;M<L;M++)O[M]=N>0?k.i(M+C)>>>N|k.i(M+C+1)<<32-N:k.i(M+C);return new h(O,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,L1=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,Qi=h}).apply(typeof nb<"u"?nb:typeof self<"u"?self:typeof window<"u"?window:{});var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var V1,Xc,U1,mh,dg,B1,z1,F1;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof eh=="object"&&eh];for(var x=0;x<d.length;++x){var w=d[x];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function o(d,x){if(x)e:{var w=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var K=d[A];if(!(K in w))break e;w=w[K]}d=d[d.length-1],A=w[d],x=x(A),x!=A&&x!=null&&e(w,d,{configurable:!0,writable:!0,value:x})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(x){var w=[],A;for(A in x)Object.prototype.hasOwnProperty.call(x,A)&&w.push([A,x[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(d){var x=typeof d;return x=="object"&&d!=null||x=="function"}function g(d,x,w){return d.call.apply(d.bind,arguments)}function y(d,x,w){return y=g,y.apply(null,arguments)}function v(d,x){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function _(d,x){function w(){}w.prototype=x.prototype,d.Z=x.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(A,K,Z){for(var me=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)me[Oe-2]=arguments[Oe];return x.prototype[K].apply(A,me)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function R(d){const x=d.length;if(x>0){const w=Array(x);for(let A=0;A<x;A++)w[A]=d[A];return w}return[]}function U(d,x){for(let A=1;A<arguments.length;A++){const K=arguments[A];var w=typeof K;if(w=w!="object"?w:K?Array.isArray(K)?"array":w:"null",w=="array"||w=="object"&&typeof K.length=="number"){w=d.length||0;const Z=K.length||0;d.length=w+Z;for(let me=0;me<Z;me++)d[w+me]=K[me]}else d.push(K)}}class ${constructor(x,w){this.i=x,this.j=w,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function I(d){h.setTimeout(()=>{throw d},0)}function Q(){var d=k;let x=null;return d.g&&(x=d.g,d.g=d.g.next,d.g||(d.h=null),x.next=null),x}class F{constructor(){this.h=this.g=null}add(x,w){const A=z.get();A.set(x,w),this.h?this.h.next=A:this.g=A,this.h=A}}var z=new $(()=>new ce,d=>d.reset());class ce{constructor(){this.next=this.g=this.h=null}set(x,w){this.h=x,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ue=!1,k=new F,N=()=>{const d=Promise.resolve(void 0);he=()=>{d.then(C)}};function C(){for(var d;d=Q();){try{d.h.call(d.g)}catch(w){I(w)}var x=z;x.j(d),x.h<100&&(x.h++,d.next=x.g,x.g=d)}ue=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(d,x){this.type=d,this.g=this.target=x,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,x=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};h.addEventListener("test",w,x),h.removeEventListener("test",w,x)}catch{}return d})();function S(d){return/^[\s\xa0]*$/.test(d)}function Ne(d,x){O.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,x)}_(Ne,O),Ne.prototype.init=function(d,x){const w=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=x,x=d.relatedTarget,x||(w=="mouseover"?x=d.fromElement:w=="mouseout"&&(x=d.toElement)),this.relatedTarget=x,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),q=0;function re(d,x,w,A,K){this.listener=d,this.proxy=null,this.src=x,this.type=w,this.capture=!!A,this.ha=K,this.key=++q,this.da=this.fa=!1}function ge(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Be(d,x,w){for(const A in d)x.call(w,d[A],A,d)}function V(d,x){for(const w in d)x.call(void 0,d[w],w,d)}function le(d){const x={};for(const w in d)x[w]=d[w];return x}const ye="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(d,x){let w,A;for(let K=1;K<arguments.length;K++){A=arguments[K];for(w in A)d[w]=A[w];for(let Z=0;Z<ye.length;Z++)w=ye[Z],Object.prototype.hasOwnProperty.call(A,w)&&(d[w]=A[w])}}function oe(d){this.src=d,this.g={},this.h=0}oe.prototype.add=function(d,x,w,A,K){const Z=d.toString();d=this.g[Z],d||(d=this.g[Z]=[],this.h++);const me=fe(d,x,A,K);return me>-1?(x=d[me],w||(x.fa=!1)):(x=new re(x,this.src,Z,!!A,K),x.fa=w,d.push(x)),x};function pe(d,x){const w=x.type;if(w in d.g){var A=d.g[w],K=Array.prototype.indexOf.call(A,x,void 0),Z;(Z=K>=0)&&Array.prototype.splice.call(A,K,1),Z&&(ge(x),d.g[w].length==0&&(delete d.g[w],d.h--))}}function fe(d,x,w,A){for(let K=0;K<d.length;++K){const Z=d[K];if(!Z.da&&Z.listener==x&&Z.capture==!!w&&Z.ha==A)return K}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),tt={};function Kn(d,x,w,A,K){if(Array.isArray(x)){for(let Z=0;Z<x.length;Z++)Kn(d,x[Z],w,A,K);return null}return w=ha(w),d&&d[Le]?d.J(x,w,p(A)?!!A.capture:!1,K):ua(d,x,w,!1,A,K)}function ua(d,x,w,A,K,Z){if(!x)throw Error("Invalid event type");const me=p(K)?!!K.capture:!!K;let Oe=da(d);if(Oe||(d[Ie]=Oe=new oe(d)),w=Oe.add(x,w,A,me,Z),w.proxy)return w;if(A=ii(),w.proxy=A,A.src=d,A.listener=w,d.addEventListener)M||(K=me),K===void 0&&(K=!1),d.addEventListener(x.toString(),A,K);else if(d.attachEvent)d.attachEvent(oi(x.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ii(){function d(w){return x.call(d.src,d.listener,w)}const x=_o;return d}function ai(d,x,w,A,K){if(Array.isArray(x))for(var Z=0;Z<x.length;Z++)ai(d,x[Z],w,A,K);else A=p(A)?!!A.capture:!!A,w=ha(w),d&&d[Le]?(d=d.i,Z=String(x).toString(),Z in d.g&&(x=d.g[Z],w=fe(x,w,A,K),w>-1&&(ge(x[w]),Array.prototype.splice.call(x,w,1),x.length==0&&(delete d.g[Z],d.h--)))):d&&(d=da(d))&&(x=d.g[x.toString()],d=-1,x&&(d=fe(x,w,A,K)),(w=d>-1?x[d]:null)&&_r(w))}function _r(d){if(typeof d!="number"&&d&&!d.da){var x=d.src;if(x&&x[Le])pe(x.i,d);else{var w=d.type,A=d.proxy;x.removeEventListener?x.removeEventListener(w,A,d.capture):x.detachEvent?x.detachEvent(oi(w),A):x.addListener&&x.removeListener&&x.removeListener(A),(w=da(x))?(pe(w,d),w.h==0&&(w.src=null,x[Ie]=null)):ge(d)}}}function oi(d){return d in tt?tt[d]:tt[d]="on"+d}function _o(d,x){if(d.da)d=!0;else{x=new Ne(x,this);const w=d.listener,A=d.ha||d.src;d.fa&&_r(d),d=w.call(A,x)}return d}function da(d){return d=d[Ie],d instanceof oe?d:null}var yn="__closure_events_fn_"+(Math.random()*1e9>>>0);function ha(d){return typeof d=="function"?d:(d[yn]||(d[yn]=function(x){return d.handleEvent(x)}),d[yn])}function It(){L.call(this),this.i=new oe(this),this.M=this,this.G=null}_(It,L),It.prototype[Le]=!0,It.prototype.removeEventListener=function(d,x,w,A){ai(this,d,x,w,A)};function kt(d,x){var w,A=d.G;if(A)for(w=[];A;A=A.G)w.push(A);if(d=d.M,A=x.type||x,typeof x=="string")x=new O(x,d);else if(x instanceof O)x.target=x.target||d;else{var K=x;x=new O(A,d),ee(x,K)}K=!0;let Z,me;if(w)for(me=w.length-1;me>=0;me--)Z=x.g=w[me],K=ls(Z,A,!0,x)&&K;if(Z=x.g=d,K=ls(Z,A,!0,x)&&K,K=ls(Z,A,!1,x)&&K,w)for(me=0;me<w.length;me++)Z=x.g=w[me],K=ls(Z,A,!1,x)&&K}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var d=this.i;for(const x in d.g){const w=d.g[x];for(let A=0;A<w.length;A++)ge(w[A]);delete d.g[x],d.h--}}this.G=null},It.prototype.J=function(d,x,w,A){return this.i.add(String(d),x,!1,w,A)},It.prototype.K=function(d,x,w,A){return this.i.add(String(d),x,!0,w,A)};function ls(d,x,w,A){if(x=d.i.g[String(x)],!x)return!0;x=x.concat();let K=!0;for(let Z=0;Z<x.length;++Z){const me=x[Z];if(me&&!me.da&&me.capture==w){const Oe=me.listener,vt=me.ha||me.src;me.fa&&pe(d.i,me),K=Oe.call(vt,A)!==!1&&K}}return K&&!A.defaultPrevented}function We(d,x){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:h.setTimeout(d,x||0)}function fa(d){d.g=We(()=>{d.g=null,d.i&&(d.i=!1,fa(d))},d.l);const x=d.h;d.h=null,d.m.apply(null,x)}class Hl extends L{constructor(x,w){super(),this.m=x,this.l=w,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:fa(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Er(d){L.call(this),this.h=d,this.g={}}_(Er,L);var Gs=[];function qt(d){Be(d.g,function(x,w){this.g.hasOwnProperty(w)&&_r(x)},d),d.g={}}Er.prototype.N=function(){Er.Z.N.call(this),qt(this)},Er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xn=h.JSON.stringify,Wt=h.JSON.parse,ma=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function Nr(){}function Mn(){}var jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yn(){O.call(this,"d")}_(Yn,O);function Dt(){O.call(this,"c")}_(Dt,O);var Ze={},Ns=null;function Tr(){return Ns=Ns||new It}Ze.Ia="serverreachability";function li(d){O.call(this,Ze.Ia,d)}_(li,O);function Ts(d){const x=Tr();kt(x,new li(x))}Ze.STAT_EVENT="statevent";function Ks(d,x){O.call(this,Ze.STAT_EVENT,d),this.stat=x}_(Ks,O);function j(d){const x=Tr();kt(x,new Ks(x,d))}Ze.Ja="timingevent";function de(d,x){O.call(this,Ze.Ja,d),this.size=x}_(de,O);function we(d,x){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},x)}function Ve(){this.g=!0}Ve.prototype.ua=function(){this.g=!1};function bt(d,x,w,A,K,Z){d.info(function(){if(d.g)if(Z){var me="",Oe=Z.split("&");for(let at=0;at<Oe.length;at++){var vt=Oe[at].split("=");if(vt.length>1){const Mt=vt[0];vt=vt[1];const Qn=Mt.split("_");me=Qn.length>=2&&Qn[1]=="type"?me+(Mt+"="+vt+"&"):me+(Mt+"=redacted&")}}}else me=null;else me=Z;return"XMLHTTP REQ ("+A+") [attempt "+K+"]: "+x+`
`+w+`
`+me})}function _t(d,x,w,A,K,Z,me){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+K+"]: "+x+`
`+w+`
`+Z+" "+me})}function it(d,x,w,A){d.info(function(){return"XMLHTTP TEXT ("+x+"): "+Zt(d,w)+(A?" "+A:"")})}function Ht(d,x){d.info(function(){return"TIMEOUT: "+x})}Ve.prototype.info=function(){};function Zt(d,x){if(!d.g)return x;if(!x)return null;try{const Z=JSON.parse(x);if(Z){for(d=0;d<Z.length;d++)if(Array.isArray(Z[d])){var w=Z[d];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var K=A[0];if(K!="noop"&&K!="stop"&&K!="close")for(let me=1;me<A.length;me++)A[me]=""}}}}return xn(Z)}catch{return x}}var Pt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},un={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ar;function pa(){}_(pa,Nr),pa.prototype.g=function(){return new XMLHttpRequest},Ar=new pa;function ga(d){return encodeURIComponent(String(d))}function Of(d){var x=1;d=d.split(":");const w=[];for(;x>0&&d.length;)w.push(d.shift()),x--;return d.length&&w.push(d.join(":")),w}function As(d,x,w,A){this.j=d,this.i=x,this.l=w,this.S=A||1,this.V=new Er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ci}function ci(){this.i=null,this.g="",this.h=!1}var Eo={},Ys={};function Qs(d,x,w){d.M=1,d.A=Sr(Tt(x)),d.u=w,d.R=!0,ui(d,null)}function ui(d,x){d.F=Date.now(),ya(d),d.B=Tt(d.A);var w=d.B,A=d.S;Array.isArray(A)||(A=[String(A)]),Bu(w.i,"t",A),d.C=0,w=d.j.L,d.h=new ci,d.g=Do(d.j,w?x:null,!d.u),d.P>0&&(d.O=new Hl(y(d.Y,d,d.g),d.P)),x=d.V,w=d.g,A=d.ba;var K="readystatechange";Array.isArray(K)||(K&&(Gs[0]=K.toString()),K=Gs);for(let Z=0;Z<K.length;Z++){const me=Kn(w,K[Z],A||x.handleEvent,!1,x.h||x);if(!me)break;x.g[me.key]=me}x=d.J?le(d.J):{},d.u?(d.v||(d.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,x)):(d.v="GET",d.g.ea(d.B,d.v,null,x)),Ts(),bt(d.i,d.v,d.B,d.l,d.S,d.u)}As.prototype.ba=function(d){d=d.target;const x=this.O;x&&vn(d)==3?x.j():this.Y(d)},As.prototype.Y=function(d){try{if(d==this.g)e:{const Oe=vn(this.g),vt=this.g.ya(),at=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Sa(this.g)))){this.K||Oe!=4||vt==7||(vt==8||at<=0?Ts(3):Ts(2)),Ws(this);var x=this.g.ca();this.X=x;var w=di(this);if(this.o=x==200,_t(this.i,this.v,this.B,this.l,this.S,Oe,x),this.o){if(this.U&&!this.L){t:{if(this.g){var A,K=this.g;if((A=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(A)){var Z=A;break t}}Z=null}if(d=Z)it(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,No(this,d);else{this.o=!1,this.m=3,j(12),Zs(this),xa(this);break e}}if(this.R){d=!0;let Mt;for(;!this.K&&this.C<w.length;)if(Mt=Lu(this,w),Mt==Ys){Oe==4&&(this.m=4,j(14),d=!1),it(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Eo){this.m=4,j(15),it(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else it(this.i,this.l,Mt,null),No(this,Mt);if(Ot(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||w.length!=0||this.h.h||(this.m=1,j(16),d=!1),this.o=this.o&&d,!d)it(this.i,this.l,w,"[Invalid Chunked Response]"),Zs(this),xa(this);else if(w.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),ec(me),me.P=!0,j(11))}}else it(this.i,this.l,w,null),No(this,w);Oe==4&&Zs(this),this.o&&!this.K&&(Oe==4?tc(this.j,this):(this.o=!1,ya(this)))}else Ca(this.g),x==400&&w.indexOf("Unknown SID")>0?(this.m=3,j(12)):(this.m=0,j(13)),Zs(this),xa(this)}}}catch{}finally{}};function di(d){if(!Ot(d))return d.g.la();const x=Sa(d.g);if(x==="")return"";let w="";const A=x.length,K=vn(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Zs(d),xa(d),"";d.h.i=new h.TextDecoder}for(let Z=0;Z<A;Z++)d.h.h=!0,w+=d.h.i.decode(x[Z],{stream:!(K&&Z==A-1)});return x.length=0,d.h.g+=w,d.C=0,d.h.g}function Ot(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Lu(d,x){var w=d.C,A=x.indexOf(`
`,w);return A==-1?Ys:(w=Number(x.substring(w,A)),isNaN(w)?Eo:(A+=1,A+w>x.length?Ys:(x=x.slice(A,A+w),d.C=A+w,x)))}As.prototype.cancel=function(){this.K=!0,Zs(this)};function ya(d){d.T=Date.now()+d.H,Xs(d,d.H)}function Xs(d,x){if(d.D!=null)throw Error("WatchDog timer not null");d.D=we(y(d.aa,d),x)}function Ws(d){d.D&&(h.clearTimeout(d.D),d.D=null)}As.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ht(this.i,this.B),this.M!=2&&(Ts(),j(17)),Zs(this),this.m=2,xa(this)):Xs(this,this.T-d)};function xa(d){d.j.I==0||d.K||tc(d.j,d)}function Zs(d){Ws(d);var x=d.O;x&&typeof x.dispose=="function"&&x.dispose(),d.O=null,qt(d.V),d.g&&(x=d.g,d.g=null,x.abort(),x.dispose())}function No(d,x){try{var w=d.j;if(w.I!=0&&(w.g==d||ba(w.h,d))){if(!d.L&&ba(w.h,d)&&w.I==3){try{var A=w.Ba.g.parse(x)}catch{A=null}if(Array.isArray(A)&&A.length==3){var K=A;if(K[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)ko(w),Js(w);else break e;Jl(w),j(18)}}else w.xa=K[1],0<w.xa-w.K&&K[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=we(y(w.Va,w),6e3));cs(w.h)<=1&&w.ta&&(w.ta=void 0)}else Ir(w,11)}else if((d.L||w.g==d)&&ko(w),!S(x))for(K=w.Ba.g.parse(x),x=0;x<K.length;x++){let at=K[x];const Mt=at[0];if(!(Mt<=w.K))if(w.K=Mt,at=at[1],w.I==2)if(at[0]=="c"){w.M=at[1],w.ba=at[2];const Qn=at[3];Qn!=null&&(w.ka=Qn,w.j.info("VER="+w.ka));const er=at[4];er!=null&&(w.za=er,w.j.info("SVER="+w.za));const Cs=at[5];Cs!=null&&typeof Cs=="number"&&Cs>0&&(A=1.5*Cs,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const Rs=d.g;if(Rs){const Is=Rs.g?Rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Is){var Z=A.h;Z.g||Is.indexOf("spdy")==-1&&Is.indexOf("quic")==-1&&Is.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(To(Z,Z.h),Z.h=null))}if(A.G){const sc=Rs.g?Rs.g.getResponseHeader("X-HTTP-Session-Id"):null;sc&&(A.wa=sc,ut(A.J,A.G,sc))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var me=d;if(A.na=Qu(A,A.L?A.ba:null,A.W),me.L){jr(A.h,me);var Oe=me,vt=A.O;vt&&(Oe.H=vt),Oe.D&&(Ws(Oe),ya(Oe)),A.g=me}else $u(A);w.i.length>0&&Da(w)}else at[0]!="stop"&&at[0]!="close"||Ir(w,7);else w.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?Ir(w,7):Ia(w):at[0]!="noop"&&w.l&&w.l.qa(at),w.A=0)}}Ts(4)}catch{}}var Mf=class{constructor(d,x){this.g=d,this.map=x}};function va(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wa(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function cs(d){return d.h?1:d.g?d.g.size:0}function ba(d,x){return d.h?d.h==x:d.g?d.g.has(x):!1}function To(d,x){d.g?d.g.add(x):d.h=x}function jr(d,x){d.h&&d.h==x?d.h=null:d.g&&d.g.has(x)&&d.g.delete(x)}va.prototype.cancel=function(){if(this.i=Ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Ao(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let x=d.i;for(const w of d.g.values())x=x.concat(w.G);return x}return R(d.i)}var jo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lf(d,x){if(d){d=d.split("&");for(let w=0;w<d.length;w++){const A=d[w].indexOf("=");let K,Z=null;A>=0?(K=d[w].substring(0,A),Z=d[w].substring(A+1)):K=d[w],x(K,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function js(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;d instanceof js?(this.l=d.l,hi(this,d.j),this.o=d.o,this.g=d.g,_a(this,d.u),this.h=d.h,fi(this,zu(d.i)),this.m=d.m):d&&(x=String(d).match(jo))?(this.l=!1,hi(this,x[1]||"",!0),this.o=Ea(x[2]||""),this.g=Ea(x[3]||"",!0),_a(this,x[4]),this.h=Ea(x[5]||"",!0),fi(this,x[6]||"",!0),this.m=Ea(x[7]||"")):(this.l=!1,this.i=new us(null,this.l))}js.prototype.toString=function(){const d=[];var x=this.j;x&&d.push(sn(x,Gl,!0),":");var w=this.g;return(w||x=="file")&&(d.push("//"),(x=this.o)&&d.push(sn(x,Gl,!0),"@"),d.push(ga(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(sn(w,w.charAt(0)=="/"?mi:Kl,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",sn(w,Uu)),d.join("")},js.prototype.resolve=function(d){const x=Tt(this);let w=!!d.j;w?hi(x,d.j):w=!!d.o,w?x.o=d.o:w=!!d.g,w?x.g=d.g:w=d.u!=null;var A=d.h;if(w)_a(x,d.u);else if(w=!!d.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var K=x.h.lastIndexOf("/");K!=-1&&(A=x.h.slice(0,K+1)+A)}if(K=A,K==".."||K==".")A="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){A=K.lastIndexOf("/",0)==0,K=K.split("/");const Z=[];for(let me=0;me<K.length;){const Oe=K[me++];Oe=="."?A&&me==K.length&&Z.push(""):Oe==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),A&&me==K.length&&Z.push("")):(Z.push(Oe),A=!0)}A=Z.join("/")}else A=K}return w?x.h=A:w=d.i.toString()!=="",w?fi(x,zu(d.i)):w=!!d.m,w&&(x.m=d.m),x};function Tt(d){return new js(d)}function hi(d,x,w){d.j=w?Ea(x,!0):x,d.j&&(d.j=d.j.replace(/:$/,""))}function _a(d,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);d.u=x}else d.u=null}function fi(d,x,w){x instanceof us?(d.i=x,Xl(d.i,d.l)):(w||(x=sn(x,Vu)),d.i=new us(x,d.l))}function ut(d,x,w){d.i.set(x,w)}function Sr(d){return ut(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ea(d,x){return d?x?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function sn(d,x,w){return typeof d=="string"?(d=encodeURI(d).replace(x,$l),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function $l(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Gl=/[#\/\?@]/g,Kl=/[#\?:]/g,mi=/[#\?]/g,Vu=/[#\?@]/g,Uu=/#/g;function us(d,x){this.h=this.g=null,this.i=d||null,this.j=!!x}function Cr(d){d.g||(d.g=new Map,d.h=0,d.i&&Lf(d.i,function(x,w){d.add(decodeURIComponent(x.replace(/\+/g," ")),w)}))}t=us.prototype,t.add=function(d,x){Cr(this),this.i=null,d=Ss(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(x),this.h+=1,this};function Yl(d,x){Cr(d),x=Ss(d,x),d.g.has(x)&&(d.i=null,d.h-=d.g.get(x).length,d.g.delete(x))}function Ql(d,x){return Cr(d),x=Ss(d,x),d.g.has(x)}t.forEach=function(d,x){Cr(this),this.g.forEach(function(w,A){w.forEach(function(K){d.call(x,K,A,this)},this)},this)};function So(d,x){Cr(d);let w=[];if(typeof x=="string")Ql(d,x)&&(w=w.concat(d.g.get(Ss(d,x))));else for(d=Array.from(d.g.values()),x=0;x<d.length;x++)w=w.concat(d[x]);return w}t.set=function(d,x){return Cr(this),this.i=null,d=Ss(this,d),Ql(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[x]),this.h+=1,this},t.get=function(d,x){return d?(d=So(this,d),d.length>0?String(d[0]):x):x};function Bu(d,x,w){Yl(d,x),w.length>0&&(d.i=null,d.g.set(Ss(d,x),R(w)),d.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],x=Array.from(this.g.keys());for(let A=0;A<x.length;A++){var w=x[A];const K=ga(w);w=So(this,w);for(let Z=0;Z<w.length;Z++){let me=K;w[Z]!==""&&(me+="="+ga(w[Z])),d.push(me)}}return this.i=d.join("&")};function zu(d){const x=new us;return x.i=d.i,d.g&&(x.g=new Map(d.g),x.h=d.h),x}function Ss(d,x){return x=String(x),d.j&&(x=x.toLowerCase()),x}function Xl(d,x){x&&!d.j&&(Cr(d),d.i=null,d.g.forEach(function(w,A){const K=A.toLowerCase();A!=K&&(Yl(this,A),Bu(this,K,w))},d)),d.j=x}function Wl(d,x){const w=new Ve;if(h.Image){const A=new Image;A.onload=v(Sn,w,"TestLoadImage: loaded",!0,x,A),A.onerror=v(Sn,w,"TestLoadImage: error",!1,x,A),A.onabort=v(Sn,w,"TestLoadImage: abort",!1,x,A),A.ontimeout=v(Sn,w,"TestLoadImage: timeout",!1,x,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else x(!1)}function pi(d,x){const w=new Ve,A=new AbortController,K=setTimeout(()=>{A.abort(),Sn(w,"TestPingServer: timeout",!1,x)},1e4);fetch(d,{signal:A.signal}).then(Z=>{clearTimeout(K),Z.ok?Sn(w,"TestPingServer: ok",!0,x):Sn(w,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(K),Sn(w,"TestPingServer: error",!1,x)})}function Sn(d,x,w,A,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),A(w)}catch{}}function Fu(){this.g=new ma}function Na(d){this.i=d.Sb||null,this.h=d.ab||!1}_(Na,Nr),Na.prototype.g=function(){return new Ta(this.i,this.h)};function Ta(d,x){It.call(this),this.H=d,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Ta,It),t=Ta.prototype,t.open=function(d,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=x,this.readyState=1,Rr(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(x.body=d),(this.H||h).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cn(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Rr(this)),this.g&&(this.readyState=3,Rr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gi(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function gi(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var x=d.value?d.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!d.done}))&&(this.response=this.responseText+=x)}d.done?Cn(this):Rr(this),this.readyState==3&&gi(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Cn(this))},t.Na=function(d){this.g&&(this.response=d,Cn(this))},t.ga=function(){this.g&&Cn(this)};function Cn(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Rr(d)}t.setRequestHeader=function(d,x){this.A.append(d,x)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],x=this.h.entries();for(var w=x.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=x.next();return d.join(`\r
`)};function Rr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function yi(d){let x="";return Be(d,function(w,A){x+=A,x+=":",x+=w,x+=`\r
`}),x}function ds(d,x,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=yi(w),typeof d=="string"?w!=null&&ga(w):ut(d,x,w))}function pt(d){It.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(pt,It);var Co=/^https?$/i,qu=["POST","PUT"];t=pt.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,x,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);x=x?x.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ar.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(x,String(d),!0),this.B=!1}catch(Z){Aa(this,Z);return}if(d=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var K in A)w.set(K,A[K]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Z of A.keys())w.set(Z,A.get(Z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(qu,x,void 0)>=0)||A||K||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,me]of w)this.g.setRequestHeader(Z,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Z){Aa(this,Z)}};function Aa(d,x){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=x,d.o=5,ja(d),Jt(d)}function ja(d){d.A||(d.A=!0,kt(d,"complete"),kt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,kt(this,"complete"),kt(this,"abort"),Jt(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jt(this,!0)),pt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Zl(this):this.Xa())},t.Xa=function(){Zl(this)};function Zl(d){if(d.h&&typeof c<"u"){if(d.v&&vn(d)==4)setTimeout(d.Ca.bind(d),0);else if(kt(d,"readystatechange"),vn(d)==4){d.h=!1;try{const Z=d.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var w;if(!(w=x)){var A;if(A=Z===0){let me=String(d.D).match(jo)[1]||null;!me&&h.self&&h.self.location&&(me=h.self.location.protocol.slice(0,-1)),A=!Co.test(me?me.toLowerCase():"")}w=A}if(w)kt(d,"complete"),kt(d,"success");else{d.o=6;try{var K=vn(d)>2?d.g.statusText:""}catch{K=""}d.l=K+" ["+d.ca()+"]",ja(d)}}finally{Jt(d)}}}}function Jt(d,x){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const w=d.g;d.g=null,x||kt(d,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function vn(d){return d.g?d.g.readyState:0}t.ca=function(){try{return vn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var x=this.g.responseText;return d&&x.indexOf(d)==0&&(x=x.substring(d.length)),Wt(x)}};function Sa(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ca(d){const x={};d=(d.g&&vn(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(S(d[A]))continue;var w=Of(d[A]);const K=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Z=x[K]||[];x[K]=Z,Z.push(w)}V(x,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ra(d,x,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||x}function Ro(d){this.za=0,this.i=[],this.j=new Ve,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ra("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ra("baseRetryDelayMs",5e3,d),this.Za=Ra("retryDelaySeedMs",1e4,d),this.Ta=Ra("forwardChannelMaxRetries",2,d),this.va=Ra("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new va(d&&d.concurrentRequestLimit),this.Ba=new Fu,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ro.prototype,t.ka=8,t.I=1,t.connect=function(d,x,w,A){j(0),this.W=d,this.H=x||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=Qu(this,null,this.W),Da(this)};function Ia(d){if(ka(d),d.I==3){var x=d.V++,w=Tt(d.J);if(ut(w,"SID",d.M),ut(w,"RID",x),ut(w,"TYPE","terminate"),Pa(d,w),x=new As(d,d.j,x),x.M=2,x.A=Sr(Tt(w)),w=!1,h.navigator&&h.navigator.sendBeacon)try{w=h.navigator.sendBeacon(x.A.toString(),"")}catch{}!w&&h.Image&&(new Image().src=x.A,w=!0),w||(x.g=Do(x.j,null),x.g.ea(x.A)),x.F=Date.now(),ya(x)}Yu(d)}function Js(d){d.g&&(ec(d),d.g.cancel(),d.g=null)}function ka(d){Js(d),d.v&&(h.clearTimeout(d.v),d.v=null),ko(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Da(d){if(!wa(d.h)&&!d.m){d.m=!0;var x=d.Ea;he||N(),ue||(he(),ue=!0),k.add(x,d),d.D=0}}function Vf(d,x){return cs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=x.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=we(y(d.Ea,d,x),Ku(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const K=new As(this,this.j,d);let Z=this.o;if(this.U&&(Z?(Z=le(Z),ee(Z,this.U)):Z=this.U),this.u!==null||this.R||(K.J=Z,Z=null),this.S)e:{for(var x=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(x+=A,x>4096){x=w;break e}if(x===4096||w===this.i.length-1){x=w+1;break e}}x=1e3}else x=1e3;x=Io(this,K,x),w=Tt(this.J),ut(w,"RID",d),ut(w,"CVER",22),this.G&&ut(w,"X-HTTP-Session-Id",this.G),Pa(this,w),Z&&(this.R?x="headers="+ga(yi(Z))+"&"+x:this.u&&ds(w,this.u,Z)),To(this.h,K),this.Ra&&ut(w,"TYPE","init"),this.S?(ut(w,"$req",x),ut(w,"SID","null"),K.U=!0,Qs(K,w,null)):Qs(K,w,x),this.I=2}}else this.I==3&&(d?Hu(this,d):this.i.length==0||wa(this.h)||Hu(this))};function Hu(d,x){var w;x?w=x.l:w=d.V++;const A=Tt(d.J);ut(A,"SID",d.M),ut(A,"RID",w),ut(A,"AID",d.K),Pa(d,A),d.u&&d.o&&ds(A,d.u,d.o),w=new As(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),x&&(d.i=x.G.concat(d.i)),x=Io(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),To(d.h,w),Qs(w,A,x)}function Pa(d,x){d.H&&Be(d.H,function(w,A){ut(x,A,w)}),d.l&&Be({},function(w,A){ut(x,A,w)})}function Io(d,x,w){w=Math.min(d.i.length,w);const A=d.l?y(d.l.Ka,d.l,d):null;e:{var K=d.i;let Oe=-1;for(;;){const vt=["count="+w];Oe==-1?w>0?(Oe=K[0].g,vt.push("ofs="+Oe)):Oe=0:vt.push("ofs="+Oe);let at=!0;for(let Mt=0;Mt<w;Mt++){var Z=K[Mt].g;const Qn=K[Mt].map;if(Z-=Oe,Z<0)Oe=Math.max(0,K[Mt].g-100),at=!1;else try{Z="req"+Z+"_"||"";try{var me=Qn instanceof Map?Qn:Object.entries(Qn);for(const[er,Cs]of me){let Rs=Cs;p(Cs)&&(Rs=xn(Cs)),vt.push(Z+er+"="+encodeURIComponent(Rs))}}catch(er){throw vt.push(Z+"type="+encodeURIComponent("_badmap")),er}}catch{A&&A(Qn)}}if(at){me=vt.join("&");break e}}me=void 0}return d=d.i.splice(0,w),x.G=d,me}function $u(d){if(!d.g&&!d.v){d.Y=1;var x=d.Da;he||N(),ue||(he(),ue=!0),k.add(x,d),d.A=0}}function Jl(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=we(y(d.Da,d),Ku(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,Gu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=we(y(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,j(10),Js(this),Gu(this))};function ec(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Gu(d){d.g=new As(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var x=Tt(d.na);ut(x,"RID","rpc"),ut(x,"SID",d.M),ut(x,"AID",d.K),ut(x,"CI",d.F?"0":"1"),!d.F&&d.ia&&ut(x,"TO",d.ia),ut(x,"TYPE","xmlhttp"),Pa(d,x),d.u&&d.o&&ds(x,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=Sr(Tt(x)),w.u=null,w.R=!0,ui(w,d)}t.Va=function(){this.C!=null&&(this.C=null,Js(this),Jl(this),j(19))};function ko(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function tc(d,x){var w=null;if(d.g==x){ko(d),ec(d),d.g=null;var A=2}else if(ba(d.h,x))w=x.G,jr(d.h,x),A=1;else return;if(d.I!=0){if(x.o)if(A==1){w=x.u?x.u.length:0,x=Date.now()-x.F;var K=d.D;A=Tr(),kt(A,new de(A,w)),Da(d)}else $u(d);else if(K=x.m,K==3||K==0&&x.X>0||!(A==1&&Vf(d,x)||A==2&&Jl(d)))switch(w&&w.length>0&&(x=d.h,x.i=x.i.concat(w)),K){case 1:Ir(d,5);break;case 4:Ir(d,10);break;case 3:Ir(d,6);break;default:Ir(d,2)}}}function Ku(d,x){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*x}function Ir(d,x){if(d.j.info("Error code "+x),x==2){var w=y(d.bb,d),A=d.Ua;const K=!A;A=new js(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||hi(A,"https"),Sr(A),K?Wl(A.toString(),w):pi(A.toString(),w)}else j(2);d.I=0,d.l&&d.l.pa(x),Yu(d),ka(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),j(2)):(this.j.info("Failed to ping google.com"),j(1))};function Yu(d){if(d.I=0,d.ja=[],d.l){const x=Ao(d.h);(x.length!=0||d.i.length!=0)&&(U(d.ja,x),U(d.ja,d.i),d.h.i.length=0,R(d.i),d.i.length=0),d.l.oa()}}function Qu(d,x,w){var A=w instanceof js?Tt(w):new js(w);if(A.g!="")x&&(A.g=x+"."+A.g),_a(A,A.u);else{var K=h.location;A=K.protocol,x=x?x+"."+K.hostname:K.hostname,K=+K.port;const Z=new js(null);A&&hi(Z,A),x&&(Z.g=x),K&&_a(Z,K),w&&(Z.h=w),A=Z}return w=d.G,x=d.wa,w&&x&&ut(A,w,x),ut(A,"VER",d.ka),Pa(d,A),A}function Do(d,x,w){if(x&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=d.Aa&&!d.ma?new pt(new Na({ab:w})):new pt(d.ma),x.Fa(d.L),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xu(){}t=Xu.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Po(){}Po.prototype.g=function(d,x){return new Rn(d,x)};function Rn(d,x){It.call(this),this.g=new Ro(x),this.l=d,this.h=x&&x.messageUrlParams||null,d=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(d?d["X-WebChannel-Content-Type"]=x.messageContentType:d={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(d?d["X-WebChannel-Client-Profile"]=x.sa:d={"X-WebChannel-Client-Profile":x.sa}),this.g.U=d,(d=x&&x.Qb)&&!S(d)&&(this.g.u=d),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!S(x)&&(this.g.G=x,d=this.h,d!==null&&x in d&&(d=this.h,x in d&&delete d[x])),this.j=new xi(this)}_(Rn,It),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){Ia(this.g)},Rn.prototype.o=function(d){var x=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=xn(d),d=w);x.i.push(new Mf(x.Ya++,d)),x.I==3&&Da(x)},Rn.prototype.N=function(){this.g.l=null,delete this.j,Ia(this.g),delete this.g,Rn.Z.N.call(this)};function nc(d){Yn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var x=d.__sm__;if(x){e:{for(const w in x){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,x=x!==null&&d in x?x[d]:void 0),this.data=x}else this.data=d}_(nc,Yn);function Wu(){Dt.call(this),this.status=1}_(Wu,Dt);function xi(d){this.g=d}_(xi,Xu),xi.prototype.ra=function(){kt(this.g,"a")},xi.prototype.qa=function(d){kt(this.g,new nc(d))},xi.prototype.pa=function(d){kt(this.g,new Wu)},xi.prototype.oa=function(){kt(this.g,"b")},Po.prototype.createWebChannel=Po.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,F1=function(){return new Po},z1=function(){return Tr()},B1=Ze,dg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pt.NO_ERROR=0,Pt.TIMEOUT=8,Pt.HTTP_ERROR=6,mh=Pt,un.COMPLETE="complete",U1=un,Mn.EventType=jn,jn.OPEN="a",jn.CLOSE="b",jn.ERROR="c",jn.MESSAGE="d",It.prototype.listen=It.prototype.J,Xc=Mn,pt.prototype.listenOnce=pt.prototype.K,pt.prototype.getLastError=pt.prototype.Ha,pt.prototype.getLastErrorCode=pt.prototype.ya,pt.prototype.getStatus=pt.prototype.ca,pt.prototype.getResponseJson=pt.prototype.La,pt.prototype.getResponseText=pt.prototype.la,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Fa,V1=pt}).apply(typeof eh<"u"?eh:typeof self<"u"?self:typeof window<"u"?window:{});const sb="@firebase/firestore",rb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new qg("@firebase/firestore");function cl(){return oo.logLevel}function ve(t,...e){if(oo.logLevel<=Ge.DEBUG){const n=e.map(n0);oo.debug(`Firestore (${Pl}): ${t}`,...n)}}function ti(t,...e){if(oo.logLevel<=Ge.ERROR){const n=e.map(n0);oo.error(`Firestore (${Pl}): ${t}`,...n)}}function _l(t,...e){if(oo.logLevel<=Ge.WARN){const n=e.map(n0);oo.warn(`Firestore (${Pl}): ${t}`,...n)}}function n0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,q1(t,r,n)}function q1(t,e,n){let r=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ti(r),new Error(r)}function rt(t,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,t||q1(e,o,r)}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class z5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(En.UNAUTHENTICATED)))}shutdown(){}}class F5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class q5{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let c=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Qr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Qr)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string",31837,{l:r}),new H1(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class H5{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $5{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new H5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ib{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rt(this.o===void 0,3512);const r=c=>{c.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ib(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ib(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=K5(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Ke(t,e){return t<e?-1:t>e?1:0}function hg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const o=t.charAt(r),c=e.charAt(r);if(o!==c)return $p(o)===$p(c)?Ke(o,c):$p(o)?1:-1}return Ke(t.length,e.length)}const Y5=55296,Q5=57343;function $p(t){const e=t.charCodeAt(0);return e>=Y5&&e<=Q5}function El(t,e,n){return t.length===e.length&&t.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="__name__";class ar{constructor(e,n,r){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ar.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ar?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=ar.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ke(e.length,n.length)}static compareSegments(e,n){const r=ar.isNumericId(e),o=ar.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?ar.extractNumericId(e).compare(ar.extractNumericId(n)):hg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qi.fromString(e.substring(4,e.length-2))}}class yt extends ar{construct(e,n,r){return new yt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new yt(n)}static emptyPath(){return new yt([])}}const X5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends ar{construct(e,n,r){return new pn(e,n,r)}static isValidIdentifier(e){return X5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ab}static keyField(){return new pn([ab])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new xe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new xe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new xe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(r+=p,o++):(c(),o++)}if(c(),h)throw new xe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(n)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(yt.fromString(e))}static fromName(e){return new Ee(yt.fromString(e).popFirst(5))}static empty(){return new Ee(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return yt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t,e,n){if(!n)throw new xe(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function W5(t,e,n,r){if(e===!0&&r===!0)throw new xe(se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ob(t){if(!Ee.isDocumentKey(t))throw new xe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lb(t){if(Ee.isDocumentKey(t))throw new xe(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function G1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function lf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re(12329,{type:typeof t})}function Us(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lf(t);throw new xe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Nu(t,e){if(!G1(t))throw new xe(se.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const h=t[r];if(o&&typeof h!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new xe(se.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=-62135596800,ub=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ub);return new wt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cb)throw new xe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ub}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nu(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Xt("string",wt._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new wt(0,0))}static max(){return new De(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=-1;function Z5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,o=De.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new Ji(o,Ee.empty(),e)}function J5(t){return new Ji(t.readTime,t.key,cu)}class Ji{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ji(De.min(),Ee.empty(),cu)}static max(){return new Ji(De.max(),Ee.empty(),cu)}}function eR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==tR)throw t;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.reject(n)}static resolve(e){return new ae(((n,r)=>{n(e)}))}static reject(e){return new ae(((n,r)=>{r(e)}))}static waitFor(e){return new ae(((n,r)=>{let o=0,c=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++c,h&&c===o&&n()}),(g=>r(g)))})),h=!0,c===o&&n()}))}static or(e){let n=ae.resolve(!1);for(const r of e)n=n.next((o=>o?ae.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new ae(((r,o)=>{const c=e.length,h=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((v=>{h[y]=v,++p,p===c&&r(h)}),(v=>o(v)))}}))}static doWhile(e,n){return new ae(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function sR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ml(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=-1;function uf(t){return t==null}function Rh(t){return t===0&&1/t==-1/0}function rR(t){return typeof t=="number"&&Number.isInteger(t)&&!Rh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="";function iR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=db(e)),e=aR(t.get(n),e);return db(e)}function aR(t,e){let n=e;const r=t.length;for(let o=0;o<r;o++){const c=t.charAt(o);switch(c){case"\0":n+="";break;case K1:n+="";break;default:n+=c}}return n}function db(t){return t+K1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function la(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Y1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.comparator=e,this.root=n||mn.EMPTY}insert(e,n){return new jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new th(this.root,e,this.comparator,!1)}getReverseIterator(){return new th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new th(this.root,e,this.comparator,!0)}}class th{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??mn.RED,this.left=o??mn.EMPTY,this.right=c??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new mn(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return mn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fb(this.data.getIterator())}getIteratorFrom(e){return new fb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new nn(this.comparator);return n.data=e,n}}class fb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new ss([])}unionWith(e){let n=new nn(pn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ss(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Q1("Invalid base64 string: "+c):c}})(e);return new gn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const oR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ea(t){if(rt(!!t,39018),typeof t=="string"){let e=0;const n=oR.exec(t);if(rt(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bt(t.seconds),nanos:Bt(t.nanos)}}function Bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ta(t){return typeof t=="string"?gn.fromBase64String(t):gn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="server_timestamp",W1="__type__",Z1="__previous_value__",J1="__local_write_time__";function i0(t){return(t?.mapValue?.fields||{})[W1]?.stringValue===X1}function df(t){const e=t.mapValue.fields[Z1];return i0(e)?df(e):e}function uu(t){const e=ea(t.mapValue.fields[J1].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r,o,c,h,p,g,y,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const Ih="(default)";class du{constructor(e,n){this.projectId=e,this.database=n||Ih}static empty(){return new du("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof du&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="__type__",cR="__max__",nh={mapValue:{}},t_="__vector__",kh="value";function na(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?i0(t)?4:dR(t)?9007199254740991:uR(t)?10:11:Re(28295,{value:t})}function gr(t,e){if(t===e)return!0;const n=na(t);if(n!==na(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uu(t).isEqual(uu(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=ea(o.timestampValue),p=ea(c.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(o,c){return ta(o.bytesValue).isEqual(ta(c.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(o,c){return Bt(o.geoPointValue.latitude)===Bt(c.geoPointValue.latitude)&&Bt(o.geoPointValue.longitude)===Bt(c.geoPointValue.longitude)})(t,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Bt(o.integerValue)===Bt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Bt(o.doubleValue),p=Bt(c.doubleValue);return h===p?Rh(h)===Rh(p):isNaN(h)&&isNaN(p)}return!1})(t,e);case 9:return El(t.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},p=c.mapValue.fields||{};if(hb(h)!==hb(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!gr(h[g],p[g])))return!1;return!0})(t,e);default:return Re(52216,{left:t})}}function hu(t,e){return(t.values||[]).find((n=>gr(n,e)))!==void 0}function Nl(t,e){if(t===e)return 0;const n=na(t),r=na(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return(function(c,h){const p=Bt(c.integerValue||c.doubleValue),g=Bt(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(t,e);case 3:return mb(t.timestampValue,e.timestampValue);case 4:return mb(uu(t),uu(e));case 5:return hg(t.stringValue,e.stringValue);case 6:return(function(c,h){const p=ta(c),g=ta(h);return p.compareTo(g)})(t.bytesValue,e.bytesValue);case 7:return(function(c,h){const p=c.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const v=Ke(p[y],g[y]);if(v!==0)return v}return Ke(p.length,g.length)})(t.referenceValue,e.referenceValue);case 8:return(function(c,h){const p=Ke(Bt(c.latitude),Bt(h.latitude));return p!==0?p:Ke(Bt(c.longitude),Bt(h.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return pb(t.arrayValue,e.arrayValue);case 10:return(function(c,h){const p=c.fields||{},g=h.fields||{},y=p[kh]?.arrayValue,v=g[kh]?.arrayValue,_=Ke(y?.values?.length||0,v?.values?.length||0);return _!==0?_:pb(y,v)})(t.mapValue,e.mapValue);case 11:return(function(c,h){if(c===nh.mapValue&&h===nh.mapValue)return 0;if(c===nh.mapValue)return 1;if(h===nh.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=h.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let _=0;_<g.length&&_<v.length;++_){const T=hg(g[_],v[_]);if(T!==0)return T;const R=Nl(p[g[_]],y[v[_]]);if(R!==0)return R}return Ke(g.length,v.length)})(t.mapValue,e.mapValue);default:throw Re(23264,{he:n})}}function mb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=ea(t),r=ea(e),o=Ke(n.seconds,r.seconds);return o!==0?o:Ke(n.nanos,r.nanos)}function pb(t,e){const n=t.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=Nl(n[o],r[o]);if(c)return c}return Ke(n.length,r.length)}function Tl(t){return fg(t)}function fg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=ea(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ta(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ee.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=fg(c);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const h of r)c?c=!1:o+=",",o+=`${h}:${fg(n.fields[h])}`;return o+"}"})(t.mapValue):Re(61005,{value:t})}function ph(t){switch(na(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=df(t);return e?16+ph(e):16;case 5:return 2*t.stringValue.length;case 6:return ta(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+ph(c)),0)})(t.arrayValue);case 10:case 11:return(function(r){let o=0;return la(r.fields,((c,h)=>{o+=c.length+ph(h)})),o})(t.mapValue);default:throw Re(13486,{value:t})}}function gb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mg(t){return!!t&&"integerValue"in t}function a0(t){return!!t&&"arrayValue"in t}function yb(t){return!!t&&"nullValue"in t}function xb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gh(t){return!!t&&"mapValue"in t}function uR(t){return(t?.mapValue?.fields||{})[e_]?.stringValue===t_}function nu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return la(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=nu(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nu(t.arrayValue.values[n]);return e}return{...t}}function dR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(n)}setAll(e){let n=pn.emptyPath(),r={},o=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=p.popLast()}h?r[p.lastSegment()]=nu(h):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];gh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){la(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new qn(nu(this.value))}}function n_(t){const e=[];return la(t.fields,((n,r)=>{const o=new pn([n]);if(gh(r)){const c=n_(r.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new ss(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n,r,o,c,h,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Nn(e,0,De.min(),De.min(),De.min(),qn.empty(),0)}static newFoundDocument(e,n,r,o){return new Nn(e,1,n,De.min(),r,o,0)}static newNoDocument(e,n){return new Nn(e,2,n,De.min(),De.min(),qn.empty(),0)}static newUnknownDocument(e,n){return new Nn(e,3,n,De.min(),De.min(),qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function vb(t,e,n){let r=0;for(let o=0;o<t.position.length;o++){const c=e[o],h=t.position[o];if(c.field.isKeyField()?r=Ee.comparator(Ee.fromName(h.referenceValue),n.key):r=Nl(h,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function wb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n="asc"){this.field=e,this.dir=n}}function hR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{}class Qt extends s_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mR(e,n,r):n==="array-contains"?new yR(e,r):n==="in"?new xR(e,r):n==="not-in"?new vR(e,r):n==="array-contains-any"?new wR(e,r):new Qt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pR(e,r):new gR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Nl(n,this.value)):n!==null&&na(this.value)===na(n)&&this.matchesComparison(Nl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bs extends s_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Bs(e,n)}matches(e){return r_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function r_(t){return t.op==="and"}function i_(t){return fR(t)&&r_(t)}function fR(t){for(const e of t.filters)if(e instanceof Bs)return!1;return!0}function pg(t){if(t instanceof Qt)return t.field.canonicalString()+t.op.toString()+Tl(t.value);if(i_(t))return t.filters.map((e=>pg(e))).join(",");{const e=t.filters.map((n=>pg(n))).join(",");return`${t.op}(${e})`}}function a_(t,e){return t instanceof Qt?(function(r,o){return o instanceof Qt&&r.op===o.op&&r.field.isEqual(o.field)&&gr(r.value,o.value)})(t,e):t instanceof Bs?(function(r,o){return o instanceof Bs&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,h,p)=>c&&a_(h,o.filters[p])),!0):!1})(t,e):void Re(19439)}function o_(t){return t instanceof Qt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Tl(n.value)}`})(t):t instanceof Bs?(function(n){return n.op.toString()+" {"+n.getFilters().map(o_).join(" ,")+"}"})(t):"Filter"}class mR extends Qt{constructor(e,n,r){super(e,n,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class pR extends Qt{constructor(e,n){super(e,"in",n),this.keys=l_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class gR extends Qt{constructor(e,n){super(e,"not-in",n),this.keys=l_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function l_(t,e){return(e.arrayValue?.values||[]).map((n=>Ee.fromName(n.referenceValue)))}class yR extends Qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return a0(n)&&hu(n.arrayValue,this.value)}}class xR extends Qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hu(this.value.arrayValue,n)}}class vR extends Qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!hu(this.value.arrayValue,n)}}class wR extends Qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!a0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>hu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n=null,r=[],o=[],c=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=p,this.Te=null}}function bb(t,e=null,n=[],r=[],o=null,c=null,h=null){return new bR(t,e,n,r,o,c,h)}function o0(t){const e=Me(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>pg(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),uf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Tl(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Tl(r))).join(",")),e.Te=n}return e.Te}function l0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!a_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wb(t.startAt,e.startAt)&&wb(t.endAt,e.endAt)}function gg(t){return Ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n=null,r=[],o=[],c=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _R(t,e,n,r,o,c,h,p){return new Ll(t,e,n,r,o,c,h,p)}function c0(t){return new Ll(t)}function _b(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function c_(t){return t.collectionGroup!==null}function su(t){const e=Me(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new nn(pn.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new fu(c,r))})),n.has(pn.keyField().canonicalString())||e.Ie.push(new fu(pn.keyField(),r))}return e.Ie}function dr(t){const e=Me(t);return e.Ee||(e.Ee=ER(e,su(t))),e.Ee}function ER(t,e){if(t.limitType==="F")return bb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new fu(o.field,c)}));const n=t.endAt?new Dh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Dh(t.startAt.position,t.startAt.inclusive):null;return bb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yg(t,e){const n=t.filters.concat([e]);return new Ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xg(t,e,n){return new Ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hf(t,e){return l0(dr(t),dr(e))&&t.limitType===e.limitType}function u_(t){return`${o0(dr(t))}|lt:${t.limitType}`}function ul(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>o_(o))).join(", ")}]`),uf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>Tl(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>Tl(o))).join(",")),`Target(${r})`})(dr(t))}; limitType=${t.limitType})`}function ff(t,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Ee.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(t,e)&&(function(r,o){for(const c of su(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(t,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(t,e)&&(function(r,o){return!(r.startAt&&!(function(h,p,g){const y=vb(h,p,g);return h.inclusive?y<=0:y<0})(r.startAt,su(r),o)||r.endAt&&!(function(h,p,g){const y=vb(h,p,g);return h.inclusive?y>=0:y>0})(r.endAt,su(r),o))})(t,e)}function NR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function d_(t){return(e,n)=>{let r=!1;for(const o of su(t)){const c=TR(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function TR(t,e,n){const r=t.field.isKeyField()?Ee.comparator(e.key,n.key):(function(c,h,p){const g=h.data.field(c),y=p.data.field(c);return g!==null&&y!==null?Nl(g,y):Re(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){la(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return Y1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=new jt(Ee.comparator);function ni(){return AR}const h_=new jt(Ee.comparator);function Wc(...t){let e=h_;for(const n of t)e=e.insert(n.key,n);return e}function f_(t){let e=h_;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ja(){return ru()}function m_(){return ru()}function ru(){return new po((t=>t.toString()),((t,e)=>t.isEqual(e)))}const jR=new jt(Ee.comparator),SR=new nn(Ee.comparator);function Ye(...t){let e=SR;for(const n of t)e=e.add(n);return e}const CR=new nn(Ke);function RR(){return CR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function p_(t){return{integerValue:""+t}}function IR(t,e){return rR(e)?p_(e):u0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(){this._=void 0}}function kR(t,e,n){return t instanceof Ph?(function(o,c){const h={fields:{[W1]:{stringValue:X1},[J1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&i0(c)&&(c=df(c)),c&&(h.fields[Z1]=c),{mapValue:h}})(n,e):t instanceof Al?y_(t,e):t instanceof jl?x_(t,e):(function(o,c){const h=g_(o,c),p=Eb(h)+Eb(o.Ae);return mg(h)&&mg(o.Ae)?p_(p):u0(o.serializer,p)})(t,e)}function DR(t,e,n){return t instanceof Al?y_(t,e):t instanceof jl?x_(t,e):n}function g_(t,e){return t instanceof Oh?(function(r){return mg(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class Ph extends mf{}class Al extends mf{constructor(e){super(),this.elements=e}}function y_(t,e){const n=v_(e);for(const r of t.elements)n.some((o=>gr(o,r)))||n.push(r);return{arrayValue:{values:n}}}class jl extends mf{constructor(e){super(),this.elements=e}}function x_(t,e){let n=v_(e);for(const r of t.elements)n=n.filter((o=>!gr(o,r)));return{arrayValue:{values:n}}}class Oh extends mf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Eb(t){return Bt(t.integerValue||t.doubleValue)}function v_(t){return a0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n){this.field=e,this.transform=n}}function PR(t,e){return t.field.isEqual(e.field)&&(function(r,o){return r instanceof Al&&o instanceof Al||r instanceof jl&&o instanceof jl?El(r.elements,o.elements,gr):r instanceof Oh&&o instanceof Oh?gr(r.Ae,o.Ae):r instanceof Ph&&o instanceof Ph})(t.transform,e.transform)}class OR{constructor(e,n){this.version=e,this.transformResults=n}}class ws{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ws}static exists(e){return new ws(void 0,e)}static updateTime(e){return new ws(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pf{}function b_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new d0(t.key,ws.none()):new Tu(t.key,t.data,ws.none());{const n=t.data,r=qn.empty();let o=new nn(pn.comparator);for(let c of e.fields)if(!o.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?r.delete(c):r.set(c,h),o=o.add(c)}return new ca(t.key,r,new ss(o.toArray()),ws.none())}}function MR(t,e,n){t instanceof Tu?(function(o,c,h){const p=o.value.clone(),g=Tb(o.fieldTransforms,c,h.transformResults);p.setAll(g),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(t,e,n):t instanceof ca?(function(o,c,h){if(!yh(o.precondition,c))return void c.convertToUnknownDocument(h.version);const p=Tb(o.fieldTransforms,c,h.transformResults),g=c.data;g.setAll(__(o)),g.setAll(p),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(t,e,n):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function iu(t,e,n,r){return t instanceof Tu?(function(c,h,p,g){if(!yh(c.precondition,h))return p;const y=c.value.clone(),v=Ab(c.fieldTransforms,g,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(t,e,n,r):t instanceof ca?(function(c,h,p,g){if(!yh(c.precondition,h))return p;const y=Ab(c.fieldTransforms,g,h),v=h.data;return v.setAll(__(c)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((_=>_.field)))})(t,e,n,r):(function(c,h,p){return yh(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(t,e,n)}function LR(t,e){let n=null;for(const r of t.fieldTransforms){const o=e.data.field(r.field),c=g_(r.transform,o||null);c!=null&&(n===null&&(n=qn.empty()),n.set(r.field,c))}return n||null}function Nb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&El(r,o,((c,h)=>PR(c,h)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tu extends pf{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ca extends pf{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function __(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Tb(t,e,n){const r=new Map;rt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let o=0;o<n.length;o++){const c=t[o],h=c.transform,p=e.data.field(c.field);r.set(c.field,DR(h,p,n[o]))}return r}function Ab(t,e,n){const r=new Map;for(const o of t){const c=o.transform,h=n.data.field(o.field);r.set(o.field,kR(c,h,e))}return r}class d0 extends pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VR extends pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&MR(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=iu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=iu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=m_();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let p=this.applyToLocalView(h,c.mutatedFields);p=n.has(o.key)?null:p;const g=b_(h,p);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(De.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,((n,r)=>Nb(n,r)))&&El(this.baseMutations,e.baseMutations,((n,r)=>Nb(n,r)))}}class h0{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){rt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return jR})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new h0(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,Xe;function FR(t){switch(t){case se.OK:return Re(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Re(15467,{code:t})}}function E_(t){if(t===void 0)return ti("GRPC error has no .code"),se.UNKNOWN;switch(t){case Kt.OK:return se.OK;case Kt.CANCELLED:return se.CANCELLED;case Kt.UNKNOWN:return se.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return se.INTERNAL;case Kt.UNAVAILABLE:return se.UNAVAILABLE;case Kt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Kt.NOT_FOUND:return se.NOT_FOUND;case Kt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Kt.ABORTED:return se.ABORTED;case Kt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Kt.DATA_LOSS:return se.DATA_LOSS;default:return Re(39323,{code:t})}}(Xe=Kt||(Kt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=new Qi([4294967295,4294967295],0);function jb(t){const e=qR().encode(t),n=new L1;return n.update(e),new Uint8Array(n.digest())}function Sb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Qi([n,r],0),new Qi([o,c],0)]}class f0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zc(`Invalid padding: ${n}`);if(r<0)throw new Zc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Qi.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(Qi.fromNumber(r)));return o.compare(HR)===1&&(o=new Qi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=jb(e),[r,o]=Sb(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);if(!this.we(h))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new f0(c,o,n);return r.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=jb(e),[r,o]=Sb(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);this.Se(h)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gf(De.min(),o,new jt(Ke),ni(),Ye())}}class Au{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Au(r,n,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class N_{constructor(e,n){this.targetId=e,this.Ce=n}}class T_{constructor(e,n,r=gn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class Cb{constructor(){this.ve=0,this.Fe=Rb(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),n=Ye(),r=Ye();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Re(38017,{changeType:c})}})),new Au(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Rb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $R{constructor(e){this.Ge=e,this.ze=new Map,this.je=ni(),this.Je=sh(),this.He=sh(),this.Ye=new jt(Ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(gg(c))if(r===0){const h=new Ee(c.path);this.et(n,h,Nn.newNoDocument(h,De.min()))}else rt(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let h,p;try{h=ta(r).toUint8Array()}catch(g){if(g instanceof Q1)return _l("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new f0(h,o,c)}catch(g){return _l(g instanceof Zc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,h)=>{const p=this.ot(h);if(p){if(c.current&&gg(p.target)){const g=new Ee(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Nn.newNoDocument(g,e))}c.Be&&(n.set(h,c.ke()),c.qe())}}));let r=Ye();this.He.forEach(((c,h)=>{let p=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new gf(e,n,this.Ye,this.je,r);return this.je=ni(),this.Je=sh(),this.He=sh(),this.Ye=new jt(Ke),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Cb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new nn(Ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new nn(Ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function sh(){return new jt(Ee.comparator)}function Rb(){return new jt(Ee.comparator)}const GR={asc:"ASCENDING",desc:"DESCENDING"},KR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YR={and:"AND",or:"OR"};class QR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vg(t,e){return t.useProto3Json||uf(e)?e:{value:e}}function Mh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function XR(t,e){return Mh(t,e.toTimestamp())}function hr(t){return rt(!!t,49232),De.fromTimestamp((function(n){const r=ea(n);return new wt(r.seconds,r.nanos)})(t))}function m0(t,e){return wg(t,e).canonicalString()}function wg(t,e){const n=(function(o){return new yt(["projects",o.projectId,"databases",o.database])})(t).child("documents");return e===void 0?n:n.child(e)}function j_(t){const e=yt.fromString(t);return rt(k_(e),10190,{key:e.toString()}),e}function bg(t,e){return m0(t.databaseId,e.path)}function Gp(t,e){const n=j_(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ee(C_(n))}function S_(t,e){return m0(t.databaseId,e)}function WR(t){const e=j_(t);return e.length===4?yt.emptyPath():C_(e)}function _g(t){return new yt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function C_(t){return rt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ib(t,e,n){return{name:bg(t,e),fields:n.value.mapValue.fields}}function ZR(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Re(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,v){return y.useProto3Json?(rt(v===void 0||typeof v=="string",58123),gn.fromBase64String(v||"")):(rt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),gn.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(y){const v=y.code===void 0?se.UNKNOWN:E_(y.code);return new xe(v,y.message||"")})(h);n=new T_(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Gp(t,r.document.name),c=hr(r.document.updateTime),h=r.document.createTime?hr(r.document.createTime):De.min(),p=new qn({mapValue:{fields:r.document.fields}}),g=Nn.newFoundDocument(o,c,h,p),y=r.targetIds||[],v=r.removedTargetIds||[];n=new xh(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Gp(t,r.document),c=r.readTime?hr(r.readTime):De.min(),h=Nn.newNoDocument(o,c),p=r.removedTargetIds||[];n=new xh([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Gp(t,r.document),c=r.removedTargetIds||[];n=new xh([],c,o,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,h=new zR(o,c),p=r.targetId;n=new N_(p,h)}}return n}function JR(t,e){let n;if(e instanceof Tu)n={update:Ib(t,e.key,e.value)};else if(e instanceof d0)n={delete:bg(t,e.key)};else if(e instanceof ca)n={update:Ib(t,e.key,e.data),updateMask:l6(e.fieldMask)};else{if(!(e instanceof VR))return Re(16599,{Vt:e.type});n={verify:bg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,h){const p=h.transform;if(p instanceof Ph)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Al)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof jl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Oh)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw Re(20930,{transform:h.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:XR(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Re(27497)})(t,e.precondition)),n}function e6(t,e){return t&&t.length>0?(rt(e!==void 0,14353),t.map((n=>(function(o,c){let h=o.updateTime?hr(o.updateTime):hr(c);return h.isEqual(De.min())&&(h=hr(c)),new OR(h,o.transformResults||[])})(n,e)))):[]}function t6(t,e){return{documents:[S_(t,e.path)]}}function n6(t,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=S_(t,o);const c=(function(y){if(y.length!==0)return I_(Bs.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const h=(function(y){if(y.length!==0)return y.map((v=>(function(T){return{field:dl(T.field),direction:i6(T.dir)}})(v)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=vg(t,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function s6(t){let e=WR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){rt(r===1,65062);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let c=[];n.where&&(c=(function(_){const T=R_(_);return T instanceof Bs&&i_(T)?T.getFilters():[T]})(n.where));let h=[];n.orderBy&&(h=(function(_){return _.map((T=>(function(U){return new fu(hl(U.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(T)))})(n.orderBy));let p=null;n.limit&&(p=(function(_){let T;return T=typeof _=="object"?_.value:_,uf(T)?null:T})(n.limit));let g=null;n.startAt&&(g=(function(_){const T=!!_.before,R=_.values||[];return new Dh(R,T)})(n.startAt));let y=null;return n.endAt&&(y=(function(_){const T=!_.before,R=_.values||[];return new Dh(R,T)})(n.endAt)),_R(e,o,h,c,p,"F",g,y)}function r6(t,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function R_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hl(n.unaryFilter.field);return Qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=hl(n.unaryFilter.field);return Qt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=hl(n.unaryFilter.field);return Qt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=hl(n.unaryFilter.field);return Qt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Qt.create(hl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Bs.create(n.compositeFilter.filters.map((r=>R_(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(n.compositeFilter.op))})(t):Re(30097,{filter:t})}function i6(t){return GR[t]}function a6(t){return KR[t]}function o6(t){return YR[t]}function dl(t){return{fieldPath:t.canonicalString()}}function hl(t){return pn.fromServerFormat(t.fieldPath)}function I_(t){return t instanceof Qt?(function(n){if(n.op==="=="){if(xb(n.value))return{unaryFilter:{field:dl(n.field),op:"IS_NAN"}};if(yb(n.value))return{unaryFilter:{field:dl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xb(n.value))return{unaryFilter:{field:dl(n.field),op:"IS_NOT_NAN"}};if(yb(n.value))return{unaryFilter:{field:dl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dl(n.field),op:a6(n.op),value:n.value}}})(t):t instanceof Bs?(function(n){const r=n.getFilters().map((o=>I_(o)));return r.length===1?r[0]:{compositeFilter:{op:o6(n.op),filters:r}}})(t):Re(54877,{filter:t})}function l6(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function k_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n,r,o,c=De.min(),h=De.min(),p=gn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.yt=e}}function u6(t){const e=s6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(){this.Cn=new h6}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(Ji.min())}updateCollectionGroup(e,n,r){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class h6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new nn(yt.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new nn(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},D_=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(D_,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Sl(0)}static cr(){return new Sl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="LruGarbageCollector",f6=1048576;function Pb([t,e],[n,r]){const o=Ke(t,n);return o===0?Ke(e,r):o}class m6{constructor(e){this.Ir=e,this.buffer=new nn(Pb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Pb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class p6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(Db,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ml(n)?ve(Db,"Ignoring IndexedDB error during garbage collection: ",n):await Ol(n)}await this.Vr(3e5)}))}}class g6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(cf.ce);const r=new m6(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(kb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,c,h,p,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),o=this.params.maximumSequenceNumbersToCollect):o=_,h=Date.now(),this.nthSequenceNumber(e,o)))).next((_=>(r=_,p=Date.now(),this.removeTargets(e,r,n)))).next((_=>(c=_,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(y=Date.now(),cl()<=Ge.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${_} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:_}))))}}function y6(t,e){return new g6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(){this.changes=new po((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ae.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&iu(r.mutation,o,ss.empty(),wt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ye()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ye()){const o=Ja();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let h=Wc();return c.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const r=Ja();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ye())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,r,o){let c=ni();const h=ru(),p=(function(){return ru()})();return n.forEach(((g,y)=>{const v=r.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof ca)?c=c.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),iu(v.mutation,y,v.mutation.getFieldMask(),wt.now())):h.set(y.key,ss.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,v)=>h.set(y,v))),n.forEach(((y,v)=>p.set(y,new v6(v,h.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=ru();let o=new jt(((h,p)=>h-p)),c=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let v=r.get(g)||ss.empty();v=p.applyToLocalView(y,v),r.set(g,v);const _=(o.get(p.batchId)||Ye()).add(g);o=o.insert(p.batchId,_)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,v=g.value,_=m_();v.forEach((T=>{if(!c.has(T)){const R=b_(n.get(T),r.get(T));R!==null&&_.set(T,R),c=c.add(T)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,_))}return ae.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(h){return Ee.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):c_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):ae.resolve(Ja());let p=cu,g=c;return h.next((y=>ae.forEach(y,((v,_)=>(p<_.largestBatchId&&(p=_.largestBatchId),c.get(v)?ae.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{g=g.insert(v,T)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Ye()))).next((v=>({batchId:p,changes:f_(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((r=>{let o=Wc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let h=Wc();return this.indexManager.getCollectionParents(e,c).next((p=>ae.forEach(p,(g=>{const y=(function(_,T){return new Ll(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((v=>{v.forEach(((_,T)=>{h=h.insert(_,T)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((h=>{c.forEach(((g,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,Nn.newInvalidDocument(v)))}));let p=Wc();return h.forEach(((g,y)=>{const v=c.get(g);v!==void 0&&iu(v.mutation,y,ss.empty(),wt.now()),ff(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ae.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:hr(o.createTime)}})(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:u6(o.bundledQuery),readTime:hr(o.readTime)}})(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(){this.overlays=new jt(Ee.comparator),this.qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ja();return ae.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.St(e,n,c)})),ae.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),ae.resolve()}getOverlaysForCollection(e,n,r){const o=Ja(),c=n.length+1,h=new Ee(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new jt(((y,v)=>y-v));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let v=c.get(y.largestBatchId);v===null&&(v=Ja(),c=c.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const p=Ja(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>p.set(y,v))),!(p.size()>=o)););return ae.resolve(p)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new BR(n,r));let c=this.qr.get(n);c===void 0&&(c=Ye(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(){this.Qr=new nn(ln.$r),this.Ur=new nn(ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ln(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new ln(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Ee(new yt([])),r=new ln(n,e),o=new ln(n,e+1),c=[];return this.Ur.forEachInRange([r,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ee(new yt([])),r=new ln(n,e),o=new ln(n,e+1);let c=Ye();return this.Ur.forEachInRange([r,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const n=new ln(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ln{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ee.comparator(e.key,n.key)||Ke(e.Yr,n.Yr)}static Kr(e,n){return Ke(e.Yr,n.Yr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new nn(ln.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new UR(c,n,r,o);this.mutationQueue.push(h);for(const p of o)this.Zr=this.Zr.add(new ln(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ae.resolve(h)}lookupMutationBatch(e,n){return ae.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),c=o<0?0:o;return ae.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?r0:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ln(n,0),o=new ln(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(h=>{const p=this.Xr(h.Yr);c.push(p)})),ae.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nn(Ke);return n.forEach((o=>{const c=new ln(o,0),h=new ln(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(p=>{r=r.add(p.Yr)}))})),ae.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;Ee.isDocumentKey(c)||(c=c.child(""));const h=new ln(new Ee(c),0);let p=new nn(Ke);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Yr)),!0)}),h),ae.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){rt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ae.forEach(n.mutations,(o=>{const c=new ln(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new ln(n,0),o=this.Zr.firstAfterOrEqual(r);return ae.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e){this.ri=e,this.docs=(function(){return new jt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ae.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(n))}getEntries(e,n){let r=ni();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Nn.newInvalidDocument(o))})),ae.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=ni();const h=n.path,p=new Ee(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||eR(J5(v),r)<=0||(o.has(v.key)||ff(n,v))&&(c=c.insert(v.key,v.mutableCopy()))}return ae.resolve(c)}getAllFromCollectionGroup(e,n,r,o){Re(9500)}ii(e,n){return ae.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new A6(this)}getSize(e){return ae.resolve(this.size)}}class A6 extends x6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ae.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e){this.persistence=e,this.si=new po((n=>o0(n)),l0),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new p0,this.targetCount=0,this.ai=Sl.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ae.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Sl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Pr(n),ae.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.si.forEach(((h,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ae.waitFor(c).next((()=>o))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ae.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ae.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),ae.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ae.resolve(r)}containsKey(e,n){return ae.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n){this.ui={},this.overlays={},this.ci=new cf(0),this.li=!1,this.li=!0,this.hi=new E6,this.referenceDelegate=e(this),this.Pi=new j6(this),this.indexManager=new d6,this.remoteDocumentCache=(function(o){return new T6(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new c6(n),this.Ii=new b6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new N6(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ve("MemoryPersistence","Starting transaction:",e);const o=new S6(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ae.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class S6 extends nR{constructor(e){super(),this.currentSequenceNumber=e}}class g0{constructor(e){this.persistence=e,this.Ri=new p0,this.Vi=null}static mi(e){return new g0(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ae.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(r=>{const o=Ee.fromPath(r);return this.gi(e,o).next((c=>{c||n.removeEntry(o,De.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ae.or([()=>ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Lh{constructor(e,n){this.persistence=e,this.pi=new po((r=>iR(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=y6(this,n)}static mi(e,n){return new Lh(e,n)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return ae.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?ae.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((p=>{p||(r++,c.removeEntry(h,De.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ph(e.data.value)),n}br(e,n,r){return ae.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ae.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=Ye(),o=Ye();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new y0(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return eS()?8:sR(Tn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ys(e,n).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,n,o,r).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new C6;return this.Ss(e,n,h).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,h,p.size)}))})).next((()=>c.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?(cl()<=Ge.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",ul(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(cl()<=Ge.DEBUG&&ve("QueryEngine","Query:",ul(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(cl()<=Ge.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",ul(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(n))):ae.resolve())}ys(e,n){if(_b(n))return ae.resolve(null);let r=dr(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=xg(n,null,"F"),r=dr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const h=Ye(...c);return this.ps.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,h,g.readTime)?this.ys(e,xg(n,null,"F")):this.vs(e,y,n,g)}))))})))))}ws(e,n,r,o){return _b(n)||o.isEqual(De.min())?ae.resolve(null):this.ps.getDocuments(e,r).next((c=>{const h=this.Ds(n,c);return this.Cs(n,h,r,o)?ae.resolve(null):(cl()<=Ge.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ul(n)),this.vs(e,h,n,Z5(o,cu)).next((p=>p)))}))}Ds(e,n){let r=new nn(d_(e));return n.forEach(((o,c)=>{ff(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,r){return cl()<=Ge.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",ul(n)),this.ps.getDocumentsMatchingQuery(e,n,Ji.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((h=>{c=c.insert(h.key,h)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="LocalStore",I6=3e8;class k6{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new jt(Ke),this.xs=new po((c=>o0(c)),l0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new w6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function D6(t,e,n,r){return new k6(t,e,n,r)}async function O_(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const h=[],p=[];let g=Ye();for(const y of o){h.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of c){p.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return n.localDocuments.getDocuments(r,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:p})))}))}))}function P6(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,v){const _=y.batch,T=_.keys();let R=ae.resolve();return T.forEach((U=>{R=R.next((()=>v.getEntry(g,U))).next(($=>{const I=y.docVersions.get(U);rt(I!==null,48541),$.version.compareTo(I)<0&&(_.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),v.addEntry($)))}))})),R.next((()=>p.mutationQueue.removeMutationBatch(g,_)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=Ye();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function M_(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function O6(t,e){const n=Me(t),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((v,_)=>{const T=o.get(_);if(!T)return;p.push(n.Pi.removeMatchingKeys(c,v.removedDocuments,_).next((()=>n.Pi.addMatchingKeys(c,v.addedDocuments,_))));let R=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(_)!==null?R=R.withResumeToken(gn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,r)),o=o.insert(_,R),(function($,I,Q){return $.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=I6?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(T,R,v)&&p.push(n.Pi.updateTargetData(c,R))}));let g=ni(),y=Ye();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,v))})),p.push(M6(c,h,e.documentUpdates).next((v=>{g=v.ks,y=v.qs}))),!r.isEqual(De.min())){const v=n.Pi.getLastRemoteSnapshotVersion(c).next((_=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(v)}return ae.waitFor(p).next((()=>h.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=o,c)))}function M6(t,e,n){let r=Ye(),o=Ye();return n.forEach((c=>r=r.add(c))),e.getEntries(t,r).next((c=>{let h=ni();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(De.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):ve(x0,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function L6(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=r0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function V6(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((c=>c?(o=c,ae.resolve(o)):n.Pi.allocateTargetId(r).next((h=>(o=new Hi(e,h,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Eg(t,e,n){const r=Me(t),o=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Ml(h))throw h;ve(x0,`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Ob(t,e,n){const r=Me(t);let o=De.min(),c=Ye();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,v){const _=Me(g),T=_.xs.get(v);return T!==void 0?ae.resolve(_.Ms.get(T)):_.Pi.getTargetData(y,v)})(r,h,dr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,p.targetId).next((g=>{c=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,e,n?o:De.min(),n?c:Ye()))).next((p=>(U6(r,NR(e),p),{documents:p,Qs:c})))))}function U6(t,e,n){let r=t.Os.get(e)||De.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),t.Os.set(e,r)}class Mb{constructor(){this.activeTargetIds=RR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B6{constructor(){this.Mo=new Mb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="ConnectivityMonitor";class Vb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(Lb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(Lb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh=null;function Ng(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="RestConnection",F6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class q6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Ih?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,c){const h=Ng(),p=this.zo(e,n.toUriEncodedString());ve(Kp,`Sending RPC '${e}' ${h}:`,p,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:y}=new URL(p),v=ho(y);return this.Jo(e,p,g,r,v).then((_=>(ve(Kp,`Received RPC '${e}' ${h}: `,_),_)),(_=>{throw _l(Kp,`RPC '${e}' ${h} failed with error: `,_,"url: ",p,"request:",r),_}))}Ho(e,n,r,o,c,h){return this.Go(e,n,r,o,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const r=F6[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class $6 extends q6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,c){const h=Ng();return new Promise(((p,g)=>{const y=new V1;y.setWithCredentials(!0),y.listenOnce(U1.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case mh.NO_ERROR:const _=y.getResponseJson();ve(_n,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(_)),p(_);break;case mh.TIMEOUT:ve(_n,`RPC '${e}' ${h} timed out`),g(new xe(se.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const T=y.getStatus();if(ve(_n,`RPC '${e}' ${h} failed with status:`,T,"response text:",y.getResponseText()),T>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const U=R?.error;if(U&&U.status&&U.message){const $=(function(Q){const F=Q.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(F)>=0?F:se.UNKNOWN})(U.status);g(new xe($,U.message))}else g(new xe(se.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new xe(se.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ve(_n,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);ve(_n,`RPC '${e}' ${h} sending request:`,o),y.send(n,"POST",v,r,15)}))}T_(e,n,r){const o=Ng(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=F1(),p=z1(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const v=c.join("");ve(_n,`Creating RPC '${e}' stream ${o}: ${v}`,g);const _=h.createWebChannel(v,g);this.I_(_);let T=!1,R=!1;const U=new H6({Yo:I=>{R?ve(_n,`Not sending because RPC '${e}' stream ${o} is closed:`,I):(T||(ve(_n,`Opening RPC '${e}' stream ${o} transport.`),_.open(),T=!0),ve(_n,`RPC '${e}' stream ${o} sending:`,I),_.send(I))},Zo:()=>_.close()}),$=(I,Q,F)=>{I.listen(Q,(z=>{try{F(z)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return $(_,Xc.EventType.OPEN,(()=>{R||(ve(_n,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),$(_,Xc.EventType.CLOSE,(()=>{R||(R=!0,ve(_n,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(_))})),$(_,Xc.EventType.ERROR,(I=>{R||(R=!0,_l(_n,`RPC '${e}' stream ${o} transport errored. Name:`,I.name,"Message:",I.message),U.a_(new xe(se.UNAVAILABLE,"The operation could not be completed")))})),$(_,Xc.EventType.MESSAGE,(I=>{if(!R){const Q=I.data[0];rt(!!Q,16349);const F=Q,z=F?.error||F[0]?.error;if(z){ve(_n,`RPC '${e}' stream ${o} received error:`,z);const ce=z.status;let he=(function(N){const C=Kt[N];if(C!==void 0)return E_(C)})(ce),ue=z.message;he===void 0&&(he=se.INTERNAL,ue="Unknown error status: "+ce+" with message "+z.message),R=!0,U.a_(new xe(he,ue)),_.close()}else ve(_n,`RPC '${e}' stream ${o} received:`,Q),U.u_(Q)}})),$(p,B1.STAT_EVENT,(I=>{I.stat===dg.PROXY?ve(_n,`RPC '${e}' stream ${o} detected buffering proxy`):I.stat===dg.NOPROXY&&ve(_n,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Yp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t){return new QR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="PersistentStream";class V_{constructor(e,n,r,o,c,h,p,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new L_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(ti(n.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new xe(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(Ub,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ve(Ub,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class G6 extends V_{constructor(e,n,r,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ZR(this.serializer,e),r=(function(c){if(!("targetChange"in c))return De.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?De.min():h.readTime?hr(h.readTime):De.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=_g(this.serializer),n.addTarget=(function(c,h){let p;const g=h.target;if(p=gg(g)?{documents:t6(c,g)}:{query:n6(c,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=A_(c,h.resumeToken);const y=vg(c,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo(De.min())>0){p.readTime=Mh(c,h.snapshotVersion.toTimestamp());const y=vg(c,h.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const r=r6(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=_g(this.serializer),n.removeTarget=e,this.q_(n)}}class K6 extends V_{constructor(e,n,r,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=e6(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=_g(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>JR(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{}class Q6 extends Y6{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new xe(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,wg(n,r),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(se.UNKNOWN,c.toString())}))}Ho(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Ho(e,wg(n,r),o,h,p,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new xe(se.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class X6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ti(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="RemoteStore";class W6{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{go(this)&&(ve(lo,"Restarting streams for network reachability change."),await(async function(g){const y=Me(g);y.Ea.add(4),await ju(y),y.Ra.set("Unknown"),y.Ea.delete(4),await xf(y)})(this))}))})),this.Ra=new X6(r,o)}}async function xf(t){if(go(t))for(const e of t.da)await e(!0)}async function ju(t){for(const e of t.da)await e(!1)}function U_(t,e){const n=Me(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),_0(n)?b0(n):Vl(n).O_()&&w0(n,e))}function v0(t,e){const n=Me(t),r=Vl(n);n.Ia.delete(e),r.O_()&&B_(n,e),n.Ia.size===0&&(r.O_()?r.L_():go(n)&&n.Ra.set("Unknown"))}function w0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vl(t).Y_(e)}function B_(t,e){t.Va.Ue(e),Vl(t).Z_(e)}function b0(t){t.Va=new $R({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Vl(t).start(),t.Ra.ua()}function _0(t){return go(t)&&!Vl(t).x_()&&t.Ia.size>0}function go(t){return Me(t).Ea.size===0}function z_(t){t.Va=void 0}async function Z6(t){t.Ra.set("Online")}async function J6(t){t.Ia.forEach(((e,n)=>{w0(t,e)}))}async function e3(t,e){z_(t),_0(t)?(t.Ra.ha(e),b0(t)):t.Ra.set("Unknown")}async function t3(t,e,n){if(t.Ra.set("Online"),e instanceof T_&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.Va.removeTarget(p))})(t,e)}catch(r){ve(lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vh(t,r)}else if(e instanceof xh?t.Va.Ze(e):e instanceof N_?t.Va.st(e):t.Va.tt(e),!n.isEqual(De.min()))try{const r=await M_(t.localStore);n.compareTo(r)>=0&&await(function(c,h){const p=c.Va.Tt(h);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=c.Ia.get(y);v&&c.Ia.set(y,v.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,y)=>{const v=c.Ia.get(g);if(!v)return;c.Ia.set(g,v.withResumeToken(gn.EMPTY_BYTE_STRING,v.snapshotVersion)),B_(c,g);const _=new Hi(v.target,g,y,v.sequenceNumber);w0(c,_)})),c.remoteSyncer.applyRemoteEvent(p)})(t,n)}catch(r){ve(lo,"Failed to raise snapshot:",r),await Vh(t,r)}}async function Vh(t,e,n){if(!Ml(e))throw e;t.Ea.add(1),await ju(t),t.Ra.set("Offline"),n||(n=()=>M_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ve(lo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await xf(t)}))}function F_(t,e){return e().catch((n=>Vh(t,n,e)))}async function vf(t){const e=Me(t),n=sa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:r0;for(;n3(e);)try{const o=await L6(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,s3(e,o)}catch(o){await Vh(e,o)}q_(e)&&H_(e)}function n3(t){return go(t)&&t.Ta.length<10}function s3(t,e){t.Ta.push(e);const n=sa(t);n.O_()&&n.X_&&n.ea(e.mutations)}function q_(t){return go(t)&&!sa(t).x_()&&t.Ta.length>0}function H_(t){sa(t).start()}async function r3(t){sa(t).ra()}async function i3(t){const e=sa(t);for(const n of t.Ta)e.ea(n.mutations)}async function a3(t,e,n){const r=t.Ta.shift(),o=h0.from(r,e,n);await F_(t,(()=>t.remoteSyncer.applySuccessfulWrite(o))),await vf(t)}async function o3(t,e){e&&sa(t).X_&&await(async function(r,o){if((function(h){return FR(h)&&h!==se.ABORTED})(o.code)){const c=r.Ta.shift();sa(r).B_(),await F_(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await vf(r)}})(t,e),q_(t)&&H_(t)}async function Bb(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),ve(lo,"RemoteStore received new credentials");const r=go(n);n.Ea.add(3),await ju(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await xf(n)}async function l3(t,e){const n=Me(t);e?(n.Ea.delete(2),await xf(n)):e||(n.Ea.add(2),await ju(n),n.Ra.set("Unknown"))}function Vl(t){return t.ma||(t.ma=(function(n,r,o){const c=Me(n);return c.sa(),new G6(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(t.datastore,t.asyncQueue,{Xo:Z6.bind(null,t),t_:J6.bind(null,t),r_:e3.bind(null,t),H_:t3.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),_0(t)?b0(t):t.Ra.set("Unknown")):(await t.ma.stop(),z_(t))}))),t.ma}function sa(t){return t.fa||(t.fa=(function(n,r,o){const c=Me(n);return c.sa(),new K6(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:r3.bind(null,t),r_:o3.bind(null,t),ta:i3.bind(null,t),na:a3.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await vf(t)):(await t.fa.stop(),t.Ta.length>0&&(ve(lo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const h=Date.now()+r,p=new E0(e,n,h,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N0(t,e){if(ti("AsyncQueue",`${e}: ${t}`),Ml(t))return new xe(se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{static emptySet(e){return new gl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ee.comparator(n.key,r.key):(n,r)=>Ee.comparator(n.key,r.key),this.keyedMap=Wc(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new gl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.ga=new jt(Ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Cl{constructor(e,n,r,o,c,h,p,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,c){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new Cl(e,n,gl.emptySet(n),h,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class u3{constructor(){this.queries=Fb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Me(n),c=o.queries;o.queries=Fb(),c.forEach(((h,p)=>{for(const g of p.Sa)g.onError(r)}))})(this,new xe(se.ABORTED,"Firestore shutting down"))}}function Fb(){return new po((t=>u_(t)),hf)}async function $_(t,e){const n=Me(t);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new c3,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const p=N0(h,`Initialization of query '${ul(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&T0(n)}async function G_(t,e){const n=Me(t),r=e.query;let o=3;const c=n.queries.get(r);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function d3(t,e){const n=Me(t);let r=!1;for(const o of e){const c=o.query,h=n.queries.get(c);if(h){for(const p of h.Sa)p.Fa(o)&&(r=!0);h.wa=o}}r&&T0(n)}function h3(t,e,n){const r=Me(t),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);r.queries.delete(e)}function T0(t){t.Ca.forEach((e=>{e.next()}))}var Tg,qb;(qb=Tg||(Tg={})).Ma="default",qb.Cache="cache";class K_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Cl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this.key=e}}class Q_{constructor(e){this.key=e}}class f3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=d_(e),this.tu=new gl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new zb,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,h=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,_)=>{const T=o.get(v),R=ff(this.query,_)?_:null,U=!!T&&this.mutatedKeys.has(T.key),$=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let I=!1;T&&R?T.data.isEqual(R.data)?U!==$&&(r.track({type:3,doc:R}),I=!0):this.su(T,R)||(r.track({type:2,doc:R}),I=!0,(g&&this.eu(R,g)>0||y&&this.eu(R,y)<0)&&(p=!0)):!T&&R?(r.track({type:0,doc:R}),I=!0):T&&!R&&(r.track({type:1,doc:T}),I=!0,(g||y)&&(p=!0)),I&&(R?(h=h.add(R),c=$?c.add(v):c.delete(v)):(h=h.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),c=c.delete(v.key),r.track({type:1,doc:v})}return{tu:h,iu:r,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,_)=>(function(R,U){const $=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:I})}};return $(R)-$(U)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Cl(this.query,e.tu,c,h,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new Q_(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new Y_(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ye();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const A0="SyncEngine";class m3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class p3{constructor(e){this.key=e,this.hu=!1}}class g3{constructor(e,n,r,o,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new po((p=>u_(p)),hf),this.Iu=new Map,this.Eu=new Set,this.du=new jt(Ee.comparator),this.Au=new Map,this.Ru=new p0,this.Vu={},this.mu=new Map,this.fu=Sl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function y3(t,e,n=!0){const r=tE(t);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await X_(r,e,n,!0),o}async function x3(t,e){const n=tE(t);await X_(n,e,!0,!1)}async function X_(t,e,n,r){const o=await V6(t.localStore,dr(e)),c=o.targetId,h=t.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await v3(t,e,c,h==="current",o.resumeToken)),t.isPrimaryClient&&n&&U_(t.remoteStore,o),p}async function v3(t,e,n,r,o){t.pu=(_,T,R)=>(async function($,I,Q,F){let z=I.view.ru(Q);z.Cs&&(z=await Ob($.localStore,I.query,!1).then((({documents:k})=>I.view.ru(k,z))));const ce=F&&F.targetChanges.get(I.targetId),he=F&&F.targetMismatches.get(I.targetId)!=null,ue=I.view.applyChanges(z,$.isPrimaryClient,ce,he);return $b($,I.targetId,ue.au),ue.snapshot})(t,_,T,R);const c=await Ob(t.localStore,e,!0),h=new f3(e,c.Qs),p=h.ru(c.documents),g=Au.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",o),y=h.applyChanges(p,t.isPrimaryClient,g);$b(t,n,y.au);const v=new m3(e,n,h);return t.Tu.set(e,v),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),y.snapshot}async function w3(t,e,n){const r=Me(t),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((h=>!hf(h,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Eg(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&v0(r.remoteStore,o.targetId),Ag(r,o.targetId)})).catch(Ol)):(Ag(r,o.targetId),await Eg(r.localStore,o.targetId,!0))}async function b3(t,e){const n=Me(t),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),v0(n.remoteStore,r.targetId))}async function _3(t,e,n){const r=C3(t);try{const o=await(function(h,p){const g=Me(h),y=wt.now(),v=p.reduce(((R,U)=>R.add(U.key)),Ye());let _,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let U=ni(),$=Ye();return g.Ns.getEntries(R,v).next((I=>{U=I,U.forEach(((Q,F)=>{F.isValidDocument()||($=$.add(Q))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,U))).next((I=>{_=I;const Q=[];for(const F of p){const z=LR(F,_.get(F.key).overlayedDocument);z!=null&&Q.push(new ca(F.key,z,n_(z.value.mapValue),ws.exists(!0)))}return g.mutationQueue.addMutationBatch(R,y,Q,p)})).next((I=>{T=I;const Q=I.applyToLocalDocumentSet(_,$);return g.documentOverlayCache.saveOverlays(R,I.batchId,Q)}))})).then((()=>({batchId:T.batchId,changes:f_(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(h,p,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new jt(Ke)),y=y.insert(p,g),h.Vu[h.currentUser.toKey()]=y})(r,o.batchId,n),await Su(r,o.changes),await vf(r.remoteStore)}catch(o){const c=N0(o,"Failed to persist write");n.reject(c)}}async function W_(t,e){const n=Me(t);try{const r=await O6(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=n.Au.get(c);h&&(rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?rt(h.hu,14607):o.removedDocuments.size>0&&(rt(h.hu,42227),h.hu=!1))})),await Su(n,r,e)}catch(r){await Ol(r)}}function Hb(t,e,n){const r=Me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const g=Me(h);g.onlineState=p;let y=!1;g.queries.forEach(((v,_)=>{for(const T of _.Sa)T.va(p)&&(y=!0)})),y&&T0(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function E3(t,e,n){const r=Me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let h=new jt(Ee.comparator);h=h.insert(c,Nn.newNoDocument(c,De.min()));const p=Ye().add(c),g=new gf(De.min(),new Map,new jt(Ke),h,p);await W_(r,g),r.du=r.du.remove(c),r.Au.delete(e),j0(r)}else await Eg(r.localStore,e,!1).then((()=>Ag(r,e,n))).catch(Ol)}async function N3(t,e){const n=Me(t),r=e.batch.batchId;try{const o=await P6(n.localStore,e);J_(n,r,null),Z_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Su(n,o)}catch(o){await Ol(o)}}async function T3(t,e,n){const r=Me(t);try{const o=await(function(h,p){const g=Me(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,p).next((_=>(rt(_!==null,37113),v=_.keys(),g.mutationQueue.removeMutationBatch(y,_)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(r.localStore,e);J_(r,e,n),Z_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Su(r,o)}catch(o){await Ol(o)}}function Z_(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function J_(t,e,n){const r=Me(t);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Ag(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||eE(t,r)}))}function eE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(v0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),j0(t))}function $b(t,e,n){for(const r of n)r instanceof Y_?(t.Ru.addReference(r.key,e),A3(t,r)):r instanceof Q_?(ve(A0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||eE(t,r.key)):Re(19791,{wu:r})}function A3(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ve(A0,"New document in limbo: "+n),t.Eu.add(r),j0(t))}function j0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ee(yt.fromString(e)),r=t.fu.next();t.Au.set(r,new p3(n)),t.du=t.du.insert(n,r),U_(t.remoteStore,new Hi(dr(c0(n.path)),r,"TargetPurposeLimboResolution",cf.ce))}}async function Su(t,e,n){const r=Me(t),o=[],c=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{h.push(r.pu(g,e,n).then((y=>{if((y||n)&&r.isPrimaryClient){const v=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(y){o.push(y);const v=y0.As(g.targetId,y);c.push(v)}})))})),await Promise.all(h),r.Pu.H_(o),await(async function(g,y){const v=Me(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>ae.forEach(y,(T=>ae.forEach(T.Es,(R=>v.persistence.referenceDelegate.addReference(_,T.targetId,R))).next((()=>ae.forEach(T.ds,(R=>v.persistence.referenceDelegate.removeReference(_,T.targetId,R)))))))))}catch(_){if(!Ml(_))throw _;ve(x0,"Failed to update sequence numbers: "+_)}for(const _ of y){const T=_.targetId;if(!_.fromCache){const R=v.Ms.get(T),U=R.snapshotVersion,$=R.withLastLimboFreeSnapshotVersion(U);v.Ms=v.Ms.insert(T,$)}}})(r.localStore,c))}async function j3(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){ve(A0,"User change. New user:",e.toKey());const r=await O_(n.localStore,e);n.currentUser=e,(function(c,h){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new xe(se.CANCELLED,h))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Su(n,r.Ls)}}function S3(t,e){const n=Me(t),r=n.Au.get(e);if(r&&r.hu)return Ye().add(r.key);{let o=Ye();const c=n.Iu.get(e);if(!c)return o;for(const h of c){const p=n.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function tE(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=W_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E3.bind(null,e),e.Pu.H_=d3.bind(null,e.eventManager),e.Pu.yu=h3.bind(null,e.eventManager),e}function C3(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=T3.bind(null,e),e}class Uh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return D6(this.persistence,new R6,e.initialUser,this.serializer)}Cu(e){return new P_(g0.mi,this.serializer)}Du(e){return new B6}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uh.provider={build:()=>new Uh};class R3 extends Uh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){rt(this.persistence.referenceDelegate instanceof Lh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new p6(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new P_((r=>Lh.mi(r,n)),this.serializer)}}class jg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=j3.bind(null,this.syncEngine),await l3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new u3})()}createDatastore(e){const n=yf(e.databaseInfo.databaseId),r=(function(c){return new $6(c)})(e.databaseInfo);return(function(c,h,p,g){return new Q6(c,h,p,g)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,h,p){return new W6(r,o,c,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Hb(this.syncEngine,n,0)),(function(){return Vb.v()?new Vb:new z6})())}createSyncEngine(e,n){return(function(o,c,h,p,g,y,v){const _=new g3(o,c,h,p,g,y);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Me(n);ve(lo,"RemoteStore shutting down."),r.Ea.add(5),await ju(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jg.provider={build:()=>new jg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="FirestoreClient";class I3{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=En.UNAUTHENTICATED,this.clientId=s0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async h=>{ve(ra,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(ve(ra,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=N0(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Qp(t,e){t.asyncQueue.verifyOperationInProgress(),ve(ra,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async o=>{r.isEqual(o)||(await O_(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Gb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await k3(t);ve(ra,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Bb(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,o)=>Bb(e.remoteStore,o))),t._onlineComponents=e}async function k3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve(ra,"Using user provided OfflineComponentProvider");try{await Qp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===se.FAILED_PRECONDITION||o.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;_l("Error using user provided cache. Falling back to memory cache: "+n),await Qp(t,new Uh)}}else ve(ra,"Using default OfflineComponentProvider"),await Qp(t,new R3(void 0));return t._offlineComponents}async function sE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve(ra,"Using user provided OnlineComponentProvider"),await Gb(t,t._uninitializedComponentsProvider._online)):(ve(ra,"Using default OnlineComponentProvider"),await Gb(t,new jg))),t._onlineComponents}function D3(t){return sE(t).then((e=>e.syncEngine))}async function rE(t){const e=await sE(t),n=e.eventManager;return n.onListen=y3.bind(null,e.syncEngine),n.onUnlisten=w3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=b3.bind(null,e.syncEngine),n}function P3(t,e,n={}){const r=new Qr;return t.asyncQueue.enqueueAndForget((async()=>(function(c,h,p,g,y){const v=new nE({next:T=>{v.Nu(),h.enqueueAndForget((()=>G_(c,_)));const R=T.docs.has(p);!R&&T.fromCache?y.reject(new xe(se.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&g&&g.source==="server"?y.reject(new xe(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new K_(c0(p.path),v,{includeMetadataChanges:!0,qa:!0});return $_(c,_)})(await rE(t),t.asyncQueue,e,n,r))),r.promise}function O3(t,e,n={}){const r=new Qr;return t.asyncQueue.enqueueAndForget((async()=>(function(c,h,p,g,y){const v=new nE({next:T=>{v.Nu(),h.enqueueAndForget((()=>G_(c,_))),T.fromCache&&g.source==="server"?y.reject(new xe(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new K_(p,v,{includeMetadataChanges:!0,qa:!0});return $_(c,_)})(await rE(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="firestore.googleapis.com",Yb=!0;class Qb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aE,this.ssl=Yb}else this.host=e.host,this.ssl=e.ssl??Yb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=D_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<f6)throw new xe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iE(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new xe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new xe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new xe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wf{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new z5;switch(r.type){case"firstParty":return new $5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Kb.get(n);r&&(ve("ComponentProvider","Removing Datastore"),Kb.delete(n),r.terminate())})(this),Promise.resolve()}}function M3(t,e,n,r={}){t=Us(t,wf);const o=ho(e),c=t._getSettings(),h={...c,emulatorOptions:t._getEmulatorOptions()},p=`${e}:${n}`;o&&(zg(`https://${p}`),Fg("Firestore",!0)),c.host!==aE&&c.host!==p&&_l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:o,emulatorOptions:r};if(!Zr(g,h)&&(t._setSettings(g),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=En.MOCK_USER;else{y=Q2(r.mockUserToken,t._app?.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new xe(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new En(_)}t._authCredentials=new F5(new H1(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yo(this.firestore,e,this._query)}}class zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Nu(n,zt._jsonSchema))return new zt(e,r||null,new Ee(yt.fromString(n.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:Xt("string",zt._jsonSchemaVersion),referencePath:Xt("string")};class Xi extends yo{constructor(e,n,r){super(e,n,c0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new Ee(e))}withConverter(e){return new Xi(this.firestore,e,this._path)}}function Dn(t,e,...n){if(t=Rt(t),$1("collection","path",e),t instanceof wf){const r=yt.fromString(e,...n);return lb(r),new Xi(t,null,r)}{if(!(t instanceof zt||t instanceof Xi))throw new xe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(yt.fromString(e,...n));return lb(r),new Xi(t.firestore,null,r)}}function ct(t,e,...n){if(t=Rt(t),arguments.length===1&&(e=s0.newId()),$1("doc","path",e),t instanceof wf){const r=yt.fromString(e,...n);return ob(r),new zt(t,null,new Ee(r))}{if(!(t instanceof zt||t instanceof Xi))throw new xe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(yt.fromString(e,...n));return ob(r),new zt(t.firestore,t instanceof Xi?t.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="AsyncQueue";class Wb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new L_(this,"async_queue_retry"),this._c=()=>{const r=Yp();r&&ve(Xb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Yp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Yp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Qr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ml(e))throw e;ve(Xb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ti("INTERNAL UNHANDLED ERROR: ",Zb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=E0.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Re(47125,{Pc:Zb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Zb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class xo extends wf{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new Wb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wb(e),this._firestoreClient=void 0,await e}}}function L3(t,e){const n=typeof t=="object"?t:$g(),r=typeof t=="string"?t:Ih,o=sf(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=G2("firestore");c&&M3(o,...c)}return o}function S0(t){if(t._terminated)throw new xe(se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||V3(t),t._firestoreClient}function V3(t){const e=t._freezeSettings(),n=(function(o,c,h,p){return new lR(o,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,iE(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new I3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vs(gn.fromBase64String(e))}catch(n){throw new xe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vs(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nu(e,vs._jsonSchema))return vs.fromBase64String(e.bytes)}}vs._jsonSchemaVersion="firestore/bytes/1.0",vs._jsonSchema={type:Xt("string",vs._jsonSchemaVersion),bytes:Xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fr._jsonSchemaVersion}}static fromJSON(e){if(Nu(e,fr._jsonSchema))return new fr(e.latitude,e.longitude)}}fr._jsonSchemaVersion="firestore/geoPoint/1.0",fr._jsonSchema={type:Xt("string",fr._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nu(e,mr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new mr(e.vectorValues);throw new xe(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mr._jsonSchemaVersion="firestore/vectorValue/1.0",mr._jsonSchema={type:Xt("string",mr._jsonSchemaVersion),vectorValues:Xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=/^__.*__$/;class B3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ca(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tu(e,this.data,n,this.fieldTransforms)}}class oE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ca(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:t})}}class _f{constructor(e,n,r,o,c,h){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _f({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lE(this.Ac)&&U3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class z3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yf(e)}Cc(e,n,r,o=!1){return new _f({Ac:e,methodName:n,Dc:r,path:pn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ef(t){const e=t._freezeSettings(),n=yf(t._databaseId);return new z3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cE(t,e,n,r,o,c={}){const h=t.Cc(c.merge||c.mergeFields?2:0,e,n,o);I0("Data must be an object, but it was:",h,r);const p=dE(r,h);let g,y;if(c.merge)g=new ss(h.fieldMask),y=h.fieldTransforms;else if(c.mergeFields){const v=[];for(const _ of c.mergeFields){const T=Sg(e,_,n);if(!h.contains(T))throw new xe(se.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);fE(v,T)||v.push(T)}g=new ss(v),y=h.fieldTransforms.filter((_=>g.covers(_.field)))}else g=null,y=h.fieldTransforms;return new B3(new qn(p),g,y)}class Nf extends Cu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nf}}function uE(t,e,n){return new _f({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class C0 extends Cu{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=uE(this,e,!0),r=this.vc.map((c=>vo(c,n))),o=new Al(r);return new w_(e.path,o)}isEqual(e){return e instanceof C0&&Zr(this.vc,e.vc)}}class R0 extends Cu{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=uE(this,e,!0),r=this.vc.map((c=>vo(c,n))),o=new jl(r);return new w_(e.path,o)}isEqual(e){return e instanceof R0&&Zr(this.vc,e.vc)}}function F3(t,e,n,r){const o=t.Cc(1,e,n);I0("Data must be an object, but it was:",o,r);const c=[],h=qn.empty();la(r,((g,y)=>{const v=k0(e,g,n);y=Rt(y);const _=o.yc(v);if(y instanceof Nf)c.push(v);else{const T=vo(y,_);T!=null&&(c.push(v),h.set(v,T))}}));const p=new ss(c);return new oE(h,p,o.fieldTransforms)}function q3(t,e,n,r,o,c){const h=t.Cc(1,e,n),p=[Sg(e,r,n)],g=[o];if(c.length%2!=0)throw new xe(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)p.push(Sg(e,c[T])),g.push(c[T+1]);const y=[],v=qn.empty();for(let T=p.length-1;T>=0;--T)if(!fE(y,p[T])){const R=p[T];let U=g[T];U=Rt(U);const $=h.yc(R);if(U instanceof Nf)y.push(R);else{const I=vo(U,$);I!=null&&(y.push(R),v.set(R,I))}}const _=new ss(y);return new oE(v,_,h.fieldTransforms)}function H3(t,e,n,r=!1){return vo(n,t.Cc(r?4:3,e))}function vo(t,e){if(hE(t=Rt(t)))return I0("Unsupported field value:",e,t),dE(t,e);if(t instanceof Cu)return(function(r,o){if(!lE(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let h=0;for(const p of r){let g=vo(p,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),h++}return{arrayValue:{values:c}}})(t,e)}return(function(r,o){if((r=Rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=wt.fromDate(r);return{timestampValue:Mh(o.serializer,c)}}if(r instanceof wt){const c=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mh(o.serializer,c)}}if(r instanceof fr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vs)return{bytesValue:A_(o.serializer,r._byteString)};if(r instanceof zt){const c=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:m0(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof mr)return(function(h,p){return{mapValue:{fields:{[e_]:{stringValue:t_},[kh]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return u0(p.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${lf(r)}`)})(t,e)}function dE(t,e){const n={};return Y1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):la(t,((r,o)=>{const c=vo(o,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function hE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof fr||t instanceof vs||t instanceof zt||t instanceof Cu||t instanceof mr)}function I0(t,e,n){if(!hE(n)||!G1(n)){const r=lf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Sg(t,e,n){if((e=Rt(e))instanceof bf)return e._internalPath;if(typeof e=="string")return k0(t,e);throw Bh("Field path arguments must be of type string or ",t,!1,void 0,n)}const $3=new RegExp("[~\\*/\\[\\]]");function k0(t,e,n){if(e.search($3)>=0)throw Bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bf(...e.split("."))._internalPath}catch{throw Bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bh(t,e,n,r,o){const c=r&&!r.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||h)&&(g+=" (found",c&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new xe(se.INVALID_ARGUMENT,p+t+g)}function fE(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class G3 extends mE{data(){return super.data()}}function Tf(t,e){return typeof e=="string"?k0(t,e):e instanceof bf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class D0{}class pE extends D0{}function ia(t,e,...n){let r=[];e instanceof D0&&r.push(e),r=r.concat(n),(function(c){const h=c.filter((g=>g instanceof P0)).length,p=c.filter((g=>g instanceof Af)).length;if(h>1||h>0&&p>0)throw new xe(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)t=o._apply(t);return t}class Af extends pE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Af(e,n,r)}_apply(e){const n=this._parse(e);return gE(e._query,n),new yo(e.firestore,e.converter,yg(e._query,n))}_parse(e){const n=Ef(e.firestore);return(function(c,h,p,g,y,v,_){let T;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new xe(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){e2(_,v);const U=[];for(const $ of _)U.push(Jb(g,c,$));T={arrayValue:{values:U}}}else T=Jb(g,c,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||e2(_,v),T=H3(p,h,_,v==="in"||v==="not-in");return Qt.create(y,v,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mu(t,e,n){const r=e,o=Tf("where",t);return Af._create(o,r,n)}class P0 extends D0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new P0(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Bs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let h=o;const p=c.getFlattenedFilters();for(const g of p)gE(h,g),h=yg(h,g)})(e._query,n),new yo(e.firestore,e.converter,yg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class O0 extends pE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new O0(e,n)}_apply(e){const n=(function(o,c,h){if(o.startAt!==null)throw new xe(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new xe(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fu(c,h)})(e._query,this._field,this._direction);return new yo(e.firestore,e.converter,(function(o,c){const h=o.explicitOrderBy.concat([c]);return new Ll(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Ru(t,e="asc"){const n=e,r=Tf("orderBy",t);return O0._create(r,n)}function Jb(t,e,n){if(typeof(n=Rt(n))=="string"){if(n==="")throw new xe(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!c_(e)&&n.indexOf("/")!==-1)throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(yt.fromString(n));if(!Ee.isDocumentKey(r))throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gb(t,new Ee(r))}if(n instanceof zt)return gb(t,n._key);throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lf(n)}.`)}function e2(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gE(t,e){const n=(function(o,c){for(const h of o)for(const p of h.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(t.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new xe(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Y3{convertValue(e,n="none"){switch(na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return la(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[kh].arrayValue?.values?.map((r=>Bt(r.doubleValue)));return new mr(n)}convertGeoPoint(e){return new fr(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=df(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const n=ea(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=yt.fromString(e);rt(k_(r),9688,{name:e});const o=new du(r.get(1),r.get(3)),c=new Ee(r.popFirst(5));return o.isEqual(n)||ti(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Jc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class to extends mE{constructor(e,n,r,o,c,h){super(e,n,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=to._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}to._jsonSchemaVersion="firestore/documentSnapshot/1.0",to._jsonSchema={type:Xt("string",to._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class vh extends to{data(e={}){return super.data(e)}}class yl{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Jc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new vh(this._firestore,this._userDataWriter,r.key,r,new Jc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const g=new vh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Jc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new vh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Jc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),v=h.indexOf(p.doc.key)),{type:Q3(p.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=s0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Q3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t){t=Us(t,zt);const e=Us(t.firestore,xo);return P3(S0(e),t._key).then((n=>X3(e,t,n)))}yl._jsonSchemaVersion="firestore/querySnapshot/1.0",yl._jsonSchema={type:Xt("string",yl._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class xE extends Y3{constructor(e){super(),this.firestore=e}convertBytes(e){return new vs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,n)}}function Hn(t){t=Us(t,yo);const e=Us(t.firestore,xo),n=S0(e),r=new xE(e);return K3(t._query),O3(n,t._query).then((o=>new yl(e,r,t,o)))}function aa(t,e,n){t=Us(t,zt);const r=Us(t.firestore,xo),o=yE(t.converter,e,n);return Sf(r,[cE(Ef(r),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,ws.none())])}function Os(t,e,n,...r){t=Us(t,zt);const o=Us(t.firestore,xo),c=Ef(o);let h;return h=typeof(e=Rt(e))=="string"||e instanceof bf?q3(c,"updateDoc",t._key,e,n,r):F3(c,"updateDoc",t._key,e),Sf(o,[h.toMutation(t._key,ws.exists(!0))])}function M0(t){return Sf(Us(t.firestore,xo),[new d0(t._key,ws.none())])}function jf(t,e){const n=Us(t.firestore,xo),r=ct(t),o=yE(t.converter,e);return Sf(n,[cE(Ef(t.firestore),"addDoc",r._key,o,t.converter!==null,{}).toMutation(r._key,ws.exists(!1))]).then((()=>r))}function Sf(t,e){return(function(r,o){const c=new Qr;return r.asyncQueue.enqueueAndForget((async()=>_3(await D3(r),o,c))),c.promise})(S0(t),e)}function X3(t,e,n){const r=n.docs.get(e._key),o=new xE(t);return new to(t,o,e._key,r,new Jc(n.hasPendingWrites,n.fromCache),e.converter)}function t2(...t){return new C0("arrayUnion",t)}function n2(...t){return new R0("arrayRemove",t)}(function(e,n=!0){(function(o){Pl=o})(fo),ro(new Zi("firestore",((r,{instanceIdentifier:o,options:c})=>{const h=r.getProvider("app").getImmediate(),p=new xo(new q5(r.getProvider("auth-internal")),new G5(h,r.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new xe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(y.options.projectId,v)})(h,o),h);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),cr(sb,rb,e),cr(sb,rb,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="firebasestorage.googleapis.com",W3="storageBucket",Z3=120*1e3,J3=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends vr{constructor(e,n,r=0){super(Xp(e),`Firebase Storage: ${n} (${Xp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,br.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yr||(yr={}));function Xp(t){return"storage/"+t}function eI(){const t="An unknown error occurred, please check the error payload for server response.";return new br(yr.UNKNOWN,t)}function tI(){return new br(yr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nI(){return new br(yr.CANCELED,"User canceled the upload/download.")}function sI(t){return new br(yr.INVALID_URL,"Invalid URL '"+t+"'.")}function rI(t){return new br(yr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function s2(t){return new br(yr.INVALID_ARGUMENT,t)}function wE(){return new br(yr.APP_DELETED,"The Firebase app was deleted.")}function iI(t){return new br(yr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ls.makeFromUrl(e,n)}catch{return new Ls(e,"")}if(r.path==="")return r;throw rI(e)}static makeFromUrl(e,n){let r=null;const o="([A-Za-z0-9.\\-_]+)";function c(ce){ce.path.charAt(ce.path.length-1)==="/"&&(ce.path_=ce.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+o+h,"i"),g={bucket:1,path:3};function y(ce){ce.path_=decodeURIComponent(ce.path)}const v="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",R=new RegExp(`^https?://${_}/${v}/b/${o}/o${T}`,"i"),U={bucket:1,path:3},$=n===vE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",Q=new RegExp(`^https?://${$}/${o}/${I}`,"i"),z=[{regex:p,indices:g,postModify:c},{regex:R,indices:U,postModify:y},{regex:Q,indices:{bucket:1,path:2},postModify:y}];for(let ce=0;ce<z.length;ce++){const he=z[ce],ue=he.regex.exec(e);if(ue){const k=ue[he.indices.bucket];let N=ue[he.indices.path];N||(N=""),r=new Ls(k,N),he.postModify(r);break}}if(r==null)throw sI(e);return r}}class aI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t,e,n){let r=1,o=null,c=null,h=!1,p=0;function g(){return p===2}let y=!1;function v(...I){y||(y=!0,e.apply(null,I))}function _(I){o=setTimeout(()=>{o=null,t(R,g())},I)}function T(){c&&clearTimeout(c)}function R(I,...Q){if(y){T();return}if(I){T(),v.call(null,I,...Q);return}if(g()||h){T(),v.call(null,I,...Q);return}r<64&&(r*=2);let z;p===1?(p=2,z=0):z=(r+Math.random())*1e3,_(z)}let U=!1;function $(I){U||(U=!0,T(),!y&&(o!==null?(I||(p=2),clearTimeout(o),_(0)):I||(p=1)))}return _(0),c=setTimeout(()=>{h=!0,$(!0)},n),$}function lI(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t){return t!==void 0}function r2(t,e,n,r){if(r<e)throw s2(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw s2(`Invalid value for '${t}'. Expected ${n} or less.`)}function uI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const o=e(r)+"="+e(t[r]);n=n+o+"&"}return n=n.slice(0,-1),n}var zh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(zh||(zh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t,e){const n=t>=500&&t<600,o=[408,429].indexOf(t)!==-1,c=e.indexOf(t)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,r,o,c,h,p,g,y,v,_,T=!0,R=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=_,this.retry=T,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,$)=>{this.resolve_=U,this.reject_=$,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new ih(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const h=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(h),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(h),this.pendingConnection_=null;const p=c.getErrorCode()===zh.NO_ERROR,g=c.getStatus();if(!p||dI(g,this.additionalRetryCodes_)&&this.retry){const v=c.getErrorCode()===zh.ABORT;r(!1,new ih(!1,null,v));return}const y=this.successCodes_.indexOf(g)!==-1;r(!0,new ih(y,c))})},n=(r,o)=>{const c=this.resolve_,h=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());cI(g)?c(g):c()}catch(g){h(g)}else if(p!==null){const g=eI();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(o.canceled){const g=this.appDelete_?wE():nI();h(g)}else{const g=tI();h(g)}};this.canceled_?n(!1,new ih(!1,null,!0)):this.backoffId_=oI(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ih{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function fI(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function mI(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pI(t,e){e&&(t["X-Firebase-GMPID"]=e)}function gI(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function yI(t,e,n,r,o,c,h=!0,p=!1){const g=uI(t.urlParams),y=t.url+g,v=Object.assign({},t.headers);return pI(v,e),fI(v,n),mI(v,c),gI(v,r),new hI(y,t.method,v,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o,h,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function vI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n){this._service=e,n instanceof Ls?this._location=n:this._location=Ls.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Fh(e,n)}get root(){const e=new Ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vI(this._location.path)}get storage(){return this._service}get parent(){const e=xI(this._location.path);if(e===null)return null;const n=new Ls(this._location.bucket,e);return new Fh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw iI(e)}}function i2(t,e){const n=e?.[W3];return n==null?null:Ls.makeFromBucketSpec(n,t)}function wI(t,e,n,r={}){t.host=`${e}:${n}`;const o=ho(e);o&&(zg(`https://${t.host}/b`),Fg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=o?"https":"http";const{mockUserToken:c}=r;c&&(t._overrideAuthToken=typeof c=="string"?c:Q2(c,t.app.options.projectId))}class bI{constructor(e,n,r,o,c,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=h,this._bucket=null,this._host=vE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Z3,this._maxUploadRetryTime=J3,this._requests=new Set,o!=null?this._bucket=Ls.makeFromBucketSpec(o,this._host):this._bucket=i2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ls.makeFromBucketSpec(this._url,e):this._bucket=i2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){r2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){r2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fh(this,e)}_makeRequest(e,n,r,o,c=!0){if(this._deleted)return new aI(wE());{const h=yI(e,this._appId,r,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,o).getPromise()}}const a2="@firebase/storage",o2="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="storage";function _I(t=$g(),e){t=Rt(t);const r=sf(t,bE).getImmediate({identifier:e}),o=G2("storage");return o&&EI(r,...o),r}function EI(t,e,n,r={}){wI(t,e,n,r)}function NI(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new bI(n,r,o,e,fo)}function TI(){ro(new Zi(bE,NI,"PUBLIC").setMultipleInstances(!0)),cr(a2,o2,""),cr(a2,o2,"esm2020")}TI();const Cg={apiKey:"AIzaSyDzEL20_gjVbq1gmskOJ2H2mFUocpamJzU",authDomain:"psgshop-62518.firebaseapp.com",projectId:"psgshop-62518",storageBucket:"psgshop-62518.firebasestorage.app",messagingSenderId:"951270215395",appId:"1:951270215395:web:d6c1ec0787e43351c17fd6"};console.log("Firebase config values:",{apiKey:"***",authDomain:"psgshop-62518.firebaseapp.com",projectId:"psgshop-62518",storageBucket:"psgshop-62518.firebasestorage.app",messagingSenderId:"951270215395",appId:"1:951270215395:web:d6c1ec0787e43351c17fd6"});const _E=Object.values(Cg).every(t=>t&&t!=="");console.log("Is Firebase config valid:",_E);let ah,Pe,pr,AI;if(_E)try{console.log("Initializing Firebase app..."),ah=Z2(Cg),console.log("Firebase app initialized successfully"),console.log("Initializing Firestore..."),Pe=L3(ah),console.log("Firestore initialized successfully"),console.log("Initializing Auth..."),pr=L5(ah),NC(pr,A1).then(()=>{console.log("Auth persistence set to browser local storage")}).catch(t=>{console.error("Error setting auth persistence:",t)}),console.log("Auth initialized successfully"),console.log("Initializing Storage..."),AI=_I(ah),console.log("Storage initialized successfully")}catch(t){console.error("Firebase initialization error:",t),console.error("Error code:",t.code),console.error("Error message:",t.message)}else{const t=Object.entries(Cg).filter(([e,n])=>!n||n==="").map(([e])=>e);console.warn("Firebase configuration is missing or incomplete. Missing keys:",t),console.warn("Please check your .env file and ensure all Firebase config variables are set.")}const EE=D.createContext(),jI=(t,e)=>{switch(e.type){case"SET_CART":return{...t,items:e.payload.items||[],coupon:e.payload.coupon||null};case"ADD_TO_CART":const n=t.items.find(g=>g.id===e.payload.id);if(n){const g=n.quantity+(e.payload.quantity||1),y=e.payload.stock!==void 0?e.payload.stock:1/0;return g>y?t:{...t,items:t.items.map(v=>v.id===e.payload.id?{...v,quantity:g}:v)}}const r=e.payload.quantity||1,o=e.payload.stock!==void 0?e.payload.stock:1/0;return r>o?t:{...t,items:[...t.items,{...e.payload,quantity:r}]};case"REMOVE_FROM_CART":return{...t,items:t.items.filter(g=>g.id!==e.payload)};case"UPDATE_QUANTITY":const c=t.items.find(g=>g.id===e.payload.id);if(!c)return t;const h=c.stock!==void 0?c.stock:1/0,p=Math.min(e.payload.quantity,h);return p<=0?{...t,items:t.items.filter(g=>g.id!==e.payload.id)}:{...t,items:t.items.map(g=>g.id===e.payload.id?{...g,quantity:p}:g)};case"CLEAR_CART":return{...t,items:[],coupon:null};case"APPLY_COUPON":return{...t,coupon:e.payload};case"REMOVE_COUPON":return{...t,coupon:null};default:return t}},SI=({children:t})=>{const[e,n]=D.useReducer(jI,{items:[],coupon:null}),[r,o]=D.useState(!0),{currentUser:c}=$s(),h=D.useRef(!0);console.log("CartProvider initialized with currentUser:",c);const p=D.useCallback(async()=>{if(o(!0),!c){console.log("No user logged in, clearing cart"),n({type:"SET_CART",payload:{items:[],coupon:null}}),o(!1);return}try{console.log("Attempting to load cart from Firestore for user:",c.uid);const I=ct(Pe,"carts",c.uid),Q=await zs(I);if(Q.exists()){const F=Q.data();console.log("Cart data loaded from Firestore:",F),n({type:"SET_CART",payload:{items:F.items||[],coupon:F.coupon||null}})}else console.log("No cart found for user, initializing empty cart"),n({type:"SET_CART",payload:{items:[],coupon:null}})}catch(I){console.error("Error loading cart from Firestore:",I),console.error("Error details:",I.code,I.message),n({type:"SET_CART",payload:{items:[],coupon:null}})}finally{o(!1)}},[c]);D.useEffect(()=>{console.log("CartProvider useEffect triggered with currentUser:",c),p()},[c,p]),D.useEffect(()=>{if(!c||r||h.current){h.current&&(console.log("Skipping save during initial cart load"),h.current=!1);return}const I=async()=>{console.log("Saving cart to Firestore:",{userId:c.uid,itemsCount:e.items.length,items:e.items,coupon:e.coupon});try{const F=ct(Pe,"carts",c.uid),z={userId:c.uid,items:e.items.map(he=>({...he,lastUpdated:Date.now()})),coupon:e.coupon,updatedAt:new Date().toISOString(),timestamp:Date.now()};await aa(F,z,{merge:!0}),console.log("Successfully saved cart to Firestore with data:",z),(await zs(F)).exists()?console.log("Verification: Cart successfully saved and can be read back"):console.error("Verification: Failed to verify cart save")}catch(F){console.error("Error saving cart to Firestore:",F),console.error("Error details:",F.code,F.message)}},Q=setTimeout(()=>{I()},500);return()=>clearTimeout(Q)},[e.items,e.coupon,c,r]);const g=I=>{console.log("Adding to cart:",I),n({type:"ADD_TO_CART",payload:I})},y=async I=>{if(console.log("Removing from cart:",I),n({type:"REMOVE_FROM_CART",payload:I}),c)try{const Q=ct(Pe,"carts",c.uid)}catch(Q){console.error("Error removing item from Firestore cart:",Q)}},v=(I,Q)=>{if(console.log("Updating quantity:",I,Q),Q<=0){y(I);return}n({type:"UPDATE_QUANTITY",payload:{id:I,quantity:Q}})},_=async()=>{if(n({type:"CLEAR_CART"}),c)try{const I=ct(Pe,"carts",c.uid);await aa(I,{userId:c.uid,items:[],coupon:null,updatedAt:new Date})}catch(I){console.error("Error clearing cart in Firestore:",I)}},T=()=>e.items.reduce((I,Q)=>I+Q.quantity,0),R=()=>{const I=e.items.reduce((Q,F)=>Q+F.price*F.quantity,0);if(e.coupon){if(e.coupon.discountType==="percentage")return I*(1-e.coupon.discountValue/100);if(e.coupon.discountType==="fixed")return Math.max(0,I-e.coupon.discountValue)}return I},U=async I=>{try{const Q=Dn(Pe,"coupons"),F=ia(Q,mu("code","==",I)),z=await Hn(F);if(z.empty)throw new Error("Cupón no válido");const ce=z.docs[0],he={id:ce.id,...ce.data()};if(!he.isActive)throw new Error("Este cupón no está activo");const ue=new Date;if(he.expiryDate&&ue>he.expiryDate.toDate())throw new Error("Este cupón ha expirado");return n({type:"APPLY_COUPON",payload:he}),he}catch(Q){throw console.error("Error applying coupon:",Q),Q}},$=()=>{n({type:"REMOVE_COUPON"})};return l.jsx(EE.Provider,{value:{items:e.items,coupon:e.coupon,loading:r,addToCart:g,removeFromCart:y,updateQuantity:v,clearCart:_,getTotalItems:T,getTotalPrice:R,applyCoupon:U,removeCoupon:$},children:t})},Ul=()=>{const t=D.useContext(EE);if(!t)throw new Error("useCart must be used within a CartProvider");return t},NE=D.createContext(),Cf=()=>D.useContext(NE),CI=({children:t})=>{const[e,n]=D.useState([]),[r,o]=D.useState(!0),{currentUser:c}=$s(),h=D.useRef(!0),p=D.useCallback(async()=>{if(o(!0),!c){n([]),o(!1),h.current=!1;return}try{const U=ct(Pe,"wishlists",c.uid),$=await zs(U);if($.exists()){const I=$.data();n(I.items||[])}else n([])}catch(U){console.error("Error loading wishlist from Firestore:",U),n([])}finally{o(!1),h.current=!1}},[c]);D.useEffect(()=>{p()},[c,p]),D.useEffect(()=>{if(!c||r||h.current)return;const U=async()=>{try{const I=ct(Pe,"wishlists",c.uid),Q={userId:c.uid,items:e.map(z=>({...z,lastUpdated:Date.now()})),updatedAt:new Date().toISOString(),timestamp:Date.now()};await aa(I,Q,{merge:!0}),(await zs(I)).exists()||console.error("Verification: Failed to verify wishlist save")}catch(I){console.error("Error saving wishlist to Firestore:",I)}},$=setTimeout(()=>{U()},500);return()=>clearTimeout($)},[e,c,r]);const g=U=>{n($=>$.find(Q=>Q.id===U.id)?$:[...$,{...U}])},y=U=>{n($=>$.filter(I=>I.id!==U))},v=U=>e.some($=>$.id===U),_=async()=>{if(n([]),c)try{const U=ct(Pe,"wishlists",c.uid);await aa(U,{userId:c.uid,items:[],updatedAt:new Date})}catch(U){console.error("Error clearing wishlist in Firestore:",U)}},T=()=>e.length,R=()=>{p()};return l.jsx(NE.Provider,{value:{items:e,loading:r,addToWishlist:g,removeFromWishlist:y,isInWishlist:v,clearWishlist:_,getTotalItems:T,refreshWishlist:R},children:t})},RI=async()=>{try{const t=Dn(Pe,"products");return(await Hn(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error fetching products:",t),t}},II=async t=>{try{const e=ct(Pe,"products",t),n=await zs(e);if(n.exists())return{id:n.id,...n.data()};throw new Error("Product not found")}catch(e){throw console.error("Error fetching product:",e),e}},xl=({rating:t,size:e="md"})=>{const n=Math.max(0,Math.min(5,t||0)),r=Math.floor(n),o=n-r,c={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},h=c[e]||c.md,p=[];for(let y=0;y<r;y++)p.push(l.jsx("svg",{className:`${h} text-yellow-400`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},`full-${y}`));if(o>0){const y=o*100;p.push(l.jsxs("div",{className:"relative",children:[l.jsx("svg",{className:`${h} text-gray-300`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),l.jsx("div",{className:"absolute top-0 left-0 overflow-hidden",style:{width:`${y}%`},children:l.jsx("svg",{className:`${h} text-yellow-400`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})]},"fractional"))}const g=p.length;for(let y=g;y<5;y++)p.push(l.jsx("svg",{className:`${h} text-gray-300`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},`empty-${y}`));return l.jsxs("div",{className:"flex items-center",children:[p,l.jsx("span",{className:"ml-1 text-gray-600 text-sm",children:n.toFixed(1)})]})};/*!
* sweetalert2 v11.23.0
* Released under the MIT License.
*/function TE(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function kI(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function l2(t,e){return t.get(TE(t,e))}function DI(t,e,n){kI(t,e),e.set(t,n)}function PI(t,e,n){return t.set(TE(t,e),n),n}const OI=100,Ae={},MI=()=>{Ae.previousActiveElement instanceof HTMLElement?(Ae.previousActiveElement.focus(),Ae.previousActiveElement=null):document.body&&document.body.focus()},LI=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,r=window.scrollY;Ae.restoreFocusTimeout=setTimeout(()=>{MI(),e()},OI),window.scrollTo(n,r)}),AE="swal2-",VI=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],J=VI.reduce((t,e)=>(t[e]=AE+e,t),{}),UI=["success","warning","info","question","error"],qh=UI.reduce((t,e)=>(t[e]=AE+e,t),{}),jE="SweetAlert2:",L0=t=>t.charAt(0).toUpperCase()+t.slice(1),Pn=t=>{console.warn(`${jE} ${typeof t=="object"?t.join(" "):t}`)},wo=t=>{console.error(`${jE} ${t}`)},c2=[],BI=t=>{c2.includes(t)||(c2.push(t),Pn(t))},SE=(t,e=null)=>{BI(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Rf=t=>typeof t=="function"?t():t,V0=t=>t&&typeof t.toPromise=="function",Iu=t=>V0(t)?t.toPromise():Promise.resolve(t),U0=t=>t&&Promise.resolve(t)===t,On=()=>document.body.querySelector(`.${J.container}`),ku=t=>{const e=On();return e?e.querySelector(t):null},is=t=>ku(`.${t}`),et=()=>is(J.popup),Bl=()=>is(J.icon),zI=()=>is(J["icon-content"]),CE=()=>is(J.title),B0=()=>is(J["html-container"]),RE=()=>is(J.image),z0=()=>is(J["progress-steps"]),If=()=>is(J["validation-message"]),xr=()=>ku(`.${J.actions} .${J.confirm}`),zl=()=>ku(`.${J.actions} .${J.cancel}`),bo=()=>ku(`.${J.actions} .${J.deny}`),FI=()=>is(J["input-label"]),Fl=()=>ku(`.${J.loader}`),Du=()=>is(J.actions),IE=()=>is(J.footer),kf=()=>is(J["timer-progress-bar"]),F0=()=>is(J.close),qI=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,q0=()=>{const t=et();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((c,h)=>{const p=parseInt(c.getAttribute("tabindex")||"0"),g=parseInt(h.getAttribute("tabindex")||"0");return p>g?1:p<g?-1:0}),r=t.querySelectorAll(qI),o=Array.from(r).filter(c=>c.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(o))].filter(c=>Gn(c))},H0=()=>Xr(document.body,J.shown)&&!Xr(document.body,J["toast-shown"])&&!Xr(document.body,J["no-backdrop"]),Df=()=>{const t=et();return t?Xr(t,J.toast):!1},HI=()=>{const t=et();return t?t.hasAttribute("data-loading"):!1},as=(t,e)=>{if(t.textContent="",e){const r=new DOMParser().parseFromString(e,"text/html"),o=r.querySelector("head");o&&Array.from(o.childNodes).forEach(h=>{t.appendChild(h)});const c=r.querySelector("body");c&&Array.from(c.childNodes).forEach(h=>{h instanceof HTMLVideoElement||h instanceof HTMLAudioElement?t.appendChild(h.cloneNode(!0)):t.appendChild(h)})}},Xr=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let r=0;r<n.length;r++)if(!t.classList.contains(n[r]))return!1;return!0},$I=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(J).includes(n)&&!Object.values(qh).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},rs=(t,e,n)=>{if($I(t,e),!e.customClass)return;const r=e.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){Pn(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}st(t,r)}},Pf=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${J.popup} > .${J[e]}`);case"checkbox":return t.querySelector(`.${J.popup} > .${J.checkbox} input`);case"radio":return t.querySelector(`.${J.popup} > .${J.radio} input:checked`)||t.querySelector(`.${J.popup} > .${J.radio} input:first-child`);case"range":return t.querySelector(`.${J.popup} > .${J.range} input`);default:return t.querySelector(`.${J.popup} > .${J.input}`)}},kE=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},DE=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(r=>{Array.isArray(t)?t.forEach(o=>{n?o.classList.add(r):o.classList.remove(r)}):n?t.classList.add(r):t.classList.remove(r)}))},st=(t,e)=>{DE(t,e,!0)},Es=(t,e)=>{DE(t,e,!1)},$i=(t,e)=>{const n=Array.from(t.children);for(let r=0;r<n.length;r++){const o=n[r];if(o instanceof HTMLElement&&Xr(o,e))return o}},no=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},cn=(t,e="flex")=>{t&&(t.style.display=e)},An=t=>{t&&(t.style.display="none")},$0=(t,e="block")=>{t&&new MutationObserver(()=>{Pu(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},u2=(t,e,n,r)=>{const o=t.querySelector(e);o&&o.style.setProperty(n,r)},Pu=(t,e,n="flex")=>{e?cn(t,n):An(t)},Gn=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),GI=()=>!Gn(xr())&&!Gn(bo())&&!Gn(zl()),Rg=t=>t.scrollHeight>t.clientHeight,KI=(t,e)=>{let n=t;for(;n&&n!==e;){if(Rg(n))return!0;n=n.parentElement}return!1},PE=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||r>0},G0=(t,e=!1)=>{const n=kf();n&&Gn(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},YI=()=>{const t=kf();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),r=e/n*100;t.style.width=`${r}%`},QI=()=>typeof window>"u"||typeof document>"u",XI=`
 <div aria-labelledby="${J.title}" aria-describedby="${J["html-container"]}" class="${J.popup}" tabindex="-1">
   <button type="button" class="${J.close}"></button>
   <ul class="${J["progress-steps"]}"></ul>
   <div class="${J.icon}"></div>
   <img class="${J.image}" />
   <h2 class="${J.title}" id="${J.title}"></h2>
   <div class="${J["html-container"]}" id="${J["html-container"]}"></div>
   <input class="${J.input}" id="${J.input}" />
   <input type="file" class="${J.file}" />
   <div class="${J.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${J.select}" id="${J.select}"></select>
   <div class="${J.radio}"></div>
   <label class="${J.checkbox}">
     <input type="checkbox" id="${J.checkbox}" />
     <span class="${J.label}"></span>
   </label>
   <textarea class="${J.textarea}" id="${J.textarea}"></textarea>
   <div class="${J["validation-message"]}" id="${J["validation-message"]}"></div>
   <div class="${J.actions}">
     <div class="${J.loader}"></div>
     <button type="button" class="${J.confirm}"></button>
     <button type="button" class="${J.deny}"></button>
     <button type="button" class="${J.cancel}"></button>
   </div>
   <div class="${J.footer}"></div>
   <div class="${J["timer-progress-bar-container"]}">
     <div class="${J["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),WI=()=>{const t=On();return t?(t.remove(),Es([document.documentElement,document.body],[J["no-backdrop"],J["toast-shown"],J["has-column"]]),!0):!1},Xa=()=>{Ae.currentInstance.resetValidationMessage()},ZI=()=>{const t=et(),e=$i(t,J.input),n=$i(t,J.file),r=t.querySelector(`.${J.range} input`),o=t.querySelector(`.${J.range} output`),c=$i(t,J.select),h=t.querySelector(`.${J.checkbox} input`),p=$i(t,J.textarea);e.oninput=Xa,n.onchange=Xa,c.onchange=Xa,h.onchange=Xa,p.oninput=Xa,r.oninput=()=>{Xa(),o.value=r.value},r.onchange=()=>{Xa(),o.value=r.value}},JI=t=>typeof t=="string"?document.querySelector(t):t,ek=t=>{const e=et();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},tk=t=>{window.getComputedStyle(t).direction==="rtl"&&st(On(),J.rtl)},nk=t=>{const e=WI();if(QI()){wo("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=J.container,e&&st(n,J["no-transition"]),as(n,XI),n.dataset.swal2Theme=t.theme;const r=JI(t.target);r.appendChild(n),t.topLayer&&(n.setAttribute("popover",""),n.showPopover()),ek(t),tk(r),ZI()},K0=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?sk(t,e):t&&as(e,t)},sk=(t,e)=>{t.jquery?rk(e,t):as(e,t.toString())},rk=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},ik=(t,e)=>{const n=Du(),r=Fl();!n||!r||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?An(n):cn(n),rs(n,e,"actions"),ak(n,r,e),as(r,e.loaderHtml||""),rs(r,e,"loader"))};function ak(t,e,n){const r=xr(),o=bo(),c=zl();!r||!o||!c||(Zp(r,"confirm",n),Zp(o,"deny",n),Zp(c,"cancel",n),ok(r,o,c,n),n.reverseButtons&&(n.toast?(t.insertBefore(c,r),t.insertBefore(o,r)):(t.insertBefore(c,e),t.insertBefore(o,e),t.insertBefore(r,e))))}function ok(t,e,n,r){if(!r.buttonsStyling){Es([t,e,n],J.styled);return}st([t,e,n],J.styled),r.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),Wp(t),Wp(e),Wp(n)}function Wp(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function Zp(t,e,n){const r=L0(e);Pu(t,n[`show${r}Button`],"inline-block"),as(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=J[e],rs(t,n,`${e}Button`)}const lk=(t,e)=>{const n=F0();n&&(as(n,e.closeButtonHtml||""),rs(n,e,"closeButton"),Pu(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},ck=(t,e)=>{const n=On();n&&(uk(n,e.backdrop),dk(n,e.position),hk(n,e.grow),rs(n,e,"container"))};function uk(t,e){typeof e=="string"?t.style.background=e:e||st([document.documentElement,document.body],J["no-backdrop"])}function dk(t,e){e&&(e in J?st(t,J[e]):(Pn('The "position" parameter is not valid, defaulting to "center"'),st(t,J.center)))}function hk(t,e){e&&st(t,J[`grow-${e}`])}var xt={innerParams:new WeakMap,domCache:new WeakMap};const fk=["input","file","range","select","radio","checkbox","textarea"],mk=(t,e)=>{const n=et();if(!n)return;const r=xt.innerParams.get(t),o=!r||e.input!==r.input;fk.forEach(c=>{const h=$i(n,J[c]);h&&(yk(c,e.inputAttributes),h.className=J[c],o&&An(h))}),e.input&&(o&&pk(e),xk(e))},pk=t=>{if(!t.input)return;if(!Ut[t.input]){wo(`Unexpected type of input! Expected ${Object.keys(Ut).join(" | ")}, got "${t.input}"`);return}const e=OE(t.input);if(!e)return;const n=Ut[t.input](e,t);cn(e),t.inputAutoFocus&&setTimeout(()=>{kE(n)})},gk=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},yk=(t,e)=>{const n=et();if(!n)return;const r=Pf(n,t);if(r){gk(r);for(const o in e)r.setAttribute(o,e[o])}},xk=t=>{if(!t.input)return;const e=OE(t.input);e&&rs(e,t,"input")},Y0=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},Ou=(t,e,n)=>{if(n.inputLabel){const r=document.createElement("label"),o=J["input-label"];r.setAttribute("for",t.id),r.className=o,typeof n.customClass=="object"&&st(r,n.customClass.inputLabel),r.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",r)}},OE=t=>{const e=et();if(e)return $i(e,J[t]||J.input)},Hh=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:U0(e)||Pn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Ut={};Ut.text=Ut.email=Ut.password=Ut.number=Ut.tel=Ut.url=Ut.search=Ut.date=Ut["datetime-local"]=Ut.time=Ut.week=Ut.month=(t,e)=>(Hh(t,e.inputValue),Ou(t,t,e),Y0(t,e),t.type=e.input,t);Ut.file=(t,e)=>(Ou(t,t,e),Y0(t,e),t);Ut.range=(t,e)=>{const n=t.querySelector("input"),r=t.querySelector("output");return Hh(n,e.inputValue),n.type=e.input,Hh(r,e.inputValue),Ou(n,t,e),t};Ut.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");as(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return Ou(t,t,e),t};Ut.radio=t=>(t.textContent="",t);Ut.checkbox=(t,e)=>{const n=Pf(et(),"checkbox");n.value="1",n.checked=!!e.inputValue;const r=t.querySelector("span");return as(r,e.inputPlaceholder||e.inputLabel),n};Ut.textarea=(t,e)=>{Hh(t,e.inputValue),Y0(t,e),Ou(t,t,e);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(et()).width),o=()=>{if(!document.body.contains(t))return;const c=t.offsetWidth+n(t);c>r?et().style.width=`${c}px`:no(et(),"width",e.width)};new MutationObserver(o).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const vk=(t,e)=>{const n=B0();n&&($0(n),rs(n,e,"htmlContainer"),e.html?(K0(e.html,n),cn(n,"block")):e.text?(n.textContent=e.text,cn(n,"block")):An(n),mk(t,e))},wk=(t,e)=>{const n=IE();n&&($0(n),Pu(n,e.footer,"block"),e.footer&&K0(e.footer,n),rs(n,e,"footer"))},bk=(t,e)=>{const n=xt.innerParams.get(t),r=Bl();if(!r)return;if(n&&e.icon===n.icon){h2(r,e),d2(r,e);return}if(!e.icon&&!e.iconHtml){An(r);return}if(e.icon&&Object.keys(qh).indexOf(e.icon)===-1){wo(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),An(r);return}cn(r),h2(r,e),d2(r,e),st(r,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",ME)},d2=(t,e)=>{for(const[n,r]of Object.entries(qh))e.icon!==n&&Es(t,r);st(t,e.icon&&qh[e.icon]),Nk(t,e),ME(),rs(t,e,"icon")},ME=()=>{const t=et();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=e},_k=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,Ek=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,h2=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,r="";e.iconHtml?r=f2(e.iconHtml):e.icon==="success"?(r=_k(e),n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?r=Ek:e.icon&&(r=f2({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==r.trim()&&as(t,r)},Nk=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])u2(t,n,"background-color",e.iconColor);u2(t,".swal2-success-ring","border-color",e.iconColor)}},f2=t=>`<div class="${J["icon-content"]}">${t}</div>`,Tk=(t,e)=>{const n=RE();if(n){if(!e.imageUrl){An(n);return}cn(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),no(n,"width",e.imageWidth),no(n,"height",e.imageHeight),n.className=J.image,rs(n,e,"image")}};let Q0=!1,LE=0,VE=0,UE=0,BE=0;const Ak=t=>{t.addEventListener("mousedown",$h),document.body.addEventListener("mousemove",Gh),t.addEventListener("mouseup",Kh),t.addEventListener("touchstart",$h),document.body.addEventListener("touchmove",Gh),t.addEventListener("touchend",Kh)},jk=t=>{t.removeEventListener("mousedown",$h),document.body.removeEventListener("mousemove",Gh),t.removeEventListener("mouseup",Kh),t.removeEventListener("touchstart",$h),document.body.removeEventListener("touchmove",Gh),t.removeEventListener("touchend",Kh)},$h=t=>{const e=et();if(t.target===e||Bl().contains(t.target)){Q0=!0;const n=zE(t);LE=n.clientX,VE=n.clientY,UE=parseInt(e.style.insetInlineStart)||0,BE=parseInt(e.style.insetBlockStart)||0,st(e,"swal2-dragging")}},Gh=t=>{const e=et();if(Q0){let{clientX:n,clientY:r}=zE(t);e.style.insetInlineStart=`${UE+(n-LE)}px`,e.style.insetBlockStart=`${BE+(r-VE)}px`}},Kh=()=>{const t=et();Q0=!1,Es(t,"swal2-dragging")},zE=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},Sk=(t,e)=>{const n=On(),r=et();if(!(!n||!r)){if(e.toast){no(n,"width",e.width),r.style.width="100%";const o=Fl();o&&r.insertBefore(o,Bl())}else no(r,"width",e.width);no(r,"padding",e.padding),e.color&&(r.style.color=e.color),e.background&&(r.style.background=e.background),An(If()),Ck(r,e),e.draggable&&!e.toast?(st(r,J.draggable),Ak(r)):(Es(r,J.draggable),jk(r))}},Ck=(t,e)=>{const n=e.showClass||{};t.className=`${J.popup} ${Gn(t)?n.popup:""}`,e.toast?(st([document.documentElement,document.body],J["toast-shown"]),st(t,J.toast)):st(t,J.modal),rs(t,e,"popup"),typeof e.customClass=="string"&&st(t,e.customClass),e.icon&&st(t,J[`icon-${e.icon}`])},Rk=(t,e)=>{const n=z0();if(!n)return;const{progressSteps:r,currentProgressStep:o}=e;if(!r||r.length===0||o===void 0){An(n);return}cn(n),n.textContent="",o>=r.length&&Pn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((c,h)=>{const p=Ik(c);if(n.appendChild(p),h===o&&st(p,J["active-progress-step"]),h!==r.length-1){const g=kk(e);n.appendChild(g)}})},Ik=t=>{const e=document.createElement("li");return st(e,J["progress-step"]),as(e,t),e},kk=t=>{const e=document.createElement("li");return st(e,J["progress-step-line"]),t.progressStepsDistance&&no(e,"width",t.progressStepsDistance),e},Dk=(t,e)=>{const n=CE();n&&($0(n),Pu(n,e.title||e.titleText,"block"),e.title&&K0(e.title,n),e.titleText&&(n.innerText=e.titleText),rs(n,e,"title"))},FE=(t,e)=>{Sk(t,e),ck(t,e),Rk(t,e),bk(t,e),Tk(t,e),Dk(t,e),lk(t,e),vk(t,e),ik(t,e),wk(t,e);const n=et();typeof e.didRender=="function"&&n&&e.didRender(n),Ae.eventEmitter.emit("didRender",n)},Pk=()=>Gn(et()),qE=()=>{var t;return(t=xr())===null||t===void 0?void 0:t.click()},Ok=()=>{var t;return(t=bo())===null||t===void 0?void 0:t.click()},Mk=()=>{var t;return(t=zl())===null||t===void 0?void 0:t.click()},ql=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),HE=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},Lk=(t,e,n)=>{HE(t),e.toast||(t.keydownHandler=r=>Uk(e,r,n),t.keydownTarget=e.keydownListenerCapture?window:et(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},Ig=(t,e)=>{var n;const r=q0();if(r.length){t=t+e,t===-2&&(t=r.length-1),t===r.length?t=0:t===-1&&(t=r.length-1),r[t].focus();return}(n=et())===null||n===void 0||n.focus()},$E=["ArrowRight","ArrowDown"],Vk=["ArrowLeft","ArrowUp"],Uk=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?Bk(e,t):e.key==="Tab"?zk(e):[...$E,...Vk].includes(e.key)?Fk(e.key):e.key==="Escape"&&qk(e,t,n)))},Bk=(t,e)=>{if(!Rf(e.allowEnterKey))return;const n=Pf(et(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;qE(),t.preventDefault()}},zk=t=>{const e=t.target,n=q0();let r=-1;for(let o=0;o<n.length;o++)if(e===n[o]){r=o;break}t.shiftKey?Ig(r,-1):Ig(r,1),t.stopPropagation(),t.preventDefault()},Fk=t=>{const e=Du(),n=xr(),r=bo(),o=zl();if(!e||!n||!r||!o)return;const c=[n,r,o];if(document.activeElement instanceof HTMLElement&&!c.includes(document.activeElement))return;const h=$E.includes(t)?"nextElementSibling":"previousElementSibling";let p=document.activeElement;if(p){for(let g=0;g<e.children.length;g++){if(p=p[h],!p)return;if(p instanceof HTMLButtonElement&&Gn(p))break}p instanceof HTMLButtonElement&&p.focus()}},qk=(t,e,n)=>{t.preventDefault(),Rf(e.allowEscapeKey)&&n(ql.esc)};var Rl={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Hk=()=>{const t=On();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},GE=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},KE=typeof window<"u"&&!!window.GestureEvent,$k=()=>{if(KE&&!Xr(document.body,J.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,st(document.body,J.iosfix),Gk()}},Gk=()=>{const t=On();if(!t)return;let e;t.ontouchstart=n=>{e=Kk(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},Kk=t=>{const e=t.target,n=On(),r=B0();return!n||!r||Yk(t)||Qk(t)?!1:e===n||!Rg(n)&&e instanceof HTMLElement&&!KI(e,r)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(Rg(r)&&r.contains(e))},Yk=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",Qk=t=>t.touches&&t.touches.length>1,Xk=()=>{if(Xr(document.body,J.iosfix)){const t=parseInt(document.body.style.top,10);Es(document.body,J.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},Wk=()=>{const t=document.createElement("div");t.className=J["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let vl=null;const Zk=t=>{vl===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(vl=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${vl+Wk()}px`)},Jk=()=>{vl!==null&&(document.body.style.paddingRight=`${vl}px`,vl=null)};function YE(t,e,n,r){Df()?m2(t,r):(LI(n).then(()=>m2(t,r)),HE(Ae)),KE?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),H0()&&(Jk(),Xk(),GE()),eD()}function eD(){Es([document.documentElement,document.body],[J.shown,J["height-auto"],J["no-backdrop"],J["toast-shown"]])}function Gi(t){t=nD(t);const e=Rl.swalPromiseResolve.get(this),n=tD(this);this.isAwaitingPromise?t.isDismissed||(Mu(this),e(t)):n&&e(t)}const tD=t=>{const e=et();if(!e)return!1;const n=xt.innerParams.get(t);if(!n||Xr(e,n.hideClass.popup))return!1;Es(e,n.showClass.popup),st(e,n.hideClass.popup);const r=On();return Es(r,n.showClass.backdrop),st(r,n.hideClass.backdrop),sD(t,e,n),!0};function QE(t){const e=Rl.swalPromiseReject.get(this);Mu(this),e&&e(t)}const Mu=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,xt.innerParams.get(t)||t._destroy())},nD=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),sD=(t,e,n)=>{var r;const o=On(),c=PE(e);typeof n.willClose=="function"&&n.willClose(e),(r=Ae.eventEmitter)===null||r===void 0||r.emit("willClose",e),c?rD(t,e,o,n.returnFocus,n.didClose):YE(t,o,n.returnFocus,n.didClose)},rD=(t,e,n,r,o)=>{Ae.swalCloseEventFinishedCallback=YE.bind(null,t,n,r,o);const c=function(h){if(h.target===e){var p;(p=Ae.swalCloseEventFinishedCallback)===null||p===void 0||p.call(Ae),delete Ae.swalCloseEventFinishedCallback,e.removeEventListener("animationend",c),e.removeEventListener("transitionend",c)}};e.addEventListener("animationend",c),e.addEventListener("transitionend",c)},m2=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=Ae.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},Il=t=>{let e=et();if(e||new Te,e=et(),!e)return;const n=Fl();Df()?An(Bl()):iD(e,t),cn(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},iD=(t,e)=>{const n=Du(),r=Fl();!n||!r||(!e&&Gn(xr())&&(e=xr()),cn(n),e&&(An(e),r.setAttribute("data-button-to-replace",e.className),n.insertBefore(r,e)),st([t,n],J.loading))},aD=(t,e)=>{e.input==="select"||e.input==="radio"?dD(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(V0(e.inputValue)||U0(e.inputValue))&&(Il(xr()),hD(t,e))},oD=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return lD(n);case"radio":return cD(n);case"file":return uD(n);default:return e.inputAutoTrim?n.value.trim():n.value}},lD=t=>t.checked?1:0,cD=t=>t.checked?t.value:null,uD=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,dD=(t,e)=>{const n=et();if(!n)return;const r=o=>{e.input==="select"?fD(n,Yh(o),e):e.input==="radio"&&mD(n,Yh(o),e)};V0(e.inputOptions)||U0(e.inputOptions)?(Il(xr()),Iu(e.inputOptions).then(o=>{t.hideLoading(),r(o)})):typeof e.inputOptions=="object"?r(e.inputOptions):wo(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},hD=(t,e)=>{const n=t.getInput();n&&(An(n),Iu(e.inputValue).then(r=>{n.value=e.input==="number"?`${parseFloat(r)||0}`:`${r}`,cn(n),n.focus(),t.hideLoading()}).catch(r=>{wo(`Error in inputValue promise: ${r}`),n.value="",cn(n),n.focus(),t.hideLoading()}))};function fD(t,e,n){const r=$i(t,J.select);if(!r)return;const o=(c,h,p)=>{const g=document.createElement("option");g.value=p,as(g,h),g.selected=XE(p,n.inputValue),c.appendChild(g)};e.forEach(c=>{const h=c[0],p=c[1];if(Array.isArray(p)){const g=document.createElement("optgroup");g.label=h,g.disabled=!1,r.appendChild(g),p.forEach(y=>o(g,y[1],y[0]))}else o(r,p,h)}),r.focus()}function mD(t,e,n){const r=$i(t,J.radio);if(!r)return;e.forEach(c=>{const h=c[0],p=c[1],g=document.createElement("input"),y=document.createElement("label");g.type="radio",g.name=J.radio,g.value=h,XE(h,n.inputValue)&&(g.checked=!0);const v=document.createElement("span");as(v,p),v.className=J.label,y.appendChild(g),y.appendChild(v),r.appendChild(y)});const o=r.querySelectorAll("input");o.length&&o[0].focus()}const Yh=t=>{const e=[];return t instanceof Map?t.forEach((n,r)=>{let o=n;typeof o=="object"&&(o=Yh(o)),e.push([r,o])}):Object.keys(t).forEach(n=>{let r=t[n];typeof r=="object"&&(r=Yh(r)),e.push([n,r])}),e},XE=(t,e)=>!!e&&e.toString()===t.toString(),pD=t=>{const e=xt.innerParams.get(t);t.disableButtons(),e.input?WE(t,"confirm"):W0(t,!0)},gD=t=>{const e=xt.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?WE(t,"deny"):X0(t,!1)},yD=(t,e)=>{t.disableButtons(),e(ql.cancel)},WE=(t,e)=>{const n=xt.innerParams.get(t);if(!n.input){wo(`The "input" parameter is needed to be set when using returnInputValueOn${L0(e)}`);return}const r=t.getInput(),o=oD(t,n);n.inputValidator?xD(t,o,e):r&&!r.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||r.validationMessage)):e==="deny"?X0(t,o):W0(t,o)},xD=(t,e,n)=>{const r=xt.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Iu(r.inputValidator(e,r.validationMessage))).then(c=>{t.enableButtons(),t.enableInput(),c?t.showValidationMessage(c):n==="deny"?X0(t,e):W0(t,e)})},X0=(t,e)=>{const n=xt.innerParams.get(t||void 0);n.showLoaderOnDeny&&Il(bo()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Iu(n.preDeny(e,n.validationMessage))).then(o=>{o===!1?(t.hideLoading(),Mu(t)):t.close({isDenied:!0,value:typeof o>"u"?e:o})}).catch(o=>ZE(t||void 0,o))):t.close({isDenied:!0,value:e})},p2=(t,e)=>{t.close({isConfirmed:!0,value:e})},ZE=(t,e)=>{t.rejectPromise(e)},W0=(t,e)=>{const n=xt.innerParams.get(t||void 0);n.showLoaderOnConfirm&&Il(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Iu(n.preConfirm(e,n.validationMessage))).then(o=>{Gn(If())||o===!1?(t.hideLoading(),Mu(t)):p2(t,typeof o>"u"?e:o)}).catch(o=>ZE(t||void 0,o))):p2(t,e)};function Qh(){const t=xt.innerParams.get(this);if(!t)return;const e=xt.domCache.get(this);An(e.loader),Df()?t.icon&&cn(Bl()):vD(e),Es([e.popup,e.actions],J.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const vD=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?cn(e[0],"inline-block"):GI()&&An(t.actions)};function JE(){const t=xt.innerParams.get(this),e=xt.domCache.get(this);return e?Pf(e.popup,t.input):null}function eN(t,e,n){const r=xt.domCache.get(t);e.forEach(o=>{r[o].disabled=n})}function tN(t,e){const n=et();if(!(!n||!t))if(t.type==="radio"){const r=n.querySelectorAll(`[name="${J.radio}"]`);for(let o=0;o<r.length;o++)r[o].disabled=e}else t.disabled=e}function nN(){eN(this,["confirmButton","denyButton","cancelButton"],!1)}function sN(){eN(this,["confirmButton","denyButton","cancelButton"],!0)}function rN(){tN(this.getInput(),!1)}function iN(){tN(this.getInput(),!0)}function aN(t){const e=xt.domCache.get(this),n=xt.innerParams.get(this);as(e.validationMessage,t),e.validationMessage.className=J["validation-message"],n.customClass&&n.customClass.validationMessage&&st(e.validationMessage,n.customClass.validationMessage),cn(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",J["validation-message"]),kE(r),st(r,J.inputerror))}function oN(){const t=xt.domCache.get(this);t.validationMessage&&An(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Es(e,J.inputerror))}const wl={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},wD=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],bD={allowEnterKey:void 0},_D=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],lN=t=>Object.prototype.hasOwnProperty.call(wl,t),cN=t=>wD.indexOf(t)!==-1,uN=t=>bD[t],ED=t=>{lN(t)||Pn(`Unknown parameter "${t}"`)},ND=t=>{_D.includes(t)&&Pn(`The parameter "${t}" is incompatible with toasts`)},TD=t=>{const e=uN(t);e&&SE(t,e)},dN=t=>{t.backdrop===!1&&t.allowOutsideClick&&Pn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&Pn(`Invalid theme "${t.theme}"`);for(const e in t)ED(e),t.toast&&ND(e),TD(e)};function hN(t){const e=On(),n=et(),r=xt.innerParams.get(this);if(!n||Xr(n,r.hideClass.popup)){Pn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const o=AD(t),c=Object.assign({},r,o);dN(c),e.dataset.swal2Theme=c.theme,FE(this,c),xt.innerParams.set(this,c),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const AD=t=>{const e={};return Object.keys(t).forEach(n=>{cN(n)?e[n]=t[n]:Pn(`Invalid parameter to update: ${n}`)}),e};function fN(){const t=xt.domCache.get(this),e=xt.innerParams.get(this);if(!e){mN(this);return}t.popup&&Ae.swalCloseEventFinishedCallback&&(Ae.swalCloseEventFinishedCallback(),delete Ae.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),Ae.eventEmitter.emit("didDestroy"),jD(this)}const jD=t=>{mN(t),delete t.params,delete Ae.keydownHandler,delete Ae.keydownTarget,delete Ae.currentInstance},mN=t=>{t.isAwaitingPromise?(Jp(xt,t),t.isAwaitingPromise=!0):(Jp(Rl,t),Jp(xt,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},Jp=(t,e)=>{for(const n in t)t[n].delete(e)};var SD=Object.freeze({__proto__:null,_destroy:fN,close:Gi,closeModal:Gi,closePopup:Gi,closeToast:Gi,disableButtons:sN,disableInput:iN,disableLoading:Qh,enableButtons:nN,enableInput:rN,getInput:JE,handleAwaitingPromise:Mu,hideLoading:Qh,rejectPromise:QE,resetValidationMessage:oN,showValidationMessage:aN,update:hN});const CD=(t,e,n)=>{t.toast?RD(t,e,n):(kD(e),DD(e),PD(t,e,n))},RD=(t,e,n)=>{e.popup.onclick=()=>{t&&(ID(t)||t.timer||t.input)||n(ql.close)}},ID=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let Xh=!1;const kD=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(Xh=!0)}}},DD=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(Xh=!0)}}},PD=(t,e,n)=>{e.container.onclick=r=>{if(Xh){Xh=!1;return}r.target===e.container&&Rf(t.allowOutsideClick)&&n(ql.backdrop)}},OD=t=>typeof t=="object"&&t.jquery,g2=t=>t instanceof Element||OD(t),MD=t=>{const e={};return typeof t[0]=="object"&&!g2(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,r)=>{const o=t[r];typeof o=="string"||g2(o)?e[n]=o:o!==void 0&&wo(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof o}`)}),e};function LD(...t){return new this(...t)}function VD(t){class e extends this{_main(r,o){return super._main(r,Object.assign({},t,o))}}return e}const UD=()=>Ae.timeout&&Ae.timeout.getTimerLeft(),pN=()=>{if(Ae.timeout)return YI(),Ae.timeout.stop()},gN=()=>{if(Ae.timeout){const t=Ae.timeout.start();return G0(t),t}},BD=()=>{const t=Ae.timeout;return t&&(t.running?pN():gN())},zD=t=>{if(Ae.timeout){const e=Ae.timeout.increase(t);return G0(e,!0),e}},FD=()=>!!(Ae.timeout&&Ae.timeout.isRunning());let y2=!1;const kg={};function qD(t="data-swal-template"){kg[t]=this,y2||(document.body.addEventListener("click",HD),y2=!0)}const HD=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in kg){const r=e.getAttribute(n);if(r){kg[n].fire({template:r});return}}};class $D{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const r=this._getHandlersByEventName(e);r.includes(n)||r.push(n)}once(e,n){const r=(...o)=>{this.removeListener(e,r),n.apply(this,o)};this.on(e,r)}emit(e,...n){this._getHandlersByEventName(e).forEach(r=>{try{r.apply(this,n)}catch(o){console.error(o)}})}removeListener(e,n){const r=this._getHandlersByEventName(e),o=r.indexOf(n);o>-1&&r.splice(o,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}Ae.eventEmitter=new $D;const GD=(t,e)=>{Ae.eventEmitter.on(t,e)},KD=(t,e)=>{Ae.eventEmitter.once(t,e)},YD=(t,e)=>{if(!t){Ae.eventEmitter.reset();return}e?Ae.eventEmitter.removeListener(t,e):Ae.eventEmitter.removeAllListeners(t)};var QD=Object.freeze({__proto__:null,argsToParams:MD,bindClickHandler:qD,clickCancel:Mk,clickConfirm:qE,clickDeny:Ok,enableLoading:Il,fire:LD,getActions:Du,getCancelButton:zl,getCloseButton:F0,getConfirmButton:xr,getContainer:On,getDenyButton:bo,getFocusableElements:q0,getFooter:IE,getHtmlContainer:B0,getIcon:Bl,getIconContent:zI,getImage:RE,getInputLabel:FI,getLoader:Fl,getPopup:et,getProgressSteps:z0,getTimerLeft:UD,getTimerProgressBar:kf,getTitle:CE,getValidationMessage:If,increaseTimer:zD,isDeprecatedParameter:uN,isLoading:HI,isTimerRunning:FD,isUpdatableParameter:cN,isValidParameter:lN,isVisible:Pk,mixin:VD,off:YD,on:GD,once:KD,resumeTimer:gN,showLoading:Il,stopTimer:pN,toggleTimer:BD});class XD{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const yN=["swal-title","swal-html","swal-footer"],WD=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return iP(n),Object.assign(ZD(n),JD(n),eP(n),tP(n),nP(n),sP(n),rP(n,yN))},ZD=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(r=>{co(r,["name","value"]);const o=r.getAttribute("name"),c=r.getAttribute("value");!o||!c||(typeof wl[o]=="boolean"?e[o]=c!=="false":typeof wl[o]=="object"?e[o]=JSON.parse(c):e[o]=c)}),e},JD=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(r=>{const o=r.getAttribute("name"),c=r.getAttribute("value");!o||!c||(e[o]=new Function(`return ${c}`)())}),e},eP=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(r=>{co(r,["type","color","aria-label"]);const o=r.getAttribute("type");!o||!["confirm","cancel","deny"].includes(o)||(e[`${o}ButtonText`]=r.innerHTML,e[`show${L0(o)}Button`]=!0,r.hasAttribute("color")&&(e[`${o}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(e[`${o}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),e},tP=t=>{const e={},n=t.querySelector("swal-image");return n&&(co(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},nP=t=>{const e={},n=t.querySelector("swal-icon");return n&&(co(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},sP=t=>{const e={},n=t.querySelector("swal-input");n&&(co(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const r=Array.from(t.querySelectorAll("swal-input-option"));return r.length&&(e.inputOptions={},r.forEach(o=>{co(o,["value"]);const c=o.getAttribute("value");if(!c)return;const h=o.innerHTML;e.inputOptions[c]=h})),e},rP=(t,e)=>{const n={};for(const r in e){const o=e[r],c=t.querySelector(o);c&&(co(c,[]),n[o.replace(/^swal-/,"")]=c.innerHTML.trim())}return n},iP=t=>{const e=yN.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const r=n.tagName.toLowerCase();e.includes(r)||Pn(`Unrecognized element <${r}>`)})},co=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&Pn([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},xN=10,aP=t=>{const e=On(),n=et();typeof t.willOpen=="function"&&t.willOpen(n),Ae.eventEmitter.emit("willOpen",n);const o=window.getComputedStyle(document.body).overflowY;cP(e,n,t),setTimeout(()=>{oP(e,n)},xN),H0()&&(lP(e,t.scrollbarPadding,o),Hk()),!Df()&&!Ae.previousActiveElement&&(Ae.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),Ae.eventEmitter.emit("didOpen",n),Es(e,J["no-transition"])},Wh=t=>{const e=et();if(t.target!==e)return;const n=On();e.removeEventListener("animationend",Wh),e.removeEventListener("transitionend",Wh),n.style.overflowY="auto"},oP=(t,e)=>{PE(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Wh),e.addEventListener("transitionend",Wh)):t.style.overflowY="auto"},lP=(t,e,n)=>{$k(),e&&n!=="hidden"&&Zk(n),setTimeout(()=>{t.scrollTop=0})},cP=(t,e,n)=>{st(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),cn(e,"grid"),setTimeout(()=>{st(e,n.showClass.popup),e.style.removeProperty("opacity")},xN)):cn(e,"grid"),st([document.documentElement,document.body],J.shown),n.heightAuto&&n.backdrop&&!n.toast&&st([document.documentElement,document.body],J["height-auto"])};var x2={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function uP(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=x2.email),t.input==="url"&&(t.inputValidator=x2.url))}function dP(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Pn('Target parameter is not valid, defaulting to "body"'),t.target="body")}function hP(t){uP(t),t.showLoaderOnConfirm&&!t.preConfirm&&Pn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),dP(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),nk(t)}let or;var oh=new WeakMap;class Ft{constructor(...e){if(DI(this,oh,void 0),typeof window>"u")return;or=this;const n=Object.freeze(this.constructor.argsToParams(e));this.params=n,this.isAwaitingPromise=!1,PI(oh,this,this._main(or.params))}_main(e,n={}){if(dN(Object.assign({},n,e)),Ae.currentInstance){const c=Rl.swalPromiseResolve.get(Ae.currentInstance),{isAwaitingPromise:h}=Ae.currentInstance;Ae.currentInstance._destroy(),h||c({isDismissed:!0}),H0()&&GE()}Ae.currentInstance=or;const r=mP(e,n);hP(r),Object.freeze(r),Ae.timeout&&(Ae.timeout.stop(),delete Ae.timeout),clearTimeout(Ae.restoreFocusTimeout);const o=pP(or);return FE(or,r),xt.innerParams.set(or,r),fP(or,o,r)}then(e){return l2(oh,this).then(e)}finally(e){return l2(oh,this).finally(e)}}const fP=(t,e,n)=>new Promise((r,o)=>{const c=h=>{t.close({isDismissed:!0,dismiss:h})};Rl.swalPromiseResolve.set(t,r),Rl.swalPromiseReject.set(t,o),e.confirmButton.onclick=()=>{pD(t)},e.denyButton.onclick=()=>{gD(t)},e.cancelButton.onclick=()=>{yD(t,c)},e.closeButton.onclick=()=>{c(ql.close)},CD(n,e,c),Lk(Ae,n,c),aD(t,n),aP(n),gP(Ae,n,c),yP(e,n),setTimeout(()=>{e.container.scrollTop=0})}),mP=(t,e)=>{const n=WD(t),r=Object.assign({},wl,e,n,t);return r.showClass=Object.assign({},wl.showClass,r.showClass),r.hideClass=Object.assign({},wl.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},pP=t=>{const e={popup:et(),container:On(),actions:Du(),confirmButton:xr(),denyButton:bo(),cancelButton:zl(),loader:Fl(),closeButton:F0(),validationMessage:If(),progressSteps:z0()};return xt.domCache.set(t,e),e},gP=(t,e,n)=>{const r=kf();An(r),e.timer&&(t.timeout=new XD(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(cn(r),rs(r,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&G0(e.timer)})))},yP=(t,e)=>{if(!e.toast){if(!Rf(e.allowEnterKey)){SE("allowEnterKey"),wP();return}xP(t)||vP(t,e)||Ig(-1,1)}},xP=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&Gn(n))return n.focus(),!0;return!1},vP=(t,e)=>e.focusDeny&&Gn(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&Gn(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&Gn(t.confirmButton)?(t.confirmButton.focus(),!0):!1,wP=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Ft.prototype.disableButtons=sN;Ft.prototype.enableButtons=nN;Ft.prototype.getInput=JE;Ft.prototype.disableInput=iN;Ft.prototype.enableInput=rN;Ft.prototype.hideLoading=Qh;Ft.prototype.disableLoading=Qh;Ft.prototype.showValidationMessage=aN;Ft.prototype.resetValidationMessage=oN;Ft.prototype.close=Gi;Ft.prototype.closePopup=Gi;Ft.prototype.closeModal=Gi;Ft.prototype.closeToast=Gi;Ft.prototype.rejectPromise=QE;Ft.prototype.update=hN;Ft.prototype._destroy=fN;Object.assign(Ft,QD);Object.keys(SD).forEach(t=>{Ft[t]=function(...e){return or&&or[t]?or[t](...e):null}});Ft.DismissReason=ql;Ft.version="11.23.0";const Te=Ft;Te.default=Te;typeof document<"u"&&(function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const eg=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0),[o,c]=D.useState(null),[h,p]=D.useState("all"),[g,y]=D.useState(""),{addToCart:v}=Ul(),{addToWishlist:_}=Cf(),{currentUser:T}=$s();D.useEffect(()=>{(async()=>{try{r(!0);const z=await RI();e(z)}catch(z){c("Failed to load products"),console.error("Error fetching products:",z)}finally{r(!1)}})()},[]);const R=D.useMemo(()=>{let F=h==="all"?t:t.filter(z=>z.category===h);if(g){const z=g.toLowerCase();F=F.filter(ce=>ce.name.toLowerCase().includes(z)||ce.description&&ce.description.toLowerCase().includes(z)||ce.category&&ce.category.toLowerCase().includes(z)||ce.material&&ce.material.toLowerCase().includes(z)||ce.color&&ce.color.toLowerCase().includes(z))}return F},[t,h,g]),U=["all",...new Set(t.map(F=>F.category))],$=F=>{if(F.imageUrls&&F.imageUrls.length>0){const z=F.imageUrls.filter(ce=>ce&&(typeof ce=="string"||ce.data&&typeof ce.data=="string"));if(z.length>0){const ce=F.primaryImageIndex||0,he=Math.min(ce,z.length-1),ue=z[he];if(typeof ue=="string")return ue;if(ue&&ue.data)return ue.data}}return F.imageUrl||"https://via.placeholder.com/300x300.png?text=Moño"},I=F=>{if(!T){Te.fire({title:"Inicia sesión",text:"Debes iniciar sesión para agregar productos al carrito",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(ce=>{ce.isConfirmed&&(window.location.href="/login")});return}if((F.stock!==void 0?F.stock:1/0)===0){Te.fire({title:"Producto agotado",text:"Este producto no está disponible actualmente.",icon:"error",confirmButtonText:"Aceptar"});return}v({...F,quantity:1}),Te.fire({title:"Producto agregado",text:"Producto agregado correctamente al carrito",icon:"success",confirmButtonText:"Aceptar"})},Q=F=>{if(!T){Te.fire({title:"Inicia sesión",text:"Debes iniciar sesión para agregar productos a tu lista de deseos",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(z=>{z.isConfirmed&&(window.location.href="/login")});return}_(F),Te.fire({title:"Producto agregado",text:"Producto agregado correctamente a tu lista de deseos",icon:"success",confirmButtonText:"Aceptar"})};return l.jsx("div",{children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nuestra Colección"}),l.jsxs("div",{className:"mt-4 md:mt-0 flex flex-col sm:flex-row gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 w-full sm:w-64",value:g,onChange:F=>y(F.target.value)}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category-filter",className:"mr-2 text-sm font-medium text-gray-700",children:"Filtrar por:"}),l.jsx("select",{id:"category-filter",className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:h,onChange:F=>p(F.target.value),children:U.map(F=>l.jsx("option",{value:F,children:F==="all"?"Todos":F},F))})]})]})]}),n?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):o?l.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[l.jsx("strong",{className:"font-bold",children:"Error! "}),l.jsx("span",{className:"block sm:inline",children:o})]}):l.jsxs(l.Fragment,{children:[g&&l.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:[R.length,' producto(s) encontrado(s) para "',g,'"']}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:R.map(F=>l.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[l.jsx($e,{to:`/product/${F.id}`,children:l.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden",children:l.jsx("img",{src:$(F),alt:F.name,className:"w-full h-64 object-cover",onError:z=>{z.target.onerror=null,z.target.src="https://via.placeholder.com/300x300.png?text=Moño"}})})}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:F.category}),F.stock!==void 0&&F.stock<=5&&l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:F.stock>0?`Solo ${F.stock} disponibles`:"Agotado"})]}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:F.name}),F.rating>0&&l.jsx("div",{className:"mt-2",children:l.jsx(xl,{rating:F.rating,size:"sm"})}),l.jsx("div",{className:"mt-2",children:l.jsxs("span",{className:"text-lg font-semibold text-indigo-600",children:["$",parseFloat(F.price).toLocaleString("es-CO")]})}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx("button",{className:"flex-1 bg-indigo-600 border border-transparent rounded-md py-2 px-4 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:z=>{z.preventDefault(),I(F)},children:"Agregar al Carrito"}),l.jsx("button",{className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:z=>{z.preventDefault(),z.stopPropagation(),Q(F)},children:l.jsx("svg",{className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]})]})]},F.id))})]}),!n&&!o&&R.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No se encontraron productos"}),l.jsx("p",{className:"mt-1 text-gray-500",children:g?`No se encontraron productos que coincidan con "${g}".`:"No hay productos disponibles en esta categoría."}),g&&l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:()=>{y(""),p("all")},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Ver todos los productos"})})]})]})})};var vN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},v2=$n.createContext&&$n.createContext(vN),bP=["attr","size","title"];function _P(t,e){if(t==null)return{};var n=EP(t,e),r,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(o=0;o<c.length;o++)r=c[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function EP(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Zh(){return Zh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zh.apply(this,arguments)}function w2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Jh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w2(Object(n),!0).forEach(function(r){NP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NP(t,e,n){return e=TP(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TP(t){var e=AP(t,"string");return typeof e=="symbol"?e:e+""}function AP(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wN(t){return t&&t.map((e,n)=>$n.createElement(e.tag,Jh({key:n},e.attr),wN(e.child)))}function os(t){return e=>$n.createElement(jP,Zh({attr:Jh({},t.attr)},e),wN(t.child))}function jP(t){var e=n=>{var{attr:r,size:o,title:c}=t,h=_P(t,bP),p=o||n.size||"1em",g;return n.className&&(g=n.className),t.className&&(g=(g?g+" ":"")+t.className),$n.createElement("svg",Zh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,h,{className:g,style:Jh(Jh({color:t.color||n.color},n.style),t.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),c&&$n.createElement("title",null,c),t.children)};return v2!==void 0?$n.createElement(v2.Consumer,null,n=>e(n)):e(vN)}function SP(t){return os({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(t)}function CP(t){return os({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(t)}function RP(t){return os({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function IP(t){return os({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function kP(t){return os({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function DP(t){return os({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function PP(t){return os({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function OP(t){return os({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function MP(t){return os({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function LP(t){return os({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(t)}function VP(t){return os({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function UP(t){return os({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function b2(t){return os({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}const so=()=>{const[t,e]=D.useState(!1),[n,r]=D.useState(!1),{currentUser:o,isAdmin:c,userProfile:h}=$s(),{items:p}=Ul(),{items:g}=Cf(),y=Hs(),v=D.useRef(null);D.useEffect(()=>{console.log("Navbar isAdmin value:",c)},[c]),D.useEffect(()=>{const z=ce=>{v.current&&!v.current.contains(ce.target)&&r(!1)};return document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[]);const _=()=>{e(!t)},T=()=>{console.log("Toggling profile menu, current state:",n),r(!n)},R=()=>{console.log("Closing profile menu"),r(!1)},U=async()=>{try{await SC(pr),R(),y("/home")}catch(z){console.error("Error signing out:",z)}},$="text-slate-600 hover:text-slate-900 transition-colors duration-300",I="relative text-slate-600 hover:text-slate-900 transition-colors duration-300 cursor-pointer",Q=p.reduce((z,ce)=>z+ce.quantity,0),F=g.length;return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"sticky top-0 z-50 font-sans bg-white shadow-sm",children:l.jsxs("nav",{className:"flex items-center justify-between p-4 mx-auto max-w-7xl",children:[l.jsx("div",{className:"text-2xl font-bold text-slate-800",children:l.jsx($e,{to:"/home",children:"BOWSHOP"})}),l.jsxs("ul",{className:"items-center hidden space-x-8 md:flex",children:[l.jsx("li",{children:l.jsx($e,{to:"/home",className:$,children:"Inicio"})}),l.jsx("li",{children:l.jsx($e,{to:"/shop",className:$,children:"Productos"})}),l.jsx("li",{children:l.jsx($e,{to:"/blog",className:$,children:"Blog"})}),l.jsx("li",{children:l.jsx($e,{to:"/contact",className:$,children:"Contacto"})})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:`hidden md:block ${I} text-xl`,children:l.jsx(MP,{})}),l.jsxs($e,{to:"/wishlist",className:`${I} text-xl flex items-center justify-center relative`,children:[l.jsx(PP,{}),F>0&&l.jsx("span",{className:"absolute flex items-center justify-center w-5 h-5 text-xs font-semibold text-white bg-green-500 rounded-full -top-2 -right-3",children:F})]}),l.jsxs($e,{to:"/cart",className:`${I} text-xl flex items-center justify-center relative`,children:[l.jsx(LP,{}),Q>0&&l.jsx("span",{className:"absolute flex items-center justify-center w-5 h-5 text-xs font-semibold text-white bg-green-500 rounded-full -top-2 -right-3",children:Q})]}),l.jsxs("div",{className:"relative",ref:v,children:[o?l.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-200 border border-gray-300 rounded-full cursor-pointer",onClick:T,children:h?.profileImage?l.jsx("img",{src:h.profileImage,alt:"Profile",className:"object-cover w-full h-full rounded-full"}):l.jsx("span",{className:"text-xs font-bold text-gray-600",children:h?.displayName?.charAt(0).toUpperCase()||o.email?.charAt(0).toUpperCase()||"U"})}):l.jsx($e,{to:"/login",className:"flex items-center justify-center w-8 h-8 bg-gray-200 border border-gray-300 rounded-full cursor-pointer",children:l.jsx(b2,{className:"text-gray-600"})}),o&&n&&l.jsxs("div",{className:"absolute right-0 z-50 w-64 mt-2 bg-gray-800 rounded-lg shadow-lg",children:[l.jsx("div",{className:"p-4 border-b border-gray-700",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gray-200 border border-gray-300 rounded-full",children:h?.profileImage?l.jsx("img",{src:h.profileImage,alt:"Profile",className:"object-cover w-full h-full rounded-full"}):l.jsx("span",{className:"text-sm font-bold text-gray-600",children:h?.displayName?.charAt(0).toUpperCase()||o.email?.charAt(0).toUpperCase()||"U"})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-bold text-white",children:h?.displayName||o.email?.split("@")[0]||"Usuario"}),l.jsx("p",{className:"text-xs text-gray-400",children:o.email})]})]})}),l.jsxs("div",{className:"py-1",children:[console.log("Rendering admin link, isAdmin:",c),c&&l.jsxs($e,{to:"/admin",className:"flex items-center px-4 py-2 text-sm text-white hover:bg-gray-700",onClick:R,children:[l.jsx(DP,{className:"mr-3 text-gray-400"}),l.jsx("span",{children:"Administrar página"})]}),l.jsxs($e,{to:"/profile",className:"flex items-center px-4 py-2 text-sm text-white hover:bg-gray-700",onClick:R,children:[l.jsx(b2,{className:"mr-3 text-gray-400"}),l.jsx("span",{children:"Editar perfil"})]}),l.jsx("div",{className:"border-t border-gray-700",children:l.jsxs($e,{to:"/orders",className:"flex items-center px-4 py-2 text-sm text-white hover:bg-gray-700",onClick:R,children:[l.jsx(OP,{className:"mr-3 text-gray-400"}),l.jsx("span",{children:"Mis Pedidos"})]})}),l.jsxs("button",{onClick:U,className:"flex items-center w-full px-4 py-2 text-sm text-left text-white hover:bg-gray-700",children:[l.jsx(VP,{className:"mr-3 text-gray-400"}),l.jsx("span",{children:"Cerrar sesión"})]})]})]})]}),l.jsxs("div",{className:"ml-3 text-2xl cursor-pointer md:hidden text-slate-800",onClick:_,children:[l.jsx(kP,{}),l.jsx("span",{className:"absolute flex items-center justify-center w-5 h-5 text-xs font-semibold text-white bg-green-500 rounded-full -top-1 -right-1",children:"11"})]})]})]})}),l.jsxs(l.Fragment,{children:[t&&l.jsx("div",{className:"fixed inset-0 z-40 bg-black/40",onClick:_}),l.jsxs("aside",{className:`fixed top-0 left-0 h-full w-72 bg-white shadow-xl transform ${t?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 p-5 flex flex-col font-sans`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-10",children:[l.jsx("div",{className:"text-xl font-bold text-slate-800",children:"BOWSHOP"}),l.jsx("button",{onClick:_,className:"text-2xl cursor-pointer text-slate-600 hover:text-slate-900",children:l.jsx(UP,{})})]}),l.jsxs("ul",{className:"flex-grow space-y-4",children:[l.jsx("li",{children:l.jsx($e,{to:"/home",className:`text-lg ${$}`,onClick:_,children:"Inicio"})}),l.jsx("li",{children:l.jsx($e,{to:"/shop",className:`text-lg ${$}`,onClick:_,children:"Productos"})}),l.jsx("li",{children:l.jsx($e,{to:"/blog",className:`text-lg ${$}`,onClick:_,children:"Blog"})}),l.jsx("li",{children:l.jsx($e,{to:"/contact",className:`text-lg ${$}`,onClick:_,children:"Contacto"})}),l.jsx("li",{children:l.jsx($e,{to:"/cart",className:`text-lg ${$}`,onClick:_,children:"Carrito"})}),l.jsx("li",{children:l.jsx($e,{to:"/wishlist",className:`text-lg ${$}`,onClick:_,children:"Favoritos"})}),o&&c&&l.jsx("li",{children:l.jsx($e,{to:"/admin",className:"text-lg font-medium text-blue-600",onClick:_,children:"Panel administrativo"})})]}),l.jsx("div",{className:"mt-4",children:o?l.jsx("button",{onClick:()=>{U(),_()},className:"w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar Sesión"}):l.jsx($e,{to:"/login",className:"block w-full px-4 py-2 text-sm font-medium text-center text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:_,children:"Iniciar Sesión"})}),l.jsxs("div",{className:"flex justify-center p-5 mt-auto space-x-6",children:[l.jsx("a",{href:"#",className:`text-2xl ${I}`,children:l.jsx(IP,{})}),l.jsx("a",{href:"#",className:`text-2xl ${I}`,children:l.jsx(CP,{})}),l.jsx("a",{href:"#",className:`text-2xl ${I}`,children:l.jsx(SP,{})}),l.jsx("a",{href:"#",className:`text-2xl ${I}`,children:l.jsx(RP,{})})]})]})]})]})},bN=async t=>{try{const e=Dn(Pe,"reviews");return{id:(await jf(e,{...t,createdAt:new Date,updatedAt:new Date})).id,...t,createdAt:new Date,updatedAt:new Date}}catch(e){throw console.error("Error creating review:",e),e}},_2=async t=>{try{const e=Dn(Pe,"reviews"),n=ia(e,mu("productId","==",t),Ru("createdAt","desc"));return(await Hn(n)).docs.map(c=>({id:c.id,...c.data()}))}catch(e){if(console.error("Error fetching reviews:",e),e.code==="failed-precondition"||e.message&&e.message.includes("index"))try{const n=Dn(Pe,"reviews"),r=ia(n,mu("productId","==",t));return(await Hn(r)).docs.map(p=>({id:p.id,...p.data()})).sort((p,g)=>{const y=p.createdAt?.toDate?p.createdAt.toDate():new Date(p.createdAt);return(g.createdAt?.toDate?g.createdAt.toDate():new Date(g.createdAt))-y})}catch(n){throw console.error("Error fetching reviews without index:",n),n}else throw e}},BP=async()=>{try{const t=Dn(Pe,"reviews"),e=ia(t,Ru("createdAt","desc"));return(await Hn(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(t){if(console.error("Error fetching all reviews:",t),t.code==="failed-precondition"||t.message&&t.message.includes("index"))try{const e=Dn(Pe,"reviews");return(await Hn(e)).docs.map(c=>({id:c.id,...c.data()})).sort((c,h)=>{const p=c.createdAt?.toDate?c.createdAt.toDate():new Date(c.createdAt);return(h.createdAt?.toDate?h.createdAt.toDate():new Date(h.createdAt))-p})}catch(e){throw console.error("Error fetching all reviews without index:",e),e}else throw t}},zP=async(t,e)=>{try{const n=ct(Pe,"reviews",t);return await Os(n,{...e,updatedAt:new Date}),{id:t,...e,updatedAt:new Date}}catch(n){throw console.error("Error updating review:",n),n}},FP=async t=>{try{const e=ct(Pe,"reviews",t);return await M0(e),t}catch(e){throw console.error("Error deleting review:",e),e}},qP=()=>{const{id:t}=qA(),[e,n]=D.useState(null),[r,o]=D.useState(!0),[c,h]=D.useState(null),[p,g]=D.useState(1),[y,v]=D.useState(0),{addToCart:_}=Ul(),{addToWishlist:T}=Cf(),{currentUser:R}=$s(),U=Hs(),[$,I]=D.useState([]),[Q,F]=D.useState(!0),[z,ce]=D.useState({rating:0,comment:""}),[he,ue]=D.useState(!1);D.useEffect(()=>{t&&(async()=>{try{o(!0);const re=await II(t);n(re),v(0)}catch(re){h("Failed to load product"),console.error("Error fetching product:",re)}finally{o(!1)}})()},[t]),D.useEffect(()=>{(async()=>{if(t)try{F(!0);const re=await _2(t);I(re)}catch(re){console.error("Error fetching reviews:",re)}finally{F(!1)}})()},[t]);const k=()=>{if(!R){Te.fire({title:"Inicia sesión",text:"Debes iniciar sesión para agregar productos al carrito",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(q=>{q.isConfirmed&&U("/login")});return}if(e){if((e.stock!==void 0?e.stock:1/0)===0){Te.fire({title:"Producto agotado",text:"Este producto no está disponible actualmente.",icon:"error",confirmButtonText:"Aceptar"});return}_({...e,quantity:1}),Te.fire({title:"Producto agregado",text:"Producto agregado correctamente al carrito",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{})}},N=()=>{if(!R){Te.fire({title:"Inicia sesión",text:"Debes iniciar sesión para agregar productos a tu lista de deseos",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(q=>{q.isConfirmed&&U("/login")});return}e&&(T(e),Te.fire({title:"Producto agregado",text:"Producto agregado correctamente a tu lista de deseos",icon:"success",confirmButtonText:"Aceptar"}))},C=()=>{if(e?.imageUrls&&Array.isArray(e.imageUrls)){const q=e.imageUrls.filter(re=>re&&(typeof re=="string"||re.data&&typeof re.data=="string"));return q.length>0?q.map(ge=>typeof ge=="string"?ge:ge&&ge.data?ge.data:"https://via.placeholder.com/600x600.png?text=Moño"):["https://via.placeholder.com/600x600.png?text=Moño"]}return e?.imageUrl?[e.imageUrl]:["https://via.placeholder.com/600x600.png?text=Moño"]},L=()=>{const q=C();return q[y]||q[0]},O=q=>{const{name:re,value:ge}=q.target;ce(Be=>({...Be,[re]:ge}))},M=q=>{ce(re=>({...re,rating:q}))},S=async q=>{if(q.preventDefault(),!R){Te.fire({title:"Inicia sesión",text:"Debes iniciar sesión para dejar una reseña",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(re=>{re.isConfirmed&&U("/login")});return}if(z.rating===0){Te.fire({title:"Error",text:"Por favor selecciona una calificación",icon:"error",confirmButtonText:"Aceptar"});return}if(z.comment.trim()===""){Te.fire({title:"Error",text:"Por favor escribe un comentario",icon:"error",confirmButtonText:"Aceptar"});return}ue(!0);try{const re={productId:t,userId:R.uid,userEmail:R.email,userName:R.displayName||R.email.split("@")[0],rating:z.rating,comment:z.comment.trim()};await bN(re),ce({rating:0,comment:""});const ge=await _2(t);I(ge),Te.fire({title:"Reseña enviada",text:"Tu reseña ha sido enviada correctamente",icon:"success",confirmButtonText:"Aceptar"})}catch(re){console.error("Error submitting review:",re),Te.fire({title:"Error",text:"Hubo un error al enviar tu reseña. Por favor intenta nuevamente.",icon:"error",confirmButtonText:"Aceptar"})}finally{ue(!1)}},Ne=q=>q?q instanceof Date?q.toLocaleDateString("es-CO"):q.toDate?q.toDate().toLocaleDateString("es-CO"):"N/A":"N/A";if(r)return l.jsxs("div",{children:[l.jsx(so,{}),l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"w-12 h-12 border-b-2 border-gray-900 rounded-full animate-spin"})})]});if(c||!e)return l.jsxs("div",{children:[l.jsx(so,{}),l.jsx("div",{className:"px-4 py-8 mx-auto max-w-7xl sm:px-6 lg:px-8",children:l.jsxs("div",{className:"relative px-4 py-3 text-red-700 bg-red-100 border border-red-400 rounded",role:"alert",children:[l.jsx("strong",{className:"font-bold",children:"Error! "}),l.jsx("span",{className:"block sm:inline",children:c||"Product not found"})]})})]});const Le=C();return l.jsxs("div",{children:[l.jsx(so,{}),l.jsxs("div",{className:"px-4 py-8 mx-auto max-w-7xl sm:px-6 lg:px-8",children:[l.jsx("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:l.jsxs("ol",{className:"flex items-center space-x-2",children:[l.jsx("li",{children:l.jsx($e,{to:"/home",className:"text-gray-500 hover:text-gray-700",children:"Home"})}),l.jsx("li",{children:l.jsx("span",{className:"text-gray-500",children:"/"})}),l.jsx("li",{children:l.jsx($e,{to:"/shop",className:"text-gray-500 hover:text-gray-700",children:"Shop"})}),l.jsx("li",{children:l.jsx("span",{className:"text-gray-500",children:"/"})}),l.jsx("li",{children:l.jsx("span",{className:"text-gray-900",children:e.name})})]})}),l.jsxs("div",{className:"lg:grid lg:grid-cols-2 lg:gap-x-8 lg:items-start",children:[l.jsxs("div",{className:"flex flex-col-reverse",children:[Le.length>1&&l.jsx("div",{className:"hidden w-full max-w-2xl mx-auto mt-6 sm:block lg:max-w-none",children:l.jsx("div",{className:"grid grid-cols-4 gap-6","aria-orientation":"horizontal",children:Le.map((q,re)=>l.jsxs("button",{className:`relative h-24 bg-white rounded-md flex items-center justify-center text-sm font-medium uppercase text-gray-900 cursor-pointer hover:bg-gray-50 focus:outline-none focus:ring focus:ring-offset-4 focus:ring-indigo-500 ${y===re?"ring-2 ring-indigo-500":""}`,onClick:()=>v(re),children:[l.jsxs("span",{className:"sr-only",children:["Imagen ",re+1]}),l.jsx("span",{className:"absolute inset-0 overflow-hidden rounded-md",children:l.jsx("img",{src:q,alt:`Imagen ${re+1}`,className:"object-cover w-full h-full",onError:ge=>{ge.target.onerror=null,ge.target.src="https://via.placeholder.com/100x100.png?text=Moño"}})}),y===re&&l.jsx("span",{className:"absolute inset-0 rounded-md pointer-events-none ring-2 ring-offset-2 ring-indigo-500","aria-hidden":"true"})]},re))})}),l.jsx("div",{className:"w-full aspect-w-1 aspect-h-1",children:l.jsx("img",{src:L(),alt:e.name,className:"object-cover object-center w-full h-full sm:rounded-lg",onError:q=>{q.target.onerror=null,q.target.src="https://via.placeholder.com/600x600.png?text=Moño"}})})]}),l.jsxs("div",{className:"px-4 mt-10 sm:px-0 sm:mt-16 lg:mt-0",children:[l.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-gray-900",children:e.name}),l.jsxs("div",{className:"mt-3",children:[l.jsx("h2",{className:"sr-only",children:"Product information"}),l.jsxs("p",{className:"text-3xl text-gray-900",children:["$",parseFloat(e.price).toLocaleString("es-CO")]})]}),e.rating>0&&l.jsx("div",{className:"mt-2",children:l.jsx(xl,{rating:e.rating,size:"lg"})}),l.jsxs("div",{className:"mt-6",children:[l.jsx("h3",{className:"sr-only",children:"Description"}),l.jsx("div",{className:"space-y-6 text-base text-gray-700",children:l.jsx("p",{children:e.description})})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"mr-2 text-gray-700",children:"Categoría:"}),l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.category})]}),e.stock!==void 0&&l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("span",{className:"mr-2 text-gray-700",children:"Stock:"}),l.jsx("span",{className:`font-medium ${e.stock>5?"text-green-600":e.stock>0?"text-yellow-600":"text-red-600"}`,children:e.stock>0?`${e.stock} disponibles`:"Agotado"})]}),e.material&&l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("span",{className:"mr-2 text-gray-700",children:"Material:"}),l.jsx("span",{className:"text-gray-900",children:e.material})]}),e.color&&l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("span",{className:"mr-2 text-gray-700",children:"Color:"}),l.jsx("span",{className:"text-gray-900",children:e.color})]}),e.size&&l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("span",{className:"mr-2 text-gray-700",children:"Tamaño:"}),l.jsx("span",{className:"text-gray-900",children:e.size})]}),e.style&&l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("span",{className:"mr-2 text-gray-700",children:"Estilo:"}),l.jsx("span",{className:"text-gray-900",children:e.style})]})]}),l.jsx("form",{className:"mt-6",children:l.jsxs("div",{className:"flex gap-3 mt-10 sm:flex-col1",children:[l.jsx("button",{type:"button",onClick:k,className:"flex items-center justify-center flex-1 max-w-xs px-8 py-3 text-base font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:w-full",disabled:e.stock===0,children:"Agregar al Carrito"}),l.jsxs("button",{type:"button",onClick:N,className:"flex items-center justify-center px-4 py-3 ml-4 text-gray-400 rounded-md hover:bg-gray-100 hover:text-gray-500",children:[l.jsx("svg",{className:"flex-shrink-0 w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),l.jsx("span",{className:"sr-only",children:"Add to favorites"})]})]})})]})]}),l.jsx("div",{className:"mt-16",children:l.jsxs("div",{className:"border-t border-gray-200 pt-10",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Reseñas de Clientes"}),R&&l.jsxs("div",{className:"mb-10",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Deja tu reseña"}),l.jsxs("form",{onSubmit:S,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calificación"}),l.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(q=>l.jsx("button",{type:"button",onClick:()=>M(q),className:"text-2xl focus:outline-none",children:q<=z.rating?l.jsx("span",{className:"text-yellow-400",children:"★"}):l.jsx("span",{className:"text-gray-300",children:"☆"})},q)),l.jsx("span",{className:"ml-2 text-sm text-gray-500",children:z.rating>0?`${z.rating} de 5 estrellas`:"Selecciona una calificación"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentario"}),l.jsx("textarea",{id:"comment",name:"comment",rows:4,value:z.comment,onChange:O,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border border-gray-300 rounded-md p-3",placeholder:"Comparte tu experiencia con este producto..."})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:he,className:`inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${he?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:he?"Enviando...":"Enviar Reseña"})})]})]}),l.jsx("div",{children:Q?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-gray-900 rounded-full animate-spin"})}):$.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-gray-500",children:"No hay reseñas para este producto aún."}),!R&&l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:l.jsx($e,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Inicia sesión para dejar la primera reseña"})})]}):l.jsx("div",{className:"space-y-6",children:$.map(q=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900",children:q.userName}),l.jsx("div",{className:"mt-1",children:l.jsx(xl,{rating:q.rating,size:"sm"})})]}),l.jsx("p",{className:"text-sm text-gray-500",children:Ne(q.createdAt)})]}),l.jsx("div",{className:"mt-4",children:l.jsx("p",{className:"text-gray-700",children:q.comment})})]},q.id))})})]})})]})]})},HP=()=>{const{items:t,updateQuantity:e,removeFromCart:n,getTotalPrice:r,loading:o,coupon:c,applyCoupon:h,removeCoupon:p}=Ul(),g=Hs(),[y,v]=D.useState(""),[_,T]=D.useState(""),[R,U]=D.useState(!1);if(o)return l.jsx("div",{children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})})});const $=()=>{g("/checkout")},I=async z=>{if(z.preventDefault(),!!y.trim()){U(!0),T("");try{await h(y.trim()),v("")}catch(ce){T(ce.message||"Error al aplicar el cupón")}finally{U(!1)}}},Q=()=>{p(),v(""),T("")},F=t.reduce((z,ce)=>z+ce.price*ce.quantity,0);return l.jsx("div",{children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Tu Carrito de Compras"}),t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Tu carrito está vacío"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"Empieza a agregar productos a tu carrito"}),l.jsx("div",{className:"mt-6",children:l.jsx($e,{to:"/shop",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Continuar Comprando"})})]}):l.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-x-12",children:[l.jsx("div",{className:"lg:col-span-8",children:l.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(z=>l.jsx("li",{className:"p-4 sm:p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 w-24 h-24 border border-gray-200 rounded-md overflow-hidden",children:l.jsx("img",{src:z.imageUrl||"https://via.placeholder.com/100x100.png?text=Moño",alt:z.name,className:"w-full h-full object-center object-cover",onError:ce=>{ce.target.onerror=null,ce.target.src="https://via.placeholder.com/100x100.png?text=Moño"}})}),l.jsxs("div",{className:"ml-4 flex-1 flex flex-col",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[l.jsx("h3",{children:l.jsx($e,{to:`/product/${z.id}`,children:z.name})}),l.jsxs("p",{className:"ml-4",children:["$",parseFloat(z.price*z.quantity).toLocaleString("es-CO")]})]}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:z.category}),z.stock!==void 0&&l.jsx("p",{className:"mt-1 text-sm",children:l.jsx("span",{className:`font-medium ${z.stock>5?"text-green-600":z.stock>0?"text-yellow-600":"text-red-600"}`,children:z.stock>0?`Stock: ${z.stock} disponibles`:"Agotado"})})]}),l.jsxs("div",{className:"flex-1 flex items-end justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsxs("button",{onClick:()=>e(z.id,z.quantity-1),className:"text-gray-500 hover:text-gray-600",disabled:z.quantity<=1,children:[l.jsx("span",{className:"sr-only",children:"Remove one"}),l.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})})]}),l.jsx("span",{className:"mx-2 text-gray-500",children:z.quantity}),l.jsxs("button",{onClick:()=>{const ce=z.stock!==void 0?z.stock:1/0;z.quantity<ce&&e(z.id,z.quantity+1)},className:"text-gray-500 hover:text-gray-600",disabled:z.stock!==void 0&&z.quantity>=z.stock,children:[l.jsx("span",{className:"sr-only",children:"Add one"}),l.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]})]}),l.jsx("div",{className:"flex",children:l.jsx("button",{type:"button",onClick:()=>n(z.id),className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Eliminar"})})]})]})]})},z.id))})})}),l.jsx("div",{className:"mt-8 lg:mt-0 lg:col-span-4",children:l.jsxs("div",{className:"bg-gray-50 rounded-lg px-4 py-6 sm:p-6 lg:p-8",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Resumen del Pedido"}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-md font-medium text-gray-900 mb-2",children:"Cupón de Descuento"}),c?l.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-md",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-green-800",children:c.code}),l.jsx("span",{className:"ml-2 text-sm text-green-600",children:c.discountType==="percentage"?`-${c.discountValue}%`:`-$${c.discountValue.toLocaleString("es-CO")}`})]}),l.jsx("button",{onClick:Q,className:"text-sm text-red-600 hover:text-red-800",children:"Eliminar"})]}):l.jsxs("form",{onSubmit:I,className:"flex space-x-2",children:[l.jsx("input",{type:"text",value:y,onChange:z=>v(z.target.value),placeholder:"Ingresa tu código",className:"flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",disabled:R}),l.jsx("button",{type:"submit",disabled:R||!y.trim(),className:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white ${R||!y.trim()?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}`,children:R?"Aplicando...":"Aplicar"})]}),_&&l.jsx("p",{className:"mt-2 text-sm text-red-600",children:_})]}),l.jsxs("dl",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"text-sm text-gray-600",children:"Subtotal"}),l.jsxs("dd",{className:"text-sm font-medium text-gray-900",children:["$",parseFloat(F).toLocaleString("es-CO")]})]}),c&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("dt",{className:"text-sm text-gray-600",children:["Descuento (",c.code,")"]}),l.jsxs("dd",{className:"text-sm font-medium text-green-600",children:["-$",parseFloat(F-r()).toLocaleString("es-CO")]})]}),l.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-6",children:[l.jsx("dt",{className:"text-base font-medium text-gray-900",children:"Total del Pedido"}),l.jsxs("dd",{className:"text-base font-medium text-gray-900",children:["$",parseFloat(r()).toLocaleString("es-CO")]})]})]}),t.some(z=>z.stock!==void 0&&z.stock<z.quantity)&&l.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Algunos productos tienen stock limitado"}),l.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:l.jsx("p",{children:"La cantidad en tu carrito excede el stock disponible para algunos productos. Por favor, ajusta las cantidades."})})]})]})}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{type:"button",onClick:$,className:"w-full bg-indigo-600 border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-indigo-500",disabled:t.some(z=>z.stock!==void 0&&z.stock<z.quantity),children:"Proceder al Pago"})}),l.jsx("div",{className:"mt-4 text-center",children:l.jsx($e,{to:"/shop",className:"text-indigo-600 hover:text-indigo-500",children:"← Continuar Comprando"})})]})})]})]})})};/*!
 * react-paypal-js v8.9.2 (2025-10-02T20:17:55.069Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zn;(function(t){t.INITIAL="initial",t.PENDING="pending",t.REJECTED="rejected",t.RESOLVED="resolved"})(zn||(zn={}));var Wi;(function(t){t.LOADING_STATUS="setLoadingStatus",t.RESET_OPTIONS="resetOptions",t.SET_BRAINTREE_INSTANCE="braintreeInstance"})(Wi||(Wi={}));var E2;(function(t){t.NUMBER="number",t.CVV="cvv",t.EXPIRATION_DATE="expirationDate",t.EXPIRATION_MONTH="expirationMonth",t.EXPIRATION_YEAR="expirationYear",t.POSTAL_CODE="postalCode"})(E2||(E2={}));var Yt=function(){return Yt=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},Yt.apply(this,arguments)};function _N(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function N2(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,c;r<o;r++)(c||!(r in e))&&(c||(c=Array.prototype.slice.call(e,0,r)),c[r]=e[r]);return t.concat(c||Array.prototype.slice.call(e))}var pu="data-react-paypal-script-id",eo={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},$P="Failed to load the PayPal JS SDK script.",EN="paypal",GP="usePayPalScriptReducer must be used within a PayPalScriptProvider";function KP(t){return t===void 0&&(t=EN),window[t]}function YP(t){for(var e="",n=0;n<t.length;n++){var r=t[n].charCodeAt(0)*n;t[n+1]&&(r+=t[n+1].charCodeAt(0)*(n-1)),e+=String.fromCharCode(97+Math.abs(r)%26)}return e}function QP(t){var e=t.reactComponentName,n=t.sdkComponentKey,r=t.sdkRequestedComponents,o=r===void 0?"":r,c=t.sdkDataNamespace,h=c===void 0?EN:c,p=n.charAt(0).toUpperCase().concat(n.substring(1)),g="Unable to render <".concat(e," /> because window.").concat(h,".").concat(p," is undefined."),y=typeof o=="string"?o:o.join(",");if(!y.includes(n)){var v=[y,n].filter(Boolean).join();g+=`
To fix the issue, add '`.concat(n,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(v,"'}}>`.")}return g}function NN(t){var e=t,n=pu;e[n];var r=_N(e,[n+""]);return"react-paypal-js-".concat(YP(JSON.stringify(r)))}function XP(t){var e=self.document.querySelector("script[".concat(pu,'="').concat(t,'"]'));e?.parentNode&&e.parentNode.removeChild(e)}function WP(t,e){var n,r;switch(e.type){case Wi.LOADING_STATUS:return typeof e.value=="object"?Yt(Yt({},t),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):Yt(Yt({},t),{loadingStatus:e.value});case Wi.RESET_OPTIONS:return XP(t.options[pu]),Yt(Yt({},t),{loadingStatus:zn.PENDING,options:Yt(Yt((n={},n[eo.DATA_SDK_INTEGRATION_SOURCE]=eo.DATA_LIBRARY_VALUE,n),e.value),(r={},r[pu]="".concat(NN(e.value)),r))});case Wi.SET_BRAINTREE_INSTANCE:return Yt(Yt({},t),{braintreePayPalCheckoutInstance:e.value});default:return t}}var TN=D.createContext(null);function ZP(t){if(typeof t?.dispatch=="function"&&t.dispatch.length!==0)return t;throw new Error(GP)}function JP(){var t=ZP(D.useContext(TN)),e=Yt(Yt({},t),{isInitial:t.loadingStatus===zn.INITIAL,isPending:t.loadingStatus===zn.PENDING,isResolved:t.loadingStatus===zn.RESOLVED,isRejected:t.loadingStatus===zn.REJECTED});return[e,t.dispatch]}D.createContext({});function eO(t){var e=D.useRef(new Proxy({},{get:function(n,r,o){return typeof n[r]=="function"?function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return n[r].apply(n,c)}:Reflect.get(n,r,o)}}));return e.current=Object.assign(e.current,t),e.current}var Z0=function(t){var e,n=t.className,r=n===void 0?"":n,o=t.disabled,c=o===void 0?!1:o,h=t.children,p=t.forceReRender,g=p===void 0?[]:p,y=_N(t,["className","disabled","children","forceReRender"]),v=c?{opacity:.38}:{},_="".concat(r," ").concat(c?"paypal-buttons-disabled":"").trim(),T=D.useRef(null),R=D.useRef(null),U=eO(y),$=JP()[0],I=$.isResolved,Q=$.options,F=D.useState(null),z=F[0],ce=F[1],he=D.useState(!0),ue=he[0],k=he[1],N=D.useState(null),C=N[1];function L(){R.current!==null&&R.current.close().catch(function(){})}return!((e=R.current)===null||e===void 0)&&e.updateProps&&R.current.updateProps({message:y.message}),D.useEffect(function(){if(I===!1)return L;var O=KP(Q.dataNamespace);if(O===void 0||O.Buttons===void 0)return C(function(){throw new Error(QP({reactComponentName:Z0.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:Q.components,sdkDataNamespace:Q[eo.DATA_NAMESPACE]}))}),L;var M=function(S,Ne){ce(Ne),typeof y.onInit=="function"&&y.onInit(S,Ne)};try{R.current=O.Buttons(Yt(Yt({},U),{onInit:M}))}catch(S){return C(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(S))})}return R.current.isEligible()===!1?(k(!1),L):(T.current&&R.current.render(T.current).catch(function(S){T.current===null||T.current.children.length===0||C(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(S))})}),L)},N2(N2([I],g,!0),[y.fundingSource],!1)),D.useEffect(function(){z!==null&&(c===!0?z.disable().catch(function(){}):z.enable().catch(function(){}))},[c,z]),$n.createElement($n.Fragment,null,ue?$n.createElement("div",{ref:T,style:v,className:_}):h)};Z0.displayName="PayPalButtons";function tO(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function nO(t,e){var n=document.querySelector('script[src="'.concat(t,'"]'));if(n===null)return null;var r=AN(t,e),o=n.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(r.dataset).length)return null;var c=!0;return Object.keys(o.dataset).forEach(function(h){o.dataset[h]!==r.dataset[h]&&(c=!1)}),c?n:null}function sO(t){var e=t.url,n=t.attributes,r=t.onSuccess,o=t.onError,c=AN(e,n);c.onerror=o,c.onload=r,document.head.insertBefore(c,document.head.firstElementChild)}function rO(t){var e=t.sdkBaseUrl,n=t.environment,r=tO(t,["sdkBaseUrl","environment"]),o=e||oO(n),c=r,h=Object.keys(c).filter(function(y){return typeof c[y]<"u"&&c[y]!==null&&c[y]!==""}).reduce(function(y,v){var _=c[v].toString();return v=iO(v),v.substring(0,4)==="data"||v==="crossorigin"?y.attributes[v]=_:y.queryParams[v]=_,y},{queryParams:{},attributes:{}}),p=h.queryParams,g=h.attributes;return p["merchant-id"]&&p["merchant-id"].indexOf(",")!==-1&&(g["data-merchant-id"]=p["merchant-id"],p["merchant-id"]="*"),{url:"".concat(o,"?").concat(aO(p)),attributes:g}}function iO(t){var e=function(n,r){return(r?"-":"")+n.toLowerCase()};return t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function aO(t){var e="";return Object.keys(t).forEach(function(n){e.length!==0&&(e+="&"),e+=n+"="+t[n]}),e}function oO(t){return t==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function AN(t,e){e===void 0&&(e={});var n=document.createElement("script");return n.src=t,Object.keys(e).forEach(function(r){n.setAttribute(r,e[r]),r==="data-csp-nonce"&&n.setAttribute("nonce",e["data-csp-nonce"])}),n}function lO(t,e){if(e===void 0&&(e=Promise),jN(t,e),typeof document>"u")return e.resolve(null);var n=rO(t),r=n.url,o=n.attributes,c=o["data-namespace"]||"paypal",h=T2(c);return o["data-js-sdk-library"]||(o["data-js-sdk-library"]="paypal-js"),nO(r,o)&&h?e.resolve(h):cO({url:r,attributes:o},e).then(function(){var p=T2(c);if(p)return p;throw new Error("The window.".concat(c," global variable is not available."))})}function cO(t,e){e===void 0&&(e=Promise),jN(t,e);var n=t.url,r=t.attributes;if(typeof n!="string"||n.length===0)throw new Error("Invalid url.");if(typeof r<"u"&&typeof r!="object")throw new Error("Expected attributes to be an object.");return new e(function(o,c){if(typeof document>"u")return o();sO({url:n,attributes:r,onSuccess:function(){return o()},onError:function(){var h=new Error('The script "'.concat(n,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return c(h)}})})}function T2(t){return window[t]}function jN(t,e){if(typeof t!="object"||t===null)throw new Error("Expected an options object.");var n=t.environment;if(n&&n!=="production"&&n!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var uO=function(t){var e,n=t.options,r=n===void 0?{clientId:"test"}:n,o=t.children,c=t.deferLoading,h=c===void 0?!1:c,p=D.useReducer(WP,{options:Yt(Yt({},r),(e={},e[eo.DATA_JS_SDK_LIBRARY]=eo.DATA_LIBRARY_VALUE,e[eo.DATA_SDK_INTEGRATION_SOURCE]=eo.DATA_LIBRARY_VALUE,e[pu]="".concat(NN(r)),e)),loadingStatus:h?zn.INITIAL:zn.PENDING}),g=p[0],y=p[1];return D.useEffect(function(){if(h===!1&&g.loadingStatus===zn.INITIAL)return y({type:Wi.LOADING_STATUS,value:zn.PENDING});if(g.loadingStatus===zn.PENDING){var v=!0;return lO(g.options).then(function(){v&&y({type:Wi.LOADING_STATUS,value:zn.RESOLVED})}).catch(function(_){console.error("".concat($P," ").concat(_)),v&&y({type:Wi.LOADING_STATUS,value:{state:zn.REJECTED,message:String(_)}})}),function(){v=!1}}},[g.options,h,g.loadingStatus]),$n.createElement(TN.Provider,{value:Yt(Yt({},g),{dispatch:y})},o)};function A2(){}D.createContext({cardFieldsForm:null,fields:{},registerField:A2,unregisterField:A2});const dO=()=>{const{items:t,getTotalPrice:e,loading:n,clearCart:r,coupon:o}=Ul(),{currentUser:c}=$s(),h=Hs(),[p,g]=D.useState([]),[y,v]=D.useState(null),[_,T]=D.useState({name:"",street:"",city:"",state:"",zipCode:"",country:"Colombia"}),[R,U]=D.useState(!1),[$,I]=D.useState(!0),[Q,F]=D.useState(!1),z=t.reduce((M,S)=>M+S.price*S.quantity,0),ce=o?z-e():0,he=e();D.useEffect(()=>{(async()=>{if(!c){h("/login");return}try{const S=ct(Pe,"users",c.uid),Ne=await zs(S);if(Ne.exists()){const q=Ne.data().addresses||[];g(q);const re=q.find(ge=>ge.isDefault);re?v(re):q.length>0&&v(q[0])}}catch(S){console.error("Error loading addresses:",S),Te.fire({title:"Error",text:"Error al cargar las direcciones",icon:"error",confirmButtonText:"Aceptar"})}finally{I(!1)}})()},[c,h]);const ue=M=>{const{name:S,value:Ne}=M.target;T(Le=>({...Le,[S]:Ne}))},k=async M=>{if(M.preventDefault(),!_.name||!_.street||!_.city||!_.state||!_.zipCode){Te.fire({title:"Error",text:"Por favor completa todos los campos de la dirección",icon:"error",confirmButtonText:"Aceptar"});return}try{const S=ct(Pe,"users",c.uid),Ne={..._,id:Date.now(),isDefault:p.length===0};await Os(S,{addresses:[...p,Ne]});const Le=[...p,Ne];g(Le),v(Ne),U(!1),T({name:"",street:"",city:"",state:"",zipCode:"",country:"Colombia"}),Te.fire({title:"Dirección agregada",text:"La dirección se ha agregado correctamente",icon:"success",confirmButtonText:"Aceptar"})}catch(S){console.error("Error adding address:",S),Te.fire({title:"Error",text:"Error al agregar la dirección: "+S.message,icon:"error",confirmButtonText:"Aceptar"})}},N=async(M,S)=>{try{const Ne={userId:c.uid,userEmail:c.email,items:t,subtotal:parseFloat(z),discount:parseFloat(ce),totalAmount:parseFloat(he),address:y,paymentMethod:M,paymentStatus:S,orderStatus:"pending",coupon:o||null,createdAt:new Date,updatedAt:new Date},Le=Dn(Pe,"orders"),q=await jf(Le,Ne);return console.log("Order created with ID:",q.id),q.id}catch(Ne){throw console.error("Error creating order:",Ne),Ne}},C=(M,S)=>S.order.capture().then(async Ne=>{F(!0);try{await N("PayPal","completed"),r(),Te.fire({title:"¡Pago exitoso!",text:`Gracias por tu compra, ${Ne.payer.name.given_name}!`,icon:"success",confirmButtonText:"Aceptar"}).then(()=>{h("/home")})}catch(Le){console.error("Error processing order:",Le),Te.fire({title:"Error",text:"Hubo un error al procesar tu pedido. Por favor contacta al soporte.",icon:"error",confirmButtonText:"Aceptar"})}finally{F(!1)}}),L=M=>{console.error("PayPal payment error:",M),Te.fire({title:"Error",text:"Hubo un error al procesar el pago con PayPal. Por favor intenta nuevamente.",icon:"error",confirmButtonText:"Aceptar"})},O=async()=>{if(!y){Te.fire({title:"Error",text:"Por favor selecciona una dirección de envío",icon:"error",confirmButtonText:"Aceptar"});return}F(!0);try{await N("Cash on Delivery","pending"),r(),Te.fire({title:"Pedido confirmado",text:"Tu pedido ha sido confirmado. Pagarás contra entrega.",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{h("/home")})}catch(M){console.error("Error processing order:",M),Te.fire({title:"Error",text:"Error al procesar el pedido: "+M.message,icon:"error",confirmButtonText:"Aceptar"})}finally{F(!1)}};return n||$?l.jsxs("div",{children:[l.jsx(so,{}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})})]}):t.length===0?(h("/cart"),null):l.jsxs("div",{children:[l.jsx(so,{}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Checkout"}),l.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-x-12",children:[l.jsxs("div",{className:"lg:col-span-8",children:[l.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-8",children:l.jsxs("div",{className:"px-4 py-6 sm:px-6",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dirección de Envío"}),p.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsxs("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),l.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay direcciones guardadas"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Agrega una nueva dirección para continuar."})]}):l.jsx("div",{className:"space-y-4",children:p.map(M=>l.jsx("div",{className:`border rounded-lg p-4 cursor-pointer ${y&&y.id===M.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>v(M),children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex items-center h-5",children:l.jsx("input",{type:"radio",name:"address",checked:y&&y.id===M.id,onChange:()=>v(M),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"})}),l.jsxs("div",{className:"ml-3",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[M.name,M.isDefault&&l.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:"Predeterminada"})]}),l.jsxs("div",{className:"mt-1 text-sm text-gray-500",children:[l.jsx("p",{children:M.street}),l.jsxs("p",{children:[M.city,", ",M.state," ",M.zipCode]}),l.jsx("p",{children:M.country})]})]})]})},M.id))}),l.jsx("div",{className:"mt-6",children:l.jsxs("button",{type:"button",onClick:()=>U(!R),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[l.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),p.length===0?"Agregar Dirección":"Agregar Nueva Dirección"]})}),R&&l.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[l.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:p.length===0?"Agregar Dirección":"Nueva Dirección"}),l.jsxs("form",{onSubmit:k,children:[l.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre de la Dirección"}),l.jsx("input",{type:"text",name:"name",id:"name",value:_.name,onChange:ue,placeholder:"Ej: Casa, Trabajo",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700",children:"Calle y Número"}),l.jsx("input",{type:"text",name:"street",id:"street",value:_.street,onChange:ue,placeholder:"Ej: Av. Principal 123",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"Ciudad"}),l.jsx("input",{type:"text",name:"city",id:"city",value:_.city,onChange:ue,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700",children:"Estado/Provincia"}),l.jsx("input",{type:"text",name:"state",id:"state",value:_.state,onChange:ue,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700",children:"Código Postal"}),l.jsx("input",{type:"text",name:"zipCode",id:"zipCode",value:_.zipCode,onChange:ue,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:"País"}),l.jsx("input",{type:"text",name:"country",id:"country",value:_.country,onChange:ue,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),l.jsxs("div",{className:"mt-6 flex space-x-3",children:[l.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Guardar Dirección"}),l.jsx("button",{type:"button",onClick:()=>U(!1),className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"})]})]})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l.jsxs("div",{className:"px-4 py-6 sm:px-6",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumen del Pedido"}),l.jsx("div",{className:"flow-root",children:l.jsx("ul",{className:"-my-6 divide-y divide-gray-200",children:t.map(M=>l.jsxs("li",{className:"py-6 flex",children:[l.jsx("div",{className:"flex-shrink-0 w-24 h-24 border border-gray-200 rounded-md overflow-hidden",children:l.jsx("img",{src:M.imageUrl||"https://via.placeholder.com/100x100.png?text=Moño",alt:M.name,className:"w-full h-full object-center object-cover",onError:S=>{S.target.onerror=null,S.target.src="https://via.placeholder.com/100x100.png?text=Moño"}})}),l.jsxs("div",{className:"ml-4 flex-1 flex flex-col",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[l.jsx("h3",{children:M.name}),l.jsxs("p",{className:"ml-4",children:["$",parseFloat(M.price*M.quantity).toLocaleString("es-CO")]})]}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:M.category})]}),l.jsx("div",{className:"flex-1 flex items-end justify-between text-sm",children:l.jsxs("p",{className:"text-gray-500",children:["Cantidad: ",M.quantity]})})]})]},M.id))})})]})})]}),l.jsx("div",{className:"mt-8 lg:mt-0 lg:col-span-4",children:l.jsxs("div",{className:"bg-gray-50 rounded-lg px-4 py-6 sm:p-6 lg:p-8",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Resumen del Pedido"}),l.jsxs("dl",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"text-sm text-gray-600",children:"Subtotal"}),l.jsxs("dd",{className:"text-sm font-medium text-gray-900",children:["$",parseFloat(z).toLocaleString("es-CO")]})]}),o&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("dt",{className:"text-sm text-gray-600",children:["Descuento (",o.code,")"]}),l.jsxs("dd",{className:"text-sm font-medium text-green-600",children:["-$",parseFloat(ce).toLocaleString("es-CO")]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"text-sm text-gray-600",children:"Envío"}),l.jsx("dd",{className:"text-sm font-medium text-gray-900",children:"$0"})]}),l.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-6",children:[l.jsx("dt",{className:"text-base font-medium text-gray-900",children:"Total"}),l.jsxs("dd",{className:"text-base font-medium text-gray-900",children:["$",parseFloat(he).toLocaleString("es-CO")]})]})]}),y&&l.jsxs("div",{className:"mt-8 p-4 bg-white rounded-lg border border-gray-200",children:[l.jsx("h3",{className:"text-md font-medium text-gray-900 mb-2",children:"Dirección de Envío"}),l.jsxs("div",{className:"text-sm text-gray-500",children:[l.jsx("p",{className:"font-medium",children:y.name}),l.jsx("p",{children:y.street}),l.jsxs("p",{children:[y.city,", ",y.state," ",y.zipCode]}),l.jsx("p",{children:y.country})]})]}),l.jsxs("div",{className:"mt-8",children:[l.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Método de Pago"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"w-full",children:y?l.jsx(Z0,{style:{layout:"vertical"},createOrder:(M,S)=>S.order.create({purchase_units:[{amount:{value:parseFloat(he).toFixed(2),currency_code:"COP"}}]}),onApprove:C,onError:L}):l.jsxs("button",{disabled:!0,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white opacity-50 cursor-not-allowed",children:[l.jsxs("svg",{className:"mr-2 h-5 w-5",viewBox:"0 0 38 24",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{fill:"#253b80",d:"M35.71 15.39c.27-.4.4-.87.36-1.35-.04-.48-.24-.93-.57-1.28-.33-.35-.76-.55-1.22-.56-.46 0-.89.19-1.22.53-.33.34-.52.8-.54 1.28-.02.48.12.94.4 1.33.28.39.68.67 1.14.8.46.13.95.1 1.4-.08.45-.18.84-.49 1.12-.89z"}),l.jsx("path",{fill:"#179bd7",d:"M13.34 15.96c.34-.46.52-1.02.51-1.59-.01-.57-.22-1.12-.59-1.54-.37-.42-.87-.67-1.41-.71-.54-.04-1.08.13-1.51.46-.43.33-.73.81-.85 1.35-.12.54-.07 1.11.14 1.62.21.51.57.94 1.03 1.23.46.29.99.42 1.53.37.54-.05 1.05-.27 1.47-.63z"}),l.jsx("path",{fill:"#253b80",d:"M22.72 16.11c.41-.36.67-.87.72-1.41.05-.54-.09-1.08-.39-1.51-.3-.43-.75-.73-1.26-.84-.51-.11-1.04-.06-1.52.14-.5.2-.88.54-1.15.97-.27.43-.41.94-.4 1.47.01.53.18 1.04.48 1.47.3.43.74.75 1.24.91.5.16 1.03.17 1.54.03.51-.14.96-.43 1.3-.83z"}),l.jsx("path",{fill:"#179bd7",d:"M30.21 16.26c.45-.31.75-.8.83-1.34.08-.54-.03-1.09-.31-1.55-.28-.46-.72-.81-1.23-.96-.51-.15-1.05-.13-1.55.05-.5.18-.92.51-1.19.94-.27.43-.4.93-.37 1.44.03.51.21.99.51 1.4.3.41.74.72 1.23.88.49.16 1.01.18 1.51.06.5-.12.94-.4 1.26-.78z"}),l.jsx("path",{fill:"#253b80",d:"M5.39 16.39c.47-.23.81-.66.93-1.16.12-.5.03-1.03-.25-1.45-.28-.42-.71-.71-1.2-.82-.49-.11-1-.08-1.46.09-.46.17-.85.49-1.11.89-.26.4-.37.88-.32 1.37.05.49.27.95.61 1.31.34.36.79.6 1.28.68.49.08 1-.01 1.44-.24z"})]}),"Pagar con PayPal"]})}),l.jsxs("button",{onClick:O,disabled:Q||!y,className:`w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${Q||!y?"opacity-50 cursor-not-allowed":""}`,children:[Q?l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):l.jsx("svg",{className:"mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Pagar Contra Entrega"]})]})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("button",{onClick:()=>h("/cart"),className:"text-indigo-600 hover:text-indigo-500",children:"← Volver al Carrito"})})]})})]})]})]})},hO=()=>{const{currentUser:t,userRole:e,refreshUserData:n}=$s(),r=Hs(),[o,c]=D.useState({displayName:"",email:"",phone:"",profileImage:""}),[h,p]=D.useState({currentPassword:"",newPassword:"",confirmNewPassword:""}),[g,y]=D.useState([]),[v,_]=D.useState({id:Date.now(),name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1}),[T,R]=D.useState(null),[U,$]=D.useState({id:null,name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1}),[I,Q]=D.useState("profile"),[F,z]=D.useState(!0),[ce,he]=D.useState(!1),[ue,k]=D.useState(!1),[N,C]=D.useState(!1);D.useEffect(()=>{(async()=>{if(!t){r("/login");return}try{const oe=ct(Pe,"users",t.uid),pe=await zs(oe);if(pe.exists()){const fe=pe.data();c({displayName:fe.displayName||t.displayName||"",email:t.email,phone:fe.phone||"",profileImage:fe.profileImage||t.photoURL||""}),y(fe.addresses||[])}else c({displayName:t.displayName||"",email:t.email,phone:"",profileImage:t.photoURL||""}),y([])}catch(oe){console.error("Error loading profile:",oe),Te.fire({title:"Error",text:"Error al cargar el perfil",icon:"error",confirmButtonText:"Aceptar"})}finally{z(!1)}})()},[t,r]);const L=ee=>{const{name:oe,value:pe}=ee.target;c(fe=>({...fe,[oe]:pe}))},O=ee=>{const{name:oe,value:pe}=ee.target;p(fe=>({...fe,[oe]:pe}))},M=ee=>{const{name:oe,value:pe}=ee.target;_(fe=>({...fe,[oe]:pe}))},S=ee=>{const{name:oe,value:pe}=ee.target;$(fe=>({...fe,[oe]:pe}))},Ne=ee=>{const oe=ee.target.files[0];if(oe){if(oe.size>2*1024*1024){Te.fire({title:"Archivo muy grande",text:"La imagen debe ser menor a 2MB",icon:"warning",confirmButtonText:"Aceptar"});return}if(!oe.type.match("image.*")){Te.fire({title:"Tipo de archivo inválido",text:"Por favor selecciona una imagen",icon:"warning",confirmButtonText:"Aceptar"});return}const pe=new FileReader;pe.onload=fe=>{c(Ie=>({...Ie,profileImage:fe.target.result}))},pe.readAsDataURL(oe)}},Le=async ee=>{ee.preventDefault(),he(!0);try{const oe=ct(Pe,"users",t.uid),pe=await zs(oe);let fe={...o,updatedAt:new Date};if(pe.exists()){const Ie=pe.data();Ie.hasOwnProperty("role")&&(fe.role=Ie.role),Ie.hasOwnProperty("createdAt")&&(fe.createdAt=Ie.createdAt),Ie.hasOwnProperty("addresses")&&(fe.addresses=Ie.addresses)}else fe.role="customer",fe.createdAt=new Date,fe.addresses=[];await aa(oe,fe),console.log("Profile saved, refreshing user data"),n(),Te.fire({title:"Perfil actualizado",text:"Tu perfil se ha actualizado correctamente",icon:"success",confirmButtonText:"Aceptar"})}catch(oe){console.error("Error saving profile:",oe),Te.fire({title:"Error",text:"Error al guardar el perfil: "+oe.message,icon:"error",confirmButtonText:"Aceptar"})}finally{he(!1)}},q=async ee=>{if(ee.preventDefault(),k(!0),h.newPassword!==h.confirmNewPassword){Te.fire({title:"Error",text:"Las contraseñas nuevas no coinciden",icon:"error",confirmButtonText:"Aceptar"}),k(!1);return}if(h.newPassword.length<6){Te.fire({title:"Error",text:"La nueva contraseña debe tener al menos 6 caracteres",icon:"error",confirmButtonText:"Aceptar"}),k(!1);return}try{const oe=mo.credential(t.email,h.currentPassword);await xC(t,oe),await _C(t,h.newPassword),Te.fire({title:"Contraseña actualizada",text:"Tu contraseña se ha actualizado correctamente",icon:"success",confirmButtonText:"Aceptar"}),p({currentPassword:"",newPassword:"",confirmNewPassword:""})}catch(oe){console.error("Error changing password:",oe);let pe="Error al cambiar la contraseña";switch(oe.code){case"auth/wrong-password":pe="La contraseña actual es incorrecta";break;case"auth/too-many-requests":pe="Demasiados intentos. Por favor, inténtalo más tarde";break;default:pe="Error al cambiar la contraseña: "+oe.message}Te.fire({title:"Error",text:pe,icon:"error",confirmButtonText:"Aceptar"})}finally{k(!1)}},re=async ee=>{if(ee.preventDefault(),C(!0),!v.name||!v.street||!v.city||!v.state||!v.zipCode||!v.country){Te.fire({title:"Error",text:"Por favor completa todos los campos de la dirección",icon:"error",confirmButtonText:"Aceptar"}),C(!1);return}try{const oe=ct(Pe,"users",t.uid),pe={...v,id:Date.now()};if(g.length===0||v.isDefault){pe.isDefault=!0;const fe=g.map(Ie=>({...Ie,isDefault:!1}));y([...fe,pe])}else y([...g,pe]);await Os(oe,{addresses:t2(pe)}),Te.fire({title:"Dirección agregada",text:"La dirección se ha agregado correctamente",icon:"success",confirmButtonText:"Aceptar"}),_({id:Date.now(),name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1})}catch(oe){console.error("Error adding address:",oe),Te.fire({title:"Error",text:"Error al agregar la dirección: "+oe.message,icon:"error",confirmButtonText:"Aceptar"})}finally{C(!1)}},ge=ee=>{R(ee.id),$({...ee})},Be=()=>{R(null),$({id:null,name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1})},V=async ee=>{if(ee.preventDefault(),C(!0),!U.name||!U.street||!U.city||!U.state||!U.zipCode||!U.country){Te.fire({title:"Error",text:"Por favor completa todos los campos de la dirección",icon:"error",confirmButtonText:"Aceptar"}),C(!1);return}try{const oe=ct(Pe,"users",t.uid),pe=g.find(Ie=>Ie.id===U.id);pe&&await Os(oe,{addresses:n2(pe)});const fe={...U};await Os(oe,{addresses:t2(fe)}),y(g.map(Ie=>Ie.id===U.id?fe:Ie)),Te.fire({title:"Dirección actualizada",text:"La dirección se ha actualizado correctamente",icon:"success",confirmButtonText:"Aceptar"}),R(null),$({id:null,name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1})}catch(oe){console.error("Error updating address:",oe),Te.fire({title:"Error",text:"Error al actualizar la dirección: "+oe.message,icon:"error",confirmButtonText:"Aceptar"})}finally{C(!1)}},le=async ee=>{Te.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async oe=>{if(oe.isConfirmed)try{const pe=ct(Pe,"users",t.uid),fe=g.find(Ie=>Ie.id===ee);fe&&(await Os(pe,{addresses:n2(fe)}),y(g.filter(Ie=>Ie.id!==ee)),Te.fire({title:"Dirección eliminada",text:"La dirección se ha eliminado correctamente",icon:"success",confirmButtonText:"Aceptar"}))}catch(pe){console.error("Error deleting address:",pe),Te.fire({title:"Error",text:"Error al eliminar la dirección: "+pe.message,icon:"error",confirmButtonText:"Aceptar"})}})},ye=async ee=>{try{const oe=ct(Pe,"users",t.uid),pe=g.map(fe=>({...fe,isDefault:fe.id===ee}));y(pe),await Os(oe,{addresses:pe}),Te.fire({title:"Dirección predeterminada",text:"La dirección se ha establecido como predeterminada",icon:"success",confirmButtonText:"Aceptar"})}catch(oe){console.error("Error setting default address:",oe),Te.fire({title:"Error",text:"Error al establecer la dirección predeterminada: "+oe.message,icon:"error",confirmButtonText:"Aceptar"})}};return F?l.jsx("div",{children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})})}):l.jsx("div",{children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"max-w-5xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Mi Perfil"}),l.jsx("div",{className:"border-b border-gray-200 mb-8",children:l.jsxs("nav",{className:"-mb-px flex space-x-8",children:[l.jsx("button",{onClick:()=>Q("profile"),className:`py-4 px-1 border-b-2 font-medium text-sm ${I==="profile"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Perfil"}),l.jsx("button",{onClick:()=>Q("security"),className:`py-4 px-1 border-b-2 font-medium text-sm ${I==="security"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Seguridad"}),l.jsx("button",{onClick:()=>Q("addresses"),className:`py-4 px-1 border-b-2 font-medium text-sm ${I==="addresses"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Direcciones"})]})}),I==="profile"&&l.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:l.jsx("div",{className:"px-6 py-8",children:l.jsxs("form",{onSubmit:Le,children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Foto de Perfil"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:o.profileImage?l.jsx("img",{src:o.profileImage,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-2 border-gray-300"}):l.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 border-2 border-gray-300 flex items-center justify-center",children:l.jsx("span",{className:"text-gray-500 text-3xl font-bold",children:o.displayName?.charAt(0)||o.email?.charAt(0)||"U"})})}),l.jsxs("div",{className:"ml-6",children:[l.jsxs("label",{className:"block",children:[l.jsx("span",{className:"px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:"Cambiar foto"}),l.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Ne})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"JPG, GIF o PNG. Tamaño máximo 2MB"})]})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Información Personal"}),l.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700",children:"Nombre Completo"}),l.jsx("input",{type:"text",name:"displayName",id:"displayName",value:o.displayName,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Correo Electrónico"}),l.jsx("input",{type:"email",name:"email",id:"email",value:o.email,disabled:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 bg-gray-100"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"El correo no puede ser modificado"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Teléfono"}),l.jsx("input",{type:"tel",name:"phone",id:"phone",value:o.phone,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Rol"}),l.jsx("input",{type:"text",name:"role",id:"role",value:e||"customer",disabled:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 bg-gray-100"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"El rol no puede ser modificado"})]})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:ce,className:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:ce?"Guardando...":"Guardar Cambios"})})]})})}),I==="security"&&l.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:l.jsxs("div",{className:"px-6 py-8",children:[l.jsxs("form",{onSubmit:q,children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cambiar Contraseña"}),l.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:l.jsxs("div",{children:[l.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:"Contraseña Actual"}),l.jsx("input",{type:"password",name:"currentPassword",id:"currentPassword",value:h.currentPassword,onChange:O,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"Nueva Contraseña"}),l.jsx("input",{type:"password",name:"newPassword",id:"newPassword",value:h.newPassword,onChange:O,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmNewPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmar Nueva Contraseña"}),l.jsx("input",{type:"password",name:"confirmNewPassword",id:"confirmNewPassword",value:h.confirmNewPassword,onChange:O,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:ue,className:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:ue?"Guardando...":"Cambiar Contraseña"})})]}),l.jsxs("div",{className:"mt-12",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dispositivos Activos"}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:l.jsx("svg",{className:"h-6 w-6 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Este dispositivo"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Última actividad: Ahora mismo"})]}),l.jsx("div",{className:"ml-auto",children:l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activo"})})]})}),l.jsx("div",{className:"mt-4 text-sm text-gray-500",children:l.jsx("p",{children:"Para seguridad adicional, si ves un dispositivo que no reconoces, cierra la sesión en todos los dispositivos y cambia tu contraseña."})})]})]})}),I==="addresses"&&l.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:l.jsxs("div",{className:"px-6 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:T?"Editar Dirección":"Agregar Nueva Dirección"}),l.jsxs("form",{onSubmit:T?V:re,children:[l.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"addressName",className:"block text-sm font-medium text-gray-700",children:"Nombre de la Dirección"}),l.jsx("input",{type:"text",name:"name",id:"addressName",value:T?U.name:v.name,onChange:T?S:M,placeholder:"Ej: Casa, Trabajo",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"addressStreet",className:"block text-sm font-medium text-gray-700",children:"Calle y Número"}),l.jsx("input",{type:"text",name:"street",id:"addressStreet",value:T?U.street:v.street,onChange:T?S:M,placeholder:"Ej: Av. Principal 123",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"addressCity",className:"block text-sm font-medium text-gray-700",children:"Ciudad"}),l.jsx("input",{type:"text",name:"city",id:"addressCity",value:T?U.city:v.city,onChange:T?S:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"addressState",className:"block text-sm font-medium text-gray-700",children:"Estado/Provincia"}),l.jsx("input",{type:"text",name:"state",id:"addressState",value:T?U.state:v.state,onChange:T?S:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"addressZipCode",className:"block text-sm font-medium text-gray-700",children:"Código Postal"}),l.jsx("input",{type:"text",name:"zipCode",id:"addressZipCode",value:T?U.zipCode:v.zipCode,onChange:T?S:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"addressCountry",className:"block text-sm font-medium text-gray-700",children:"País"}),l.jsx("input",{type:"text",name:"country",id:"addressCountry",value:T?U.country:v.country,onChange:T?S:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"addressIsDefault",name:"isDefault",type:"checkbox",checked:T?U.isDefault:v.isDefault,onChange:ee=>T?$(oe=>({...oe,isDefault:ee.target.checked})):_(oe=>({...oe,isDefault:ee.target.checked})),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"addressIsDefault",className:"ml-2 block text-sm text-gray-900",children:"Establecer como dirección predeterminada"})]})]}),l.jsxs("div",{className:"mt-6 flex space-x-3",children:[l.jsx("button",{type:"submit",disabled:N,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:N?"Guardando...":T?"Guardar Cambios":"Agregar Dirección"}),T&&l.jsx("button",{type:"button",onClick:Be,className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"})]})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Direcciones Guardadas"}),g.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsxs("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),l.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay direcciones"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Agrega tu primera dirección usando el formulario de arriba."})]}):l.jsx("div",{className:"space-y-4",children:g.map(ee=>l.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900",children:ee.name}),l.jsx("p",{className:"text-sm text-gray-500",children:ee.street}),l.jsxs("p",{className:"text-sm text-gray-500",children:[ee.city,", ",ee.state," ",ee.zipCode]}),l.jsx("p",{className:"text-sm text-gray-500",children:ee.country}),ee.isDefault&&l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 mt-2",children:"Predeterminada"})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>ge(ee),className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-indigo-700 bg-indigo-100 hover:bg-indigo-200",children:"Editar"}),l.jsx("button",{onClick:()=>ye(ee.id),disabled:ee.isDefault,className:`inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-indigo-700 ${ee.isDefault?"bg-gray-100":"bg-indigo-100 hover:bg-indigo-200"}`,children:ee.isDefault?"Predeterminada":"Hacer Predeterminada"}),l.jsx("button",{onClick:()=>le(ee.id),className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-red-700 bg-red-100 hover:bg-red-200",children:"Eliminar"})]})]})},ee.id))})]})]})})]})})})},fO=()=>{const[t,e]=D.useState(""),[n,r]=D.useState(""),[o,c]=D.useState(""),[h,p]=D.useState(!1),g=Hs(),{currentUser:y}=$s();$n.useEffect(()=>{y&&g("/home")},[y,g]);const v=async()=>{c(""),p(!0);try{const T=new lr,U=(await O1(pr,T)).user,$=ct(Pe,"users",U.uid);(await zs($)).exists()||(await aa($,{email:U.email,displayName:U.displayName||"",profileImage:U.photoURL||"",createdAt:new Date,role:"customer"}),console.log("User info stored successfully for Google user")),g("/home")}catch(T){console.error("Google sign-in error:",T),c("Error al iniciar sesión con Google. Por favor, inténtalo de nuevo.")}finally{p(!1)}},_=async T=>{T.preventDefault(),c(""),p(!0);try{await bC(pr,t,n),g("/home")}catch(R){switch(R.code){case"auth/user-not-found":c("No se encontró una cuenta con ese correo electrónico.");break;case"auth/wrong-password":c("Contraseña incorrecta.");break;case"auth/invalid-email":c("El correo electrónico no es válido.");break;case"auth/user-disabled":c("Esta cuenta ha sido deshabilitada.");break;default:c("Error al iniciar sesión. Por favor, verifica tus credenciales.")}}finally{p(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:l.jsx("svg",{className:"h-6 w-6 text-purple-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Login"}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"See your growth and get consulting support!"})]}),o&&l.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:l.jsx("span",{className:"block sm:inline",children:o})}),l.jsx("div",{children:l.jsxs("button",{onClick:v,disabled:h,className:"w-full flex items-center justify-center gap-3 rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50",children:[l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[l.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),l.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),l.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),l.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),l.jsx("span",{children:"Sign in with Google"})]})}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"bg-white px-2 text-gray-500",children:"or Sign in with Email"})})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:_,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email*"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"mail@website.com",value:t,onChange:T=>e(T.target.value),disabled:h})})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password*"}),l.jsx("div",{className:"text-sm",children:l.jsx($e,{to:"/reset-password",className:"font-medium text-purple-600 hover:text-purple-500",children:"Forgot password?"})})]}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"Min. 8 character",value:n,onChange:T=>r(T.target.value),disabled:h})})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:h,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-full text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:h?"Logging in...":"Login"})})]}),l.jsx("div",{className:"text-center",children:l.jsxs("p",{className:"text-sm text-gray-500",children:["Not registered yet?"," ",l.jsx($e,{to:"/register",className:"font-medium text-purple-600 hover:text-purple-500",children:"Create an Account"})]})}),l.jsx("div",{className:"mt-8 text-center",children:l.jsx("p",{className:"text-xs text-gray-500",children:"©2020 Felix All rights reserved."})})]})})},mO=()=>{const[t,e]=D.useState(""),[n,r]=D.useState(""),[o,c]=D.useState(""),[h,p]=D.useState(""),[g,y]=D.useState(""),[v,_]=D.useState(!1),T=Hs(),{firebaseError:R}=$s(),U=async()=>{p(""),y(""),_(!0);try{const I=new lr,F=(await O1(pr,I)).user,z=ct(Pe,"users",F.uid);(await zs(z)).exists()||(await aa(z,{email:F.email,displayName:F.displayName||"",profileImage:F.photoURL||"",createdAt:new Date,role:"customer"}),console.log("User info stored successfully for Google user")),T("/home")}catch(I){console.error("Google sign-up error:",I),p("Error al registrarse con Google. Por favor, inténtalo de nuevo.")}finally{_(!1)}},$=async I=>{if(I.preventDefault(),p(""),y(""),R){p(R);return}if(!pr||!Pe){p("Firebase no está configurado correctamente. Por favor, verifica tu archivo .env");return}if(n!==o){p("Las contraseñas no coinciden");return}if(n.length<6){p("La contraseña debe tener al menos 6 caracteres");return}_(!0);try{console.log("Attempting to create user with email:",t);const F=(await wC(pr,t,n)).user;console.log("User created successfully:",F),console.log("Storing user info in Firestore..."),await aa(ct(Pe,"users",F.uid),{email:F.email,displayName:"",profileImage:"",createdAt:new Date,role:"customer"}),console.log("User info stored successfully"),y("Cuenta creada exitosamente. Redirigiendo..."),setTimeout(()=>{T("/home")},2e3)}catch(Q){switch(console.error("Registration error:",Q),console.error("Error code:",Q.code),console.error("Error message:",Q.message),Q.code){case"auth/email-already-in-use":p("Este correo electrónico ya está registrado.");break;case"auth/invalid-email":p("El correo electrónico no es válido.");break;case"auth/operation-not-allowed":p("El registro de usuarios está deshabilitado. Por favor, habilita la autenticación en la consola de Firebase.");break;case"auth/weak-password":p("La contraseña es muy débil.");break;default:p(`Error al crear la cuenta: ${Q.message}`)}}finally{_(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:l.jsx("svg",{className:"h-6 w-6 text-purple-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Register"}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Create an account to get started!"})]}),R&&l.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[l.jsx("strong",{className:"font-bold",children:"Configuración incompleta! "}),l.jsx("span",{className:"block sm:inline",children:R})]}),h&&l.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:l.jsx("span",{className:"block sm:inline",children:h})}),g&&l.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:l.jsx("span",{className:"block sm:inline",children:g})}),l.jsx("div",{children:l.jsxs("button",{onClick:U,disabled:v||R,className:"w-full flex items-center justify-center gap-3 rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50",children:[l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[l.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),l.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),l.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),l.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),l.jsx("span",{children:"Sign up with Google"})]})}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"bg-white px-2 text-gray-500",children:"or Sign up with Email"})})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:$,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email*"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"mail@website.com",value:t,onChange:I=>e(I.target.value),disabled:R||v})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password*"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"Min. 8 character",value:n,onChange:I=>r(I.target.value),disabled:R||v})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm Password*"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"Confirm your password",value:o,onChange:I=>c(I.target.value),disabled:R||v})})]})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:v||R,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-full text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:v?"Creating Account...":"Create Account"})})]}),l.jsx("div",{className:"text-center",children:l.jsxs("p",{className:"text-sm text-gray-500",children:["Already have an account?"," ",l.jsx($e,{to:"/login",className:"font-medium text-purple-600 hover:text-purple-500",children:"Sign in"})]})}),l.jsx("div",{className:"mt-8 text-center",children:l.jsx("p",{className:"text-xs text-gray-500",children:"©2020 Felix All rights reserved."})})]})})},pO=()=>{const[t,e]=D.useState(""),[n,r]=D.useState(""),[o,c]=D.useState(""),[h,p]=D.useState(!1);Hs();const g=async y=>{y.preventDefault(),c(""),r(""),p(!0);try{await vC(pr,t),r("Se ha enviado un correo para restablecer tu contraseña. Revisa tu bandeja de entrada.")}catch(v){switch(v.code){case"auth/user-not-found":c("No se encontró una cuenta con ese correo electrónico.");break;case"auth/invalid-email":c("El correo electrónico no es válido.");break;default:c("Error al enviar el correo de restablecimiento. Por favor, inténtalo de nuevo.")}}finally{p(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsxs("div",{children:[l.jsx("div",{className:"mx-auto h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:l.jsx("svg",{className:"h-6 w-6 text-purple-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),l.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Restablecer Contraseña"}),l.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña."})]}),n&&l.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:l.jsx("span",{className:"block sm:inline",children:n})}),o&&l.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:l.jsx("span",{className:"block sm:inline",children:o})}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Correo Electrónico"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"mail@website.com",value:t,onChange:y=>e(y.target.value),disabled:h})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:h,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-full text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:h?"Enviando...":"Enviar Enlace de Restablecimiento"})})]}),l.jsx("div",{className:"text-center",children:l.jsx($e,{to:"/login",className:"font-medium text-purple-600 hover:text-purple-500",children:"← Volver al inicio de sesión"})}),l.jsx("div",{className:"mt-8 text-center",children:l.jsx("p",{className:"text-xs text-gray-500",children:"©2020 Felix All rights reserved."})})]})})},gO=async()=>{try{const t=Dn(Pe,"users");return(await Hn(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error fetching users:",t),t}},yO=async(t,e)=>{try{const n=ct(Pe,"users",t);return await Os(n,{role:e}),{id:t,role:e}}catch(n){throw console.error("Error updating user role:",n),n}},SN=({order:t,isOpen:e,onClose:n,formatDate:r,formatCurrency:o,getOrderStatusText:c,getStatusBadgeClass:h})=>!e||!t?null:l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-2xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Detalles de la Orden"}),l.jsx("button",{onClick:n,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsxs("div",{className:"mt-2 space-y-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Información de la Orden"}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"ID de Orden"}),l.jsx("p",{className:"font-medium",children:t.id})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Fecha"}),l.jsx("p",{className:"font-medium",children:r(t.createdAt)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Estado"}),l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h(t.orderStatus||"pending")}`,children:c(t.orderStatus||"pending")})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Método de Pago"}),l.jsx("p",{className:"font-medium",children:t.paymentMethod||"N/A"}),l.jsx("p",{className:"text-sm text-gray-500",children:t.paymentStatus==="completed"?"Pagado":"Pendiente"})]})]})})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Información del Cliente"}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Nombre"}),l.jsx("p",{className:"font-medium",children:t.userEmail||"N/A"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"ID de Usuario"}),l.jsx("p",{className:"font-medium",children:t.userId?.substring(0,8)||"N/A"})]})]})})]}),t.address&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Dirección de Envío"}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("p",{className:"font-medium",children:t.address.name}),l.jsx("p",{children:t.address.street}),l.jsxs("p",{children:[t.address.city,", ",t.address.state," ",t.address.zipCode]}),l.jsx("p",{children:t.address.country})]})]}),t.coupon&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Cupón de Descuento"}),l.jsx("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Código"}),l.jsx("p",{className:"font-medium",children:t.coupon.code})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Descuento"}),l.jsx("p",{className:"font-medium",children:t.coupon.discountType==="percentage"?`${t.coupon.discountValue}%`:o(t.coupon.discountValue)})]})]})})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Productos"}),l.jsx("div",{className:"bg-gray-50 rounded-lg divide-y divide-gray-200",children:t.items?.map((p,g)=>l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 w-16 h-16 border border-gray-200 rounded-md overflow-hidden",children:l.jsx("img",{src:p.imageUrl||"https://via.placeholder.com/64x64.png?text=Moño",alt:p.name,className:"w-full h-full object-center object-cover",onError:y=>{y.target.onerror=null,y.target.src="https://via.placeholder.com/64x64.png?text=Moño"}})}),l.jsxs("div",{className:"ml-4 flex-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("h5",{className:"font-medium text-gray-900",children:p.name}),l.jsx("p",{className:"font-medium",children:o(p.price*p.quantity)})]}),l.jsx("p",{className:"text-sm text-gray-500",children:p.category}),l.jsxs("div",{className:"flex justify-between mt-1",children:[l.jsxs("p",{className:"text-sm text-gray-500",children:["Cantidad: ",p.quantity]}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Precio unitario: ",o(p.price)]})]})]})]})},g))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Resumen del Pedido"}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("p",{className:"text-gray-600",children:"Subtotal"}),l.jsx("p",{className:"font-medium",children:o(t.subtotal||0)})]}),t.coupon&&l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("p",{className:"text-gray-600",children:["Descuento (",t.coupon.code,")"]}),l.jsxs("p",{className:"font-medium text-green-600",children:["-",o(t.discount||0)]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("p",{className:"text-gray-600",children:"Envío"}),l.jsx("p",{className:"font-medium",children:"$0"})]}),l.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[l.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Total"}),l.jsx("p",{className:"text-lg font-medium text-gray-900",children:o(t.totalAmount||0)})]})]})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar"})})]})})}),j2=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0),[o,c]=D.useState(null),[h,p]=D.useState(""),[g,y]=D.useState({code:"",discountType:"percentage",discountValue:"",isActive:!0,expiryDate:""}),[v,_]=D.useState(null),T=Dn(Pe,"coupons"),R=async()=>{try{const ue=ia(T,Ru("createdAt","desc")),k=await Hn(ue);e(k.docs.map(N=>({...N.data(),id:N.id})))}catch(ue){console.error("Firebase error fetching coupons: ",ue),c("No se pudieron cargar los cupones. Revisa las reglas de seguridad de Firebase y la consola del navegador.")}r(!1)};D.useEffect(()=>{R()},[]);const U=ue=>{p(ue),setTimeout(()=>p(""),3e3)},$=ue=>{const{name:k,value:N,type:C,checked:L}=ue.target;y({...g,[k]:C==="checkbox"?L:N})},I=ue=>{const{name:k,value:N,type:C,checked:L}=ue.target;_({...v,[k]:C==="checkbox"?L:N})},Q=async ue=>{if(ue.preventDefault(),!g.code||!g.discountValue){c("Por favor, completa todos los campos obligatorios.");return}if(g.discountType==="percentage"&&(g.discountValue<1||g.discountValue>100)){c("El porcentaje de descuento debe estar entre 1 y 100.");return}try{const k={code:g.code.toUpperCase(),discountType:g.discountType,discountValue:parseFloat(g.discountValue),isActive:g.isActive,createdAt:new Date,...g.expiryDate&&{expiryDate:new Date(g.expiryDate)}};await jf(T,k),y({code:"",discountType:"percentage",discountValue:"",isActive:!0,expiryDate:""}),c(null),U("Cupón creado exitosamente!"),R()}catch(k){console.error("Firebase error creating coupon: ",k),c("Error al crear el cupón. ¿Tienes permisos de escritura?")}},F=async(ue,k)=>{if(window.confirm(`¿Estás seguro de que quieres eliminar el cupón "${k}"?`))try{const C=ct(Pe,"coupons",ue);await M0(C),e(t.filter(L=>L.id!==ue)),U("Cupón eliminado exitosamente!")}catch(C){console.error("Firebase error deleting coupon: ",C),c("Error al eliminar el cupón. ¿Tienes permisos de escritura?")}},z=async ue=>{if(ue.preventDefault(),!v.code||!v.discountValue){c("Por favor, completa todos los campos obligatorios.");return}if(v.discountType==="percentage"&&(v.discountValue<1||v.discountValue>100)){c("El porcentaje de descuento debe estar entre 1 y 100.");return}try{const k=ct(Pe,"coupons",v.id),N={code:v.code.toUpperCase(),discountType:v.discountType,discountValue:parseFloat(v.discountValue),isActive:v.isActive,updatedAt:new Date,...v.expiryDate&&{expiryDate:new Date(v.expiryDate)}};await Os(k,N),_(null),c(null),U("Cupón actualizado exitosamente!"),R()}catch(k){console.error("Firebase error updating coupon: ",k),c("Error al actualizar el cupón. ¿Tienes permisos de escritura?")}},ce=ue=>ue?ue instanceof Date?ue.toLocaleDateString("es-CO"):ue.toDate?ue.toDate().toLocaleDateString("es-CO"):"N/A":"N/A",he=ue=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(ue||0);return l.jsxs("div",{className:"mt-8",children:[h&&l.jsxs("div",{className:"relative px-4 py-3 mb-4 text-green-700 bg-green-100 border border-green-400 rounded",role:"alert",children:[l.jsx("strong",{className:"font-bold",children:"Éxito! "}),l.jsx("span",{className:"block sm:inline",children:h})]}),o&&l.jsxs("div",{className:"relative px-4 py-3 mb-4 text-red-700 bg-red-100 border border-red-400 rounded",role:"alert",children:[l.jsx("strong",{className:"font-bold",children:"Error! "}),l.jsx("span",{className:"block sm:inline",children:o})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-8",children:[l.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:l.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:v?"Editar Cupón":"Agregar Nuevo Cupón"})}),l.jsx("div",{className:"px-4 py-5 sm:p-6",children:l.jsxs("form",{onSubmit:v?z:Q,children:[l.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700",children:"Código del Cupón *"}),l.jsx("input",{type:"text",name:"code",id:"code",required:!0,value:v?v.code:g.code,onChange:v?I:$,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Ej: DESCUENTO10"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"discountType",className:"block text-sm font-medium text-gray-700",children:"Tipo de Descuento *"}),l.jsxs("select",{name:"discountType",id:"discountType",required:!0,value:v?v.discountType:g.discountType,onChange:v?I:$,className:"mt-1 block w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[l.jsx("option",{value:"percentage",children:"Porcentaje"}),l.jsx("option",{value:"fixed",children:"Monto Fijo"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"discountValue",className:"block text-sm font-medium text-gray-700",children:"Valor del Descuento *"}),l.jsx("input",{type:"number",name:"discountValue",id:"discountValue",required:!0,min:"0",step:"0.01",value:v?v.discountValue:g.discountValue,onChange:v?I:$,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:v?v.discountType==="percentage"?"Ej: 15":"Ej: 5000":g.discountType==="percentage"?"Ej: 15":"Ej: 5000"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:v?v.discountType==="percentage"?"Porcentaje de descuento (1-100%)":"Monto fijo en COP":g.discountType==="percentage"?"Porcentaje de descuento (1-100%)":"Monto fijo en COP"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"expiryDate",className:"block text-sm font-medium text-gray-700",children:"Fecha de Expiración"}),l.jsx("input",{type:"date",name:"expiryDate",id:"expiryDate",value:v?v.expiryDate:g.expiryDate,onChange:v?I:$,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),l.jsx("div",{className:"sm:col-span-2",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"isActive",name:"isActive",type:"checkbox",checked:v?v.isActive:g.isActive,onChange:v?I:$,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"Cupón Activo"})]})})]}),l.jsx("div",{className:"mt-6 flex space-x-3",children:v?l.jsxs(l.Fragment,{children:[l.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Guardar Cambios"}),l.jsx("button",{type:"button",onClick:()=>_(null),className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"})]}):l.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Crear Cupón"})})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[l.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:l.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Cupones Existentes"})}),l.jsx("div",{className:"px-4 py-5 sm:px-6",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Código"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Tipo"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Valor"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Estado"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Expiración"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-6 h-6 border-b-2 border-gray-900 rounded-full animate-spin"})})})}):o?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-red-500",children:o})}):t.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No hay cupones disponibles"})}):t.map(ue=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:ue.code})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:ue.discountType==="percentage"?"Porcentaje":"Monto Fijo"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ue.discountType==="percentage"?`${ue.discountValue}%`:he(ue.discountValue)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ue.isActive?l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activo"}):l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactivo"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ue.expiryDate?ce(ue.expiryDate):"Nunca"}),l.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:[l.jsx("button",{onClick:()=>_(ue),className:"mr-3 text-indigo-600 hover:text-indigo-900",children:"Editar"}),l.jsx("button",{onClick:()=>F(ue.id,ue.code),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},ue.id))})]})})})]})]})},xO=()=>{const{currentUser:t}=$s(),[e,n]=D.useState([]),[r,o]=D.useState([]),[c,h]=D.useState([]),[p,g]=D.useState([]),[y,v]=D.useState({name:"",description:"",price:"",imageUrls:[],primaryImageIndex:0,category:"",material:"",color:"",size:"",style:"",stock:0,rating:0}),[_,T]=D.useState(null),[R,U]=D.useState(null),[$,I]=D.useState(!0),[Q,F]=D.useState(!0),[z,ce]=D.useState(!0),[he,ue]=D.useState(!0),[k,N]=D.useState(null),[C,L]=D.useState(""),[O,M]=D.useState(!1),[S,Ne]=D.useState("add"),[Le,q]=D.useState(!1),re=Dn(Pe,"products"),ge=Dn(Pe,"orders"),Be=async()=>{try{const j=await Hn(re);n(j.docs.map(de=>({...de.data(),id:de.id})))}catch(j){console.error("Firebase error en fetchProducts: ",j),N("No se pudieron cargar los productos. Revisa las reglas de seguridad de Firebase y la consola del navegador.")}I(!1)},V=async()=>{try{const j=ia(ge,Ru("createdAt","desc")),de=await Hn(j);o(de.docs.map(we=>({...we.data(),id:we.id})))}catch(j){if(console.error("Firebase error en fetchOrders: ",j),j.code==="failed-precondition"||j.message&&j.message.includes("index"))try{const Ve=(await Hn(ge)).docs.map(bt=>({id:bt.id,...bt.data()})).sort((bt,_t)=>{const it=bt.createdAt?.toDate?bt.createdAt.toDate():new Date(bt.createdAt);return(_t.createdAt?.toDate?_t.createdAt.toDate():new Date(_t.createdAt))-it});o(Ve)}catch(de){console.error("Firebase error fetching orders without index: ",de),de.code==="permission-denied"?N("No tienes permisos para ver las órdenes. Asegúrate de que las reglas de Firestore estén configuradas correctamente."):N("No se pudieron cargar las órdenes. Revisa las reglas de seguridad de Firebase y la consola del navegador.")}else j.code==="permission-denied"?N("No tienes permisos para ver las órdenes. Asegúrate de que las reglas de Firestore estén configuradas correctamente."):N("No se pudieron cargar las órdenes. Revisa las reglas de seguridad de Firebase y la consola del navegador.")}F(!1)},le=async()=>{try{const j=await BP();h(j)}catch(j){if(console.error("Firebase error en fetchReviews: ",j),j.code==="failed-precondition"||j.message&&j.message.includes("index"))try{const de=Dn(Pe,"reviews"),bt=(await Hn(de)).docs.map(_t=>({id:_t.id,..._t.data()})).sort((_t,it)=>{const Ht=_t.createdAt?.toDate?_t.createdAt.toDate():new Date(_t.createdAt);return(it.createdAt?.toDate?it.createdAt.toDate():new Date(it.createdAt))-Ht});h(bt)}catch(de){console.error("Firebase error fetching reviews without index: ",de),N("No se pudieron cargar las reseñas. Revisa las reglas de seguridad de Firebase y la consola del navegador.")}else N("No se pudieron cargar las reseñas. Revisa las reglas de seguridad de Firebase y la consola del navegador.")}ce(!1)},ye=async()=>{try{const j=await gO();g(j)}catch(j){console.error("Firebase error en fetchUsers: ",j),N("No se pudieron cargar los usuarios. Revisa las reglas de seguridad de Firebase y la consola del navegador.")}ue(!1)};D.useEffect(()=>{Be(),V(),le(),ye()},[]);const ee=j=>{L(j),setTimeout(()=>L(""),3e3)},oe=async(j,de)=>{try{await yO(j,de),g(p.map(we=>we.id===j?{...we,role:de,updatedAt:new Date}:we)),ee("Rol de usuario actualizado exitosamente!")}catch(we){console.error("Firebase error updating user role: ",we),N("Error al actualizar el rol del usuario. ¿Tienes permisos de escritura?")}},pe=async(j,de)=>{alert("Los usuarios no pueden ser eliminados según las reglas de seguridad de la aplicación. Puedes cambiar su rol a 'cliente' si es necesario.")},fe=j=>{v({...y,[j.target.name]:j.target.value})},Ie=j=>{T({..._,[j.target.name]:j.target.value})},tt=j=>new Promise((de,we)=>{const Ve=new FileReader;Ve.readAsDataURL(j),Ve.onload=()=>de(Ve.result),Ve.onerror=bt=>we(bt)}),Kn=async j=>{if(!(!j||j.length===0)){q(!0),N(null);try{const de=[],bt=4-y.imageUrls.length;if(bt<=0){N("Ya has agregado el máximo de 4 imágenes."),q(!1);return}const _t=Math.min(j.length,bt);for(let it=0;it<_t;it++){const Ht=j[it];if(Ht.size>1024*1024){N(`La imagen ${Ht.name} es demasiado grande. El tamaño máximo es 1MB.`);continue}try{const Zt=await tt(Ht);de.push({name:Ht.name,type:Ht.type,data:Zt,timestamp:Date.now()})}catch(Zt){console.error("Error converting file to base64:",Zt),N("Error al procesar la imagen: "+Ht.name)}}v(it=>({...it,imageUrls:[...it.imageUrls,...de]})),_t<j.length&&N(`Solo se procesaron ${_t} imágenes. El máximo es 4.`)}catch(de){console.error("Error processing files:",de),N("Error al procesar las imágenes: "+de.message)}finally{q(!1)}}},ua=async j=>{if(!(!j||j.length===0)){q(!0),N(null);try{const de=[],bt=4-_.imageUrls.length;if(bt<=0){N("Ya has agregado el máximo de 4 imágenes."),q(!1);return}const _t=Math.min(j.length,bt);for(let it=0;it<_t;it++){const Ht=j[it];if(Ht.size>1024*1024){N(`La imagen ${Ht.name} es demasiado grande. El tamaño máximo es 1MB.`);continue}try{const Zt=await tt(Ht);de.push({name:Ht.name,type:Ht.type,data:Zt,timestamp:Date.now()})}catch(Zt){console.error("Error converting file to base64:",Zt),N("Error al procesar la imagen: "+Ht.name)}}T(it=>({...it,imageUrls:[...it.imageUrls,...de]})),_t<j.length&&N(`Solo se procesaron ${_t} imágenes. El máximo es 4.`)}catch(de){console.error("Error processing files:",de),N("Error al procesar las imágenes: "+de.message)}finally{q(!1)}}},ii=()=>{const j=document.createElement("input");j.type="file",j.accept="image/*",j.multiple=!0,j.onchange=async de=>{const we=de.target.files;we&&we.length>0&&await Kn(we)},j.click()},ai=()=>{const j=document.createElement("input");j.type="file",j.accept="image/*",j.multiple=!0,j.onchange=async de=>{const we=de.target.files;we&&we.length>0&&await ua(we)},j.click()},_r=j=>{v({...y,primaryImageIndex:j})},oi=j=>{T({..._,primaryImageIndex:j})},_o=(j,de=!1)=>{if(de){const we=[..._.imageUrls];we.splice(j,1);let Ve=_.primaryImageIndex;j<_.primaryImageIndex?Ve=Math.max(0,_.primaryImageIndex-1):j===_.primaryImageIndex&&(Ve=Math.min(we.length-1,Ve)),T({..._,imageUrls:we,primaryImageIndex:Ve})}else{const we=[...y.imageUrls];we.splice(j,1);let Ve=y.primaryImageIndex;j<y.primaryImageIndex?Ve=Math.max(0,y.primaryImageIndex-1):j===y.primaryImageIndex&&(Ve=Math.min(we.length-1,Ve)),v({...y,imageUrls:we,primaryImageIndex:Ve})}},da=()=>{v({name:"",description:"",price:"",imageUrls:[],primaryImageIndex:0,category:"",material:"",color:"",size:"",style:""}),Ne("add"),M(!0)},yn=j=>{const de={...j,imageUrls:j.imageUrls||[],primaryImageIndex:j.primaryImageIndex||0,stock:j.stock||0,rating:j.rating||0};T({...de}),Ne("edit"),M(!0)},ha=()=>{Ne("orders"),M(!0)},It=()=>{Ne("coupons"),M(!0)},kt=()=>{Ne("reviews"),M(!0)},ls=()=>{Ne("users"),M(!0)},We=()=>{M(!1),T(null),N(null)},fa=async j=>{if(j.preventDefault(),!y.name||!y.price){N("Por favor, introduce al menos un nombre y un precio.");return}try{const de=y.imageUrls.filter(we=>typeof we=="string"?we.trim()!=="":typeof we=="object"&&we!==null?we.data&&we.data.trim()!=="":!1);await jf(re,{name:y.name,description:y.description,price:parseFloat(y.price)||0,stock:parseInt(y.stock)||0,rating:parseFloat(y.rating)||0,imageUrls:de,primaryImageIndex:Math.min(y.primaryImageIndex,Math.max(0,de.length-1)),category:y.category,material:y.material,color:y.color,size:y.size,style:y.style,createdAt:new Date}),v({name:"",description:"",price:"",stock:0,rating:0,imageUrls:[],primaryImageIndex:0,category:"",material:"",color:"",size:"",style:""}),N(null),ee("Producto añadido exitosamente!"),We(),Be()}catch(de){console.error("Firebase error: ",de),N("Error al crear el producto. ¿Tienes permisos de escritura?")}},Hl=async(j,de)=>{if(window.confirm(`¿Estás seguro de que quieres eliminar el producto "${de}"?`))try{const Ve=ct(Pe,"products",j);await M0(Ve),n(e.filter(bt=>bt.id!==j)),ee("Producto eliminado exitosamente!")}catch(Ve){console.error("Firebase error: ",Ve),N("Error al eliminar el producto. ¿Tienes permisos de escritura?")}},Er=async j=>{if(j.preventDefault(),!_.name||!_.price){N("Por favor, introduce al menos un nombre y un precio.");return}try{const de=_.imageUrls.filter(Ve=>typeof Ve=="string"?Ve.trim()!=="":typeof Ve=="object"&&Ve!==null?Ve.data&&Ve.data.trim()!=="":!1),we=ct(Pe,"products",_.id);await Os(we,{name:_.name,description:_.description,price:parseFloat(_.price)||0,stock:parseInt(_.stock)||0,rating:parseFloat(_.rating)||0,imageUrls:de,primaryImageIndex:Math.min(_.primaryImageIndex,Math.max(0,de.length-1)),category:_.category,material:_.material,color:_.color,size:_.size,style:_.style,updatedAt:new Date}),T(null),N(null),ee("Producto actualizado exitosamente!"),We(),Be()}catch(de){console.error("Firebase error: ",de),N("Error al actualizar el producto. ¿Tienes permisos de escritura?")}},Gs=async(j,de)=>{try{const we=ct(Pe,"orders",j);await Os(we,{orderStatus:de,updatedAt:new Date}),o(r.map(Ve=>Ve.id===j?{...Ve,orderStatus:de,updatedAt:new Date}:Ve)),ee("Estado de orden actualizado exitosamente!")}catch(we){console.error("Firebase error updating order status: ",we),N("Error al actualizar el estado de la orden. ¿Tienes permisos de escritura?")}},qt=async j=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta reseña?"))try{await FP(j),h(c.filter(we=>we.id!==j)),ee("Reseña eliminada exitosamente!")}catch(we){console.error("Firebase error: ",we),N("Error al eliminar la reseña. ¿Tienes permisos de escritura?")}},xn=j=>{U({...j}),Ne("editReview"),M(!0)},Wt=j=>{const{name:de,value:we}=j.target;U({...R,[de]:we})},ma=j=>{U({...R,rating:j})},Nr=async j=>{j.preventDefault();try{await zP(R.id,{rating:R.rating,comment:R.comment}),h(c.map(de=>de.id===R.id?{...de,rating:R.rating,comment:R.comment}:de)),U(null),N(null),ee("Reseña actualizada exitosamente!"),We()}catch(de){console.error("Firebase error: ",de),N("Error al actualizar la reseña. ¿Tienes permisos de escritura?")}},Mn=j=>j?j instanceof Date?j.toLocaleDateString("es-CO"):j.toDate?j.toDate().toLocaleDateString("es-CO"):"N/A":"N/A",jn=j=>{switch(j){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-indigo-100 text-indigo-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Yn=j=>{switch(j){case"pending":return"Pendiente";case"processing":return"Procesando";case"shipped":return"Enviado";case"delivered":return"Entregado";case"cancelled":return"Cancelado";default:return j}},Dt=j=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(j||0),[Ze,Ns]=D.useState(null),[Tr,li]=D.useState(!1),Ts=j=>{Ns(j),li(!0)},Ks=()=>{li(!1),Ns(null)};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("header",{className:"bg-white shadow",children:l.jsxs("div",{className:"flex items-center justify-between px-4 py-6 mx-auto max-w-7xl sm:px-6 lg:px-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Panel de Administración - Tienda de Moños"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"mr-4 text-sm text-gray-500",children:"Administrador"}),l.jsx("div",{className:"flex items-center justify-center w-8 h-8 font-semibold text-white bg-indigo-600 rounded-full",children:t?.email?.charAt(0).toUpperCase()||"A"})]})]})}),l.jsxs("main",{className:"px-4 py-6 mx-auto max-w-7xl sm:px-6 lg:px-8",children:[C&&l.jsxs("div",{className:"relative px-4 py-3 mb-4 text-green-700 bg-green-100 border border-green-400 rounded",role:"alert",children:[l.jsx("strong",{className:"font-bold",children:"Éxito! "}),l.jsx("span",{className:"block sm:inline",children:C})]}),k&&l.jsxs("div",{className:"relative px-4 py-3 mb-4 text-red-700 bg-red-100 border border-red-400 rounded",role:"alert",children:[l.jsx("strong",{className:"font-bold",children:"Error! "}),l.jsx("span",{className:"block sm:inline",children:k})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-5 mb-8 sm:grid-cols-2 lg:grid-cols-6",children:[l.jsx("div",{className:"overflow-hidden bg-white rounded-lg shadow",children:l.jsx("div",{className:"px-4 py-5 sm:p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 p-3 bg-indigo-500 rounded-md",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),l.jsx("div",{className:"flex-1 w-0 ml-5",children:l.jsxs("dl",{children:[l.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Productos"}),l.jsx("dd",{className:"flex items-baseline",children:l.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:e.length})})]})})]})})}),l.jsx("div",{className:"overflow-hidden bg-white rounded-lg shadow",children:l.jsx("div",{className:"px-4 py-5 sm:p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 p-3 bg-green-500 rounded-md",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),l.jsx("div",{className:"flex-1 w-0 ml-5",children:l.jsxs("dl",{children:[l.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Productos Vendidos"}),l.jsx("dd",{className:"flex items-baseline",children:l.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:"0"})})]})})]})})}),l.jsx("div",{className:"overflow-hidden bg-white rounded-lg shadow",children:l.jsx("div",{className:"px-4 py-5 sm:p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 p-3 bg-yellow-500 rounded-md",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsx("div",{className:"flex-1 w-0 ml-5",children:l.jsxs("dl",{children:[l.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Ingresos Totales"}),l.jsx("dd",{className:"flex items-baseline",children:l.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:"$0.00"})})]})})]})})}),l.jsx("div",{className:"overflow-hidden bg-white rounded-lg shadow",children:l.jsx("div",{className:"px-4 py-5 sm:p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 p-3 bg-blue-500 rounded-md",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),l.jsx("div",{className:"flex-1 w-0 ml-5",children:l.jsxs("dl",{children:[l.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Órdenes"}),l.jsx("dd",{className:"flex items-baseline",children:l.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:r.length})})]})})]})})}),l.jsx("div",{className:"overflow-hidden bg-white rounded-lg shadow",children:l.jsx("div",{className:"px-4 py-5 sm:p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 p-3 bg-purple-500 rounded-md",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsx("div",{className:"flex-1 w-0 ml-5",children:l.jsxs("dl",{children:[l.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Reseñas"}),l.jsx("dd",{className:"flex items-baseline",children:l.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:c.length})})]})})]})})}),l.jsx("div",{className:"overflow-hidden bg-white rounded-lg shadow",children:l.jsx("div",{className:"px-4 py-5 sm:p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 p-3 bg-green-500 rounded-md",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),l.jsx("div",{className:"flex-1 w-0 ml-5",children:l.jsxs("dl",{children:[l.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Usuarios"}),l.jsx("dd",{className:"flex items-baseline",children:l.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:p.length})})]})})]})})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-medium leading-6 text-gray-900",children:"Gestión de Moños"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Administra todos los moños de tu tienda"})]}),l.jsxs("div",{className:"flex mt-4 space-x-3 md:mt-0",children:[l.jsxs("button",{onClick:ls,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[l.jsx("svg",{className:"w-5 h-5 mr-2 -ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Usuarios"]}),l.jsxs("button",{onClick:kt,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:[l.jsx("svg",{className:"w-5 h-5 mr-2 -ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Reseñas"]}),l.jsxs("button",{onClick:It,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:[l.jsx("svg",{className:"w-5 h-5 mr-2 -ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Cupones"]}),l.jsxs("button",{onClick:ha,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[l.jsx("svg",{className:"w-5 h-5 mr-2 -ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Ver Órdenes"]}),l.jsxs("button",{onClick:da,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[l.jsx("svg",{className:"w-5 h-5 mr-2 -ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Añadir Moño"]})]})]})}),l.jsx("div",{className:"px-4 py-5 sm:px-6",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Moño"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Precio"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Categoría"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Material"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Color"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-6 h-6 border-b-2 border-gray-900 rounded-full animate-spin"})})})}):k?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-red-500",children:k})}):e.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No hay moños disponibles"})}):e.map(j=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 w-10 h-10",children:l.jsx("img",{className:"object-cover w-10 h-10 rounded-md",src:j.imageUrls&&j.imageUrls.length>0?j.imageUrls[j.primaryImageIndex]&&typeof j.imageUrls[j.primaryImageIndex]=="object"?j.imageUrls[j.primaryImageIndex].data:typeof j.imageUrls[j.primaryImageIndex]=="string"?j.imageUrls[j.primaryImageIndex]:j.imageUrls[0]&&typeof j.imageUrls[0]=="object"?j.imageUrls[0].data:typeof j.imageUrls[0]=="string"?j.imageUrls[0]:"https://via.placeholder.com/40x40.png?text=Moño":"https://via.placeholder.com/40x40.png?text=Moño",alt:j.name,onError:de=>{de.target.onerror=null,de.target.src="https://via.placeholder.com/40x40.png?text=Moño"}})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.name}),l.jsx("div",{className:"text-sm text-gray-500 line-clamp-1",children:j.description||"Sin descripción"})]})]})}),l.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:["$",parseFloat(j.price).toLocaleString("es-CO")]}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:j.category||"Sin categoría"})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:j.material||"N/A"}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:j.color||"N/A"}),l.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:[l.jsx("button",{onClick:()=>yn(j),className:"text-indigo-600 hover:text-indigo-900",children:"Editar"}),l.jsx("button",{onClick:()=>Hl(j.id,j.name),className:"ml-2 text-red-600 hover:text-red-900",children:"Eliminar"})]})]},j.id))})]})})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-medium leading-6 text-gray-900",children:"Gestión de Órdenes"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Administra todas las órdenes de tu tienda"})]}),l.jsx("div",{className:"flex mt-4 space-x-3 md:mt-0",children:l.jsxs("button",{onClick:ha,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[l.jsx("svg",{className:"w-5 h-5 mr-2 -ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Ver Órdenes"]})})]})}),l.jsx("div",{className:"px-4 py-5 sm:px-6",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"ID"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Usuario"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Total"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Fecha"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Estado"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Q?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-6 h-6 border-b-2 border-gray-900 rounded-full animate-spin"})})})}):k?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-red-500",children:k})}):r.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No hay órdenes disponibles"})}):r.map(j=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.id}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.userEmail||"N/A"}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Dt(j.total)}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Mn(j.createdAt)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${jn(j.orderStatus)}`,children:Yn(j.orderStatus)})}),l.jsx("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:l.jsx("button",{onClick:()=>Ts(j),className:"text-indigo-600 hover:text-indigo-900",children:"Ver Detalles"})})]},j.id))})]})})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-medium leading-6 text-gray-900",children:"Gestión de Reseñas"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Administra todas las reseñas de tu tienda"})]}),l.jsx("div",{className:"flex mt-4 space-x-3 md:mt-0",children:l.jsxs("button",{onClick:kt,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:[l.jsx("svg",{className:"w-5 h-5 mr-2 -ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Reseñas"]})})]})}),l.jsx("div",{className:"px-4 py-5 sm:px-6",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"ID"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Usuario"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Rating"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Comentario"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Fecha"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-6 h-6 border-b-2 border-gray-900 rounded-full animate-spin"})})})}):k?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-red-500",children:k})}):c.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No hay reseñas disponibles"})}):c.map(j=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.id}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.userEmail||"N/A"}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:l.jsx(xl,{rating:j.rating})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.comment||"Sin comentario"}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Mn(j.createdAt)}),l.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:[l.jsx("button",{onClick:()=>xn(j),className:"text-indigo-600 hover:text-indigo-900",children:"Editar"}),l.jsx("button",{onClick:()=>qt(j.id),className:"ml-2 text-red-600 hover:text-red-900",children:"Eliminar"})]})]},j.id))})]})})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-medium leading-6 text-gray-900",children:"Gestión de Usuarios"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Administra todos los usuarios de tu tienda"})]}),l.jsx("div",{className:"flex mt-4 space-x-3 md:mt-0",children:l.jsxs("button",{onClick:ls,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[l.jsx("svg",{className:"w-5 h-5 mr-2 -ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Usuarios"]})})]})}),l.jsx("div",{className:"px-4 py-5 sm:px-6",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"ID"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Nombre"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Email"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Rol"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Última Actualización"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:he?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-6 h-6 border-b-2 border-gray-900 rounded-full animate-spin"})})})}):k?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-red-500",children:k})}):p.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No hay usuarios disponibles"})}):p.map(j=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.id}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.name||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.email||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("select",{className:"px-2 py-1 border border-gray-300 rounded",value:j.role,onChange:de=>oe(j.id,de.target.value),children:[l.jsx("option",{value:"admin",children:"Administrador"}),l.jsx("option",{value:"customer",children:"Cliente"})]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Mn(j.updatedAt)}),l.jsx("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:l.jsx("button",{onClick:()=>pe(j.id,j.name),className:"text-red-600 hover:text-red-900",children:"Eliminar"})})]},j.id))})]})})})]})]}),O&&S==="add"&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-2xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Añadir Nuevo Moño"}),l.jsx("button",{onClick:We,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsx("div",{className:"mt-2",children:l.jsxs("form",{onSubmit:fa,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block mb-1 text-sm font-medium text-gray-700",children:"Nombre del Moño"}),l.jsx("input",{type:"text",name:"name",id:"name",required:!0,value:y.name,onChange:fe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: Moño Elegante Rojo"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"price",className:"block mb-1 text-sm font-medium text-gray-700",children:"Precio ($)"}),l.jsx("input",{type:"text",name:"price",id:"price",required:!0,value:y.price,onChange:fe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: 25990"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"stock",className:"block mb-1 text-sm font-medium text-gray-700",children:"Stock"}),l.jsx("input",{type:"text",name:"stock",id:"stock",required:!0,value:y.stock,onChange:fe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: 10"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"material",className:"block mb-1 text-sm font-medium text-gray-700",children:"Material"}),l.jsx("input",{type:"text",name:"material",id:"material",value:y.material,onChange:fe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: Satén, Seda"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"color",className:"block mb-1 text-sm font-medium text-gray-700",children:"Color"}),l.jsx("input",{type:"text",name:"color",id:"color",value:y.color,onChange:fe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: Rojo, Negro"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"size",className:"block mb-1 text-sm font-medium text-gray-700",children:"Tamaño"}),l.jsx("input",{type:"text",name:"size",id:"size",value:y.size,onChange:fe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: Grande, Mediano"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"style",className:"block mb-1 text-sm font-medium text-gray-700",children:"Estilo"}),l.jsx("input",{type:"text",name:"style",id:"style",value:y.style,onChange:fe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: Clásico, Moderno"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category",className:"block mb-1 text-sm font-medium text-gray-700",children:"Categoría"}),l.jsxs("select",{name:"category",id:"category",value:y.category,onChange:fe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[l.jsx("option",{value:"",children:"Seleccionar categoría"}),l.jsx("option",{value:"Moños Elegantes",children:"Moños Elegantes"}),l.jsx("option",{value:"Moños Infantiles",children:"Moños Infantiles"}),l.jsx("option",{value:"Moños Deportivos",children:"Moños Deportivos"}),l.jsx("option",{value:"Moños Casuales",children:"Moños Casuales"}),l.jsx("option",{value:"Moños de Novia",children:"Moños de Novia"}),l.jsx("option",{value:"Moños de Gala",children:"Moños de Gala"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"block mb-1 text-sm font-medium text-gray-700",children:"Descripción"}),l.jsx("textarea",{name:"description",id:"description",rows:3,value:y.description,onChange:fe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe las características especiales del moño..."})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"rating",className:"block mb-1 text-sm font-medium text-gray-700",children:"Rating (0-5 estrellas)"}),l.jsx("input",{type:"text",name:"rating",id:"rating",value:y.rating,onChange:fe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: 4.5"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Imágenes del Producto"}),y.imageUrls.length>0&&l.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:y.imageUrls.map((j,de)=>l.jsxs("div",{className:"relative group",children:[l.jsx("img",{src:j&&typeof j=="object"&&j.data?j.data:typeof j=="string"?j:"https://via.placeholder.com/150x150.png?text=Moño",alt:`Preview ${de+1}`,className:"object-cover w-full h-32 border rounded-md",onError:we=>{we.target.onerror=null,we.target.src="https://via.placeholder.com/150x150.png?text=Error"}}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center transition-all duration-200 bg-black bg-opacity-0 rounded-md group-hover:bg-opacity-30",children:l.jsx("button",{type:"button",onClick:()=>_r(de),className:`px-2 py-1 text-xs rounded ${y.primaryImageIndex===de?"bg-indigo-600 text-white":"bg-white text-gray-800 opacity-0 group-hover:opacity-100"}`,children:y.primaryImageIndex===de?"Principal":"Hacer Principal"})}),y.primaryImageIndex===de&&l.jsx("div",{className:"absolute px-2 py-1 text-xs text-white bg-indigo-600 rounded top-2 left-2",children:"Principal"}),l.jsx("button",{type:"button",onClick:()=>_o(de,!1),className:"absolute flex items-center justify-center w-6 h-6 text-white transition-opacity bg-red-500 rounded-full opacity-0 top-2 right-2 group-hover:opacity-100",children:"×"})]},de))}),l.jsxs("button",{type:"button",onClick:ii,className:"flex flex-col items-center justify-center w-full px-4 py-3 text-gray-500 border-2 border-gray-300 border-dashed rounded-md hover:border-gray-400 hover:text-gray-600",disabled:Le||y.imageUrls.length>=4,children:[l.jsx("svg",{className:"w-8 h-8 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),l.jsxs("span",{className:"text-sm font-medium",children:["Agregar imágenes (",y.imageUrls.length,"/4)"]}),l.jsxs("span",{className:"mt-1 text-xs",children:[4-y.imageUrls.length," espacios disponibles"]})]}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:'Selecciona hasta 4 imágenes de tu computadora. La imagen marcada como "Principal" se mostrará en la lista de productos.'}),Le&&l.jsxs("div",{className:"flex items-center mt-3",children:[l.jsx("div",{className:"w-5 h-5 mr-2 border-b-2 border-indigo-600 rounded-full animate-spin"}),l.jsx("span",{className:"text-sm text-indigo-600",children:"Subiendo imágenes..."})]})]}),l.jsxs("div",{className:"flex justify-end pt-4 space-x-3",children:[l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Añadir Moño"})]})]})})]})})}),O&&S==="edit"&&_&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-2xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Editar Moño"}),l.jsx("button",{onClick:We,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsx("div",{className:"mt-2",children:l.jsxs("form",{onSubmit:Er,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-name",className:"block mb-1 text-sm font-medium text-gray-700",children:"Nombre del Moño"}),l.jsx("input",{type:"text",name:"name",id:"edit-name",required:!0,value:_.name,onChange:Ie,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: Moño Elegante Rojo"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-price",className:"block mb-1 text-sm font-medium text-gray-700",children:"Precio ($)"}),l.jsx("input",{type:"text",name:"price",id:"edit-price",required:!0,value:_.price,onChange:Ie,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: 25990"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-stock",className:"block mb-1 text-sm font-medium text-gray-700",children:"Stock"}),l.jsx("input",{type:"text",name:"stock",id:"edit-stock",required:!0,value:_.stock,onChange:Ie,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: 10"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-material",className:"block mb-1 text-sm font-medium text-gray-700",children:"Material"}),l.jsx("input",{type:"text",name:"material",id:"edit-material",value:_.material,onChange:Ie,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: Satén, Seda"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-color",className:"block mb-1 text-sm font-medium text-gray-700",children:"Color"}),l.jsx("input",{type:"text",name:"color",id:"edit-color",value:_.color,onChange:Ie,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: Rojo, Negro"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-size",className:"block mb-1 text-sm font-medium text-gray-700",children:"Tamaño"}),l.jsx("input",{type:"text",name:"size",id:"edit-size",value:_.size,onChange:Ie,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: Grande, Mediano"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-style",className:"block mb-1 text-sm font-medium text-gray-700",children:"Estilo"}),l.jsx("input",{type:"text",name:"style",id:"edit-style",value:_.style,onChange:Ie,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: Clásico, Moderno"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-category",className:"block mb-1 text-sm font-medium text-gray-700",children:"Categoría"}),l.jsxs("select",{name:"category",id:"edit-category",value:_.category,onChange:Ie,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[l.jsx("option",{value:"",children:"Seleccionar categoría"}),l.jsx("option",{value:"Moños Elegantes",children:"Moños Elegantes"}),l.jsx("option",{value:"Moños Infantiles",children:"Moños Infantiles"}),l.jsx("option",{value:"Moños Deportivos",children:"Moños Deportivos"}),l.jsx("option",{value:"Moños Casuales",children:"Moños Casuales"}),l.jsx("option",{value:"Moños de Novia",children:"Moños de Novia"}),l.jsx("option",{value:"Moños de Gala",children:"Moños de Gala"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-description",className:"block mb-1 text-sm font-medium text-gray-700",children:"Descripción"}),l.jsx("textarea",{name:"description",id:"edit-description",rows:3,value:_.description,onChange:Ie,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Describe las características especiales del moño..."})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-rating",className:"block mb-1 text-sm font-medium text-gray-700",children:"Rating (0-5 estrellas)"}),l.jsx("input",{type:"text",name:"rating",id:"edit-rating",value:_.rating,onChange:Ie,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ej: 4.5"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Imágenes del Producto"}),_.imageUrls.length>0&&l.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:_.imageUrls.map((j,de)=>l.jsxs("div",{className:"relative group",children:[l.jsx("img",{src:j&&typeof j=="object"&&j.data?j.data:typeof j=="string"?j:"https://via.placeholder.com/150x150.png?text=Moño",alt:`Preview ${de+1}`,className:"object-cover w-full h-32 border rounded-md",onError:we=>{we.target.onerror=null,we.target.src="https://via.placeholder.com/150x150.png?text=Error"}}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center transition-all duration-200 bg-black bg-opacity-0 rounded-md group-hover:bg-opacity-30",children:l.jsx("button",{type:"button",onClick:()=>oi(de),className:`px-2 py-1 text-xs rounded ${_.primaryImageIndex===de?"bg-indigo-600 text-white":"bg-white text-gray-800 opacity-0 group-hover:opacity-100"}`,children:_.primaryImageIndex===de?"Principal":"Hacer Principal"})}),_.primaryImageIndex===de&&l.jsx("div",{className:"absolute px-2 py-1 text-xs text-white bg-indigo-600 rounded top-2 left-2",children:"Principal"}),l.jsx("button",{type:"button",onClick:()=>_o(de,!0),className:"absolute flex items-center justify-center w-6 h-6 text-white transition-opacity bg-red-500 rounded-full opacity-0 top-2 right-2 group-hover:opacity-100",children:"×"})]},de))}),l.jsxs("button",{type:"button",onClick:ai,className:"flex flex-col items-center justify-center w-full px-4 py-3 text-gray-500 border-2 border-gray-300 border-dashed rounded-md hover:border-gray-400 hover:text-gray-600",disabled:Le||_.imageUrls.length>=4,children:[l.jsx("svg",{className:"w-8 h-8 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),l.jsxs("span",{className:"text-sm font-medium",children:["Agregar imágenes (",_.imageUrls.length,"/4)"]}),l.jsxs("span",{className:"mt-1 text-xs",children:[4-_.imageUrls.length," espacios disponibles"]})]}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:'Selecciona hasta 4 imágenes de tu computadora. La imagen marcada como "Principal" se mostrará en la lista de productos.'}),Le&&l.jsxs("div",{className:"flex items-center mt-3",children:[l.jsx("div",{className:"w-5 h-5 mr-2 border-b-2 border-indigo-600 rounded-full animate-spin"}),l.jsx("span",{className:"text-sm text-indigo-600",children:"Subiendo imágenes..."})]})]}),l.jsxs("div",{className:"flex justify-end pt-4 space-x-3",children:[l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Guardar Cambios"})]})]})})]})})}),O&&S==="users"&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-4xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Usuarios Registrados"}),l.jsx("button",{onClick:We,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsx("div",{className:"mt-2",children:he?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-gray-900 rounded-full animate-spin"})}):p.length===0?l.jsx("div",{className:"py-8 text-center text-gray-500",children:l.jsx("p",{children:"No hay usuarios registrados aún."})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Nombre"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Email"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Rol"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Fecha de Registro"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(j=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 whitespace-nowrap",children:l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:j.name||j.displayName||"N/A"}),l.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",j.id?.substring(0,8)||"N/A"]})]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:j.email||"N/A"}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.role==="admin"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:j.role==="admin"?"Administrador":"Cliente"})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Mn(j.createdAt)}),l.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:[l.jsx("button",{onClick:()=>{const de=j.role==="admin"?"customer":"admin";oe(j.id,de)},className:`px-3 py-1 text-xs rounded-md ${j.role==="admin"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-blue-100 text-blue-800 hover:bg-blue-200"}`,children:j.role==="admin"?"Hacer Cliente":"Hacer Administrador"}),l.jsx("button",{onClick:()=>pe(j.id,j.name||j.displayName||j.email),className:"ml-2 px-3 py-1 text-xs rounded-md bg-red-100 text-red-800 hover:bg-red-200",title:"Los usuarios no pueden ser eliminados según las reglas de seguridad",children:"Eliminar"})]})]},j.id))})]})})}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar"})})]})})}),O&&S==="editReview"&&R&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-4xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Editar Reseña"}),l.jsx("button",{onClick:We,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"reviewRating",className:"block text-sm font-medium text-gray-700",children:"Calificación"}),l.jsxs("select",{id:"reviewRating",value:R?.rating||5,onChange:j=>U({...R,rating:parseInt(j.target.value)}),className:"block w-full py-1 text-xs border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:[l.jsx("option",{value:"1",children:"1 Estrella"}),l.jsx("option",{value:"2",children:"2 Estrellas"}),l.jsx("option",{value:"3",children:"3 Estrellas"}),l.jsx("option",{value:"4",children:"4 Estrellas"}),l.jsx("option",{value:"5",children:"5 Estrellas"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"reviewComment",className:"block text-sm font-medium text-gray-700",children:"Comentario"}),l.jsx("textarea",{id:"reviewComment",value:R?.comment||"",onChange:j=>U({...R,comment:j.target.value}),className:"block w-full py-1 text-xs border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]})]}),l.jsxs("div",{className:"flex justify-end pt-4",children:[l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:()=>{R&&Nr({preventDefault:()=>{}})},className:"ml-3 px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"×"})]}),l.jsx("div",{className:"mt-2",children:l.jsxs("form",{onSubmit:j=>{j.preventDefault(),R&&Nr(j)},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calificación"}),l.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(j=>l.jsx("button",{type:"button",onClick:()=>ma(j),className:"text-2xl focus:outline-none",children:j<=(R?.rating||0)?l.jsx("span",{className:"text-yellow-400",children:"★"}):l.jsx("span",{className:"text-gray-300",children:"☆"})},j)),l.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:[R?.rating||0," de 5 estrellas"]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentario"}),l.jsx("textarea",{id:"edit-comment",name:"comment",rows:4,value:R?.comment||"",onChange:Wt,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border border-gray-300 rounded-md p-3"})]}),l.jsxs("div",{className:"flex justify-end pt-4 space-x-3",children:[l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Guardar Cambios"})]})]})}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar"})})]})})}),O&&S==="orders"&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-4xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Órdenes Recientes"}),l.jsx("button",{onClick:We,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsx("div",{className:"mt-2",children:Q?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-gray-900 rounded-full animate-spin"})}):r.length===0?l.jsx("div",{className:"py-8 text-center text-gray-500",children:l.jsx("p",{children:"No hay órdenes registradas aún."})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"ID"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Cliente"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Fecha"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Productos"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Total"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Método de Pago"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Estado"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(j=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:l.jsxs("button",{onClick:()=>Ts(j),className:"text-indigo-600 underline hover:text-indigo-900",children:[j.id.substring(0,8),"..."]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 whitespace-nowrap",children:l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:j.userEmail||"N/A"}),l.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",j.userId?.substring(0,8)||"N/A"]})]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Mn(j.createdAt)}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:l.jsxs("div",{children:[j.items?.length||0," ",j.items?.length===1?"producto":"productos",j.items&&j.items.length>0&&l.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[j.items.slice(0,2).map((de,we)=>l.jsxs("div",{children:[de.name," x",de.quantity]},we)),j.items.length>2&&l.jsxs("div",{className:"text-xs text-gray-400",children:["+",j.items.length-2," más"]})]})]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 whitespace-nowrap",children:Dt(j.totalAmount||0)}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:l.jsxs("div",{className:"space-y-1",children:[l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:j.paymentMethod||"N/A"}),j.paymentStatus&&l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.paymentStatus==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:j.paymentStatus==="completed"?"Pagado":"Pendiente"})]})}),l.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+jn(j.orderStatus||"pending"),children:Yn(j.orderStatus||"pending")}),l.jsxs("select",{value:j.orderStatus||"pending",onChange:de=>Gs(j.id,de.target.value),className:"block w-full py-1 text-xs border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:[l.jsx("option",{value:"pending",children:"Pendiente"}),l.jsx("option",{value:"processing",children:"Procesando"}),l.jsx("option",{value:"shipped",children:"Enviado"}),l.jsx("option",{value:"delivered",children:"Entregado"}),l.jsx("option",{value:"cancelled",children:"Cancelado"})]})]}),j.address&&l.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[j.address.city,", ",j.address.state]})]})]},j.id))})]})})}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar"})})]})})}),O&&S==="coupons"&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-6xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Cupones"}),l.jsx("button",{onClick:We,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsx("div",{className:"mt-2",children:l.jsx(j2,{})}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar"})})]})})}),O&&S==="reviews"&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-4xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Reseñas de Productos"}),l.jsx("button",{onClick:We,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsx("div",{className:"mt-2",children:z?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-gray-900 rounded-full animate-spin"})}):c.length===0?l.jsx("div",{className:"py-8 text-center text-gray-500",children:l.jsx("p",{children:"No hay reseñas registradas aún."})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Producto"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Usuario"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Calificación"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Comentario"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Fecha"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(j=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:l.jsx("div",{className:"font-medium",children:j.productId||"N/A"})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 whitespace-nowrap",children:l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:j.userName||"N/A"}),l.jsx("div",{className:"text-xs text-gray-500",children:j.userEmail||"N/A"})]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(xl,{rating:j.rating,size:"sm"}),l.jsxs("span",{className:"ml-2",children:[j.rating,"/5"]})]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs",children:l.jsx("div",{className:"line-clamp-2",children:j.comment||"N/A"})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Mn(j.createdAt)}),l.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:[l.jsx("button",{onClick:()=>xn(j),className:"mr-3 text-indigo-600 hover:text-indigo-900",children:"Editar"}),l.jsx("button",{onClick:()=>qt(j.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},j.id))})]})})}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar"})})]})})}),O&&S==="editReview"&&R&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-2xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Editar Reseña"}),l.jsx("button",{onClick:We,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsx("div",{className:"mt-2",children:l.jsxs("form",{onSubmit:Nr,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calificación"}),l.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(j=>l.jsx("button",{type:"button",onClick:()=>ma(j),className:"text-2xl focus:outline-none",children:j<=R.rating?l.jsx("span",{className:"text-yellow-400",children:"★"}):l.jsx("span",{className:"text-gray-300",children:"☆"})},j)),l.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:[R.rating," de 5 estrellas"]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentario"}),l.jsx("textarea",{id:"edit-comment",name:"comment",rows:4,value:R.comment,onChange:Wt,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border border-gray-300 rounded-md p-3"})]}),l.jsxs("div",{className:"flex justify-end pt-4 space-x-3",children:[l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Guardar Cambios"})]})]})})]})})}),Tr&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-4xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Detalles del Pedido"}),l.jsx("button",{onClick:Ks,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsx("div",{className:"mt-2",children:Ze&&l.jsxs("div",{children:[l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Información del Pedido"}),l.jsxs("div",{className:"mt-2 space-y-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"ID del Pedido"}),l.jsx("p",{className:"text-gray-900",children:Ze.id})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Fecha del Pedido"}),l.jsx("p",{className:"text-gray-900",children:Mn(Ze.createdAt)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Estado del Pedido"}),l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+jn(Ze.orderStatus||"pending"),children:Yn(Ze.orderStatus||"pending")})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Información del Cliente"}),l.jsxs("div",{className:"mt-2 space-y-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Nombre"}),l.jsx("p",{className:"text-gray-900",children:Ze.userName||"N/A"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),l.jsx("p",{className:"text-gray-900",children:Ze.userEmail||"N/A"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Teléfono"}),l.jsx("p",{className:"text-gray-900",children:Ze.address?.phone||"N/A"})]})]})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Dirección de Entrega"}),l.jsxs("div",{className:"mt-2 p-4 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-gray-900",children:Ze.address?.street||"N/A"}),l.jsxs("p",{className:"text-gray-900",children:[Ze.address?.city||"N/A",", ",Ze.address?.state||"N/A"," ",Ze.address?.zip||"N/A"]})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Productos"}),l.jsx("div",{className:"mt-2 overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Producto"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Cantidad"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Precio"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ze.items?.map((j,de)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 whitespace-nowrap",children:l.jsx("div",{className:"font-medium",children:j.name})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:j.quantity}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Dt(j.price)}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Dt(j.price*j.quantity)})]},de))})]})})]}),l.jsx("div",{className:"mt-6",children:l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Método de Pago"}),l.jsxs("div",{className:"mt-2 space-y-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Método"}),l.jsx("p",{className:"text-gray-900",children:Ze.paymentMethod||"N/A"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Estado del Pago"}),l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Ze.paymentStatus==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:Ze.paymentStatus==="completed"?"Pagado":"Pendiente"})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Resumen del Pedido"}),l.jsxs("div",{className:"mt-2 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("p",{className:"text-gray-500",children:"Subtotal"}),l.jsx("p",{className:"text-gray-900",children:Dt(Ze.subtotal||0)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("p",{className:"text-gray-500",children:"Impuestos"}),l.jsx("p",{className:"text-gray-900",children:Dt(Ze.tax||0)})]}),l.jsxs("div",{className:"flex justify-between pt-2 mt-2 border-t border-gray-200",children:[l.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Total"}),l.jsx("p",{className:"text-lg font-medium text-gray-900",children:Dt(Ze.totalAmount||0)})]})]})]})]})})]})}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"button",onClick:Ks,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar"})})]})})}),O&&S==="productDetails"&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-4xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Detalles del Producto"}),l.jsx("button",{onClick:We,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID del Producto"}),l.jsx("p",{className:"text-gray-900",children:selectedProduct?.id})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Producto"}),l.jsx("p",{className:"text-gray-900",children:selectedProduct?.name})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),l.jsx("p",{className:"text-gray-900",children:selectedProduct?.description})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio"}),l.jsx("p",{className:"text-gray-900",children:Dt(selectedProduct?.price||0)})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock"}),l.jsx("p",{className:"text-gray-900",children:selectedProduct?.stock||0})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU"}),l.jsx("p",{className:"text-gray-900",children:selectedProduct?.sku})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoría"}),l.jsx("p",{className:"text-gray-900",children:selectedProduct?.category})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiquetas"}),l.jsx("div",{className:"space-x-1",children:selectedProduct?.tags?.map((j,de)=>l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:j},de))})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagenes"}),l.jsx("div",{className:"space-x-1",children:selectedProduct?.images?.map((j,de)=>l.jsx("img",{src:j,alt:`Product Image ${de+1}`,className:"w-20 h-20 object-cover rounded-md"},de))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"})})]})})}),O&&S==="coupons"&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-6xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Cupones"}),l.jsx("button",{onClick:We,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsx("div",{className:"mt-2",children:l.jsx(j2,{})}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar"})})]})})}),O&&S==="reviews"&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-4xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Reseñas de Productos"}),l.jsx("button",{onClick:We,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsx("div",{className:"mt-2",children:z?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-gray-900 rounded-full animate-spin"})}):c.length===0?l.jsx("div",{className:"py-8 text-center text-gray-500",children:l.jsx("p",{children:"No hay reseñas registradas aún."})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Producto"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Usuario"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Calificación"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Comentario"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Fecha"}),l.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(j=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:l.jsx("div",{className:"font-medium",children:j.productId||"N/A"})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 whitespace-nowrap",children:l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:j.userName||"N/A"}),l.jsx("div",{className:"text-xs text-gray-500",children:j.userEmail||"N/A"})]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(xl,{rating:j.rating,size:"sm"}),l.jsxs("span",{className:"ml-2",children:[j.rating,"/5"]})]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs",children:l.jsx("div",{className:"line-clamp-2",children:j.comment||"N/A"})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Mn(j.createdAt)}),l.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:[l.jsx("button",{onClick:()=>xn(j),className:"mr-3 text-indigo-600 hover:text-indigo-900",children:"Editar"}),l.jsx("button",{onClick:()=>qt(j.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},j.id))})]})})}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar"})})]})})}),O&&S==="editReview"&&R&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-2xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Editar Reseña"}),l.jsx("button",{onClick:We,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsx("div",{className:"mt-2",children:l.jsxs("form",{onSubmit:Nr,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calificación"}),l.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(j=>l.jsx("button",{type:"button",onClick:()=>ma(j),className:"text-2xl focus:outline-none",children:j<=R.rating?l.jsx("span",{className:"text-yellow-400",children:"★"}):l.jsx("span",{className:"text-gray-300",children:"☆"})},j)),l.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:[R.rating," de 5 estrellas"]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"edit-comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentario"}),l.jsx("textarea",{id:"edit-comment",name:"comment",rows:4,value:R.comment,onChange:Wt,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border border-gray-300 rounded-md p-3"})]}),l.jsxs("div",{className:"flex justify-end pt-4 space-x-3",children:[l.jsx("button",{type:"button",onClick:We,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Guardar Cambios"})]})]})})]})})}),l.jsx(SN,{order:Ze,isOpen:Tr,onClose:Ks,formatDate:Mn,formatCurrency:Dt,getOrderStatusText:Yn,getStatusBadgeClass:jn})]})},vO=async t=>{try{const e=Dn(Pe,"orders"),n=ia(e,mu("userId","==",t),Ru("createdAt","desc"));return(await Hn(n)).docs.map(c=>({id:c.id,...c.data()}))}catch(e){if(console.error("Error fetching orders:",e),e.code==="failed-precondition"||e.message&&e.message.includes("index"))try{const n=Dn(Pe,"orders"),r=ia(n,mu("userId","==",t));return(await Hn(r)).docs.map(p=>({id:p.id,...p.data()})).sort((p,g)=>{const y=p.createdAt?.toDate?p.createdAt.toDate():new Date(p.createdAt);return(g.createdAt?.toDate?g.createdAt.toDate():new Date(g.createdAt))-y})}catch(n){throw console.error("Error fetching orders without index:",n),n}else throw e}},wO=()=>{const{currentUser:t}=$s(),e=Hs(),[n,r]=D.useState([]),[o,c]=D.useState(!0),[h,p]=D.useState(null),[g,y]=D.useState(null),[v,_]=D.useState(!1),[T,R]=D.useState(null),U=N=>{switch(N){case"pending":return"Pendiente";case"processing":return"Procesando";case"shipped":return"Enviado";case"delivered":return"Entregado";case"cancelled":return"Cancelado";default:return N}},$=N=>{switch(N){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-indigo-100 text-indigo-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},I=N=>N?N instanceof Date?N.toLocaleDateString("es-CO"):N.toDate?N.toDate().toLocaleDateString("es-CO"):"N/A":"N/A",Q=N=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(N||0),F=N=>{y(N),_(!0)},z=()=>{_(!1),y(null)},ce=N=>{R({productId:N.id,productName:N.name,rating:0,comment:""})},he=N=>{const{name:C,value:L}=N.target;R(O=>({...O,[C]:L}))},ue=N=>{R(C=>({...C,rating:N}))},k=async()=>{if(T.rating===0){Te.fire({title:"Error",text:"Por favor selecciona una calificación",icon:"error",confirmButtonText:"Aceptar"});return}if(T.comment.trim()===""){Te.fire({title:"Error",text:"Por favor escribe un comentario",icon:"error",confirmButtonText:"Aceptar"});return}try{const N={productId:T.productId,userId:t.uid,userEmail:t.email,userName:t.displayName||t.email.split("@")[0],rating:T.rating,comment:T.comment.trim()};await bN(N),Te.fire({title:"Reseña enviada",text:"Tu reseña ha sido enviada correctamente",icon:"success",confirmButtonText:"Aceptar"}),R(null)}catch(N){console.error("Error submitting review:",N),Te.fire({title:"Error",text:"Hubo un error al enviar tu reseña. Por favor intenta nuevamente.",icon:"error",confirmButtonText:"Aceptar"})}};return D.useEffect(()=>{(async()=>{if(!t){e("/login");return}try{const C=await vO(t.uid);r(C)}catch(C){console.error("Error fetching user orders:",C),p("No se pudieron cargar tus órdenes. Por favor, intenta nuevamente.")}finally{c(!1)}})()},[t,e]),o?l.jsx("div",{children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})})}):l.jsxs("div",{children:[l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Pedidos"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Consulta el estado de tus pedidos recientes"})]}),h&&l.jsx("div",{className:"rounded-md bg-red-50 p-4 mb-6",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsx("h3",{className:"text-sm font-medium text-red-800",children:h})})]})}),n.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No tienes pedidos"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"Aún no has realizado ningún pedido."}),l.jsx("div",{className:"mt-6",children:l.jsx($e,{to:"/shop",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Comprar ahora"})})]}):l.jsx("div",{className:"space-y-6",children:n.map(N=>l.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[l.jsx("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Pedido #",N.id.substring(0,8)]}),l.jsxs("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:["Realizado el ",I(N.createdAt)]})]}),l.jsxs("div",{className:"mt-4 md:mt-0 flex items-center space-x-2",children:[l.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${$(N.orderStatus)}`,children:U(N.orderStatus)}),l.jsx("button",{onClick:()=>F(N),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Ver detalles"})]})]})}),l.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[l.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),l.jsx("p",{className:"text-lg font-medium text-gray-900",children:Q(N.totalAmount)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Productos"}),l.jsxs("p",{className:"text-lg font-medium text-gray-900",children:[N.items?.length||0," ",N.items?.length===1?"producto":"productos"]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Método de Pago"}),l.jsx("p",{className:"text-lg font-medium text-gray-900",children:N.paymentMethod||"N/A"})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Productos en este pedido"}),l.jsx("div",{className:"space-y-4",children:N.items?.map((C,L)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 w-16 h-16 border border-gray-200 rounded-md overflow-hidden",children:l.jsx("img",{src:C.imageUrl||"https://via.placeholder.com/64x64.png?text=Moño",alt:C.name,className:"w-full h-full object-center object-cover",onError:O=>{O.target.onerror=null,O.target.src="https://via.placeholder.com/64x64.png?text=Moño"}})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("h5",{className:"text-sm font-medium text-gray-900",children:C.name}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Cantidad: ",C.quantity]})]})]}),l.jsx("button",{onClick:()=>ce(C),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Dejar reseña"})]},L))})]})]})]},N.id))})]}),T&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-md mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Dejar una reseña"}),l.jsx("button",{onClick:()=>R(null),className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"font-medium text-gray-900",children:T.productName}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calificación"}),l.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(N=>l.jsx("button",{type:"button",onClick:()=>ue(N),className:"text-2xl focus:outline-none",children:N<=T.rating?l.jsx("span",{className:"text-yellow-400",children:"★"}):l.jsx("span",{className:"text-gray-300",children:"☆"})},N)),l.jsx("span",{className:"ml-2 text-sm text-gray-500",children:T.rating>0?`${T.rating} de 5 estrellas`:"Selecciona una calificación"})]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{htmlFor:"review-comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentario"}),l.jsx("textarea",{id:"review-comment",name:"comment",rows:4,value:T.comment,onChange:he,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border border-gray-300 rounded-md p-3",placeholder:"Comparte tu experiencia con este producto..."})]}),l.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[l.jsx("button",{type:"button",onClick:()=>R(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"}),l.jsx("button",{onClick:k,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Enviar Reseña"})]})]})]})})}),l.jsx(SN,{order:g,isOpen:v,onClose:z,formatDate:I,formatCurrency:Q,getOrderStatusText:U,getStatusBadgeClass:$})]})},bO=()=>{const{applyCoupon:t,removeCoupon:e,coupon:n}=Ul(),r=async()=>{try{const c=await t("DESCUENTO10");console.log("Coupon applied successfully:",c),alert("Coupon applied successfully!")}catch(c){console.error("Error applying coupon:",c),alert("Error applying coupon: "+c.message)}},o=()=>{e(),alert("Coupon removed!")};return l.jsxs("div",{children:[l.jsx(so,{}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Prueba de Cupones"}),l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden p-6",children:[l.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-4",children:"Funcionalidad de Cupones"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Estado Actual"}),n?l.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[l.jsxs("p",{className:"font-medium text-green-800",children:["Cupón Aplicado: ",n.code]}),l.jsxs("p",{className:"text-sm text-green-600",children:["Descuento: ",n.discountType==="percentage"?`${n.discountValue}%`:`$${n.discountValue}`]})]}):l.jsx("p",{className:"text-gray-500",children:"No hay cupón aplicado"})]}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsx("button",{onClick:r,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Aplicar Cupón de Prueba (DESCUENTO10)"}),l.jsx("button",{onClick:o,disabled:!n,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${n?"bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500":"bg-gray-400 cursor-not-allowed"}`,children:"Remover Cupón"})]}),l.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[l.jsx("h3",{className:"text-md font-medium text-blue-800 mb-2",children:"Instrucciones"}),l.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-700 space-y-1",children:[l.jsx("li",{children:"Primero, asegúrate de haber creado un cupón de prueba en Firestore"}),l.jsx("li",{children:'Haz clic en "Aplicar Cupón de Prueba" para probar la funcionalidad'}),l.jsx("li",{children:"Verifica que el cupón se aplique correctamente"}),l.jsx("li",{children:'Haz clic en "Remover Cupón" para eliminarlo'})]})]})]})]})]})]})},_O=()=>{const{items:t,removeFromWishlist:e,loading:n}=Cf();return n?l.jsx("div",{children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Mi Lista de Deseos"}),l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})]})}):l.jsx("div",{children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Mi Lista de Deseos"}),t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Tu lista de deseos está vacía"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"Empieza a agregar productos a tu lista de deseos"}),l.jsx("div",{className:"mt-6",children:l.jsx($e,{to:"/shop",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Explorar Productos"})})]}):l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(r=>l.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[l.jsx($e,{to:`/product/${r.id}`,children:l.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden",children:l.jsx("img",{src:r.imageUrls&&r.imageUrls.length>0?typeof r.imageUrls[0]=="string"?r.imageUrls[0]:r.imageUrls[0].data:r.imageUrl||"https://via.placeholder.com/300x300.png?text=Moño",alt:r.name,className:"w-full h-64 object-cover",onError:o=>{o.target.onerror=null,o.target.src="https://via.placeholder.com/300x300.png?text=Moño"}})})}),l.jsxs("div",{className:"p-4",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:r.category})}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:r.name}),r.rating>0&&l.jsx("div",{className:"mt-2",children:l.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((o,c)=>l.jsx("svg",{className:`w-4 h-4 ${c<Math.floor(r.rating)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},c)),l.jsx("span",{className:"ml-1 text-sm text-gray-600",children:r.rating})]})}),l.jsx("div",{className:"mt-2",children:l.jsxs("span",{className:"text-lg font-semibold text-indigo-600",children:["$",parseFloat(r.price).toLocaleString("es-CO")]})}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx($e,{to:`/product/${r.id}`,className:"flex-1 bg-indigo-600 border border-transparent rounded-md py-2 px-4 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 text-center",children:"Ver Detalles"}),l.jsx("button",{onClick:()=>e(r.id),className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:l.jsx("svg",{className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},r.id))})]})})},EO=()=>l.jsx("footer",{className:"bg-gray-800 text-white py-8",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Tienda de Moños"}),l.jsx("p",{className:"text-gray-300",children:"La mejor selección de moños para todas las ocasiones."})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Enlaces Rápidos"}),l.jsxs("ul",{className:"space-y-2",children:[l.jsx("li",{children:l.jsx("a",{href:"/home",className:"text-gray-300 hover:text-white",children:"Inicio"})}),l.jsx("li",{children:l.jsx("a",{href:"/cart",className:"text-gray-300 hover:text-white",children:"Carrito"})}),l.jsx("li",{children:l.jsx("a",{href:"/login",className:"text-gray-300 hover:text-white",children:"Iniciar Sesión"})}),l.jsx("li",{children:l.jsx("a",{href:"/register",className:"text-gray-300 hover:text-white",children:"Registrarse"})})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Contacto"}),l.jsxs("address",{className:"text-gray-300 not-italic",children:[l.jsx("p",{children:"Email: info@tiendademosnos.com"}),l.jsx("p",{children:"Teléfono: (123) 456-7890"})]})]})]}),l.jsx("div",{className:"border-t border-gray-700 mt-8 pt-6 text-center text-gray-400",children:l.jsxs("p",{children:["© ",new Date().getFullYear()," Tienda de Moños. Todos los derechos reservados."]})})]})}),CN=$n.createContext(),$s=()=>$n.useContext(CN);function NO(){const[t,e]=D.useState(null),[n,r]=D.useState(null),[o,c]=D.useState(!0),[h,p]=D.useState(!1);D.useEffect(()=>jC(pr,async T=>{if(e(T),T)try{const R=ct(Pe,"users",T.uid),U=await zs(R);if(U.exists()){const $=U.data();r($),p($.role==="admin")}else r(null),p(!1)}catch(R){console.error("Error fetching user profile:",R),r(null),p(!1)}else r(null),p(!1);c(!1)}),[]);const g={currentUser:t,userProfile:n,isAdmin:h};if(o)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})});const y=({children:_,adminOnly:T=!1})=>t?T&&!h?l.jsx(Mp,{to:"/home"}):_:l.jsx(Mp,{to:"/login"}),v=({children:_})=>t?l.jsx(Mp,{to:"/home"}):_;return l.jsx(CN.Provider,{value:g,children:l.jsx(SI,{children:l.jsx(CI,{children:l.jsxs("div",{className:"flex flex-col min-h-screen",children:[l.jsx(so,{}),l.jsx("main",{className:"flex-grow",children:l.jsxs(rj,{children:[l.jsx(kn,{path:"/",element:l.jsx(eg,{})}),l.jsx(kn,{path:"/home",element:l.jsx(eg,{})}),l.jsx(kn,{path:"/shop",element:l.jsx(eg,{})}),l.jsx(kn,{path:"/product/:id",element:l.jsx(qP,{})}),l.jsx(kn,{path:"/cart",element:l.jsx(HP,{})}),l.jsx(kn,{path:"/wishlist",element:l.jsx(_O,{})}),l.jsx(kn,{path:"/checkout",element:l.jsx(y,{children:l.jsx(dO,{})})}),l.jsx(kn,{path:"/profile",element:l.jsx(y,{children:l.jsx(hO,{})})}),l.jsx(kn,{path:"/orders",element:l.jsx(y,{children:l.jsx(wO,{})})}),l.jsx(kn,{path:"/login",element:l.jsx(v,{children:l.jsx(fO,{})})}),l.jsx(kn,{path:"/register",element:l.jsx(v,{children:l.jsx(mO,{})})}),l.jsx(kn,{path:"/reset-password",element:l.jsx(v,{children:l.jsx(pO,{})})}),l.jsx(kn,{path:"/admin",element:l.jsx(y,{adminOnly:!0,children:l.jsx(xO,{})})}),l.jsx(kn,{path:"/coupon-test",element:l.jsx(y,{adminOnly:!0,children:l.jsx(bO,{})})})]})}),l.jsx(EO,{})]})})})})}const TO={"client-id":"ECmX0zT4f25SE12Wz3vY6RNnLLG1iK_uOE1UvckTz5o2Pn9DhFtVpeKOBvJSLGu1MpPYduxBNjUWPKwP",currency:"COP",intent:"capture"};fA.createRoot(document.getElementById("root")).render(l.jsx(D.StrictMode,{children:l.jsx(uO,{options:TO,children:l.jsx(jj,{children:l.jsx(NO,{})})})}));
