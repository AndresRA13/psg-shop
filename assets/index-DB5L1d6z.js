(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function vN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ip={exports:{}},Gc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yw;function xN(){if(yw)return Gc;yw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,l){var d=null;if(l!==void 0&&(d=""+l),o.key!==void 0&&(d=""+o.key),"key"in o){l={};for(var p in o)p!=="key"&&(l[p]=o[p])}else l=o;return o=l.ref,{$$typeof:t,type:s,key:d,ref:o!==void 0?o:null,props:l}}return Gc.Fragment=e,Gc.jsx=n,Gc.jsxs=n,Gc}var vw;function wN(){return vw||(vw=1,Ip.exports=xN()),Ip.exports}var u=wN(),kp={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw;function bN(){if(xw)return Le;xw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.iterator;function T(L){return L===null||typeof L!="object"?null:(L=_&&L[_]||L["@@iterator"],typeof L=="function"?L:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,U={};function j(L,ue,pe){this.props=L,this.context=ue,this.refs=U,this.updater=pe||I}j.prototype.isReactComponent={},j.prototype.setState=function(L,ue){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ue,"setState")},j.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function q(){}q.prototype=j.prototype;function z(L,ue,pe){this.props=L,this.context=ue,this.refs=U,this.updater=pe||I}var F=z.prototype=new q;F.constructor=z,V(F,j.prototype),F.isPureReactComponent=!0;var ie=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},de=Object.prototype.hasOwnProperty;function k(L,ue,pe,te,ce,ge){return pe=ge.ref,{$$typeof:t,type:L,key:ue,ref:pe!==void 0?pe:null,props:ge}}function A(L,ue){return k(L.type,ue,void 0,void 0,void 0,L.props)}function S(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function M(L){var ue={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(pe){return ue[pe]})}var P=/\/+/g;function O(L,ue){return typeof L=="object"&&L!==null&&L.key!=null?M(""+L.key):ue.toString(36)}function C(){}function Ce(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(C,C):(L.status="pending",L.then(function(ue){L.status==="pending"&&(L.status="fulfilled",L.value=ue)},function(ue){L.status==="pending"&&(L.status="rejected",L.reason=ue)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function _e(L,ue,pe,te,ce){var ge=typeof L;(ge==="undefined"||ge==="boolean")&&(L=null);var he=!1;if(L===null)he=!0;else switch(ge){case"bigint":case"string":case"number":he=!0;break;case"object":switch(L.$$typeof){case t:case e:he=!0;break;case x:return he=L._init,_e(he(L._payload),ue,pe,te,ce)}}if(he)return ce=ce(L),he=te===""?"."+O(L,0):te,ie(ce)?(pe="",he!=null&&(pe=he.replace(P,"$&/")+"/"),_e(ce,ue,pe,"",function(kn){return kn})):ce!=null&&(S(ce)&&(ce=A(ce,pe+(ce.key==null||L&&L.key===ce.key?"":(""+ce.key).replace(P,"$&/")+"/")+he)),ue.push(ce)),1;he=0;var Be=te===""?".":te+":";if(ie(L))for(var rt=0;rt<L.length;rt++)te=L[rt],ge=Be+O(te,rt),he+=_e(te,ue,pe,ge,ce);else if(rt=T(L),typeof rt=="function")for(L=rt.call(L),rt=0;!(te=L.next()).done;)te=te.value,ge=Be+O(te,rt++),he+=_e(te,ue,pe,ge,ce);else if(ge==="object"){if(typeof L.then=="function")return _e(Ce(L),ue,pe,te,ce);throw ue=String(L),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return he}function G(L,ue,pe){if(L==null)return L;var te=[],ce=0;return _e(L,te,"","",function(ge){return ue.call(pe,ge,ce++)}),te}function oe(L){if(L._status===-1){var ue=L._result;ue=ue(),ue.then(function(pe){(L._status===0||L._status===-1)&&(L._status=1,L._result=pe)},function(pe){(L._status===0||L._status===-1)&&(L._status=2,L._result=pe)}),L._status===-1&&(L._status=0,L._result=ue)}if(L._status===1)return L._result.default;throw L._result}var ye=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Ue(){}return Le.Children={map:G,forEach:function(L,ue,pe){G(L,function(){ue.apply(this,arguments)},pe)},count:function(L){var ue=0;return G(L,function(){ue++}),ue},toArray:function(L){return G(L,function(ue){return ue})||[]},only:function(L){if(!S(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Le.Component=j,Le.Fragment=n,Le.Profiler=o,Le.PureComponent=z,Le.StrictMode=s,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,Le.__COMPILER_RUNTIME={__proto__:null,c:function(L){return ee.H.useMemoCache(L)}},Le.cache=function(L){return function(){return L.apply(null,arguments)}},Le.cloneElement=function(L,ue,pe){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var te=V({},L.props),ce=L.key,ge=void 0;if(ue!=null)for(he in ue.ref!==void 0&&(ge=void 0),ue.key!==void 0&&(ce=""+ue.key),ue)!de.call(ue,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&ue.ref===void 0||(te[he]=ue[he]);var he=arguments.length-2;if(he===1)te.children=pe;else if(1<he){for(var Be=Array(he),rt=0;rt<he;rt++)Be[rt]=arguments[rt+2];te.children=Be}return k(L.type,ce,void 0,void 0,ge,te)},Le.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},Le.createElement=function(L,ue,pe){var te,ce={},ge=null;if(ue!=null)for(te in ue.key!==void 0&&(ge=""+ue.key),ue)de.call(ue,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ce[te]=ue[te]);var he=arguments.length-2;if(he===1)ce.children=pe;else if(1<he){for(var Be=Array(he),rt=0;rt<he;rt++)Be[rt]=arguments[rt+2];ce.children=Be}if(L&&L.defaultProps)for(te in he=L.defaultProps,he)ce[te]===void 0&&(ce[te]=he[te]);return k(L,ge,void 0,void 0,null,ce)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(L){return{$$typeof:p,render:L}},Le.isValidElement=S,Le.lazy=function(L){return{$$typeof:x,_payload:{_status:-1,_result:L},_init:oe}},Le.memo=function(L,ue){return{$$typeof:y,type:L,compare:ue===void 0?null:ue}},Le.startTransition=function(L){var ue=ee.T,pe={};ee.T=pe;try{var te=L(),ce=ee.S;ce!==null&&ce(pe,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(Ue,ye)}catch(ge){ye(ge)}finally{ee.T=ue}},Le.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},Le.use=function(L){return ee.H.use(L)},Le.useActionState=function(L,ue,pe){return ee.H.useActionState(L,ue,pe)},Le.useCallback=function(L,ue){return ee.H.useCallback(L,ue)},Le.useContext=function(L){return ee.H.useContext(L)},Le.useDebugValue=function(){},Le.useDeferredValue=function(L,ue){return ee.H.useDeferredValue(L,ue)},Le.useEffect=function(L,ue,pe){var te=ee.H;if(typeof pe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(L,ue)},Le.useId=function(){return ee.H.useId()},Le.useImperativeHandle=function(L,ue,pe){return ee.H.useImperativeHandle(L,ue,pe)},Le.useInsertionEffect=function(L,ue){return ee.H.useInsertionEffect(L,ue)},Le.useLayoutEffect=function(L,ue){return ee.H.useLayoutEffect(L,ue)},Le.useMemo=function(L,ue){return ee.H.useMemo(L,ue)},Le.useOptimistic=function(L,ue){return ee.H.useOptimistic(L,ue)},Le.useReducer=function(L,ue,pe){return ee.H.useReducer(L,ue,pe)},Le.useRef=function(L){return ee.H.useRef(L)},Le.useState=function(L){return ee.H.useState(L)},Le.useSyncExternalStore=function(L,ue,pe){return ee.H.useSyncExternalStore(L,ue,pe)},Le.useTransition=function(){return ee.H.useTransition()},Le.version="19.1.1",Le}var ww;function Lg(){return ww||(ww=1,kp.exports=bN()),kp.exports}var R=Lg();const qn=vN(R);var Dp={exports:{}},Kc={},Op={exports:{}},Pp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bw;function _N(){return bw||(bw=1,(function(t){function e(G,oe){var ye=G.length;G.push(oe);e:for(;0<ye;){var Ue=ye-1>>>1,L=G[Ue];if(0<o(L,oe))G[Ue]=oe,G[ye]=L,ye=Ue;else break e}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var oe=G[0],ye=G.pop();if(ye!==oe){G[0]=ye;e:for(var Ue=0,L=G.length,ue=L>>>1;Ue<ue;){var pe=2*(Ue+1)-1,te=G[pe],ce=pe+1,ge=G[ce];if(0>o(te,ye))ce<L&&0>o(ge,te)?(G[Ue]=ge,G[ce]=ye,Ue=ce):(G[Ue]=te,G[pe]=ye,Ue=pe);else if(ce<L&&0>o(ge,ye))G[Ue]=ge,G[ce]=ye,Ue=ce;else break e}}return oe}function o(G,oe){var ye=G.sortIndex-oe.sortIndex;return ye!==0?ye:G.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var d=Date,p=d.now();t.unstable_now=function(){return d.now()-p}}var g=[],y=[],x=1,_=null,T=3,I=!1,V=!1,U=!1,j=!1,q=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function ie(G){for(var oe=n(y);oe!==null;){if(oe.callback===null)s(y);else if(oe.startTime<=G)s(y),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=n(y)}}function ee(G){if(U=!1,ie(G),!V)if(n(g)!==null)V=!0,de||(de=!0,O());else{var oe=n(y);oe!==null&&_e(ee,oe.startTime-G)}}var de=!1,k=-1,A=5,S=-1;function M(){return j?!0:!(t.unstable_now()-S<A)}function P(){if(j=!1,de){var G=t.unstable_now();S=G;var oe=!0;try{e:{V=!1,U&&(U=!1,z(k),k=-1),I=!0;var ye=T;try{t:{for(ie(G),_=n(g);_!==null&&!(_.expirationTime>G&&M());){var Ue=_.callback;if(typeof Ue=="function"){_.callback=null,T=_.priorityLevel;var L=Ue(_.expirationTime<=G);if(G=t.unstable_now(),typeof L=="function"){_.callback=L,ie(G),oe=!0;break t}_===n(g)&&s(g),ie(G)}else s(g);_=n(g)}if(_!==null)oe=!0;else{var ue=n(y);ue!==null&&_e(ee,ue.startTime-G),oe=!1}}break e}finally{_=null,T=ye,I=!1}oe=void 0}}finally{oe?O():de=!1}}}var O;if(typeof F=="function")O=function(){F(P)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ce=C.port2;C.port1.onmessage=P,O=function(){Ce.postMessage(null)}}else O=function(){q(P,0)};function _e(G,oe){k=q(function(){G(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(G){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var ye=T;T=oe;try{return G()}finally{T=ye}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(G,oe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ye=T;T=G;try{return oe()}finally{T=ye}},t.unstable_scheduleCallback=function(G,oe,ye){var Ue=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ue+ye:Ue):ye=Ue,G){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ye+L,G={id:x++,callback:oe,priorityLevel:G,startTime:ye,expirationTime:L,sortIndex:-1},ye>Ue?(G.sortIndex=ye,e(y,G),n(g)===null&&G===n(y)&&(U?(z(k),k=-1):U=!0,_e(ee,ye-Ue))):(G.sortIndex=L,e(g,G),V||I||(V=!0,de||(de=!0,O()))),G},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(G){var oe=T;return function(){var ye=T;T=oe;try{return G.apply(this,arguments)}finally{T=ye}}}})(Pp)),Pp}var _w;function EN(){return _w||(_w=1,Op.exports=_N()),Op.exports}var Mp={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew;function TN(){if(Ew)return yn;Ew=1;var t=Lg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(g,y,x){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:g,containerInfo:y,implementation:x}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,yn.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(g,y,null,x)},yn.flushSync=function(g){var y=d.T,x=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=x,s.d.f()}},yn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},yn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},yn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,_=p(x,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,I=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:I}):x==="script"&&s.d.X(g,{crossOrigin:_,integrity:T,fetchPriority:I,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},yn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},yn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,_=p(x,y.crossOrigin);s.d.L(g,x,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},yn.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},yn.requestFormReset=function(g){s.d.r(g)},yn.unstable_batchedUpdates=function(g,y){return g(y)},yn.useFormState=function(g,y,x){return d.H.useFormState(g,y,x)},yn.useFormStatus=function(){return d.H.useHostTransitionStatus()},yn.version="19.1.1",yn}var Tw;function AN(){if(Tw)return Mp.exports;Tw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Mp.exports=TN(),Mp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw;function NN(){if(Aw)return Kc;Aw=1;var t=EN(),e=Lg(),n=AN();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function d(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(s(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var a=r,c=i;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return p(f),r;if(m===c)return p(f),i;m=m.sibling}throw Error(s(188))}if(a.return!==c.return)a=f,c=m;else{for(var b=!1,E=f.child;E;){if(E===a){b=!0,a=f,c=m;break}if(E===c){b=!0,c=f,a=m;break}E=E.sibling}if(!b){for(E=m.child;E;){if(E===a){b=!0,a=m,c=f;break}if(E===c){b=!0,c=m,a=f;break}E=E.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?r:i}function y(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=y(r),i!==null)return i;r=r.sibling}return null}var x=Object.assign,_=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),F=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function O(r){return r===null||typeof r!="object"?null:(r=P&&r[P]||r["@@iterator"],typeof r=="function"?r:null)}var C=Symbol.for("react.client.reference");function Ce(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===C?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case V:return"Fragment";case j:return"Profiler";case U:return"StrictMode";case ee:return"Suspense";case de:return"SuspenseList";case S:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case I:return"Portal";case F:return(r.displayName||"Context")+".Provider";case z:return(r._context.displayName||"Context")+".Consumer";case ie:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case k:return i=r.displayName||null,i!==null?i:Ce(r.type)||"Memo";case A:i=r._payload,r=r._init;try{return Ce(r(i))}catch{}}return null}var _e=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ue=[],L=-1;function ue(r){return{current:r}}function pe(r){0>L||(r.current=Ue[L],Ue[L]=null,L--)}function te(r,i){L++,Ue[L]=r.current,r.current=i}var ce=ue(null),ge=ue(null),he=ue(null),Be=ue(null);function rt(r,i){switch(te(he,i),te(ge,r),te(ce,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?$x(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=$x(i),r=Gx(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}pe(ce),te(ce,r)}function kn(){pe(ce),pe(ge),pe(he)}function Ss(r){r.memoizedState!==null&&te(Be,r);var i=ce.current,a=Gx(i,r.type);i!==a&&(te(ge,r),te(ce,a))}function Qr(r){ge.current===r&&(pe(ce),pe(ge)),Be.current===r&&(pe(Be),zc._currentValue=ye)}var Cs=Object.prototype.hasOwnProperty,Ye=t.unstable_scheduleCallback,Rs=t.unstable_cancelCallback,vo=t.unstable_shouldYield,js=t.unstable_requestPaint,an=t.unstable_now,xo=t.unstable_getCurrentPriorityLevel,Tt=t.unstable_ImmediatePriority,Ut=t.unstable_UserBlockingPriority,on=t.unstable_NormalPriority,Is=t.unstable_LowPriority,Tr=t.unstable_IdlePriority,wo=t.log,Ar=t.unstable_setDisableYieldValue,Xr=null,Zt=null;function Dn(r){if(typeof wo=="function"&&Ar(r),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(Xr,r)}catch{}}var ft=Math.clz32?Math.clz32:_o,On=Math.log,bo=Math.LN2;function _o(r){return r>>>=0,r===0?32:31-(On(r)/bo|0)|0}var rr=256,Nr=4194304;function Pn(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Tn(r,i,a){var c=r.pendingLanes;if(c===0)return 0;var f=0,m=r.suspendedLanes,b=r.pingedLanes;r=r.warmLanes;var E=c&134217727;return E!==0?(c=E&~m,c!==0?f=Pn(c):(b&=E,b!==0?f=Pn(b):a||(a=E&~r,a!==0&&(f=Pn(a))))):(E=c&~m,E!==0?f=Pn(E):b!==0?f=Pn(b):a||(a=c&~r,a!==0&&(f=Pn(a)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:f}function Sr(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function di(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ha(){var r=rr;return rr<<=1,(rr&4194048)===0&&(rr=256),r}function Wr(){var r=Nr;return Nr<<=1,(Nr&62914560)===0&&(Nr=4194304),r}function hi(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function At(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Eo(r,i,a,c,f,m){var b=r.pendingLanes;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=a,r.entangledLanes&=a,r.errorRecoveryDisabledLanes&=a,r.shellSuspendCounter=0;var E=r.entanglements,D=r.expirationTimes,Q=r.hiddenUpdates;for(a=b&~a;0<a;){var ne=31-ft(a),ae=1<<ne;E[ne]=0,D[ne]=-1;var X=Q[ne];if(X!==null)for(Q[ne]=null,ne=0;ne<X.length;ne++){var W=X[ne];W!==null&&(W.lane&=-536870913)}a&=~ae}c!==0&&Cr(r,c,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(b&~i))}function Cr(r,i,a){r.pendingLanes|=i,r.suspendedLanes&=~i;var c=31-ft(i);r.entangledLanes|=i,r.entanglements[c]=r.entanglements[c]|1073741824|a&4194090}function Zr(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var c=31-ft(a),f=1<<c;f&i|r[c]&i&&(r[c]|=i),a&=~f}}function fa(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ma(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Rr(){var r=oe.p;return r!==0?r:(r=window.event,r===void 0?32:dw(r.type))}function $l(r,i){var a=oe.p;try{return oe.p=r,i()}finally{oe.p=a}}var sr=Math.random().toString(36).slice(2),H="__reactFiber$"+sr,me="__reactProps$"+sr,Ee="__reactContainer$"+sr,We="__reactEvents$"+sr,Gt="__reactListeners$"+sr,ir="__reactHandles$"+sr,An="__reactResources$"+sr,ar="__reactMarker$"+sr;function fi(r){delete r[H],delete r[me],delete r[We],delete r[Gt],delete r[ir]}function or(r){var i=r[H];if(i)return i;for(var a=r.parentNode;a;){if(i=a[Ee]||a[H]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=Xx(r);r!==null;){if(a=r[H])return a;r=Xx(r)}return i}r=a,a=r.parentNode}return null}function jr(r){if(r=r[H]||r[Ee]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function Jr(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function es(r){var i=r[An];return i||(i=r[An]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function mt(r){r[ar]=!0}var To=new Set,pa={};function ts(r,i){ns(r,i),ns(r+"Capture",i)}function ns(r,i){for(pa[r]=i,r=0;r<i.length;r++)To.add(i[r])}var ga=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rs={},Ao={};function Vf(r){return Cs.call(Ao,r)?!0:Cs.call(rs,r)?!1:ga.test(r)?Ao[r]=!0:(rs[r]=!0,!1)}function ya(r,i,a){if(Vf(i))if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+a)}}function va(r,i,a){if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+a)}}function lr(r,i,a,c){if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttributeNS(i,a,""+c)}}var xa,No;function ks(r){if(xa===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);xa=i&&i[1]||"",No=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xa+r+No}var So=!1;function Co(r,i){if(!r||So)return"";So=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(W){var X=W}Reflect.construct(r,[],ae)}else{try{ae.call()}catch(W){X=W}r.call(ae.prototype)}}else{try{throw Error()}catch(W){X=W}(ae=r())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),b=m[0],E=m[1];if(b&&E){var D=b.split(`
`),Q=E.split(`
`);for(f=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(c===D.length||f===Q.length)for(c=D.length-1,f=Q.length-1;1<=c&&0<=f&&D[c]!==Q[f];)f--;for(;1<=c&&0<=f;c--,f--)if(D[c]!==Q[f]){if(c!==1||f!==1)do if(c--,f--,0>f||D[c]!==Q[f]){var ne=`
`+D[c].replace(" at new "," at ");return r.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",r.displayName)),ne}while(1<=c&&0<=f);break}}}finally{So=!1,Error.prepareStackTrace=a}return(a=r?r.displayName||r.name:"")?ks(a):""}function Uf(r){switch(r.tag){case 26:case 27:case 5:return ks(r.type);case 16:return ks("Lazy");case 13:return ks("Suspense");case 19:return ks("SuspenseList");case 0:case 15:return Co(r.type,!1);case 11:return Co(r.type.render,!1);case 1:return Co(r.type,!0);case 31:return ks("Activity");default:return""}}function Ir(r){try{var i="";do i+=Uf(r),r=r.return;while(r);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Nt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function mi(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function wa(r){var i=mi(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),c=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(b){c=""+b,m.call(this,b)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function pi(r){r._valueTracker||(r._valueTracker=wa(r))}function ot(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return r&&(c=mi(r)?r.checked?"true":"false":r.value),r=c,r!==a?(i.setValue(r),!0):!1}function Ds(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ba=/[\n"\\]/g;function Jt(r){return r.replace(ba,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Gl(r,i,a,c,f,m,b,E){r.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?r.type=b:r.removeAttribute("type"),i!=null?b==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Nt(i)):r.value!==""+Nt(i)&&(r.value=""+Nt(i)):b!=="submit"&&b!=="reset"||r.removeAttribute("value"),i!=null?Yl(r,b,Nt(i)):a!=null?Yl(r,b,Nt(a)):c!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.name=""+Nt(E):r.removeAttribute("name")}function Kl(r,i,a,c,f,m,b,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;a=a!=null?""+Nt(a):"",i=i!=null?""+Nt(i):a,E||i===r.value||(r.value=i),r.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=E?r.checked:!!c,r.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.name=b)}function Yl(r,i,a){i==="number"&&Ds(r.ownerDocument)===r||r.defaultValue===""+a||(r.defaultValue=""+a)}function gi(r,i,a,c){if(r=r.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=i.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&c&&(r[a].defaultSelected=!0)}else{for(a=""+Nt(a),i=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,c&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function Lu(r,i,a){if(i!=null&&(i=""+Nt(i),i!==r.value&&(r.value=i),a==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=a!=null?""+Nt(a):""}function Vu(r,i,a,c){if(i==null){if(c!=null){if(a!=null)throw Error(s(92));if(_e(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),i=a}a=Nt(i),r.defaultValue=a,c=r.textContent,c===a&&c!==""&&c!==null&&(r.value=c)}function cr(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var Os=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(r,i,a){var c=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":c?r.setProperty(i,a):typeof a!="number"||a===0||Os.has(i)?i==="float"?r.cssFloat=a:r[i]=(""+a).trim():r[i]=a+"px"}function Xl(r,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&a[f]!==c&&Ql(r,f,c)}else for(var m in i)i.hasOwnProperty(m)&&Ql(r,m,i[m])}function Ro(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kr(r){return Bu.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Wl=null;function Zl(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var yi=null,Nn=null;function zu(r){var i=jr(r);if(i&&(r=i.stateNode)){var a=r[me]||null;e:switch(r=i.stateNode,i.type){case"input":if(Gl(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Jt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==r&&c.form===r.form){var f=c[me]||null;if(!f)throw Error(s(90));Gl(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)c=a[i],c.form===r.form&&ot(c)}break e;case"textarea":Lu(r,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&gi(r,!!a.multiple,i,!1)}}}var _a=!1;function Ea(r,i,a){if(_a)return r(i,a);_a=!0;try{var c=r(i);return c}finally{if(_a=!1,(yi!==null||Nn!==null)&&(jd(),yi&&(i=yi,r=Nn,Nn=yi=null,zu(i),r)))for(i=0;i<r.length;i++)zu(r[i])}}function vi(r,i){var a=r.stateNode;if(a===null)return null;var c=a[me]||null;if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if(Sn)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{Ps=!1}var ur=null,pt=null,jo=null;function Fu(){if(jo)return jo;var r,i=pt,a=i.length,c,f="value"in ur?ur.value:ur.textContent,m=f.length;for(r=0;r<a&&i[r]===f[r];r++);var b=a-r;for(c=1;c<=b&&i[a-c]===f[m-c];c++);return jo=f.slice(r,1<c?1-c:void 0)}function Ta(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Aa(){return!0}function Jl(){return!1}function Kt(r){function i(a,c,f,m,b){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var E in r)r.hasOwnProperty(E)&&(a=r[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Aa:Jl,this.isPropagationStopped=Jl,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),i}var pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=Kt(pn),Sa=x({},pn,{view:0,detail:0}),Ca=Kt(Sa),Io,Ra,ss,ja=x({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oo,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ss&&(ss&&r.type==="mousemove"?(Io=r.screenX-ss.screenX,Ra=r.screenY-ss.screenY):Ra=Io=0,ss=r),Io)},movementY:function(r){return"movementY"in r?r.movementY:Ra}}),Ia=Kt(ja),Bf=x({},ja,{dataTransfer:0}),qu=Kt(Bf),ka=x({},Sa,{relatedTarget:0}),ko=Kt(ka),Hu=x({},pn,{animationName:0,elapsedTime:0,pseudoElement:0}),ec=Kt(Hu),tc=x({},pn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),$u=Kt(tc),Do=x({},pn,{data:0}),nc=Kt(Do),Gu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ms={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yu(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Ku[r])?!!i[r]:!1}function Oo(){return Yu}var Qu=x({},Sa,{key:function(r){if(r.key){var i=Gu[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ta(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ms[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oo,charCode:function(r){return r.type==="keypress"?Ta(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ta(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Po=Kt(Qu),Cn=x({},ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rc=Kt(Cn),Xu=x({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oo}),wi=Kt(Xu),h=x({},pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),v=Kt(h),w=x({},ja,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),N=Kt(w),Y=x({},pn,{newState:0,oldState:0}),Z=Kt(Y),fe=[9,13,27,32],Pe=Sn&&"CompositionEvent"in window,wt=null;Sn&&"documentMode"in document&&(wt=document.documentMode);var st=Sn&&"TextEvent"in window&&!wt,kt=Sn&&(!Pe||wt&&8<wt&&11>=wt),$n=" ",is=!1;function Dr(r,i){switch(r){case"keyup":return fe.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Or(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Pr=!1;function sc(r,i){switch(r){case"compositionend":return Or(i);case"keypress":return i.which!==32?null:(is=!0,$n);case"textInput":return r=i.data,r===$n&&is?null:r;default:return null}}function $T(r,i){if(Pr)return r==="compositionend"||!Pe&&Dr(r,i)?(r=Fu(),jo=pt=ur=null,Pr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return kt&&i.locale!=="ko"?null:i.data;default:return null}}var GT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iy(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!GT[r.type]:i==="textarea"}function ay(r,i,a,c){yi?Nn?Nn.push(c):Nn=[c]:yi=c,i=Md(i,"onChange"),0<i.length&&(a=new Na("onChange","change",null,a,c),r.push({event:a,listeners:i}))}var ic=null,ac=null;function KT(r){Bx(r,0)}function Wu(r){var i=Jr(r);if(ot(i))return r}function oy(r,i){if(r==="change")return i}var ly=!1;if(Sn){var zf;if(Sn){var Ff="oninput"in document;if(!Ff){var cy=document.createElement("div");cy.setAttribute("oninput","return;"),Ff=typeof cy.oninput=="function"}zf=Ff}else zf=!1;ly=zf&&(!document.documentMode||9<document.documentMode)}function uy(){ic&&(ic.detachEvent("onpropertychange",dy),ac=ic=null)}function dy(r){if(r.propertyName==="value"&&Wu(ac)){var i=[];ay(i,ac,r,Zl(r)),Ea(KT,i)}}function YT(r,i,a){r==="focusin"?(uy(),ic=i,ac=a,ic.attachEvent("onpropertychange",dy)):r==="focusout"&&uy()}function QT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Wu(ac)}function XT(r,i){if(r==="click")return Wu(i)}function WT(r,i){if(r==="input"||r==="change")return Wu(i)}function ZT(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Gn=typeof Object.is=="function"?Object.is:ZT;function oc(r,i){if(Gn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!Cs.call(i,f)||!Gn(r[f],i[f]))return!1}return!0}function hy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function fy(r,i){var a=hy(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=i&&c>=i)return{node:a,offset:i-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=hy(a)}}function my(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?my(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function py(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Ds(r.document);i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=Ds(r.document)}return i}function qf(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var JT=Sn&&"documentMode"in document&&11>=document.documentMode,Mo=null,Hf=null,lc=null,$f=!1;function gy(r,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$f||Mo==null||Mo!==Ds(c)||(c=Mo,"selectionStart"in c&&qf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),lc&&oc(lc,c)||(lc=c,c=Md(Hf,"onSelect"),0<c.length&&(i=new Na("onSelect","select",null,i,a),r.push({event:i,listeners:c}),i.target=Mo)))}function Da(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var Lo={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionrun:Da("Transition","TransitionRun"),transitionstart:Da("Transition","TransitionStart"),transitioncancel:Da("Transition","TransitionCancel"),transitionend:Da("Transition","TransitionEnd")},Gf={},yy={};Sn&&(yy=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Oa(r){if(Gf[r])return Gf[r];if(!Lo[r])return r;var i=Lo[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in yy)return Gf[r]=i[a];return r}var vy=Oa("animationend"),xy=Oa("animationiteration"),wy=Oa("animationstart"),eA=Oa("transitionrun"),tA=Oa("transitionstart"),nA=Oa("transitioncancel"),by=Oa("transitionend"),_y=new Map,Kf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kf.push("scrollEnd");function Mr(r,i){_y.set(r,i),ts(i,[r])}var Ey=new WeakMap;function dr(r,i){if(typeof r=="object"&&r!==null){var a=Ey.get(r);return a!==void 0?a:(i={value:r,source:i,stack:Ir(i)},Ey.set(r,i),i)}return{value:r,source:i,stack:Ir(i)}}var hr=[],Vo=0,Yf=0;function Zu(){for(var r=Vo,i=Yf=Vo=0;i<r;){var a=hr[i];hr[i++]=null;var c=hr[i];hr[i++]=null;var f=hr[i];hr[i++]=null;var m=hr[i];if(hr[i++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}m!==0&&Ty(a,f,m)}}function Ju(r,i,a,c){hr[Vo++]=r,hr[Vo++]=i,hr[Vo++]=a,hr[Vo++]=c,Yf|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Qf(r,i,a,c){return Ju(r,i,a,c),ed(r)}function Uo(r,i){return Ju(r,null,null,i),ed(r)}function Ty(r,i,a){r.lanes|=a;var c=r.alternate;c!==null&&(c.lanes|=a);for(var f=!1,m=r.return;m!==null;)m.childLanes|=a,c=m.alternate,c!==null&&(c.childLanes|=a),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&i!==null&&(f=31-ft(a),r=m.hiddenUpdates,c=r[f],c===null?r[f]=[i]:c.push(i),i.lane=a|536870912),m):null}function ed(r){if(50<Dc)throw Dc=0,tp=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Bo={};function rA(r,i,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(r,i,a,c){return new rA(r,i,a,c)}function Xf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ls(r,i){var a=r.alternate;return a===null?(a=Kn(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&65011712,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a.refCleanup=r.refCleanup,a}function Ay(r,i){r.flags&=65011714;var a=r.alternate;return a===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,i=a.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function td(r,i,a,c,f,m){var b=0;if(c=r,typeof r=="function")Xf(r)&&(b=1);else if(typeof r=="string")b=iN(r,a,ce.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case S:return r=Kn(31,a,i,f),r.elementType=S,r.lanes=m,r;case V:return Pa(a.children,f,m,i);case U:b=8,f|=24;break;case j:return r=Kn(12,a,i,f|2),r.elementType=j,r.lanes=m,r;case ee:return r=Kn(13,a,i,f),r.elementType=ee,r.lanes=m,r;case de:return r=Kn(19,a,i,f),r.elementType=de,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case q:case F:b=10;break e;case z:b=9;break e;case ie:b=11;break e;case k:b=14;break e;case A:b=16,c=null;break e}b=29,a=Error(s(130,r===null?"null":typeof r,"")),c=null}return i=Kn(b,a,i,f),i.elementType=r,i.type=c,i.lanes=m,i}function Pa(r,i,a,c){return r=Kn(7,r,c,i),r.lanes=a,r}function Wf(r,i,a){return r=Kn(6,r,null,i),r.lanes=a,r}function Zf(r,i,a){return i=Kn(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var zo=[],Fo=0,nd=null,rd=0,fr=[],mr=0,Ma=null,Vs=1,Us="";function La(r,i){zo[Fo++]=rd,zo[Fo++]=nd,nd=r,rd=i}function Ny(r,i,a){fr[mr++]=Vs,fr[mr++]=Us,fr[mr++]=Ma,Ma=r;var c=Vs;r=Us;var f=32-ft(c)-1;c&=~(1<<f),a+=1;var m=32-ft(i)+f;if(30<m){var b=f-f%5;m=(c&(1<<b)-1).toString(32),c>>=b,f-=b,Vs=1<<32-ft(i)+f|a<<f|c,Us=m+r}else Vs=1<<m|a<<f|c,Us=r}function Jf(r){r.return!==null&&(La(r,1),Ny(r,1,0))}function em(r){for(;r===nd;)nd=zo[--Fo],zo[Fo]=null,rd=zo[--Fo],zo[Fo]=null;for(;r===Ma;)Ma=fr[--mr],fr[mr]=null,Us=fr[--mr],fr[mr]=null,Vs=fr[--mr],fr[mr]=null}var Rn=null,Rt=null,et=!1,Va=null,as=!1,tm=Error(s(519));function Ua(r){var i=Error(s(418,""));throw dc(dr(i,r)),tm}function Sy(r){var i=r.stateNode,a=r.type,c=r.memoizedProps;switch(i[H]=r,i[me]=c,a){case"dialog":qe("cancel",i),qe("close",i);break;case"iframe":case"object":case"embed":qe("load",i);break;case"video":case"audio":for(a=0;a<Pc.length;a++)qe(Pc[a],i);break;case"source":qe("error",i);break;case"img":case"image":case"link":qe("error",i),qe("load",i);break;case"details":qe("toggle",i);break;case"input":qe("invalid",i),Kl(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),pi(i);break;case"select":qe("invalid",i);break;case"textarea":qe("invalid",i),Vu(i,c.value,c.defaultValue,c.children),pi(i)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||c.suppressHydrationWarning===!0||Hx(i.textContent,a)?(c.popover!=null&&(qe("beforetoggle",i),qe("toggle",i)),c.onScroll!=null&&qe("scroll",i),c.onScrollEnd!=null&&qe("scrollend",i),c.onClick!=null&&(i.onclick=Ld),i=!0):i=!1,i||Ua(r)}function Cy(r){for(Rn=r.return;Rn;)switch(Rn.tag){case 5:case 13:as=!1;return;case 27:case 3:as=!0;return;default:Rn=Rn.return}}function cc(r){if(r!==Rn)return!1;if(!et)return Cy(r),et=!0,!1;var i=r.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=r.type,a=!(a!=="form"&&a!=="button")||yp(r.type,r.memoizedProps)),a=!a),a&&Rt&&Ua(r),Cy(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(a=r.data,a==="/$"){if(i===0){Rt=Vr(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;r=r.nextSibling}Rt=null}}else i===27?(i=Rt,Mi(r.type)?(r=bp,bp=null,Rt=r):Rt=i):Rt=Rn?Vr(r.stateNode.nextSibling):null;return!0}function uc(){Rt=Rn=null,et=!1}function Ry(){var r=Va;return r!==null&&(Vn===null?Vn=r:Vn.push.apply(Vn,r),Va=null),r}function dc(r){Va===null?Va=[r]:Va.push(r)}var nm=ue(null),Ba=null,Bs=null;function bi(r,i,a){te(nm,i._currentValue),i._currentValue=a}function zs(r){r._currentValue=nm.current,pe(nm)}function rm(r,i,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),r===a)break;r=r.return}}function sm(r,i,a,c){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var D=0;D<i.length;D++)if(E.context===i[D]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),rm(m.return,a,r),c||(b=null);break e}m=E.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(s(341));b.lanes|=a,m=b.alternate,m!==null&&(m.lanes|=a),rm(b,a,r),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===r){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function hc(r,i,a,c){r=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var E=f.type;Gn(f.pendingProps.value,b.value)||(r!==null?r.push(E):r=[E])}}else if(f===Be.current){if(b=f.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(zc):r=[zc])}f=f.return}r!==null&&sm(i,r,a,c),i.flags|=262144}function sd(r){for(r=r.firstContext;r!==null;){if(!Gn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function za(r){Ba=r,Bs=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function gn(r){return jy(Ba,r)}function id(r,i){return Ba===null&&za(r),jy(r,i)}function jy(r,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Bs===null){if(r===null)throw Error(s(308));Bs=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Bs=Bs.next=i;return a}var sA=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(a,c){r.push(c)}};this.abort=function(){i.aborted=!0,r.forEach(function(a){return a()})}},iA=t.unstable_scheduleCallback,aA=t.unstable_NormalPriority,Yt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function im(){return{controller:new sA,data:new Map,refCount:0}}function fc(r){r.refCount--,r.refCount===0&&iA(aA,function(){r.controller.abort()})}var mc=null,am=0,qo=0,Ho=null;function oA(r,i){if(mc===null){var a=mc=[];am=0,qo=lp(),Ho={status:"pending",value:void 0,then:function(c){a.push(c)}}}return am++,i.then(Iy,Iy),i}function Iy(){if(--am===0&&mc!==null){Ho!==null&&(Ho.status="fulfilled");var r=mc;mc=null,qo=0,Ho=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function lA(r,i){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return r.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var ky=G.S;G.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&oA(r,i),ky!==null&&ky(r,i)};var Fa=ue(null);function om(){var r=Fa.current;return r!==null?r:gt.pooledCache}function ad(r,i){i===null?te(Fa,Fa.current):te(Fa,i.pool)}function Dy(){var r=om();return r===null?null:{parent:Yt._currentValue,pool:r}}var pc=Error(s(460)),Oy=Error(s(474)),od=Error(s(542)),lm={then:function(){}};function Py(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ld(){}function My(r,i,a){switch(a=r[a],a===void 0?r.push(i):a!==i&&(i.then(ld,ld),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Vy(r),r;default:if(typeof i.status=="string")i.then(ld,ld);else{if(r=gt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Vy(r),r}throw gc=i,pc}}var gc=null;function Ly(){if(gc===null)throw Error(s(459));var r=gc;return gc=null,r}function Vy(r){if(r===pc||r===od)throw Error(s(483))}var _i=!1;function cm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function um(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ei(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ti(r,i,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(it&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=ed(r),Ty(r,null,a),i}return Ju(r,c,i,a),ed(r)}function yc(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var c=i.lanes;c&=r.pendingLanes,a|=c,i.lanes=a,Zr(r,a)}}function dm(r,i){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,a=a.next}while(a!==null);m===null?f=m=i:m=m.next=i}else f=m=i;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}var hm=!1;function vc(){if(hm){var r=Ho;if(r!==null)throw r}}function xc(r,i,a,c){hm=!1;var f=r.updateQueue;_i=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var D=E,Q=D.next;D.next=null,b===null?m=Q:b.next=Q,b=D;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,E=ne.lastBaseUpdate,E!==b&&(E===null?ne.firstBaseUpdate=Q:E.next=Q,ne.lastBaseUpdate=D))}if(m!==null){var ae=f.baseState;b=0,ne=Q=D=null,E=m;do{var X=E.lane&-536870913,W=X!==E.lane;if(W?(Qe&X)===X:(c&X)===X){X!==0&&X===qo&&(hm=!0),ne!==null&&(ne=ne.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ke=r,Se=E;X=i;var ut=a;switch(Se.tag){case 1:if(ke=Se.payload,typeof ke=="function"){ae=ke.call(ut,ae,X);break e}ae=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Se.payload,X=typeof ke=="function"?ke.call(ut,ae,X):ke,X==null)break e;ae=x({},ae,X);break e;case 2:_i=!0}}X=E.callback,X!==null&&(r.flags|=64,W&&(r.flags|=8192),W=f.callbacks,W===null?f.callbacks=[X]:W.push(X))}else W={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ne===null?(Q=ne=W,D=ae):ne=ne.next=W,b|=X;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;W=E,E=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);ne===null&&(D=ae),f.baseState=D,f.firstBaseUpdate=Q,f.lastBaseUpdate=ne,m===null&&(f.shared.lanes=0),ki|=b,r.lanes=b,r.memoizedState=ae}}function Uy(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function By(r,i){var a=r.callbacks;if(a!==null)for(r.callbacks=null,r=0;r<a.length;r++)Uy(a[r],i)}var $o=ue(null),cd=ue(0);function zy(r,i){r=Ys,te(cd,r),te($o,i),Ys=r|i.baseLanes}function fm(){te(cd,Ys),te($o,$o.current)}function mm(){Ys=cd.current,pe($o),pe(cd)}var Ai=0,Ve=null,lt=null,Bt=null,ud=!1,Go=!1,qa=!1,dd=0,wc=0,Ko=null,cA=0;function Dt(){throw Error(s(321))}function pm(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!Gn(r[a],i[a]))return!1;return!0}function gm(r,i,a,c,f,m){return Ai=m,Ve=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=r===null||r.memoizedState===null?Tv:Av,qa=!1,m=a(c,f),qa=!1,Go&&(m=qy(i,a,c,f)),Fy(r),m}function Fy(r){G.H=yd;var i=lt!==null&&lt.next!==null;if(Ai=0,Bt=lt=Ve=null,ud=!1,wc=0,Ko=null,i)throw Error(s(300));r===null||en||(r=r.dependencies,r!==null&&sd(r)&&(en=!0))}function qy(r,i,a,c){Ve=r;var f=0;do{if(Go&&(Ko=null),wc=0,Go=!1,25<=f)throw Error(s(301));if(f+=1,Bt=lt=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}G.H=gA,m=i(a,c)}while(Go);return m}function uA(){var r=G.H,i=r.useState()[0];return i=typeof i.then=="function"?bc(i):i,r=r.useState()[0],(lt!==null?lt.memoizedState:null)!==r&&(Ve.flags|=1024),i}function ym(){var r=dd!==0;return dd=0,r}function vm(r,i,a){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~a}function xm(r){if(ud){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ud=!1}Ai=0,Bt=lt=Ve=null,Go=!1,wc=dd=0,Ko=null}function Mn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Ve.memoizedState=Bt=r:Bt=Bt.next=r,Bt}function zt(){if(lt===null){var r=Ve.alternate;r=r!==null?r.memoizedState:null}else r=lt.next;var i=Bt===null?Ve.memoizedState:Bt.next;if(i!==null)Bt=i,lt=r;else{if(r===null)throw Ve.alternate===null?Error(s(467)):Error(s(310));lt=r,r={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Bt===null?Ve.memoizedState=Bt=r:Bt=Bt.next=r}return Bt}function wm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bc(r){var i=wc;return wc+=1,Ko===null&&(Ko=[]),r=My(Ko,r,i),i=Ve,(Bt===null?i.memoizedState:Bt.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?Tv:Av),r}function hd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return bc(r);if(r.$$typeof===F)return gn(r)}throw Error(s(438,String(r)))}function bm(r){var i=null,a=Ve.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var c=Ve.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=wm(),Ve.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(r),c=0;c<r;c++)a[c]=M;return i.index++,a}function Fs(r,i){return typeof i=="function"?i(r):i}function fd(r){var i=zt();return _m(i,lt,r)}function _m(r,i,a){var c=r.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var f=r.baseQueue,m=c.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}i.baseQueue=f=m,c.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{i=f.next;var E=b=null,D=null,Q=i,ne=!1;do{var ae=Q.lane&-536870913;if(ae!==Q.lane?(Qe&ae)===ae:(Ai&ae)===ae){var X=Q.revertLane;if(X===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ae===qo&&(ne=!0);else if((Ai&X)===X){Q=Q.next,X===qo&&(ne=!0);continue}else ae={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},D===null?(E=D=ae,b=m):D=D.next=ae,Ve.lanes|=X,ki|=X;ae=Q.action,qa&&a(m,ae),m=Q.hasEagerState?Q.eagerState:a(m,ae)}else X={lane:ae,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},D===null?(E=D=X,b=m):D=D.next=X,Ve.lanes|=ae,ki|=ae;Q=Q.next}while(Q!==null&&Q!==i);if(D===null?b=m:D.next=E,!Gn(m,r.memoizedState)&&(en=!0,ne&&(a=Ho,a!==null)))throw a;r.memoizedState=m,r.baseState=b,r.baseQueue=D,c.lastRenderedState=m}return f===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Em(r){var i=zt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var c=a.dispatch,f=a.pending,m=i.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do m=r(m,b.action),b=b.next;while(b!==f);Gn(m,i.memoizedState)||(en=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,c]}function Hy(r,i,a){var c=Ve,f=zt(),m=et;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=i();var b=!Gn((lt||f).memoizedState,a);b&&(f.memoizedState=a,en=!0),f=f.queue;var E=Ky.bind(null,c,f,r);if(_c(2048,8,E,[r]),f.getSnapshot!==i||b||Bt!==null&&Bt.memoizedState.tag&1){if(c.flags|=2048,Yo(9,md(),Gy.bind(null,c,f,a,i),null),gt===null)throw Error(s(349));m||(Ai&124)!==0||$y(c,i,a)}return a}function $y(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=Ve.updateQueue,i===null?(i=wm(),Ve.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function Gy(r,i,a,c){i.value=a,i.getSnapshot=c,Yy(i)&&Qy(r)}function Ky(r,i,a){return a(function(){Yy(i)&&Qy(r)})}function Yy(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!Gn(r,a)}catch{return!0}}function Qy(r){var i=Uo(r,2);i!==null&&Zn(i,r,2)}function Tm(r){var i=Mn();if(typeof r=="function"){var a=r;if(r=a(),qa){Dn(!0);try{a()}finally{Dn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:r},i}function Xy(r,i,a,c){return r.baseState=a,_m(r,lt,typeof c=="function"?c:Fs)}function dA(r,i,a,c,f){if(gd(r))throw Error(s(485));if(r=i.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};G.T!==null?a(!0):m.isTransition=!1,c(m),a=i.pending,a===null?(m.next=i.pending=m,Wy(i,m)):(m.next=a.next,i.pending=a.next=m)}}function Wy(r,i){var a=i.action,c=i.payload,f=r.state;if(i.isTransition){var m=G.T,b={};G.T=b;try{var E=a(f,c),D=G.S;D!==null&&D(b,E),Zy(r,i,E)}catch(Q){Am(r,i,Q)}finally{G.T=m}}else try{m=a(f,c),Zy(r,i,m)}catch(Q){Am(r,i,Q)}}function Zy(r,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Jy(r,i,c)},function(c){return Am(r,i,c)}):Jy(r,i,a)}function Jy(r,i,a){i.status="fulfilled",i.value=a,ev(i),r.state=a,i=r.pending,i!==null&&(a=i.next,a===i?r.pending=null:(a=a.next,i.next=a,Wy(r,a)))}function Am(r,i,a){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=a,ev(i),i=i.next;while(i!==c)}r.action=null}function ev(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function tv(r,i){return i}function nv(r,i){if(et){var a=gt.formState;if(a!==null){e:{var c=Ve;if(et){if(Rt){t:{for(var f=Rt,m=as;f.nodeType!==8;){if(!m){f=null;break t}if(f=Vr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Rt=Vr(f.nextSibling),c=f.data==="F!";break e}}Ua(c)}c=!1}c&&(i=a[0])}}return a=Mn(),a.memoizedState=a.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tv,lastRenderedState:i},a.queue=c,a=bv.bind(null,Ve,c),c.dispatch=a,c=Tm(!1),m=jm.bind(null,Ve,!1,c.queue),c=Mn(),f={state:i,dispatch:null,action:r,pending:null},c.queue=f,a=dA.bind(null,Ve,f,m,a),f.dispatch=a,c.memoizedState=r,[i,a,!1]}function rv(r){var i=zt();return sv(i,lt,r)}function sv(r,i,a){if(i=_m(r,i,tv)[0],r=fd(Fs)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=bc(i)}catch(b){throw b===pc?od:b}else c=i;i=zt();var f=i.queue,m=f.dispatch;return a!==i.memoizedState&&(Ve.flags|=2048,Yo(9,md(),hA.bind(null,f,a),null)),[c,m,r]}function hA(r,i){r.action=i}function iv(r){var i=zt(),a=lt;if(a!==null)return sv(i,a,r);zt(),i=i.memoizedState,a=zt();var c=a.queue.dispatch;return a.memoizedState=r,[i,c,!1]}function Yo(r,i,a,c){return r={tag:r,create:a,deps:c,inst:i,next:null},i=Ve.updateQueue,i===null&&(i=wm(),Ve.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,i.lastEffect=r),r}function md(){return{destroy:void 0,resource:void 0}}function av(){return zt().memoizedState}function pd(r,i,a,c){var f=Mn();c=c===void 0?null:c,Ve.flags|=r,f.memoizedState=Yo(1|i,md(),a,c)}function _c(r,i,a,c){var f=zt();c=c===void 0?null:c;var m=f.memoizedState.inst;lt!==null&&c!==null&&pm(c,lt.memoizedState.deps)?f.memoizedState=Yo(i,m,a,c):(Ve.flags|=r,f.memoizedState=Yo(1|i,m,a,c))}function ov(r,i){pd(8390656,8,r,i)}function lv(r,i){_c(2048,8,r,i)}function cv(r,i){return _c(4,2,r,i)}function uv(r,i){return _c(4,4,r,i)}function dv(r,i){if(typeof i=="function"){r=r();var a=i(r);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function hv(r,i,a){a=a!=null?a.concat([r]):null,_c(4,4,dv.bind(null,i,r),a)}function Nm(){}function fv(r,i){var a=zt();i=i===void 0?null:i;var c=a.memoizedState;return i!==null&&pm(i,c[1])?c[0]:(a.memoizedState=[r,i],r)}function mv(r,i){var a=zt();i=i===void 0?null:i;var c=a.memoizedState;if(i!==null&&pm(i,c[1]))return c[0];if(c=r(),qa){Dn(!0);try{r()}finally{Dn(!1)}}return a.memoizedState=[c,i],c}function Sm(r,i,a){return a===void 0||(Ai&1073741824)!==0?r.memoizedState=i:(r.memoizedState=a,r=yx(),Ve.lanes|=r,ki|=r,a)}function pv(r,i,a,c){return Gn(a,i)?a:$o.current!==null?(r=Sm(r,a,c),Gn(r,i)||(en=!0),r):(Ai&42)===0?(en=!0,r.memoizedState=a):(r=yx(),Ve.lanes|=r,ki|=r,i)}function gv(r,i,a,c,f){var m=oe.p;oe.p=m!==0&&8>m?m:8;var b=G.T,E={};G.T=E,jm(r,!1,i,a);try{var D=f(),Q=G.S;if(Q!==null&&Q(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ne=lA(D,c);Ec(r,i,ne,Wn(r))}else Ec(r,i,c,Wn(r))}catch(ae){Ec(r,i,{then:function(){},status:"rejected",reason:ae},Wn())}finally{oe.p=m,G.T=b}}function fA(){}function Cm(r,i,a,c){if(r.tag!==5)throw Error(s(476));var f=yv(r).queue;gv(r,f,i,ye,a===null?fA:function(){return vv(r),a(c)})}function yv(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:ye},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:a},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function vv(r){var i=yv(r).next.queue;Ec(r,i,{},Wn())}function Rm(){return gn(zc)}function xv(){return zt().memoizedState}function wv(){return zt().memoizedState}function mA(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var a=Wn();r=Ei(a);var c=Ti(i,r,a);c!==null&&(Zn(c,i,a),yc(c,i,a)),i={cache:im()},r.payload=i;return}i=i.return}}function pA(r,i,a){var c=Wn();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},gd(r)?_v(i,a):(a=Qf(r,i,a,c),a!==null&&(Zn(a,r,c),Ev(a,i,c)))}function bv(r,i,a){var c=Wn();Ec(r,i,a,c)}function Ec(r,i,a,c){var f={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(gd(r))_v(i,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var b=i.lastRenderedState,E=m(b,a);if(f.hasEagerState=!0,f.eagerState=E,Gn(E,b))return Ju(r,i,f,0),gt===null&&Zu(),!1}catch{}finally{}if(a=Qf(r,i,f,c),a!==null)return Zn(a,r,c),Ev(a,i,c),!0}return!1}function jm(r,i,a,c){if(c={lane:2,revertLane:lp(),action:c,hasEagerState:!1,eagerState:null,next:null},gd(r)){if(i)throw Error(s(479))}else i=Qf(r,a,c,2),i!==null&&Zn(i,r,2)}function gd(r){var i=r.alternate;return r===Ve||i!==null&&i===Ve}function _v(r,i){Go=ud=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function Ev(r,i,a){if((a&4194048)!==0){var c=i.lanes;c&=r.pendingLanes,a|=c,i.lanes=a,Zr(r,a)}}var yd={readContext:gn,use:hd,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt},Tv={readContext:gn,use:hd,useCallback:function(r,i){return Mn().memoizedState=[r,i===void 0?null:i],r},useContext:gn,useEffect:ov,useImperativeHandle:function(r,i,a){a=a!=null?a.concat([r]):null,pd(4194308,4,dv.bind(null,i,r),a)},useLayoutEffect:function(r,i){return pd(4194308,4,r,i)},useInsertionEffect:function(r,i){pd(4,2,r,i)},useMemo:function(r,i){var a=Mn();i=i===void 0?null:i;var c=r();if(qa){Dn(!0);try{r()}finally{Dn(!1)}}return a.memoizedState=[c,i],c},useReducer:function(r,i,a){var c=Mn();if(a!==void 0){var f=a(i);if(qa){Dn(!0);try{a(i)}finally{Dn(!1)}}}else f=i;return c.memoizedState=c.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},c.queue=r,r=r.dispatch=pA.bind(null,Ve,r),[c.memoizedState,r]},useRef:function(r){var i=Mn();return r={current:r},i.memoizedState=r},useState:function(r){r=Tm(r);var i=r.queue,a=bv.bind(null,Ve,i);return i.dispatch=a,[r.memoizedState,a]},useDebugValue:Nm,useDeferredValue:function(r,i){var a=Mn();return Sm(a,r,i)},useTransition:function(){var r=Tm(!1);return r=gv.bind(null,Ve,r.queue,!0,!1),Mn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,a){var c=Ve,f=Mn();if(et){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),gt===null)throw Error(s(349));(Qe&124)!==0||$y(c,i,a)}f.memoizedState=a;var m={value:a,getSnapshot:i};return f.queue=m,ov(Ky.bind(null,c,m,r),[r]),c.flags|=2048,Yo(9,md(),Gy.bind(null,c,m,a,i),null),a},useId:function(){var r=Mn(),i=gt.identifierPrefix;if(et){var a=Us,c=Vs;a=(c&~(1<<32-ft(c)-1)).toString(32)+a,i="«"+i+"R"+a,a=dd++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=cA++,i="«"+i+"r"+a.toString(32)+"»";return r.memoizedState=i},useHostTransitionStatus:Rm,useFormState:nv,useActionState:nv,useOptimistic:function(r){var i=Mn();i.memoizedState=i.baseState=r;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=jm.bind(null,Ve,!0,a),a.dispatch=i,[r,i]},useMemoCache:bm,useCacheRefresh:function(){return Mn().memoizedState=mA.bind(null,Ve)}},Av={readContext:gn,use:hd,useCallback:fv,useContext:gn,useEffect:lv,useImperativeHandle:hv,useInsertionEffect:cv,useLayoutEffect:uv,useMemo:mv,useReducer:fd,useRef:av,useState:function(){return fd(Fs)},useDebugValue:Nm,useDeferredValue:function(r,i){var a=zt();return pv(a,lt.memoizedState,r,i)},useTransition:function(){var r=fd(Fs)[0],i=zt().memoizedState;return[typeof r=="boolean"?r:bc(r),i]},useSyncExternalStore:Hy,useId:xv,useHostTransitionStatus:Rm,useFormState:rv,useActionState:rv,useOptimistic:function(r,i){var a=zt();return Xy(a,lt,r,i)},useMemoCache:bm,useCacheRefresh:wv},gA={readContext:gn,use:hd,useCallback:fv,useContext:gn,useEffect:lv,useImperativeHandle:hv,useInsertionEffect:cv,useLayoutEffect:uv,useMemo:mv,useReducer:Em,useRef:av,useState:function(){return Em(Fs)},useDebugValue:Nm,useDeferredValue:function(r,i){var a=zt();return lt===null?Sm(a,r,i):pv(a,lt.memoizedState,r,i)},useTransition:function(){var r=Em(Fs)[0],i=zt().memoizedState;return[typeof r=="boolean"?r:bc(r),i]},useSyncExternalStore:Hy,useId:xv,useHostTransitionStatus:Rm,useFormState:iv,useActionState:iv,useOptimistic:function(r,i){var a=zt();return lt!==null?Xy(a,lt,r,i):(a.baseState=r,[r,a.queue.dispatch])},useMemoCache:bm,useCacheRefresh:wv},Qo=null,Tc=0;function vd(r){var i=Tc;return Tc+=1,Qo===null&&(Qo=[]),My(Qo,r,i)}function Ac(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function xd(r,i){throw i.$$typeof===_?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function Nv(r){var i=r._init;return i(r._payload)}function Sv(r){function i($,B){if(r){var K=$.deletions;K===null?($.deletions=[B],$.flags|=16):K.push(B)}}function a($,B){if(!r)return null;for(;B!==null;)i($,B),B=B.sibling;return null}function c($){for(var B=new Map;$!==null;)$.key!==null?B.set($.key,$):B.set($.index,$),$=$.sibling;return B}function f($,B){return $=Ls($,B),$.index=0,$.sibling=null,$}function m($,B,K){return $.index=K,r?(K=$.alternate,K!==null?(K=K.index,K<B?($.flags|=67108866,B):K):($.flags|=67108866,B)):($.flags|=1048576,B)}function b($){return r&&$.alternate===null&&($.flags|=67108866),$}function E($,B,K,re){return B===null||B.tag!==6?(B=Wf(K,$.mode,re),B.return=$,B):(B=f(B,K),B.return=$,B)}function D($,B,K,re){var we=K.type;return we===V?ne($,B,K.props.children,re,K.key):B!==null&&(B.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===A&&Nv(we)===B.type)?(B=f(B,K.props),Ac(B,K),B.return=$,B):(B=td(K.type,K.key,K.props,null,$.mode,re),Ac(B,K),B.return=$,B)}function Q($,B,K,re){return B===null||B.tag!==4||B.stateNode.containerInfo!==K.containerInfo||B.stateNode.implementation!==K.implementation?(B=Zf(K,$.mode,re),B.return=$,B):(B=f(B,K.children||[]),B.return=$,B)}function ne($,B,K,re,we){return B===null||B.tag!==7?(B=Pa(K,$.mode,re,we),B.return=$,B):(B=f(B,K),B.return=$,B)}function ae($,B,K){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Wf(""+B,$.mode,K),B.return=$,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case T:return K=td(B.type,B.key,B.props,null,$.mode,K),Ac(K,B),K.return=$,K;case I:return B=Zf(B,$.mode,K),B.return=$,B;case A:var re=B._init;return B=re(B._payload),ae($,B,K)}if(_e(B)||O(B))return B=Pa(B,$.mode,K,null),B.return=$,B;if(typeof B.then=="function")return ae($,vd(B),K);if(B.$$typeof===F)return ae($,id($,B),K);xd($,B)}return null}function X($,B,K,re){var we=B!==null?B.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return we!==null?null:E($,B,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case T:return K.key===we?D($,B,K,re):null;case I:return K.key===we?Q($,B,K,re):null;case A:return we=K._init,K=we(K._payload),X($,B,K,re)}if(_e(K)||O(K))return we!==null?null:ne($,B,K,re,null);if(typeof K.then=="function")return X($,B,vd(K),re);if(K.$$typeof===F)return X($,B,id($,K),re);xd($,K)}return null}function W($,B,K,re,we){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return $=$.get(K)||null,E(B,$,""+re,we);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case T:return $=$.get(re.key===null?K:re.key)||null,D(B,$,re,we);case I:return $=$.get(re.key===null?K:re.key)||null,Q(B,$,re,we);case A:var ze=re._init;return re=ze(re._payload),W($,B,K,re,we)}if(_e(re)||O(re))return $=$.get(K)||null,ne(B,$,re,we,null);if(typeof re.then=="function")return W($,B,K,vd(re),we);if(re.$$typeof===F)return W($,B,K,id(B,re),we);xd(B,re)}return null}function ke($,B,K,re){for(var we=null,ze=null,be=B,Re=B=0,nn=null;be!==null&&Re<K.length;Re++){be.index>Re?(nn=be,be=null):nn=be.sibling;var Ze=X($,be,K[Re],re);if(Ze===null){be===null&&(be=nn);break}r&&be&&Ze.alternate===null&&i($,be),B=m(Ze,B,Re),ze===null?we=Ze:ze.sibling=Ze,ze=Ze,be=nn}if(Re===K.length)return a($,be),et&&La($,Re),we;if(be===null){for(;Re<K.length;Re++)be=ae($,K[Re],re),be!==null&&(B=m(be,B,Re),ze===null?we=be:ze.sibling=be,ze=be);return et&&La($,Re),we}for(be=c(be);Re<K.length;Re++)nn=W(be,$,Re,K[Re],re),nn!==null&&(r&&nn.alternate!==null&&be.delete(nn.key===null?Re:nn.key),B=m(nn,B,Re),ze===null?we=nn:ze.sibling=nn,ze=nn);return r&&be.forEach(function(zi){return i($,zi)}),et&&La($,Re),we}function Se($,B,K,re){if(K==null)throw Error(s(151));for(var we=null,ze=null,be=B,Re=B=0,nn=null,Ze=K.next();be!==null&&!Ze.done;Re++,Ze=K.next()){be.index>Re?(nn=be,be=null):nn=be.sibling;var zi=X($,be,Ze.value,re);if(zi===null){be===null&&(be=nn);break}r&&be&&zi.alternate===null&&i($,be),B=m(zi,B,Re),ze===null?we=zi:ze.sibling=zi,ze=zi,be=nn}if(Ze.done)return a($,be),et&&La($,Re),we;if(be===null){for(;!Ze.done;Re++,Ze=K.next())Ze=ae($,Ze.value,re),Ze!==null&&(B=m(Ze,B,Re),ze===null?we=Ze:ze.sibling=Ze,ze=Ze);return et&&La($,Re),we}for(be=c(be);!Ze.done;Re++,Ze=K.next())Ze=W(be,$,Re,Ze.value,re),Ze!==null&&(r&&Ze.alternate!==null&&be.delete(Ze.key===null?Re:Ze.key),B=m(Ze,B,Re),ze===null?we=Ze:ze.sibling=Ze,ze=Ze);return r&&be.forEach(function(yN){return i($,yN)}),et&&La($,Re),we}function ut($,B,K,re){if(typeof K=="object"&&K!==null&&K.type===V&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case T:e:{for(var we=K.key;B!==null;){if(B.key===we){if(we=K.type,we===V){if(B.tag===7){a($,B.sibling),re=f(B,K.props.children),re.return=$,$=re;break e}}else if(B.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===A&&Nv(we)===B.type){a($,B.sibling),re=f(B,K.props),Ac(re,K),re.return=$,$=re;break e}a($,B);break}else i($,B);B=B.sibling}K.type===V?(re=Pa(K.props.children,$.mode,re,K.key),re.return=$,$=re):(re=td(K.type,K.key,K.props,null,$.mode,re),Ac(re,K),re.return=$,$=re)}return b($);case I:e:{for(we=K.key;B!==null;){if(B.key===we)if(B.tag===4&&B.stateNode.containerInfo===K.containerInfo&&B.stateNode.implementation===K.implementation){a($,B.sibling),re=f(B,K.children||[]),re.return=$,$=re;break e}else{a($,B);break}else i($,B);B=B.sibling}re=Zf(K,$.mode,re),re.return=$,$=re}return b($);case A:return we=K._init,K=we(K._payload),ut($,B,K,re)}if(_e(K))return ke($,B,K,re);if(O(K)){if(we=O(K),typeof we!="function")throw Error(s(150));return K=we.call(K),Se($,B,K,re)}if(typeof K.then=="function")return ut($,B,vd(K),re);if(K.$$typeof===F)return ut($,B,id($,K),re);xd($,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,B!==null&&B.tag===6?(a($,B.sibling),re=f(B,K),re.return=$,$=re):(a($,B),re=Wf(K,$.mode,re),re.return=$,$=re),b($)):a($,B)}return function($,B,K,re){try{Tc=0;var we=ut($,B,K,re);return Qo=null,we}catch(be){if(be===pc||be===od)throw be;var ze=Kn(29,be,null,$.mode);return ze.lanes=re,ze.return=$,ze}finally{}}}var Xo=Sv(!0),Cv=Sv(!1),pr=ue(null),os=null;function Ni(r){var i=r.alternate;te(Qt,Qt.current&1),te(pr,r),os===null&&(i===null||$o.current!==null||i.memoizedState!==null)&&(os=r)}function Rv(r){if(r.tag===22){if(te(Qt,Qt.current),te(pr,r),os===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(os=r)}}else Si()}function Si(){te(Qt,Qt.current),te(pr,pr.current)}function qs(r){pe(pr),os===r&&(os=null),pe(Qt)}var Qt=ue(0);function wd(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||wp(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Im(r,i,a,c){i=r.memoizedState,a=a(c,i),a=a==null?i:x({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var km={enqueueSetState:function(r,i,a){r=r._reactInternals;var c=Wn(),f=Ei(c);f.payload=i,a!=null&&(f.callback=a),i=Ti(r,f,c),i!==null&&(Zn(i,r,c),yc(i,r,c))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var c=Wn(),f=Ei(c);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Ti(r,f,c),i!==null&&(Zn(i,r,c),yc(i,r,c))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=Wn(),c=Ei(a);c.tag=2,i!=null&&(c.callback=i),i=Ti(r,c,a),i!==null&&(Zn(i,r,a),yc(i,r,a))}};function jv(r,i,a,c,f,m,b){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,m,b):i.prototype&&i.prototype.isPureReactComponent?!oc(a,c)||!oc(f,m):!0}function Iv(r,i,a,c){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==r&&km.enqueueReplaceState(i,i.state,null)}function Ha(r,i){var a=i;if("ref"in i){a={};for(var c in i)c!=="ref"&&(a[c]=i[c])}if(r=r.defaultProps){a===i&&(a=x({},a));for(var f in r)a[f]===void 0&&(a[f]=r[f])}return a}var bd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function kv(r){bd(r)}function Dv(r){console.error(r)}function Ov(r){bd(r)}function _d(r,i){try{var a=r.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Pv(r,i,a){try{var c=r.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Dm(r,i,a){return a=Ei(a),a.tag=3,a.payload={element:null},a.callback=function(){_d(r,i)},a}function Mv(r){return r=Ei(r),r.tag=3,r}function Lv(r,i,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;r.payload=function(){return f(m)},r.callback=function(){Pv(i,a,c)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(r.callback=function(){Pv(i,a,c),typeof f!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function yA(r,i,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=a.alternate,i!==null&&hc(i,a,f,!0),a=pr.current,a!==null){switch(a.tag){case 13:return os===null?rp():a.alternate===null&&jt===0&&(jt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===lm?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([c]):i.add(c),ip(r,c,f)),!1;case 22:return a.flags|=65536,c===lm?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([c]):a.add(c)),ip(r,c,f)),!1}throw Error(s(435,a.tag))}return ip(r,c,f),rp(),!1}if(et)return i=pr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==tm&&(r=Error(s(422),{cause:c}),dc(dr(r,a)))):(c!==tm&&(i=Error(s(423),{cause:c}),dc(dr(i,a))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,c=dr(c,a),f=Dm(r.stateNode,c,f),dm(r,f),jt!==4&&(jt=2)),!1;var m=Error(s(520),{cause:c});if(m=dr(m,a),kc===null?kc=[m]:kc.push(m),jt!==4&&(jt=2),i===null)return!0;c=dr(c,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,r=f&-f,a.lanes|=r,r=Dm(a.stateNode,c,r),dm(a,r),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Di===null||!Di.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Mv(f),Lv(f,r,a,c),dm(a,f),!1}a=a.return}while(a!==null);return!1}var Vv=Error(s(461)),en=!1;function ln(r,i,a,c){i.child=r===null?Cv(i,null,a,c):Xo(i,r.child,a,c)}function Uv(r,i,a,c,f){a=a.render;var m=i.ref;if("ref"in c){var b={};for(var E in c)E!=="ref"&&(b[E]=c[E])}else b=c;return za(i),c=gm(r,i,a,b,m,f),E=ym(),r!==null&&!en?(vm(r,i,f),Hs(r,i,f)):(et&&E&&Jf(i),i.flags|=1,ln(r,i,c,f),i.child)}function Bv(r,i,a,c,f){if(r===null){var m=a.type;return typeof m=="function"&&!Xf(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,zv(r,i,m,c,f)):(r=td(a.type,null,c,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!zm(r,f)){var b=m.memoizedProps;if(a=a.compare,a=a!==null?a:oc,a(b,c)&&r.ref===i.ref)return Hs(r,i,f)}return i.flags|=1,r=Ls(m,c),r.ref=i.ref,r.return=i,i.child=r}function zv(r,i,a,c,f){if(r!==null){var m=r.memoizedProps;if(oc(m,c)&&r.ref===i.ref)if(en=!1,i.pendingProps=c=m,zm(r,f))(r.flags&131072)!==0&&(en=!0);else return i.lanes=r.lanes,Hs(r,i,f)}return Om(r,i,a,c,f)}function Fv(r,i,a){var c=i.pendingProps,f=c.children,m=r!==null?r.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=m!==null?m.baseLanes|a:a,r!==null){for(f=i.child=r.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~c}else i.childLanes=0,i.child=null;return qv(r,i,c,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&ad(i,m!==null?m.cachePool:null),m!==null?zy(i,m):fm(),Rv(i);else return i.lanes=i.childLanes=536870912,qv(r,i,m!==null?m.baseLanes|a:a,a)}else m!==null?(ad(i,m.cachePool),zy(i,m),Si(),i.memoizedState=null):(r!==null&&ad(i,null),fm(),Si());return ln(r,i,f,a),i.child}function qv(r,i,a,c){var f=om();return f=f===null?null:{parent:Yt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},r!==null&&ad(i,null),fm(),Rv(i),r!==null&&hc(r,i,c,!0),null}function Ed(r,i){var a=i.ref;if(a===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(r===null||r.ref!==a)&&(i.flags|=4194816)}}function Om(r,i,a,c,f){return za(i),a=gm(r,i,a,c,void 0,f),c=ym(),r!==null&&!en?(vm(r,i,f),Hs(r,i,f)):(et&&c&&Jf(i),i.flags|=1,ln(r,i,a,f),i.child)}function Hv(r,i,a,c,f,m){return za(i),i.updateQueue=null,a=qy(i,c,a,f),Fy(r),c=ym(),r!==null&&!en?(vm(r,i,m),Hs(r,i,m)):(et&&c&&Jf(i),i.flags|=1,ln(r,i,a,m),i.child)}function $v(r,i,a,c,f){if(za(i),i.stateNode===null){var m=Bo,b=a.contextType;typeof b=="object"&&b!==null&&(m=gn(b)),m=new a(c,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=km,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=c,m.state=i.memoizedState,m.refs={},cm(i),b=a.contextType,m.context=typeof b=="object"&&b!==null?gn(b):Bo,m.state=i.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Im(i,a,b,c),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&km.enqueueReplaceState(m,m.state,null),xc(i,c,m,f),vc(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(r===null){m=i.stateNode;var E=i.memoizedProps,D=Ha(a,E);m.props=D;var Q=m.context,ne=a.contextType;b=Bo,typeof ne=="object"&&ne!==null&&(b=gn(ne));var ae=a.getDerivedStateFromProps;ne=typeof ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,ne||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||Q!==b)&&Iv(i,m,c,b),_i=!1;var X=i.memoizedState;m.state=X,xc(i,c,m,f),vc(),Q=i.memoizedState,E||X!==Q||_i?(typeof ae=="function"&&(Im(i,a,ae,c),Q=i.memoizedState),(D=_i||jv(i,a,D,c,X,Q,b))?(ne||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=Q),m.props=c,m.state=Q,m.context=b,c=D):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{m=i.stateNode,um(r,i),b=i.memoizedProps,ne=Ha(a,b),m.props=ne,ae=i.pendingProps,X=m.context,Q=a.contextType,D=Bo,typeof Q=="object"&&Q!==null&&(D=gn(Q)),E=a.getDerivedStateFromProps,(Q=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==ae||X!==D)&&Iv(i,m,c,D),_i=!1,X=i.memoizedState,m.state=X,xc(i,c,m,f),vc();var W=i.memoizedState;b!==ae||X!==W||_i||r!==null&&r.dependencies!==null&&sd(r.dependencies)?(typeof E=="function"&&(Im(i,a,E,c),W=i.memoizedState),(ne=_i||jv(i,a,ne,c,X,W,D)||r!==null&&r.dependencies!==null&&sd(r.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,W,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,W,D)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===r.memoizedProps&&X===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&X===r.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=W),m.props=c,m.state=W,m.context=D,c=ne):(typeof m.componentDidUpdate!="function"||b===r.memoizedProps&&X===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&X===r.memoizedState||(i.flags|=1024),c=!1)}return m=c,Ed(r,i),c=(i.flags&128)!==0,m||c?(m=i.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&c?(i.child=Xo(i,r.child,null,f),i.child=Xo(i,null,a,f)):ln(r,i,a,f),i.memoizedState=m.state,r=i.child):r=Hs(r,i,f),r}function Gv(r,i,a,c){return uc(),i.flags|=256,ln(r,i,a,c),i.child}var Pm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mm(r){return{baseLanes:r,cachePool:Dy()}}function Lm(r,i,a){return r=r!==null?r.childLanes&~a:0,i&&(r|=gr),r}function Kv(r,i,a){var c=i.pendingProps,f=!1,m=(i.flags&128)!==0,b;if((b=m)||(b=r!==null&&r.memoizedState===null?!1:(Qt.current&2)!==0),b&&(f=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,r===null){if(et){if(f?Ni(i):Si(),et){var E=Rt,D;if(D=E){e:{for(D=E,E=as;D.nodeType!==8;){if(!E){E=null;break e}if(D=Vr(D.nextSibling),D===null){E=null;break e}}E=D}E!==null?(i.memoizedState={dehydrated:E,treeContext:Ma!==null?{id:Vs,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},D=Kn(18,null,null,0),D.stateNode=E,D.return=i,i.child=D,Rn=i,Rt=null,D=!0):D=!1}D||Ua(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return wp(E)?i.lanes=32:i.lanes=536870912,null;qs(i)}return E=c.children,c=c.fallback,f?(Si(),f=i.mode,E=Td({mode:"hidden",children:E},f),c=Pa(c,f,a,null),E.return=i,c.return=i,E.sibling=c,i.child=E,f=i.child,f.memoizedState=Mm(a),f.childLanes=Lm(r,b,a),i.memoizedState=Pm,c):(Ni(i),Vm(i,E))}if(D=r.memoizedState,D!==null&&(E=D.dehydrated,E!==null)){if(m)i.flags&256?(Ni(i),i.flags&=-257,i=Um(r,i,a)):i.memoizedState!==null?(Si(),i.child=r.child,i.flags|=128,i=null):(Si(),f=c.fallback,E=i.mode,c=Td({mode:"visible",children:c.children},E),f=Pa(f,E,a,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,Xo(i,r.child,null,a),c=i.child,c.memoizedState=Mm(a),c.childLanes=Lm(r,b,a),i.memoizedState=Pm,i=f);else if(Ni(i),wp(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var Q=b.dgst;b=Q,c=Error(s(419)),c.stack="",c.digest=b,dc({value:c,source:null,stack:null}),i=Um(r,i,a)}else if(en||hc(r,i,a,!1),b=(a&r.childLanes)!==0,en||b){if(b=gt,b!==null&&(c=a&-a,c=(c&42)!==0?1:fa(c),c=(c&(b.suspendedLanes|a))!==0?0:c,c!==0&&c!==D.retryLane))throw D.retryLane=c,Uo(r,c),Zn(b,r,c),Vv;E.data==="$?"||rp(),i=Um(r,i,a)}else E.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=D.treeContext,Rt=Vr(E.nextSibling),Rn=i,et=!0,Va=null,as=!1,r!==null&&(fr[mr++]=Vs,fr[mr++]=Us,fr[mr++]=Ma,Vs=r.id,Us=r.overflow,Ma=i),i=Vm(i,c.children),i.flags|=4096);return i}return f?(Si(),f=c.fallback,E=i.mode,D=r.child,Q=D.sibling,c=Ls(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,Q!==null?f=Ls(Q,f):(f=Pa(f,E,a,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,E=r.child.memoizedState,E===null?E=Mm(a):(D=E.cachePool,D!==null?(Q=Yt._currentValue,D=D.parent!==Q?{parent:Q,pool:Q}:D):D=Dy(),E={baseLanes:E.baseLanes|a,cachePool:D}),f.memoizedState=E,f.childLanes=Lm(r,b,a),i.memoizedState=Pm,c):(Ni(i),a=r.child,r=a.sibling,a=Ls(a,{mode:"visible",children:c.children}),a.return=i,a.sibling=null,r!==null&&(b=i.deletions,b===null?(i.deletions=[r],i.flags|=16):b.push(r)),i.child=a,i.memoizedState=null,a)}function Vm(r,i){return i=Td({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Td(r,i){return r=Kn(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Um(r,i,a){return Xo(i,r.child,null,a),r=Vm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Yv(r,i,a){r.lanes|=i;var c=r.alternate;c!==null&&(c.lanes|=i),rm(r.return,i,a)}function Bm(r,i,a,c,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=f)}function Qv(r,i,a){var c=i.pendingProps,f=c.revealOrder,m=c.tail;if(ln(r,i,c.children,a),c=Qt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Yv(r,a,i);else if(r.tag===19)Yv(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(te(Qt,c),f){case"forwards":for(a=i.child,f=null;a!==null;)r=a.alternate,r!==null&&wd(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Bm(i,!1,f,a,m);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&wd(r)===null){i.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}Bm(i,!0,a,null,m);break;case"together":Bm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Hs(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),ki|=i.lanes,(a&i.childLanes)===0)if(r!==null){if(hc(r,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,a=Ls(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=Ls(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function zm(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&sd(r)))}function vA(r,i,a){switch(i.tag){case 3:rt(i,i.stateNode.containerInfo),bi(i,Yt,r.memoizedState.cache),uc();break;case 27:case 5:Ss(i);break;case 4:rt(i,i.stateNode.containerInfo);break;case 10:bi(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ni(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Kv(r,i,a):(Ni(i),r=Hs(r,i,a),r!==null?r.sibling:null);Ni(i);break;case 19:var f=(r.flags&128)!==0;if(c=(a&i.childLanes)!==0,c||(hc(r,i,a,!1),c=(a&i.childLanes)!==0),f){if(c)return Qv(r,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),te(Qt,Qt.current),c)break;return null;case 22:case 23:return i.lanes=0,Fv(r,i,a);case 24:bi(i,Yt,r.memoizedState.cache)}return Hs(r,i,a)}function Xv(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps)en=!0;else{if(!zm(r,a)&&(i.flags&128)===0)return en=!1,vA(r,i,a);en=(r.flags&131072)!==0}else en=!1,et&&(i.flags&1048576)!==0&&Ny(i,rd,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var c=i.elementType,f=c._init;if(c=f(c._payload),i.type=c,typeof c=="function")Xf(c)?(r=Ha(c,r),i.tag=1,i=$v(null,i,c,r,a)):(i.tag=0,i=Om(null,i,c,r,a));else{if(c!=null){if(f=c.$$typeof,f===ie){i.tag=11,i=Uv(null,i,c,r,a);break e}else if(f===k){i.tag=14,i=Bv(null,i,c,r,a);break e}}throw i=Ce(c)||c,Error(s(306,i,""))}}return i;case 0:return Om(r,i,i.type,i.pendingProps,a);case 1:return c=i.type,f=Ha(c,i.pendingProps),$v(r,i,c,f,a);case 3:e:{if(rt(i,i.stateNode.containerInfo),r===null)throw Error(s(387));c=i.pendingProps;var m=i.memoizedState;f=m.element,um(r,i),xc(i,c,null,a);var b=i.memoizedState;if(c=b.cache,bi(i,Yt,c),c!==m.cache&&sm(i,[Yt],a,!0),vc(),c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Gv(r,i,c,a);break e}else if(c!==f){f=dr(Error(s(424)),i),dc(f),i=Gv(r,i,c,a);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Rt=Vr(r.firstChild),Rn=i,et=!0,Va=null,as=!0,a=Cv(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(uc(),c===f){i=Hs(r,i,a);break e}ln(r,i,c,a)}i=i.child}return i;case 26:return Ed(r,i),r===null?(a=ew(i.type,null,i.pendingProps,null))?i.memoizedState=a:et||(a=i.type,r=i.pendingProps,c=Vd(he.current).createElement(a),c[H]=i,c[me]=r,un(c,a,r),mt(c),i.stateNode=c):i.memoizedState=ew(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Ss(i),r===null&&et&&(c=i.stateNode=Wx(i.type,i.pendingProps,he.current),Rn=i,as=!0,f=Rt,Mi(i.type)?(bp=f,Rt=Vr(c.firstChild)):Rt=f),ln(r,i,i.pendingProps.children,a),Ed(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&et&&((f=c=Rt)&&(c=GA(c,i.type,i.pendingProps,as),c!==null?(i.stateNode=c,Rn=i,Rt=Vr(c.firstChild),as=!1,f=!0):f=!1),f||Ua(i)),Ss(i),f=i.type,m=i.pendingProps,b=r!==null?r.memoizedProps:null,c=m.children,yp(f,m)?c=null:b!==null&&yp(f,b)&&(i.flags|=32),i.memoizedState!==null&&(f=gm(r,i,uA,null,null,a),zc._currentValue=f),Ed(r,i),ln(r,i,c,a),i.child;case 6:return r===null&&et&&((r=a=Rt)&&(a=KA(a,i.pendingProps,as),a!==null?(i.stateNode=a,Rn=i,Rt=null,r=!0):r=!1),r||Ua(i)),null;case 13:return Kv(r,i,a);case 4:return rt(i,i.stateNode.containerInfo),c=i.pendingProps,r===null?i.child=Xo(i,null,c,a):ln(r,i,c,a),i.child;case 11:return Uv(r,i,i.type,i.pendingProps,a);case 7:return ln(r,i,i.pendingProps,a),i.child;case 8:return ln(r,i,i.pendingProps.children,a),i.child;case 12:return ln(r,i,i.pendingProps.children,a),i.child;case 10:return c=i.pendingProps,bi(i,i.type,c.value),ln(r,i,c.children,a),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,za(i),f=gn(f),c=c(f),i.flags|=1,ln(r,i,c,a),i.child;case 14:return Bv(r,i,i.type,i.pendingProps,a);case 15:return zv(r,i,i.type,i.pendingProps,a);case 19:return Qv(r,i,a);case 31:return c=i.pendingProps,a=i.mode,c={mode:c.mode,children:c.children},r===null?(a=Td(c,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ls(r.child,c),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Fv(r,i,a);case 24:return za(i),c=gn(Yt),r===null?(f=om(),f===null&&(f=gt,m=im(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),i.memoizedState={parent:c,cache:f},cm(i),bi(i,Yt,f)):((r.lanes&a)!==0&&(um(r,i),xc(i,null,null,a),vc()),f=r.memoizedState,m=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),bi(i,Yt,c)):(c=m.cache,bi(i,Yt,c),c!==f.cache&&sm(i,[Yt],a,!0))),ln(r,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function $s(r){r.flags|=4}function Wv(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!iw(i)){if(i=pr.current,i!==null&&((Qe&4194048)===Qe?os!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||i!==os))throw gc=lm,Oy;r.flags|=8192}}function Ad(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Wr():536870912,r.lanes|=i,el|=i)}function Nc(r,i){if(!et)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function St(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(i)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=c,r.childLanes=a,i}function xA(r,i,a){var c=i.pendingProps;switch(em(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(i),null;case 1:return St(i),null;case 3:return a=i.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),zs(Yt),kn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(cc(i)?$s(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ry())),St(i),null;case 26:return a=i.memoizedState,r===null?($s(i),a!==null?(St(i),Wv(i,a)):(St(i),i.flags&=-16777217)):a?a!==r.memoizedState?($s(i),St(i),Wv(i,a)):(St(i),i.flags&=-16777217):(r.memoizedProps!==c&&$s(i),St(i),i.flags&=-16777217),null;case 27:Qr(i),a=he.current;var f=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==c&&$s(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return St(i),null}r=ce.current,cc(i)?Sy(i):(r=Wx(f,c,a),i.stateNode=r,$s(i))}return St(i),null;case 5:if(Qr(i),a=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==c&&$s(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return St(i),null}if(r=ce.current,cc(i))Sy(i);else{switch(f=Vd(he.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?f.createElement(a,{is:c.is}):f.createElement(a)}}r[H]=i,r[me]=c;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=r;e:switch(un(r,a,c),a){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&$s(i)}}return St(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==c&&$s(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(r=he.current,cc(i)){if(r=i.stateNode,a=i.memoizedProps,c=null,f=Rn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}r[H]=i,r=!!(r.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Hx(r.nodeValue,a)),r||Ua(i)}else r=Vd(r).createTextNode(c),r[H]=i,i.stateNode=r}return St(i),null;case 13:if(c=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=cc(i),c!==null&&c.dehydrated!==null){if(r===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[H]=i}else uc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;St(i),f=!1}else f=Ry(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(qs(i),i):(qs(i),null)}if(qs(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=c!==null,r=r!==null&&r.memoizedState!==null,a){c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var m=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)}return a!==r&&a&&(i.child.flags|=8192),Ad(i,i.updateQueue),St(i),null;case 4:return kn(),r===null&&hp(i.stateNode.containerInfo),St(i),null;case 10:return zs(i.type),St(i),null;case 19:if(pe(Qt),f=i.memoizedState,f===null)return St(i),null;if(c=(i.flags&128)!==0,m=f.rendering,m===null)if(c)Nc(f,!1);else{if(jt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=wd(r),m!==null){for(i.flags|=128,Nc(f,!1),r=m.updateQueue,i.updateQueue=r,Ad(i,r),i.subtreeFlags=0,r=a,a=i.child;a!==null;)Ay(a,r),a=a.sibling;return te(Qt,Qt.current&1|2),i.child}r=r.sibling}f.tail!==null&&an()>Cd&&(i.flags|=128,c=!0,Nc(f,!1),i.lanes=4194304)}else{if(!c)if(r=wd(m),r!==null){if(i.flags|=128,c=!0,r=r.updateQueue,i.updateQueue=r,Ad(i,r),Nc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!et)return St(i),null}else 2*an()-f.renderingStartTime>Cd&&a!==536870912&&(i.flags|=128,c=!0,Nc(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(r=f.last,r!==null?r.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=an(),i.sibling=null,r=Qt.current,te(Qt,c?r&1|2:r&1),i):(St(i),null);case 22:case 23:return qs(i),mm(),c=i.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(a&536870912)!==0&&(i.flags&128)===0&&(St(i),i.subtreeFlags&6&&(i.flags|=8192)):St(i),a=i.updateQueue,a!==null&&Ad(i,a.retryQueue),a=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==a&&(i.flags|=2048),r!==null&&pe(Fa),null;case 24:return a=null,r!==null&&(a=r.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),zs(Yt),St(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function wA(r,i){switch(em(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return zs(Yt),kn(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Qr(i),null;case 13:if(qs(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));uc()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return pe(Qt),null;case 4:return kn(),null;case 10:return zs(i.type),null;case 22:case 23:return qs(i),mm(),r!==null&&pe(Fa),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return zs(Yt),null;case 25:return null;default:return null}}function Zv(r,i){switch(em(i),i.tag){case 3:zs(Yt),kn();break;case 26:case 27:case 5:Qr(i);break;case 4:kn();break;case 13:qs(i);break;case 19:pe(Qt);break;case 10:zs(i.type);break;case 22:case 23:qs(i),mm(),r!==null&&pe(Fa);break;case 24:zs(Yt)}}function Sc(r,i){try{var a=i.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&r)===r){c=void 0;var m=a.create,b=a.inst;c=m(),b.destroy=c}a=a.next}while(a!==f)}}catch(E){ht(i,i.return,E)}}function Ci(r,i,a){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&r)===r){var b=c.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,f=i;var D=a,Q=E;try{Q()}catch(ne){ht(f,D,ne)}}}c=c.next}while(c!==m)}}catch(ne){ht(i,i.return,ne)}}function Jv(r){var i=r.updateQueue;if(i!==null){var a=r.stateNode;try{By(i,a)}catch(c){ht(r,r.return,c)}}}function ex(r,i,a){a.props=Ha(r.type,r.memoizedProps),a.state=r.memoizedState;try{a.componentWillUnmount()}catch(c){ht(r,i,c)}}function Cc(r,i){try{var a=r.ref;if(a!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof a=="function"?r.refCleanup=a(c):a.current=c}}catch(f){ht(r,i,f)}}function ls(r,i){var a=r.ref,c=r.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){ht(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ht(r,i,f)}else a.current=null}function tx(r){var i=r.type,a=r.memoizedProps,c=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){ht(r,r.return,f)}}function Fm(r,i,a){try{var c=r.stateNode;zA(c,r.type,a,i),c[me]=i}catch(f){ht(r,r.return,f)}}function nx(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Mi(r.type)||r.tag===4}function qm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||nx(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Mi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Hm(r,i,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(r,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(r),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ld));else if(c!==4&&(c===27&&Mi(r.type)&&(a=r.stateNode,i=null),r=r.child,r!==null))for(Hm(r,i,a),r=r.sibling;r!==null;)Hm(r,i,a),r=r.sibling}function Nd(r,i,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(c!==4&&(c===27&&Mi(r.type)&&(a=r.stateNode),r=r.child,r!==null))for(Nd(r,i,a),r=r.sibling;r!==null;)Nd(r,i,a),r=r.sibling}function rx(r){var i=r.stateNode,a=r.memoizedProps;try{for(var c=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);un(i,c,a),i[H]=r,i[me]=a}catch(m){ht(r,r.return,m)}}var Gs=!1,Ot=!1,$m=!1,sx=typeof WeakSet=="function"?WeakSet:Set,tn=null;function bA(r,i){if(r=r.containerInfo,pp=Hd,r=py(r),qf(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var b=0,E=-1,D=-1,Q=0,ne=0,ae=r,X=null;t:for(;;){for(var W;ae!==a||f!==0&&ae.nodeType!==3||(E=b+f),ae!==m||c!==0&&ae.nodeType!==3||(D=b+c),ae.nodeType===3&&(b+=ae.nodeValue.length),(W=ae.firstChild)!==null;)X=ae,ae=W;for(;;){if(ae===r)break t;if(X===a&&++Q===f&&(E=b),X===m&&++ne===c&&(D=b),(W=ae.nextSibling)!==null)break;ae=X,X=ae.parentNode}ae=W}a=E===-1||D===-1?null:{start:E,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(gp={focusedElem:r,selectionRange:a},Hd=!1,tn=i;tn!==null;)if(i=tn,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,tn=r;else for(;tn!==null;){switch(i=tn,m=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,a=i,f=m.memoizedProps,m=m.memoizedState,c=a.stateNode;try{var ke=Ha(a.type,f,a.elementType===a.type);r=c.getSnapshotBeforeUpdate(ke,m),c.__reactInternalSnapshotBeforeUpdate=r}catch(Se){ht(a,a.return,Se)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,a=r.nodeType,a===9)xp(r);else if(a===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":xp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,tn=r;break}tn=i.return}}function ix(r,i,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Ri(r,a),c&4&&Sc(5,a);break;case 1:if(Ri(r,a),c&4)if(r=a.stateNode,i===null)try{r.componentDidMount()}catch(b){ht(a,a.return,b)}else{var f=Ha(a.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(b){ht(a,a.return,b)}}c&64&&Jv(a),c&512&&Cc(a,a.return);break;case 3:if(Ri(r,a),c&64&&(r=a.updateQueue,r!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{By(r,i)}catch(b){ht(a,a.return,b)}}break;case 27:i===null&&c&4&&rx(a);case 26:case 5:Ri(r,a),i===null&&c&4&&tx(a),c&512&&Cc(a,a.return);break;case 12:Ri(r,a);break;case 13:Ri(r,a),c&4&&lx(r,a),c&64&&(r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(a=jA.bind(null,a),YA(r,a))));break;case 22:if(c=a.memoizedState!==null||Gs,!c){i=i!==null&&i.memoizedState!==null||Ot,f=Gs;var m=Ot;Gs=c,(Ot=i)&&!m?ji(r,a,(a.subtreeFlags&8772)!==0):Ri(r,a),Gs=f,Ot=m}break;case 30:break;default:Ri(r,a)}}function ax(r){var i=r.alternate;i!==null&&(r.alternate=null,ax(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&fi(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var _t=null,Ln=!1;function Ks(r,i,a){for(a=a.child;a!==null;)ox(r,i,a),a=a.sibling}function ox(r,i,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Xr,a)}catch{}switch(a.tag){case 26:Ot||ls(a,i),Ks(r,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ot||ls(a,i);var c=_t,f=Ln;Mi(a.type)&&(_t=a.stateNode,Ln=!1),Ks(r,i,a),Lc(a.stateNode),_t=c,Ln=f;break;case 5:Ot||ls(a,i);case 6:if(c=_t,f=Ln,_t=null,Ks(r,i,a),_t=c,Ln=f,_t!==null)if(Ln)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(a.stateNode)}catch(m){ht(a,i,m)}else try{_t.removeChild(a.stateNode)}catch(m){ht(a,i,m)}break;case 18:_t!==null&&(Ln?(r=_t,Qx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.stateNode),$c(r)):Qx(_t,a.stateNode));break;case 4:c=_t,f=Ln,_t=a.stateNode.containerInfo,Ln=!0,Ks(r,i,a),_t=c,Ln=f;break;case 0:case 11:case 14:case 15:Ot||Ci(2,a,i),Ot||Ci(4,a,i),Ks(r,i,a);break;case 1:Ot||(ls(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"&&ex(a,i,c)),Ks(r,i,a);break;case 21:Ks(r,i,a);break;case 22:Ot=(c=Ot)||a.memoizedState!==null,Ks(r,i,a),Ot=c;break;default:Ks(r,i,a)}}function lx(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{$c(r)}catch(a){ht(i,i.return,a)}}function _A(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new sx),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new sx),i;default:throw Error(s(435,r.tag))}}function Gm(r,i){var a=_A(r);i.forEach(function(c){var f=IA.bind(null,r,c);a.has(c)||(a.add(c),c.then(f,f))})}function Yn(r,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],m=r,b=i,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(Mi(E.type)){_t=E.stateNode,Ln=!1;break e}break;case 5:_t=E.stateNode,Ln=!1;break e;case 3:case 4:_t=E.stateNode.containerInfo,Ln=!0;break e}E=E.return}if(_t===null)throw Error(s(160));ox(m,b,f),_t=null,Ln=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)cx(i,r),i=i.sibling}var Lr=null;function cx(r,i){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Yn(i,r),Qn(r),c&4&&(Ci(3,r,r.return),Sc(3,r),Ci(5,r,r.return));break;case 1:Yn(i,r),Qn(r),c&512&&(Ot||a===null||ls(a,a.return)),c&64&&Gs&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(a=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=Lr;if(Yn(i,r),Qn(r),c&512&&(Ot||a===null||ls(a,a.return)),c&4){var m=a!==null?a.memoizedState:null;if(c=r.memoizedState,a===null)if(c===null)if(r.stateNode===null){e:{c=r.type,a=r.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ar]||m[H]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),un(m,c,a),m[H]=r,mt(m),c=m;break e;case"link":var b=rw("link","href",f).get(c+(a.href||""));if(b){for(var E=0;E<b.length;E++)if(m=b[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(E,1);break t}}m=f.createElement(c),un(m,c,a),f.head.appendChild(m);break;case"meta":if(b=rw("meta","content",f).get(c+(a.content||""))){for(E=0;E<b.length;E++)if(m=b[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(E,1);break t}}m=f.createElement(c),un(m,c,a),f.head.appendChild(m);break;default:throw Error(s(468,c))}m[H]=r,mt(m),c=m}r.stateNode=c}else sw(f,r.type,r.stateNode);else r.stateNode=nw(f,c,r.memoizedProps);else m!==c?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,c===null?sw(f,r.type,r.stateNode):nw(f,c,r.memoizedProps)):c===null&&r.stateNode!==null&&Fm(r,r.memoizedProps,a.memoizedProps)}break;case 27:Yn(i,r),Qn(r),c&512&&(Ot||a===null||ls(a,a.return)),a!==null&&c&4&&Fm(r,r.memoizedProps,a.memoizedProps);break;case 5:if(Yn(i,r),Qn(r),c&512&&(Ot||a===null||ls(a,a.return)),r.flags&32){f=r.stateNode;try{cr(f,"")}catch(W){ht(r,r.return,W)}}c&4&&r.stateNode!=null&&(f=r.memoizedProps,Fm(r,f,a!==null?a.memoizedProps:f)),c&1024&&($m=!0);break;case 6:if(Yn(i,r),Qn(r),c&4){if(r.stateNode===null)throw Error(s(162));c=r.memoizedProps,a=r.stateNode;try{a.nodeValue=c}catch(W){ht(r,r.return,W)}}break;case 3:if(zd=null,f=Lr,Lr=Ud(i.containerInfo),Yn(i,r),Lr=f,Qn(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{$c(i.containerInfo)}catch(W){ht(r,r.return,W)}$m&&($m=!1,ux(r));break;case 4:c=Lr,Lr=Ud(r.stateNode.containerInfo),Yn(i,r),Qn(r),Lr=c;break;case 12:Yn(i,r),Qn(r);break;case 13:Yn(i,r),Qn(r),r.child.flags&8192&&r.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Zm=an()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Gm(r,c)));break;case 22:f=r.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,Q=Gs,ne=Ot;if(Gs=Q||f,Ot=ne||D,Yn(i,r),Ot=ne,Gs=Q,Qn(r),c&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||D||Gs||Ot||$a(r)),a=null,i=r;;){if(i.tag===5||i.tag===26){if(a===null){D=a=i;try{if(m=D.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=D.stateNode;var ae=D.memoizedProps.style,X=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(W){ht(D,D.return,W)}}}else if(i.tag===6){if(a===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(W){ht(D,D.return,W)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=r.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Gm(r,a))));break;case 19:Yn(i,r),Qn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Gm(r,c)));break;case 30:break;case 21:break;default:Yn(i,r),Qn(r)}}function Qn(r){var i=r.flags;if(i&2){try{for(var a,c=r.return;c!==null;){if(nx(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,m=qm(r);Nd(r,m,f);break;case 5:var b=a.stateNode;a.flags&32&&(cr(b,""),a.flags&=-33);var E=qm(r);Nd(r,E,b);break;case 3:case 4:var D=a.stateNode.containerInfo,Q=qm(r);Hm(r,Q,D);break;default:throw Error(s(161))}}catch(ne){ht(r,r.return,ne)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function ux(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;ux(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Ri(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ix(r,i.alternate,i),i=i.sibling}function $a(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ci(4,i,i.return),$a(i);break;case 1:ls(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&ex(i,i.return,a),$a(i);break;case 27:Lc(i.stateNode);case 26:case 5:ls(i,i.return),$a(i);break;case 22:i.memoizedState===null&&$a(i);break;case 30:$a(i);break;default:$a(i)}r=r.sibling}}function ji(r,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=r,m=i,b=m.flags;switch(m.tag){case 0:case 11:case 15:ji(f,m,a),Sc(4,m);break;case 1:if(ji(f,m,a),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){ht(c,c.return,Q)}if(c=m,f=c.updateQueue,f!==null){var E=c.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Uy(D[f],E)}catch(Q){ht(c,c.return,Q)}}a&&b&64&&Jv(m),Cc(m,m.return);break;case 27:rx(m);case 26:case 5:ji(f,m,a),a&&c===null&&b&4&&tx(m),Cc(m,m.return);break;case 12:ji(f,m,a);break;case 13:ji(f,m,a),a&&b&4&&lx(f,m);break;case 22:m.memoizedState===null&&ji(f,m,a),Cc(m,m.return);break;case 30:break;default:ji(f,m,a)}i=i.sibling}}function Km(r,i){var a=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==a&&(r!=null&&r.refCount++,a!=null&&fc(a))}function Ym(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&fc(r))}function cs(r,i,a,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)dx(r,i,a,c),i=i.sibling}function dx(r,i,a,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:cs(r,i,a,c),f&2048&&Sc(9,i);break;case 1:cs(r,i,a,c);break;case 3:cs(r,i,a,c),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&fc(r)));break;case 12:if(f&2048){cs(r,i,a,c),r=i.stateNode;try{var m=i.memoizedProps,b=m.id,E=m.onPostCommit;typeof E=="function"&&E(b,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(D){ht(i,i.return,D)}}else cs(r,i,a,c);break;case 13:cs(r,i,a,c);break;case 23:break;case 22:m=i.stateNode,b=i.alternate,i.memoizedState!==null?m._visibility&2?cs(r,i,a,c):Rc(r,i):m._visibility&2?cs(r,i,a,c):(m._visibility|=2,Wo(r,i,a,c,(i.subtreeFlags&10256)!==0)),f&2048&&Km(b,i);break;case 24:cs(r,i,a,c),f&2048&&Ym(i.alternate,i);break;default:cs(r,i,a,c)}}function Wo(r,i,a,c,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=r,b=i,E=a,D=c,Q=b.flags;switch(b.tag){case 0:case 11:case 15:Wo(m,b,E,D,f),Sc(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?Wo(m,b,E,D,f):Rc(m,b):(ne._visibility|=2,Wo(m,b,E,D,f)),f&&Q&2048&&Km(b.alternate,b);break;case 24:Wo(m,b,E,D,f),f&&Q&2048&&Ym(b.alternate,b);break;default:Wo(m,b,E,D,f)}i=i.sibling}}function Rc(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=r,c=i,f=c.flags;switch(c.tag){case 22:Rc(a,c),f&2048&&Km(c.alternate,c);break;case 24:Rc(a,c),f&2048&&Ym(c.alternate,c);break;default:Rc(a,c)}i=i.sibling}}var jc=8192;function Zo(r){if(r.subtreeFlags&jc)for(r=r.child;r!==null;)hx(r),r=r.sibling}function hx(r){switch(r.tag){case 26:Zo(r),r.flags&jc&&r.memoizedState!==null&&oN(Lr,r.memoizedState,r.memoizedProps);break;case 5:Zo(r);break;case 3:case 4:var i=Lr;Lr=Ud(r.stateNode.containerInfo),Zo(r),Lr=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=jc,jc=16777216,Zo(r),jc=i):Zo(r));break;default:Zo(r)}}function fx(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Ic(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];tn=c,px(c,r)}fx(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)mx(r),r=r.sibling}function mx(r){switch(r.tag){case 0:case 11:case 15:Ic(r),r.flags&2048&&Ci(9,r,r.return);break;case 3:Ic(r);break;case 12:Ic(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Sd(r)):Ic(r);break;default:Ic(r)}}function Sd(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];tn=c,px(c,r)}fx(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ci(8,i,i.return),Sd(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Sd(i));break;default:Sd(i)}r=r.sibling}}function px(r,i){for(;tn!==null;){var a=tn;switch(a.tag){case 0:case 11:case 15:Ci(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:fc(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,tn=c;else e:for(a=r;tn!==null;){c=tn;var f=c.sibling,m=c.return;if(ax(c),c===a){tn=null;break e}if(f!==null){f.return=m,tn=f;break e}tn=m}}}var EA={getCacheForType:function(r){var i=gn(Yt),a=i.data.get(r);return a===void 0&&(a=r(),i.data.set(r,a)),a}},TA=typeof WeakMap=="function"?WeakMap:Map,it=0,gt=null,Fe=null,Qe=0,at=0,Xn=null,Ii=!1,Jo=!1,Qm=!1,Ys=0,jt=0,ki=0,Ga=0,Xm=0,gr=0,el=0,kc=null,Vn=null,Wm=!1,Zm=0,Cd=1/0,Rd=null,Di=null,cn=0,Oi=null,tl=null,nl=0,Jm=0,ep=null,gx=null,Dc=0,tp=null;function Wn(){if((it&2)!==0&&Qe!==0)return Qe&-Qe;if(G.T!==null){var r=qo;return r!==0?r:lp()}return Rr()}function yx(){gr===0&&(gr=(Qe&536870912)===0||et?ha():536870912);var r=pr.current;return r!==null&&(r.flags|=32),gr}function Zn(r,i,a){(r===gt&&(at===2||at===9)||r.cancelPendingCommit!==null)&&(rl(r,0),Pi(r,Qe,gr,!1)),At(r,a),((it&2)===0||r!==gt)&&(r===gt&&((it&2)===0&&(Ga|=a),jt===4&&Pi(r,Qe,gr,!1)),us(r))}function vx(r,i,a){if((it&6)!==0)throw Error(s(327));var c=!a&&(i&124)===0&&(i&r.expiredLanes)===0||Sr(r,i),f=c?SA(r,i):sp(r,i,!0),m=c;do{if(f===0){Jo&&!c&&Pi(r,i,0,!1);break}else{if(a=r.current.alternate,m&&!AA(a)){f=sp(r,i,!1),m=!1;continue}if(f===2){if(m=i,r.errorRecoveryDisabledLanes&m)var b=0;else b=r.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var E=r;f=kc;var D=E.current.memoizedState.isDehydrated;if(D&&(rl(E,b).flags|=256),b=sp(E,b,!1),b!==2){if(Qm&&!D){E.errorRecoveryDisabledLanes|=m,Ga|=m,f=4;break e}m=Vn,Vn=f,m!==null&&(Vn===null?Vn=m:Vn.push.apply(Vn,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){rl(r,0),Pi(r,i,0,!0);break}e:{switch(c=r,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Pi(c,i,gr,!Ii);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Zm+300-an(),10<f)){if(Pi(c,i,gr,!Ii),Tn(c,0,!0)!==0)break e;c.timeoutHandle=Kx(xx.bind(null,c,a,Vn,Rd,Wm,i,gr,Ga,el,Ii,m,2,-0,0),f);break e}xx(c,a,Vn,Rd,Wm,i,gr,Ga,el,Ii,m,0,-0,0)}}break}while(!0);us(r)}function xx(r,i,a,c,f,m,b,E,D,Q,ne,ae,X,W){if(r.timeoutHandle=-1,ae=i.subtreeFlags,(ae&8192||(ae&16785408)===16785408)&&(Bc={stylesheets:null,count:0,unsuspend:aN},hx(i),ae=lN(),ae!==null)){r.cancelPendingCommit=ae(Nx.bind(null,r,i,m,a,c,f,b,E,D,ne,1,X,W)),Pi(r,m,b,!Q);return}Nx(r,i,m,a,c,f,b,E,D)}function AA(r){for(var i=r;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],m=f.getSnapshot;f=f.value;try{if(!Gn(m(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Pi(r,i,a,c){i&=~Xm,i&=~Ga,r.suspendedLanes|=i,r.pingedLanes&=~i,c&&(r.warmLanes|=i),c=r.expirationTimes;for(var f=i;0<f;){var m=31-ft(f),b=1<<m;c[m]=-1,f&=~b}a!==0&&Cr(r,a,i)}function jd(){return(it&6)===0?(Oc(0),!1):!0}function np(){if(Fe!==null){if(at===0)var r=Fe.return;else r=Fe,Bs=Ba=null,xm(r),Qo=null,Tc=0,r=Fe;for(;r!==null;)Zv(r.alternate,r),r=r.return;Fe=null}}function rl(r,i){var a=r.timeoutHandle;a!==-1&&(r.timeoutHandle=-1,qA(a)),a=r.cancelPendingCommit,a!==null&&(r.cancelPendingCommit=null,a()),np(),gt=r,Fe=a=Ls(r.current,null),Qe=i,at=0,Xn=null,Ii=!1,Jo=Sr(r,i),Qm=!1,el=gr=Xm=Ga=ki=jt=0,Vn=kc=null,Wm=!1,(i&8)!==0&&(i|=i&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=i;0<c;){var f=31-ft(c),m=1<<f;i|=r[f],c&=~m}return Ys=i,Zu(),a}function wx(r,i){Ve=null,G.H=yd,i===pc||i===od?(i=Ly(),at=3):i===Oy?(i=Ly(),at=4):at=i===Vv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Xn=i,Fe===null&&(jt=1,_d(r,dr(i,r.current)))}function bx(){var r=G.H;return G.H=yd,r===null?yd:r}function _x(){var r=G.A;return G.A=EA,r}function rp(){jt=4,Ii||(Qe&4194048)!==Qe&&pr.current!==null||(Jo=!0),(ki&134217727)===0&&(Ga&134217727)===0||gt===null||Pi(gt,Qe,gr,!1)}function sp(r,i,a){var c=it;it|=2;var f=bx(),m=_x();(gt!==r||Qe!==i)&&(Rd=null,rl(r,i)),i=!1;var b=jt;e:do try{if(at!==0&&Fe!==null){var E=Fe,D=Xn;switch(at){case 8:np(),b=6;break e;case 3:case 2:case 9:case 6:pr.current===null&&(i=!0);var Q=at;if(at=0,Xn=null,sl(r,E,D,Q),a&&Jo){b=0;break e}break;default:Q=at,at=0,Xn=null,sl(r,E,D,Q)}}NA(),b=jt;break}catch(ne){wx(r,ne)}while(!0);return i&&r.shellSuspendCounter++,Bs=Ba=null,it=c,G.H=f,G.A=m,Fe===null&&(gt=null,Qe=0,Zu()),b}function NA(){for(;Fe!==null;)Ex(Fe)}function SA(r,i){var a=it;it|=2;var c=bx(),f=_x();gt!==r||Qe!==i?(Rd=null,Cd=an()+500,rl(r,i)):Jo=Sr(r,i);e:do try{if(at!==0&&Fe!==null){i=Fe;var m=Xn;t:switch(at){case 1:at=0,Xn=null,sl(r,i,m,1);break;case 2:case 9:if(Py(m)){at=0,Xn=null,Tx(i);break}i=function(){at!==2&&at!==9||gt!==r||(at=7),us(r)},m.then(i,i);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:Py(m)?(at=0,Xn=null,Tx(i)):(at=0,Xn=null,sl(r,i,m,7));break;case 5:var b=null;switch(Fe.tag){case 26:b=Fe.memoizedState;case 5:case 27:var E=Fe;if(!b||iw(b)){at=0,Xn=null;var D=E.sibling;if(D!==null)Fe=D;else{var Q=E.return;Q!==null?(Fe=Q,Id(Q)):Fe=null}break t}}at=0,Xn=null,sl(r,i,m,5);break;case 6:at=0,Xn=null,sl(r,i,m,6);break;case 8:np(),jt=6;break e;default:throw Error(s(462))}}CA();break}catch(ne){wx(r,ne)}while(!0);return Bs=Ba=null,G.H=c,G.A=f,it=a,Fe!==null?0:(gt=null,Qe=0,Zu(),jt)}function CA(){for(;Fe!==null&&!vo();)Ex(Fe)}function Ex(r){var i=Xv(r.alternate,r,Ys);r.memoizedProps=r.pendingProps,i===null?Id(r):Fe=i}function Tx(r){var i=r,a=i.alternate;switch(i.tag){case 15:case 0:i=Hv(a,i,i.pendingProps,i.type,void 0,Qe);break;case 11:i=Hv(a,i,i.pendingProps,i.type.render,i.ref,Qe);break;case 5:xm(i);default:Zv(a,i),i=Fe=Ay(i,Ys),i=Xv(a,i,Ys)}r.memoizedProps=r.pendingProps,i===null?Id(r):Fe=i}function sl(r,i,a,c){Bs=Ba=null,xm(i),Qo=null,Tc=0;var f=i.return;try{if(yA(r,f,i,a,Qe)){jt=1,_d(r,dr(a,r.current)),Fe=null;return}}catch(m){if(f!==null)throw Fe=f,m;jt=1,_d(r,dr(a,r.current)),Fe=null;return}i.flags&32768?(et||c===1?r=!0:Jo||(Qe&536870912)!==0?r=!1:(Ii=r=!0,(c===2||c===9||c===3||c===6)&&(c=pr.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ax(i,r)):Id(i)}function Id(r){var i=r;do{if((i.flags&32768)!==0){Ax(i,Ii);return}r=i.return;var a=xA(i.alternate,i,Ys);if(a!==null){Fe=a;return}if(i=i.sibling,i!==null){Fe=i;return}Fe=i=r}while(i!==null);jt===0&&(jt=5)}function Ax(r,i){do{var a=wA(r.alternate,r);if(a!==null){a.flags&=32767,Fe=a;return}if(a=r.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(r=r.sibling,r!==null)){Fe=r;return}Fe=r=a}while(r!==null);jt=6,Fe=null}function Nx(r,i,a,c,f,m,b,E,D){r.cancelPendingCommit=null;do kd();while(cn!==0);if((it&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Yf,Eo(r,a,m,b,E,D),r===gt&&(Fe=gt=null,Qe=0),tl=i,Oi=r,nl=a,Jm=m,ep=f,gx=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,kA(on,function(){return Ix(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=G.T,G.T=null,f=oe.p,oe.p=2,b=it,it|=4;try{bA(r,i,a)}finally{it=b,oe.p=f,G.T=c}}cn=1,Sx(),Cx(),Rx()}}function Sx(){if(cn===1){cn=0;var r=Oi,i=tl,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var c=oe.p;oe.p=2;var f=it;it|=4;try{cx(i,r);var m=gp,b=py(r.containerInfo),E=m.focusedElem,D=m.selectionRange;if(b!==E&&E&&E.ownerDocument&&my(E.ownerDocument.documentElement,E)){if(D!==null&&qf(E)){var Q=D.start,ne=D.end;if(ne===void 0&&(ne=Q),"selectionStart"in E)E.selectionStart=Q,E.selectionEnd=Math.min(ne,E.value.length);else{var ae=E.ownerDocument||document,X=ae&&ae.defaultView||window;if(X.getSelection){var W=X.getSelection(),ke=E.textContent.length,Se=Math.min(D.start,ke),ut=D.end===void 0?Se:Math.min(D.end,ke);!W.extend&&Se>ut&&(b=ut,ut=Se,Se=b);var $=fy(E,Se),B=fy(E,ut);if($&&B&&(W.rangeCount!==1||W.anchorNode!==$.node||W.anchorOffset!==$.offset||W.focusNode!==B.node||W.focusOffset!==B.offset)){var K=ae.createRange();K.setStart($.node,$.offset),W.removeAllRanges(),Se>ut?(W.addRange(K),W.extend(B.node,B.offset)):(K.setEnd(B.node,B.offset),W.addRange(K))}}}}for(ae=[],W=E;W=W.parentNode;)W.nodeType===1&&ae.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ae.length;E++){var re=ae[E];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Hd=!!pp,gp=pp=null}finally{it=f,oe.p=c,G.T=a}}r.current=i,cn=2}}function Cx(){if(cn===2){cn=0;var r=Oi,i=tl,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var c=oe.p;oe.p=2;var f=it;it|=4;try{ix(r,i.alternate,i)}finally{it=f,oe.p=c,G.T=a}}cn=3}}function Rx(){if(cn===4||cn===3){cn=0,js();var r=Oi,i=tl,a=nl,c=gx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?cn=5:(cn=0,tl=Oi=null,jx(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Di=null),ma(a),i=i.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Xr,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=G.T,f=oe.p,oe.p=2,G.T=null;try{for(var m=r.onRecoverableError,b=0;b<c.length;b++){var E=c[b];m(E.value,{componentStack:E.stack})}}finally{G.T=i,oe.p=f}}(nl&3)!==0&&kd(),us(r),f=r.pendingLanes,(a&4194090)!==0&&(f&42)!==0?r===tp?Dc++:(Dc=0,tp=r):Dc=0,Oc(0)}}function jx(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,fc(i)))}function kd(r){return Sx(),Cx(),Rx(),Ix()}function Ix(){if(cn!==5)return!1;var r=Oi,i=Jm;Jm=0;var a=ma(nl),c=G.T,f=oe.p;try{oe.p=32>a?32:a,G.T=null,a=ep,ep=null;var m=Oi,b=nl;if(cn=0,tl=Oi=null,nl=0,(it&6)!==0)throw Error(s(331));var E=it;if(it|=4,mx(m.current),dx(m,m.current,b,a),it=E,Oc(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Xr,m)}catch{}return!0}finally{oe.p=f,G.T=c,jx(r,i)}}function kx(r,i,a){i=dr(a,i),i=Dm(r.stateNode,i,2),r=Ti(r,i,2),r!==null&&(At(r,2),us(r))}function ht(r,i,a){if(r.tag===3)kx(r,r,a);else for(;i!==null;){if(i.tag===3){kx(i,r,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Di===null||!Di.has(c))){r=dr(a,r),a=Mv(2),c=Ti(i,a,2),c!==null&&(Lv(a,c,i,r),At(c,2),us(c));break}}i=i.return}}function ip(r,i,a){var c=r.pingCache;if(c===null){c=r.pingCache=new TA;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(a)||(Qm=!0,f.add(a),r=RA.bind(null,r,i,a),i.then(r,r))}function RA(r,i,a){var c=r.pingCache;c!==null&&c.delete(i),r.pingedLanes|=r.suspendedLanes&a,r.warmLanes&=~a,gt===r&&(Qe&a)===a&&(jt===4||jt===3&&(Qe&62914560)===Qe&&300>an()-Zm?(it&2)===0&&rl(r,0):Xm|=a,el===Qe&&(el=0)),us(r)}function Dx(r,i){i===0&&(i=Wr()),r=Uo(r,i),r!==null&&(At(r,i),us(r))}function jA(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),Dx(r,a)}function IA(r,i){var a=0;switch(r.tag){case 13:var c=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),Dx(r,a)}function kA(r,i){return Ye(r,i)}var Dd=null,il=null,ap=!1,Od=!1,op=!1,Ka=0;function us(r){r!==il&&r.next===null&&(il===null?Dd=il=r:il=il.next=r),Od=!0,ap||(ap=!0,OA())}function Oc(r,i){if(!op&&Od){op=!0;do for(var a=!1,c=Dd;c!==null;){if(r!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var b=c.suspendedLanes,E=c.pingedLanes;m=(1<<31-ft(42|r)+1)-1,m&=f&~(b&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Lx(c,m))}else m=Qe,m=Tn(c,c===gt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Sr(c,m)||(a=!0,Lx(c,m));c=c.next}while(a);op=!1}}function DA(){Ox()}function Ox(){Od=ap=!1;var r=0;Ka!==0&&(FA()&&(r=Ka),Ka=0);for(var i=an(),a=null,c=Dd;c!==null;){var f=c.next,m=Px(c,i);m===0?(c.next=null,a===null?Dd=f:a.next=f,f===null&&(il=a)):(a=c,(r!==0||(m&3)!==0)&&(Od=!0)),c=f}Oc(r)}function Px(r,i){for(var a=r.suspendedLanes,c=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var b=31-ft(m),E=1<<b,D=f[b];D===-1?((E&a)===0||(E&c)!==0)&&(f[b]=di(E,i)):D<=i&&(r.expiredLanes|=E),m&=~E}if(i=gt,a=Qe,a=Tn(r,r===i?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,a===0||r===i&&(at===2||at===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&Rs(c),r.callbackNode=null,r.callbackPriority=0;if((a&3)===0||Sr(r,a)){if(i=a&-a,i===r.callbackPriority)return i;switch(c!==null&&Rs(c),ma(a)){case 2:case 8:a=Ut;break;case 32:a=on;break;case 268435456:a=Tr;break;default:a=on}return c=Mx.bind(null,r),a=Ye(a,c),r.callbackPriority=i,r.callbackNode=a,i}return c!==null&&c!==null&&Rs(c),r.callbackPriority=2,r.callbackNode=null,2}function Mx(r,i){if(cn!==0&&cn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var a=r.callbackNode;if(kd()&&r.callbackNode!==a)return null;var c=Qe;return c=Tn(r,r===gt?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(vx(r,c,i),Px(r,an()),r.callbackNode!=null&&r.callbackNode===a?Mx.bind(null,r):null)}function Lx(r,i){if(kd())return null;vx(r,i,!0)}function OA(){HA(function(){(it&6)!==0?Ye(Tt,DA):Ox()})}function lp(){return Ka===0&&(Ka=ha()),Ka}function Vx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:kr(""+r)}function Ux(r,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,r.id&&a.setAttribute("form",r.id),i.parentNode.insertBefore(a,i),r=new FormData(r),a.parentNode.removeChild(a),r}function PA(r,i,a,c,f){if(i==="submit"&&a&&a.stateNode===f){var m=Vx((f[me]||null).action),b=c.submitter;b&&(i=(i=b[me]||null)?Vx(i.formAction):b.getAttribute("formAction"),i!==null&&(m=i,b=null));var E=new Na("action","action",null,c,f);r.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ka!==0){var D=b?Ux(f,b):new FormData(f);Cm(a,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(E.preventDefault(),D=b?Ux(f,b):new FormData(f),Cm(a,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var cp=0;cp<Kf.length;cp++){var up=Kf[cp],MA=up.toLowerCase(),LA=up[0].toUpperCase()+up.slice(1);Mr(MA,"on"+LA)}Mr(vy,"onAnimationEnd"),Mr(xy,"onAnimationIteration"),Mr(wy,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(eA,"onTransitionRun"),Mr(tA,"onTransitionStart"),Mr(nA,"onTransitionCancel"),Mr(by,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ts("onBeforeInput",["compositionend","keypress","textInput","paste"]),ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pc));function Bx(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],f=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var b=c.length-1;0<=b;b--){var E=c[b],D=E.instance,Q=E.currentTarget;if(E=E.listener,D!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=Q;try{m(f)}catch(ne){bd(ne)}f.currentTarget=null,m=D}else for(b=0;b<c.length;b++){if(E=c[b],D=E.instance,Q=E.currentTarget,E=E.listener,D!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=Q;try{m(f)}catch(ne){bd(ne)}f.currentTarget=null,m=D}}}}function qe(r,i){var a=i[We];a===void 0&&(a=i[We]=new Set);var c=r+"__bubble";a.has(c)||(zx(i,r,2,!1),a.add(c))}function dp(r,i,a){var c=0;i&&(c|=4),zx(a,r,c,i)}var Pd="_reactListening"+Math.random().toString(36).slice(2);function hp(r){if(!r[Pd]){r[Pd]=!0,To.forEach(function(a){a!=="selectionchange"&&(VA.has(a)||dp(a,!1,r),dp(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Pd]||(i[Pd]=!0,dp("selectionchange",!1,i))}}function zx(r,i,a,c){switch(dw(i)){case 2:var f=dN;break;case 8:f=hN;break;default:f=Np}a=f.bind(null,i,a,r),f=void 0,!Ps||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?r.addEventListener(i,a,{capture:!0,passive:f}):r.addEventListener(i,a,!0):f!==void 0?r.addEventListener(i,a,{passive:f}):r.addEventListener(i,a,!1)}function fp(r,i,a,c,f){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var E=c.stateNode.containerInfo;if(E===f)break;if(b===4)for(b=c.return;b!==null;){var D=b.tag;if((D===3||D===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;E!==null;){if(b=or(E),b===null)return;if(D=b.tag,D===5||D===6||D===26||D===27){c=m=b;continue e}E=E.parentNode}}c=c.return}Ea(function(){var Q=m,ne=Zl(a),ae=[];e:{var X=_y.get(r);if(X!==void 0){var W=Na,ke=r;switch(r){case"keypress":if(Ta(a)===0)break e;case"keydown":case"keyup":W=Po;break;case"focusin":ke="focus",W=ko;break;case"focusout":ke="blur",W=ko;break;case"beforeblur":case"afterblur":W=ko;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Ia;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=qu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=wi;break;case vy:case xy:case wy:W=ec;break;case by:W=v;break;case"scroll":case"scrollend":W=Ca;break;case"wheel":W=N;break;case"copy":case"cut":case"paste":W=$u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=rc;break;case"toggle":case"beforetoggle":W=Z}var Se=(i&4)!==0,ut=!Se&&(r==="scroll"||r==="scrollend"),$=Se?X!==null?X+"Capture":null:X;Se=[];for(var B=Q,K;B!==null;){var re=B;if(K=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||K===null||$===null||(re=vi(B,$),re!=null&&Se.push(Mc(B,re,K))),ut)break;B=B.return}0<Se.length&&(X=new W(X,ke,null,a,ne),ae.push({event:X,listeners:Se}))}}if((i&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",W=r==="mouseout"||r==="pointerout",X&&a!==Wl&&(ke=a.relatedTarget||a.fromElement)&&(or(ke)||ke[Ee]))break e;if((W||X)&&(X=ne.window===ne?ne:(X=ne.ownerDocument)?X.defaultView||X.parentWindow:window,W?(ke=a.relatedTarget||a.toElement,W=Q,ke=ke?or(ke):null,ke!==null&&(ut=l(ke),Se=ke.tag,ke!==ut||Se!==5&&Se!==27&&Se!==6)&&(ke=null)):(W=null,ke=Q),W!==ke)){if(Se=Ia,re="onMouseLeave",$="onMouseEnter",B="mouse",(r==="pointerout"||r==="pointerover")&&(Se=rc,re="onPointerLeave",$="onPointerEnter",B="pointer"),ut=W==null?X:Jr(W),K=ke==null?X:Jr(ke),X=new Se(re,B+"leave",W,a,ne),X.target=ut,X.relatedTarget=K,re=null,or(ne)===Q&&(Se=new Se($,B+"enter",ke,a,ne),Se.target=K,Se.relatedTarget=ut,re=Se),ut=re,W&&ke)t:{for(Se=W,$=ke,B=0,K=Se;K;K=al(K))B++;for(K=0,re=$;re;re=al(re))K++;for(;0<B-K;)Se=al(Se),B--;for(;0<K-B;)$=al($),K--;for(;B--;){if(Se===$||$!==null&&Se===$.alternate)break t;Se=al(Se),$=al($)}Se=null}else Se=null;W!==null&&Fx(ae,X,W,Se,!1),ke!==null&&ut!==null&&Fx(ae,ut,ke,Se,!0)}}e:{if(X=Q?Jr(Q):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var we=oy;else if(iy(X))if(ly)we=WT;else{we=QT;var ze=YT}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Ro(Q.elementType)&&(we=oy):we=XT;if(we&&(we=we(r,Q))){ay(ae,we,a,ne);break e}ze&&ze(r,X,Q),r==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&Yl(X,"number",X.value)}switch(ze=Q?Jr(Q):window,r){case"focusin":(iy(ze)||ze.contentEditable==="true")&&(Mo=ze,Hf=Q,lc=null);break;case"focusout":lc=Hf=Mo=null;break;case"mousedown":$f=!0;break;case"contextmenu":case"mouseup":case"dragend":$f=!1,gy(ae,a,ne);break;case"selectionchange":if(JT)break;case"keydown":case"keyup":gy(ae,a,ne)}var be;if(Pe)e:{switch(r){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Pr?Dr(r,a)&&(Re="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(kt&&a.locale!=="ko"&&(Pr||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Pr&&(be=Fu()):(ur=ne,pt="value"in ur?ur.value:ur.textContent,Pr=!0)),ze=Md(Q,Re),0<ze.length&&(Re=new nc(Re,r,null,a,ne),ae.push({event:Re,listeners:ze}),be?Re.data=be:(be=Or(a),be!==null&&(Re.data=be)))),(be=st?sc(r,a):$T(r,a))&&(Re=Md(Q,"onBeforeInput"),0<Re.length&&(ze=new nc("onBeforeInput","beforeinput",null,a,ne),ae.push({event:ze,listeners:Re}),ze.data=be)),PA(ae,r,Q,a,ne)}Bx(ae,i)})}function Mc(r,i,a){return{instance:r,listener:i,currentTarget:a}}function Md(r,i){for(var a=i+"Capture",c=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=vi(r,a),f!=null&&c.unshift(Mc(r,f,m)),f=vi(r,i),f!=null&&c.push(Mc(r,f,m))),r.tag===3)return c;r=r.return}return[]}function al(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Fx(r,i,a,c,f){for(var m=i._reactName,b=[];a!==null&&a!==c;){var E=a,D=E.alternate,Q=E.stateNode;if(E=E.tag,D!==null&&D===c)break;E!==5&&E!==26&&E!==27||Q===null||(D=Q,f?(Q=vi(a,m),Q!=null&&b.unshift(Mc(a,Q,D))):f||(Q=vi(a,m),Q!=null&&b.push(Mc(a,Q,D)))),a=a.return}b.length!==0&&r.push({event:i,listeners:b})}var UA=/\r\n?/g,BA=/\u0000|\uFFFD/g;function qx(r){return(typeof r=="string"?r:""+r).replace(UA,`
`).replace(BA,"")}function Hx(r,i){return i=qx(i),qx(r)===i}function Ld(){}function ct(r,i,a,c,f,m){switch(a){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||cr(r,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&cr(r,""+c);break;case"className":va(r,"class",c);break;case"tabIndex":va(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":va(r,a,c);break;case"style":Xl(r,c,m);break;case"data":if(i!=="object"){va(r,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||a!=="href")){r.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(a);break}c=kr(""+c),r.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&ct(r,i,"name",f.name,f,null),ct(r,i,"formEncType",f.formEncType,f,null),ct(r,i,"formMethod",f.formMethod,f,null),ct(r,i,"formTarget",f.formTarget,f,null)):(ct(r,i,"encType",f.encType,f,null),ct(r,i,"method",f.method,f,null),ct(r,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(a);break}c=kr(""+c),r.setAttribute(a,c);break;case"onClick":c!=null&&(r.onclick=Ld);break;case"onScroll":c!=null&&qe("scroll",r);break;case"onScrollEnd":c!=null&&qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}a=kr(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(a,""+c):r.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(a,""):r.removeAttribute(a);break;case"capture":case"download":c===!0?r.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(a,c):r.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(a,c):r.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(a):r.setAttribute(a,c);break;case"popover":qe("beforetoggle",r),qe("toggle",r),ya(r,"popover",c);break;case"xlinkActuate":lr(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":lr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":lr(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":lr(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":lr(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":lr(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":lr(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":lr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":lr(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ya(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Uu.get(a)||a,ya(r,a,c))}}function mp(r,i,a,c,f,m){switch(a){case"style":Xl(r,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"children":typeof c=="string"?cr(r,c):(typeof c=="number"||typeof c=="bigint")&&cr(r,""+c);break;case"onScroll":c!=null&&qe("scroll",r);break;case"onScrollEnd":c!=null&&qe("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Ld);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),m=r[me]||null,m=m!=null?m[a]:null,typeof m=="function"&&r.removeEventListener(i,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(a in r?r[a]=null:r.hasAttribute(a)&&r.removeAttribute(a)),r.addEventListener(i,c,f);break e}a in r?r[a]=c:c===!0?r.setAttribute(a,""):ya(r,a,c)}}}function un(r,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",r),qe("load",r);var c=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var b=a[m];if(b!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ct(r,i,m,b,a,null)}}f&&ct(r,i,"srcSet",a.srcSet,a,null),c&&ct(r,i,"src",a.src,a,null);return;case"input":qe("invalid",r);var E=m=b=f=null,D=null,Q=null;for(c in a)if(a.hasOwnProperty(c)){var ne=a[c];if(ne!=null)switch(c){case"name":f=ne;break;case"type":b=ne;break;case"checked":D=ne;break;case"defaultChecked":Q=ne;break;case"value":m=ne;break;case"defaultValue":E=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,i));break;default:ct(r,i,c,ne,a,null)}}Kl(r,m,E,D,Q,b,f,!1),pi(r);return;case"select":qe("invalid",r),c=b=m=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":b=E;break;case"multiple":c=E;default:ct(r,i,f,E,a,null)}i=m,a=b,r.multiple=!!c,i!=null?gi(r,!!c,i,!1):a!=null&&gi(r,!!c,a,!0);return;case"textarea":qe("invalid",r),m=f=c=null;for(b in a)if(a.hasOwnProperty(b)&&(E=a[b],E!=null))switch(b){case"value":c=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:ct(r,i,b,E,a,null)}Vu(r,c,f,m),pi(r);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(c=a[D],c!=null))switch(D){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ct(r,i,D,c,a,null)}return;case"dialog":qe("beforetoggle",r),qe("toggle",r),qe("cancel",r),qe("close",r);break;case"iframe":case"object":qe("load",r);break;case"video":case"audio":for(c=0;c<Pc.length;c++)qe(Pc[c],r);break;case"image":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"embed":case"source":case"link":qe("error",r),qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(c=a[Q],c!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ct(r,i,Q,c,a,null)}return;default:if(Ro(i)){for(ne in a)a.hasOwnProperty(ne)&&(c=a[ne],c!==void 0&&mp(r,i,ne,c,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(c=a[E],c!=null&&ct(r,i,E,c,a,null))}function zA(r,i,a,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,E=null,D=null,Q=null,ne=null;for(W in a){var ae=a[W];if(a.hasOwnProperty(W)&&ae!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":D=ae;default:c.hasOwnProperty(W)||ct(r,i,W,null,c,ae)}}for(var X in c){var W=c[X];if(ae=a[X],c.hasOwnProperty(X)&&(W!=null||ae!=null))switch(X){case"type":m=W;break;case"name":f=W;break;case"checked":Q=W;break;case"defaultChecked":ne=W;break;case"value":b=W;break;case"defaultValue":E=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:W!==ae&&ct(r,i,X,W,c,ae)}}Gl(r,b,E,D,Q,ne,m,f);return;case"select":W=b=E=X=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":W=D;default:c.hasOwnProperty(m)||ct(r,i,m,null,c,D)}for(f in c)if(m=c[f],D=a[f],c.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":X=m;break;case"defaultValue":E=m;break;case"multiple":b=m;default:m!==D&&ct(r,i,f,m,c,D)}i=E,a=b,c=W,X!=null?gi(r,!!a,X,!1):!!c!=!!a&&(i!=null?gi(r,!!a,i,!0):gi(r,!!a,a?[]:"",!1));return;case"textarea":W=X=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ct(r,i,E,null,c,f)}for(b in c)if(f=c[b],m=a[b],c.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":X=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&ct(r,i,b,f,c,m)}Lu(r,X,W);return;case"option":for(var ke in a)if(X=a[ke],a.hasOwnProperty(ke)&&X!=null&&!c.hasOwnProperty(ke))switch(ke){case"selected":r.selected=!1;break;default:ct(r,i,ke,null,c,X)}for(D in c)if(X=c[D],W=a[D],c.hasOwnProperty(D)&&X!==W&&(X!=null||W!=null))switch(D){case"selected":r.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ct(r,i,D,X,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)X=a[Se],a.hasOwnProperty(Se)&&X!=null&&!c.hasOwnProperty(Se)&&ct(r,i,Se,null,c,X);for(Q in c)if(X=c[Q],W=a[Q],c.hasOwnProperty(Q)&&X!==W&&(X!=null||W!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:ct(r,i,Q,X,c,W)}return;default:if(Ro(i)){for(var ut in a)X=a[ut],a.hasOwnProperty(ut)&&X!==void 0&&!c.hasOwnProperty(ut)&&mp(r,i,ut,void 0,c,X);for(ne in c)X=c[ne],W=a[ne],!c.hasOwnProperty(ne)||X===W||X===void 0&&W===void 0||mp(r,i,ne,X,c,W);return}}for(var $ in a)X=a[$],a.hasOwnProperty($)&&X!=null&&!c.hasOwnProperty($)&&ct(r,i,$,null,c,X);for(ae in c)X=c[ae],W=a[ae],!c.hasOwnProperty(ae)||X===W||X==null&&W==null||ct(r,i,ae,X,c,W)}var pp=null,gp=null;function Vd(r){return r.nodeType===9?r:r.ownerDocument}function $x(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gx(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function yp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var vp=null;function FA(){var r=window.event;return r&&r.type==="popstate"?r===vp?!1:(vp=r,!0):(vp=null,!1)}var Kx=typeof setTimeout=="function"?setTimeout:void 0,qA=typeof clearTimeout=="function"?clearTimeout:void 0,Yx=typeof Promise=="function"?Promise:void 0,HA=typeof queueMicrotask=="function"?queueMicrotask:typeof Yx<"u"?function(r){return Yx.resolve(null).then(r).catch($A)}:Kx;function $A(r){setTimeout(function(){throw r})}function Mi(r){return r==="head"}function Qx(r,i){var a=i,c=0,f=0;do{var m=a.nextSibling;if(r.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<c&&8>c){a=c;var b=r.ownerDocument;if(a&1&&Lc(b.documentElement),a&2&&Lc(b.body),a&4)for(a=b.head,Lc(a),b=a.firstChild;b;){var E=b.nextSibling,D=b.nodeName;b[ar]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=E}}if(f===0){r.removeChild(m),$c(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:c=a.charCodeAt(0)-48;else c=0;a=m}while(a);$c(i)}function xp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":xp(a),fi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}r.removeChild(a)}}function GA(r,i,a,c){for(;r.nodeType===1;){var f=a;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[ar])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Vr(r.nextSibling),r===null)break}return null}function KA(r,i,a){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Vr(r.nextSibling),r===null))return null;return r}function wp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function YA(r,i){var a=r.ownerDocument;if(r.data!=="$?"||a.readyState==="complete")i();else{var c=function(){i(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function Vr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var bp=null;function Xx(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}function Wx(r,i,a){switch(i=Vd(a),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Lc(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);fi(r)}var yr=new Map,Zx=new Set;function Ud(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Qs=oe.d;oe.d={f:QA,r:XA,D:WA,C:ZA,L:JA,m:eN,X:nN,S:tN,M:rN};function QA(){var r=Qs.f(),i=jd();return r||i}function XA(r){var i=jr(r);i!==null&&i.tag===5&&i.type==="form"?vv(i):Qs.r(r)}var ol=typeof document>"u"?null:document;function Jx(r,i,a){var c=ol;if(c&&typeof i=="string"&&i){var f=Jt(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Zx.has(f)||(Zx.add(f),r={rel:r,crossOrigin:a,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),un(i,"link",r),mt(i),c.head.appendChild(i)))}}function WA(r){Qs.D(r),Jx("dns-prefetch",r,null)}function ZA(r,i){Qs.C(r,i),Jx("preconnect",r,i)}function JA(r,i,a){Qs.L(r,i,a);var c=ol;if(c&&r&&i){var f='link[rel="preload"][as="'+Jt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Jt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Jt(a.imageSizes)+'"]')):f+='[href="'+Jt(r)+'"]';var m=f;switch(i){case"style":m=ll(r);break;case"script":m=cl(r)}yr.has(m)||(r=x({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:r,as:i},a),yr.set(m,r),c.querySelector(f)!==null||i==="style"&&c.querySelector(Vc(m))||i==="script"&&c.querySelector(Uc(m))||(i=c.createElement("link"),un(i,"link",r),mt(i),c.head.appendChild(i)))}}function eN(r,i){Qs.m(r,i);var a=ol;if(a&&r){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Jt(c)+'"][href="'+Jt(r)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=cl(r)}if(!yr.has(m)&&(r=x({rel:"modulepreload",href:r},i),yr.set(m,r),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Uc(m)))return}c=a.createElement("link"),un(c,"link",r),mt(c),a.head.appendChild(c)}}}function tN(r,i,a){Qs.S(r,i,a);var c=ol;if(c&&r){var f=es(c).hoistableStyles,m=ll(r);i=i||"default";var b=f.get(m);if(!b){var E={loading:0,preload:null};if(b=c.querySelector(Vc(m)))E.loading=5;else{r=x({rel:"stylesheet",href:r,"data-precedence":i},a),(a=yr.get(m))&&_p(r,a);var D=b=c.createElement("link");mt(D),un(D,"link",r),D._p=new Promise(function(Q,ne){D.onload=Q,D.onerror=ne}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Bd(b,i,c)}b={type:"stylesheet",instance:b,count:1,state:E},f.set(m,b)}}}function nN(r,i){Qs.X(r,i);var a=ol;if(a&&r){var c=es(a).hoistableScripts,f=cl(r),m=c.get(f);m||(m=a.querySelector(Uc(f)),m||(r=x({src:r,async:!0},i),(i=yr.get(f))&&Ep(r,i),m=a.createElement("script"),mt(m),un(m,"link",r),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function rN(r,i){Qs.M(r,i);var a=ol;if(a&&r){var c=es(a).hoistableScripts,f=cl(r),m=c.get(f);m||(m=a.querySelector(Uc(f)),m||(r=x({src:r,async:!0,type:"module"},i),(i=yr.get(f))&&Ep(r,i),m=a.createElement("script"),mt(m),un(m,"link",r),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function ew(r,i,a,c){var f=(f=he.current)?Ud(f):null;if(!f)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ll(a.href),a=es(f).hoistableStyles,c=a.get(i),c||(c={type:"style",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){r=ll(a.href);var m=es(f).hoistableStyles,b=m.get(r);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,b),(m=f.querySelector(Vc(r)))&&!m._p&&(b.instance=m,b.state.loading=5),yr.has(r)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},yr.set(r,a),m||sN(f,r,a,b.state))),i&&c===null)throw Error(s(528,""));return b}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=cl(a),a=es(f).hoistableScripts,c=a.get(i),c||(c={type:"script",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function ll(r){return'href="'+Jt(r)+'"'}function Vc(r){return'link[rel="stylesheet"]['+r+"]"}function tw(r){return x({},r,{"data-precedence":r.precedence,precedence:null})}function sN(r,i,a,c){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=r.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),un(i,"link",a),mt(i),r.head.appendChild(i))}function cl(r){return'[src="'+Jt(r)+'"]'}function Uc(r){return"script[async]"+r}function nw(r,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var c=r.querySelector('style[data-href~="'+Jt(a.href)+'"]');if(c)return i.instance=c,mt(c),c;var f=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),mt(c),un(c,"style",f),Bd(c,a.precedence,r),i.instance=c;case"stylesheet":f=ll(a.href);var m=r.querySelector(Vc(f));if(m)return i.state.loading|=4,i.instance=m,mt(m),m;c=tw(a),(f=yr.get(f))&&_p(c,f),m=(r.ownerDocument||r).createElement("link"),mt(m);var b=m;return b._p=new Promise(function(E,D){b.onload=E,b.onerror=D}),un(m,"link",c),i.state.loading|=4,Bd(m,a.precedence,r),i.instance=m;case"script":return m=cl(a.src),(f=r.querySelector(Uc(m)))?(i.instance=f,mt(f),f):(c=a,(f=yr.get(m))&&(c=x({},a),Ep(c,f)),r=r.ownerDocument||r,f=r.createElement("script"),mt(f),un(f,"link",c),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Bd(c,a.precedence,r));return i.instance}function Bd(r,i,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,b=0;b<c.length;b++){var E=c[b];if(E.dataset.precedence===i)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(r,i.firstChild))}function _p(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Ep(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var zd=null;function rw(r,i,a){if(zd===null){var c=new Map,f=zd=new Map;f.set(a,c)}else f=zd,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(r))return c;for(c.set(r,null),a=a.getElementsByTagName(r),f=0;f<a.length;f++){var m=a[f];if(!(m[ar]||m[H]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(i)||"";b=r+b;var E=c.get(b);E?E.push(m):c.set(b,[m])}}return c}function sw(r,i,a){r=r.ownerDocument||r,r.head.insertBefore(a,i==="title"?r.querySelector("head > title"):null)}function iN(r,i,a){if(a===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function iw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Bc=null;function aN(){}function oN(r,i,a){if(Bc===null)throw Error(s(475));var c=Bc;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=ll(a.href),m=r.querySelector(Vc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=Fd.bind(c),r.then(c,c)),i.state.loading|=4,i.instance=m,mt(m);return}m=r.ownerDocument||r,a=tw(a),(f=yr.get(f))&&_p(a,f),m=m.createElement("link"),mt(m);var b=m;b._p=new Promise(function(E,D){b.onload=E,b.onerror=D}),un(m,"link",a),i.instance=m}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=Fd.bind(c),r.addEventListener("load",i),r.addEventListener("error",i))}}function lN(){if(Bc===null)throw Error(s(475));var r=Bc;return r.stylesheets&&r.count===0&&Tp(r,r.stylesheets),0<r.count?function(i){var a=setTimeout(function(){if(r.stylesheets&&Tp(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(a)}}:null}function Fd(){if(this.count--,this.count===0){if(this.stylesheets)Tp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var qd=null;function Tp(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,qd=new Map,i.forEach(cN,r),qd=null,Fd.call(r))}function cN(r,i){if(!(i.state.loading&4)){var a=qd.get(r);if(a)var c=a.get(null);else{a=new Map,qd.set(r,a);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),c=b)}c&&a.set(null,c)}f=i.instance,b=f.getAttribute("data-precedence"),m=a.get(b)||c,m===c&&a.set(null,f),a.set(b,f),this.count++,c=Fd.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var zc={$$typeof:F,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function uN(r,i,a,c,f,m,b,E){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.hiddenUpdates=hi(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function aw(r,i,a,c,f,m,b,E,D,Q,ne,ae){return r=new uN(r,i,a,b,E,D,Q,ae),i=1,m===!0&&(i|=24),m=Kn(3,null,null,i),r.current=m,m.stateNode=r,i=im(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:c,isDehydrated:a,cache:i},cm(m),r}function ow(r){return r?(r=Bo,r):Bo}function lw(r,i,a,c,f,m){f=ow(f),c.context===null?c.context=f:c.pendingContext=f,c=Ei(i),c.payload={element:a},m=m===void 0?null:m,m!==null&&(c.callback=m),a=Ti(r,c,i),a!==null&&(Zn(a,r,i),yc(a,r,i))}function cw(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function Ap(r,i){cw(r,i),(r=r.alternate)&&cw(r,i)}function uw(r){if(r.tag===13){var i=Uo(r,67108864);i!==null&&Zn(i,r,67108864),Ap(r,67108864)}}var Hd=!0;function dN(r,i,a,c){var f=G.T;G.T=null;var m=oe.p;try{oe.p=2,Np(r,i,a,c)}finally{oe.p=m,G.T=f}}function hN(r,i,a,c){var f=G.T;G.T=null;var m=oe.p;try{oe.p=8,Np(r,i,a,c)}finally{oe.p=m,G.T=f}}function Np(r,i,a,c){if(Hd){var f=Sp(c);if(f===null)fp(r,i,c,$d,a),hw(r,c);else if(mN(f,r,i,a,c))c.stopPropagation();else if(hw(r,c),i&4&&-1<fN.indexOf(r)){for(;f!==null;){var m=jr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Pn(m.pendingLanes);if(b!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var D=1<<31-ft(b);E.entanglements[1]|=D,b&=~D}us(m),(it&6)===0&&(Cd=an()+500,Oc(0))}}break;case 13:E=Uo(m,2),E!==null&&Zn(E,m,2),jd(),Ap(m,2)}if(m=Sp(c),m===null&&fp(r,i,c,$d,a),m===f)break;f=m}f!==null&&c.stopPropagation()}else fp(r,i,c,null,a)}}function Sp(r){return r=Zl(r),Cp(r)}var $d=null;function Cp(r){if($d=null,r=or(r),r!==null){var i=l(r);if(i===null)r=null;else{var a=i.tag;if(a===13){if(r=d(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return $d=r,null}function dw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xo()){case Tt:return 2;case Ut:return 8;case on:case Is:return 32;case Tr:return 268435456;default:return 32}default:return 32}}var Rp=!1,Li=null,Vi=null,Ui=null,Fc=new Map,qc=new Map,Bi=[],fN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hw(r,i){switch(r){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Fc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(i.pointerId)}}function Hc(r,i,a,c,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},i!==null&&(i=jr(i),i!==null&&uw(i)),r):(r.eventSystemFlags|=c,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function mN(r,i,a,c,f){switch(i){case"focusin":return Li=Hc(Li,r,i,a,c,f),!0;case"dragenter":return Vi=Hc(Vi,r,i,a,c,f),!0;case"mouseover":return Ui=Hc(Ui,r,i,a,c,f),!0;case"pointerover":var m=f.pointerId;return Fc.set(m,Hc(Fc.get(m)||null,r,i,a,c,f)),!0;case"gotpointercapture":return m=f.pointerId,qc.set(m,Hc(qc.get(m)||null,r,i,a,c,f)),!0}return!1}function fw(r){var i=or(r.target);if(i!==null){var a=l(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){r.blockedOn=i,$l(r.priority,function(){if(a.tag===13){var c=Wn();c=fa(c);var f=Uo(a,c);f!==null&&Zn(f,a,c),Ap(a,c)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Gd(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=Sp(r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);Wl=c,a.target.dispatchEvent(c),Wl=null}else return i=jr(a),i!==null&&uw(i),r.blockedOn=a,!1;i.shift()}return!0}function mw(r,i,a){Gd(r)&&a.delete(i)}function pN(){Rp=!1,Li!==null&&Gd(Li)&&(Li=null),Vi!==null&&Gd(Vi)&&(Vi=null),Ui!==null&&Gd(Ui)&&(Ui=null),Fc.forEach(mw),qc.forEach(mw)}function Kd(r,i){r.blockedOn===i&&(r.blockedOn=null,Rp||(Rp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,pN)))}var Yd=null;function pw(r){Yd!==r&&(Yd=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Yd===r&&(Yd=null);for(var i=0;i<r.length;i+=3){var a=r[i],c=r[i+1],f=r[i+2];if(typeof c!="function"){if(Cp(c||a)===null)continue;break}var m=jr(a);m!==null&&(r.splice(i,3),i-=3,Cm(m,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function $c(r){function i(D){return Kd(D,r)}Li!==null&&Kd(Li,r),Vi!==null&&Kd(Vi,r),Ui!==null&&Kd(Ui,r),Fc.forEach(i),qc.forEach(i);for(var a=0;a<Bi.length;a++){var c=Bi[a];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Bi.length&&(a=Bi[0],a.blockedOn===null);)fw(a),a.blockedOn===null&&Bi.shift();if(a=(r.ownerDocument||r).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],m=a[c+1],b=f[me]||null;if(typeof m=="function")b||pw(a);else if(b){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[me]||null)E=b.formAction;else if(Cp(f)!==null)continue}else E=b.action;typeof E=="function"?a[c+1]=E:(a.splice(c,3),c-=3),pw(a)}}}function jp(r){this._internalRoot=r}Qd.prototype.render=jp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,c=Wn();lw(a,c,r,i,null,null)},Qd.prototype.unmount=jp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;lw(r.current,2,null,r,null,null),jd(),i[Ee]=null}};function Qd(r){this._internalRoot=r}Qd.prototype.unstable_scheduleHydration=function(r){if(r){var i=Rr();r={blockedOn:null,target:r,priority:i};for(var a=0;a<Bi.length&&i!==0&&i<Bi[a].priority;a++);Bi.splice(a,0,r),a===0&&fw(r)}};var gw=e.version;if(gw!=="19.1.1")throw Error(s(527,gw,"19.1.1"));oe.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=g(i),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var gN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xd.isDisabled&&Xd.supportsFiber)try{Xr=Xd.inject(gN),Zt=Xd}catch{}}return Kc.createRoot=function(r,i){if(!o(r))throw Error(s(299));var a=!1,c="",f=kv,m=Dv,b=Ov,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=aw(r,1,!1,null,null,a,c,f,m,b,E,null),r[Ee]=i.current,hp(r),new jp(i)},Kc.hydrateRoot=function(r,i,a){if(!o(r))throw Error(s(299));var c=!1,f="",m=kv,b=Dv,E=Ov,D=null,Q=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(Q=a.formState)),i=aw(r,1,!0,i,a??null,c,f,m,b,E,D,Q),i.context=ow(null),a=i.current,c=Wn(),c=fa(c),f=Ei(c),f.callback=null,Ti(a,f,c),a=c,i.current.lanes=a,At(i,a),us(i),r[Ee]=i.current,hp(r),new Qd(i)},Kc.version="19.1.1",Kc}var Nw;function SN(){if(Nw)return Dp.exports;Nw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Dp.exports=NN(),Dp.exports}var CN=SN();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Sw="popstate";function RN(t={}){function e(o,l){let{pathname:d="/",search:p="",hash:g=""}=oo(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),ag("",{pathname:d,search:p,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(o,l){let d=o.document.querySelector("base"),p="";if(d&&d.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof l=="string"?l:ou(l))}function s(o,l){wr(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return IN(e,n,s,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jN(){return Math.random().toString(36).substring(2,10)}function Cw(t,e){return{usr:t.state,key:t.key,idx:e}}function ag(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?oo(e):e,state:n,key:e&&e.key||s||jN()}}function ou({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function oo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function IN(t,e,n,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,d=o.history,p="POP",g=null,y=x();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function x(){return(d.state||{idx:null}).idx}function _(){p="POP";let j=x(),q=j==null?null:j-y;y=j,g&&g({action:p,location:U.location,delta:q})}function T(j,q){p="PUSH";let z=ag(U.location,j,q);n&&n(z,j),y=x()+1;let F=Cw(z,y),ie=U.createHref(z);try{d.pushState(F,"",ie)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;o.location.assign(ie)}l&&g&&g({action:p,location:U.location,delta:1})}function I(j,q){p="REPLACE";let z=ag(U.location,j,q);n&&n(z,j),y=x();let F=Cw(z,y),ie=U.createHref(z);d.replaceState(F,"",ie),l&&g&&g({action:p,location:U.location,delta:0})}function V(j){return kN(j)}let U={get action(){return p},get location(){return t(o,d)},listen(j){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Sw,_),g=j,()=>{o.removeEventListener(Sw,_),g=null}},createHref(j){return e(o,j)},createURL:V,encodeLocation(j){let q=V(j);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:T,replace:I,go(j){return d.go(j)}};return U}function kN(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Et(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:ou(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function q2(t,e,n="/"){return DN(t,e,n,!1)}function DN(t,e,n,s){let o=typeof e=="string"?oo(e):e,l=ni(o.pathname||"/",n);if(l==null)return null;let d=H2(t);ON(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=$N(l);p=qN(d[g],y,s)}return p}function H2(t,e=[],n=[],s="",o=!1){let l=(d,p,g=o,y)=>{let x={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(s)&&g)return;Et(x.relativePath.startsWith(s),`Absolute route path "${x.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(s.length)}let _=Zs([s,x.relativePath]),T=n.concat(x);d.children&&d.children.length>0&&(Et(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),H2(d.children,e,T,_,g)),!(d.path==null&&!d.index)&&e.push({path:_,score:zN(_,d.index),routesMeta:T})};return t.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))l(d,p);else for(let g of $2(d.path))l(d,p,!0,g)}),e}function $2(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let d=$2(s.join("/")),p=[];return p.push(...d.map(g=>g===""?l:[l,g].join("/"))),o&&p.push(...d),p.map(g=>t.startsWith("/")&&g===""?"/":g)}function ON(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FN(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var PN=/^:[\w-]+$/,MN=3,LN=2,VN=1,UN=10,BN=-2,Rw=t=>t==="*";function zN(t,e){let n=t.split("/"),s=n.length;return n.some(Rw)&&(s+=BN),e&&(s+=LN),n.filter(o=>!Rw(o)).reduce((o,l)=>o+(PN.test(l)?MN:l===""?VN:UN),s)}function FN(t,e){return t.length===e.length&&t.slice(0,-1).every((s,o)=>s===e[o])?t[t.length-1]-e[e.length-1]:0}function qN(t,e,n=!1){let{routesMeta:s}=t,o={},l="/",d=[];for(let p=0;p<s.length;++p){let g=s[p],y=p===s.length-1,x=l==="/"?e:e.slice(l.length)||"/",_=wh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},x),T=g.route;if(!_&&y&&n&&!s[s.length-1].route.index&&(_=wh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!_)return null;Object.assign(o,_.params),d.push({params:o,pathname:Zs([l,_.pathname]),pathnameBase:QN(Zs([l,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(l=Zs([l,_.pathnameBase]))}return d}function wh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=HN(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((y,{paramName:x,isOptional:_},T)=>{if(x==="*"){let V=p[T]||"";d=l.slice(0,l.length-V.length).replace(/(.)\/+$/,"$1")}const I=p[T];return _&&!I?y[x]=void 0:y[x]=(I||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:d,pattern:t}}function HN(t,e=!1,n=!0){wr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(s.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function $N(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ni(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function GN(t,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof t=="string"?oo(t):t;return{pathname:n?n.startsWith("/")?n:KN(n,e):e,search:XN(s),hash:WN(o)}}function KN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Lp(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Vg(t){let e=YN(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Ug(t,e,n,s=!1){let o;typeof t=="string"?o=oo(t):(o={...t},Et(!o.pathname||!o.pathname.includes("?"),Lp("?","pathname","search",o)),Et(!o.pathname||!o.pathname.includes("#"),Lp("#","pathname","hash",o)),Et(!o.search||!o.search.includes("#"),Lp("#","search","hash",o)));let l=t===""||o.pathname==="",d=l?"/":o.pathname,p;if(d==null)p=n;else{let _=e.length-1;if(!s&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),_-=1;o.pathname=T.join("/")}p=_>=0?e[_]:"/"}let g=GN(o,p),y=d&&d!=="/"&&d.endsWith("/"),x=(l||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||x)&&(g.pathname+="/"),g}var Zs=t=>t.join("/").replace(/\/\/+/g,"/"),QN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var G2=["POST","PUT","PATCH","DELETE"];new Set(G2);var JN=["GET",...G2];new Set(JN);var kl=R.createContext(null);kl.displayName="DataRouter";var rf=R.createContext(null);rf.displayName="DataRouterState";R.createContext(!1);var K2=R.createContext({isTransitioning:!1});K2.displayName="ViewTransition";var eS=R.createContext(new Map);eS.displayName="Fetchers";var tS=R.createContext(null);tS.displayName="Await";var Gr=R.createContext(null);Gr.displayName="Navigation";var yu=R.createContext(null);yu.displayName="Location";var Kr=R.createContext({outlet:null,matches:[],isDataRoute:!1});Kr.displayName="Route";var Bg=R.createContext(null);Bg.displayName="RouteError";function nS(t,{relative:e}={}){Et(Dl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=R.useContext(Gr),{hash:o,pathname:l,search:d}=vu(t,{relative:e}),p=l;return n!=="/"&&(p=l==="/"?n:Zs([n,l])),s.createHref({pathname:p,search:d,hash:o})}function Dl(){return R.useContext(yu)!=null}function la(){return Et(Dl(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(yu).location}var Y2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Q2(t){R.useContext(Gr).static||R.useLayoutEffect(t)}function Er(){let{isDataRoute:t}=R.useContext(Kr);return t?gS():rS()}function rS(){Et(Dl(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(kl),{basename:e,navigator:n}=R.useContext(Gr),{matches:s}=R.useContext(Kr),{pathname:o}=la(),l=JSON.stringify(Vg(s)),d=R.useRef(!1);return Q2(()=>{d.current=!0}),R.useCallback((g,y={})=>{if(wr(d.current,Y2),!d.current)return;if(typeof g=="number"){n.go(g);return}let x=Ug(g,JSON.parse(l),o,y.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Zs([e,x.pathname])),(y.replace?n.replace:n.push)(x,y.state,y)},[e,n,l,o,t])}R.createContext(null);function sS(){let{matches:t}=R.useContext(Kr),e=t[t.length-1];return e?e.params:{}}function vu(t,{relative:e}={}){let{matches:n}=R.useContext(Kr),{pathname:s}=la(),o=JSON.stringify(Vg(n));return R.useMemo(()=>Ug(t,JSON.parse(o),s,e==="path"),[t,o,s,e])}function iS(t,e){return X2(t,e)}function X2(t,e,n,s,o){Et(Dl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=R.useContext(Gr),{matches:d}=R.useContext(Kr),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",x=p?p.pathnameBase:"/",_=p&&p.route;{let z=_&&_.path||"";W2(y,!_||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let T=la(),I;if(e){let z=typeof e=="string"?oo(e):e;Et(x==="/"||z.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${z.pathname}" was given in the \`location\` prop.`),I=z}else I=T;let V=I.pathname||"/",U=V;if(x!=="/"){let z=x.replace(/^\//,"").split("/");U="/"+V.replace(/^\//,"").split("/").slice(z.length).join("/")}let j=q2(t,{pathname:U});wr(_||j!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),wr(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=uS(j&&j.map(z=>Object.assign({},z,{params:Object.assign({},g,z.params),pathname:Zs([x,l.encodeLocation?l.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?x:Zs([x,l.encodeLocation?l.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),d,n,s,o);return e&&q?R.createElement(yu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},q):q}function aS(){let t=pS(),e=ZN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",t),d=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:l},"ErrorBoundary")," or"," ",R.createElement("code",{style:l},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:o},n):null,d)}var oS=R.createElement(aS,null),lS=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?R.createElement(Kr.Provider,{value:this.props.routeContext},R.createElement(Bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cS({routeContext:t,match:e,children:n}){let s=R.useContext(kl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Kr.Provider,{value:t},n)}function uS(t,e=[],n=null,s=null,o=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,d=n?.errors;if(d!=null){let y=l.findIndex(x=>x.route.id&&d?.[x.route.id]!==void 0);Et(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let p=!1,g=-1;if(n)for(let y=0;y<l.length;y++){let x=l[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=y),x.route.id){let{loaderData:_,errors:T}=n,I=x.route.loader&&!_.hasOwnProperty(x.route.id)&&(!T||T[x.route.id]===void 0);if(x.route.lazy||I){p=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}return l.reduceRight((y,x,_)=>{let T,I=!1,V=null,U=null;n&&(T=d&&x.route.id?d[x.route.id]:void 0,V=x.route.errorElement||oS,p&&(g<0&&_===0?(W2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,U=null):g===_&&(I=!0,U=x.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,_+1)),q=()=>{let z;return T?z=V:I?z=U:x.route.Component?z=R.createElement(x.route.Component,null):x.route.element?z=x.route.element:z=y,R.createElement(cS,{match:x,routeContext:{outlet:y,matches:j,isDataRoute:n!=null},children:z})};return n&&(x.route.ErrorBoundary||x.route.errorElement||_===0)?R.createElement(lS,{location:n.location,revalidation:n.revalidation,component:V,error:T,children:q(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:s}):q()},null)}function zg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dS(t){let e=R.useContext(kl);return Et(e,zg(t)),e}function hS(t){let e=R.useContext(rf);return Et(e,zg(t)),e}function fS(t){let e=R.useContext(Kr);return Et(e,zg(t)),e}function Fg(t){let e=fS(t),n=e.matches[e.matches.length-1];return Et(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function mS(){return Fg("useRouteId")}function pS(){let t=R.useContext(Bg),e=hS("useRouteError"),n=Fg("useRouteError");return t!==void 0?t:e.errors?.[n]}function gS(){let{router:t}=dS("useNavigate"),e=Fg("useNavigate"),n=R.useRef(!1);return Q2(()=>{n.current=!0}),R.useCallback(async(o,l={})=>{wr(n.current,Y2),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...l}))},[t,e])}var jw={};function W2(t,e,n){!e&&!jw[t]&&(jw[t]=!0,wr(!1,n))}R.memo(yS);function yS({routes:t,future:e,state:n,unstable_onError:s}){return X2(t,void 0,n,s,e)}function Vp({to:t,replace:e,state:n,relative:s}){Et(Dl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=R.useContext(Gr);wr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=R.useContext(Kr),{pathname:d}=la(),p=Er(),g=Ug(t,Vg(l),d,s==="path"),y=JSON.stringify(g);return R.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:s})},[p,y,s,e,n]),null}function dn(t){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vS({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:l=!1}){Et(!Dl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),p=R.useMemo(()=>({basename:d,navigator:o,static:l,future:{}}),[d,o,l]);typeof n=="string"&&(n=oo(n));let{pathname:g="/",search:y="",hash:x="",state:_=null,key:T="default"}=n,I=R.useMemo(()=>{let V=ni(g,d);return V==null?null:{location:{pathname:V,search:y,hash:x,state:_,key:T},navigationType:s}},[d,g,y,x,_,T,s]);return wr(I!=null,`<Router basename="${d}"> is not able to match the URL "${g}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:R.createElement(Gr.Provider,{value:p},R.createElement(yu.Provider,{children:e,value:I}))}function Iw({children:t,location:e}){return iS(og(t),e)}function og(t,e=[]){let n=[];return R.Children.forEach(t,(s,o)=>{if(!R.isValidElement(s))return;let l=[...e,o];if(s.type===R.Fragment){n.push.apply(n,og(s.props.children,l));return}Et(s.type===dn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=og(s.props.children,l)),n.push(d)}),n}var lh="get",ch="application/x-www-form-urlencoded";function sf(t){return t!=null&&typeof t.tagName=="string"}function xS(t){return sf(t)&&t.tagName.toLowerCase()==="button"}function wS(t){return sf(t)&&t.tagName.toLowerCase()==="form"}function bS(t){return sf(t)&&t.tagName.toLowerCase()==="input"}function _S(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ES(t,e){return t.button===0&&(!e||e==="_self")&&!_S(t)}var Wd=null;function TS(){if(Wd===null)try{new FormData(document.createElement("form"),0),Wd=!1}catch{Wd=!0}return Wd}var AS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Up(t){return t!=null&&!AS.has(t)?(wr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ch}"`),null):t}function NS(t,e){let n,s,o,l,d;if(wS(t)){let p=t.getAttribute("action");s=p?ni(p,e):null,n=t.getAttribute("method")||lh,o=Up(t.getAttribute("enctype"))||ch,l=new FormData(t)}else if(xS(t)||bS(t)&&(t.type==="submit"||t.type==="image")){let p=t.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=t.getAttribute("formaction")||p.getAttribute("action");if(s=g?ni(g,e):null,n=t.getAttribute("formmethod")||p.getAttribute("method")||lh,o=Up(t.getAttribute("formenctype"))||Up(p.getAttribute("enctype"))||ch,l=new FormData(p,t),!TS()){let{name:y,type:x,value:_}=t;if(x==="image"){let T=y?`${y}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else y&&l.append(y,_)}}else{if(sf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=lh,s=null,o=ch,d=t}return l&&o==="text/plain"&&(d=l,l=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function SS(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&ni(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function CS(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function jS(t,e,n){let s=await Promise.all(t.map(async o=>{let l=e.routes[o.route.id];if(l){let d=await CS(l,n);return d.links?d.links():[]}return[]}));return OS(s.flat(1).filter(RS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function kw(t,e,n,s,o,l){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return l==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):l==="data"?e.filter((g,y)=>{let x=s.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let _=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function IS(t,e,{includeHydrateFallback:n}={}){return kS(t.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function kS(t){return[...new Set(t)]}function DS(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function OS(t,e){let n=new Set;return new Set(e),t.reduce((s,o)=>{let l=JSON.stringify(DS(o));return n.has(l)||(n.add(l),s.push({key:l,link:o})),s},[])}function Z2(){let t=R.useContext(kl);return qg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function PS(){let t=R.useContext(rf);return qg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Hg=R.createContext(void 0);Hg.displayName="FrameworkContext";function J2(){let t=R.useContext(Hg);return qg(t,"You must render this element inside a <HydratedRouter> element"),t}function MS(t,e){let n=R.useContext(Hg),[s,o]=R.useState(!1),[l,d]=R.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:x,onTouchStart:_}=e,T=R.useRef(null);R.useEffect(()=>{if(t==="render"&&d(!0),t==="viewport"){let U=q=>{q.forEach(z=>{d(z.isIntersecting)})},j=new IntersectionObserver(U,{threshold:.5});return T.current&&j.observe(T.current),()=>{j.disconnect()}}},[t]),R.useEffect(()=>{if(s){let U=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(U)}}},[s]);let I=()=>{o(!0)},V=()=>{o(!1),d(!1)};return n?t!=="intent"?[l,T,{}]:[l,T,{onFocus:Yc(p,I),onBlur:Yc(g,V),onMouseEnter:Yc(y,I),onMouseLeave:Yc(x,V),onTouchStart:Yc(_,I)}]:[!1,T,{}]}function Yc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function LS({page:t,...e}){let{router:n}=Z2(),s=R.useMemo(()=>q2(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?R.createElement(US,{page:t,matches:s,...e}):null}function VS(t){let{manifest:e,routeModules:n}=J2(),[s,o]=R.useState([]);return R.useEffect(()=>{let l=!1;return jS(t,e,n).then(d=>{l||o(d)}),()=>{l=!0}},[t,e,n]),s}function US({page:t,matches:e,...n}){let s=la(),{manifest:o,routeModules:l}=J2(),{basename:d}=Z2(),{loaderData:p,matches:g}=PS(),y=R.useMemo(()=>kw(t,e,g,o,s,"data"),[t,e,g,o,s]),x=R.useMemo(()=>kw(t,e,g,o,s,"assets"),[t,e,g,o,s]),_=R.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let V=new Set,U=!1;if(e.forEach(q=>{let z=o.routes[q.route.id];!z||!z.hasLoader||(!y.some(F=>F.route.id===q.route.id)&&q.route.id in p&&l[q.route.id]?.shouldRevalidate||z.hasClientLoader?U=!0:V.add(q.route.id))}),V.size===0)return[];let j=SS(t,d,"data");return U&&V.size>0&&j.searchParams.set("_routes",e.filter(q=>V.has(q.route.id)).map(q=>q.route.id).join(",")),[j.pathname+j.search]},[d,p,s,o,y,e,t,l]),T=R.useMemo(()=>IS(x,o),[x,o]),I=VS(x);return R.createElement(R.Fragment,null,_.map(V=>R.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...n})),T.map(V=>R.createElement("link",{key:V,rel:"modulepreload",href:V,...n})),I.map(({key:V,link:U})=>R.createElement("link",{key:V,nonce:n.nonce,...U})))}function BS(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var e1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{e1&&(window.__reactRouterVersion="7.9.1")}catch{}function zS({basename:t,children:e,window:n}){let s=R.useRef();s.current==null&&(s.current=RN({window:n,v5Compat:!0}));let o=s.current,[l,d]=R.useState({action:o.action,location:o.location}),p=R.useCallback(g=>{R.startTransition(()=>d(g))},[d]);return R.useLayoutEffect(()=>o.listen(p),[o,p]),R.createElement(vS,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:o})}var t1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,He=R.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:l,replace:d,state:p,target:g,to:y,preventScrollReset:x,viewTransition:_,...T},I){let{basename:V}=R.useContext(Gr),U=typeof y=="string"&&t1.test(y),j,q=!1;if(typeof y=="string"&&U&&(j=y,e1))try{let S=new URL(window.location.href),M=y.startsWith("//")?new URL(S.protocol+y):new URL(y),P=ni(M.pathname,V);M.origin===S.origin&&P!=null?y=P+M.search+M.hash:q=!0}catch{wr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=nS(y,{relative:o}),[F,ie,ee]=MS(s,T),de=$S(y,{replace:d,state:p,target:g,preventScrollReset:x,relative:o,viewTransition:_});function k(S){e&&e(S),S.defaultPrevented||de(S)}let A=R.createElement("a",{...T,...ee,href:j||z,onClick:q||l?e:k,ref:BS(I,ie),target:g,"data-discover":!U&&n==="render"?"true":void 0});return F&&!U?R.createElement(R.Fragment,null,A,R.createElement(LS,{page:z})):A});He.displayName="Link";var FS=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:l,to:d,viewTransition:p,children:g,...y},x){let _=vu(d,{relative:y.relative}),T=la(),I=R.useContext(rf),{navigator:V,basename:U}=R.useContext(Gr),j=I!=null&&XS(_)&&p===!0,q=V.encodeLocation?V.encodeLocation(_).pathname:_.pathname,z=T.pathname,F=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(z=z.toLowerCase(),F=F?F.toLowerCase():null,q=q.toLowerCase()),F&&U&&(F=ni(F,U)||F);const ie=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let ee=z===q||!o&&z.startsWith(q)&&z.charAt(ie)==="/",de=F!=null&&(F===q||!o&&F.startsWith(q)&&F.charAt(q.length)==="/"),k={isActive:ee,isPending:de,isTransitioning:j},A=ee?e:void 0,S;typeof s=="function"?S=s(k):S=[s,ee?"active":null,de?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(k):l;return R.createElement(He,{...y,"aria-current":A,className:S,ref:x,style:M,to:d,viewTransition:p},typeof g=="function"?g(k):g)});FS.displayName="NavLink";var qS=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:l,method:d=lh,action:p,onSubmit:g,relative:y,preventScrollReset:x,viewTransition:_,...T},I)=>{let V=YS(),U=QS(p,{relative:y}),j=d.toLowerCase()==="get"?"get":"post",q=typeof p=="string"&&t1.test(p),z=F=>{if(g&&g(F),F.defaultPrevented)return;F.preventDefault();let ie=F.nativeEvent.submitter,ee=ie?.getAttribute("formmethod")||d;V(ie||F.currentTarget,{fetcherKey:e,method:ee,navigate:n,replace:o,state:l,relative:y,preventScrollReset:x,viewTransition:_})};return R.createElement("form",{ref:I,method:j,action:U,onSubmit:s?g:z,...T,"data-discover":!q&&t==="render"?"true":void 0})});qS.displayName="Form";function HS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function n1(t){let e=R.useContext(kl);return Et(e,HS(t)),e}function $S(t,{target:e,replace:n,state:s,preventScrollReset:o,relative:l,viewTransition:d}={}){let p=Er(),g=la(),y=vu(t,{relative:l});return R.useCallback(x=>{if(ES(x,e)){x.preventDefault();let _=n!==void 0?n:ou(g)===ou(y);p(t,{replace:_,state:s,preventScrollReset:o,relative:l,viewTransition:d})}},[g,p,y,n,s,e,t,o,l,d])}var GS=0,KS=()=>`__${String(++GS)}__`;function YS(){let{router:t}=n1("useSubmit"),{basename:e}=R.useContext(Gr),n=mS();return R.useCallback(async(s,o={})=>{let{action:l,method:d,encType:p,formData:g,body:y}=NS(s,e);if(o.navigate===!1){let x=o.fetcherKey||KS();await t.fetch(x,n,o.action||l,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||p,flushSync:o.flushSync})}else await t.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function QS(t,{relative:e}={}){let{basename:n}=R.useContext(Gr),s=R.useContext(Kr);Et(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...vu(t||".",{relative:e})},d=la();if(t==null){l.search=d.search;let p=new URLSearchParams(l.search),g=p.getAll("index");if(g.some(x=>x==="")){p.delete("index"),g.filter(_=>_).forEach(_=>p.append("index",_));let x=p.toString();l.search=x?`?${x}`:""}}return(!t||t===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Zs([n,l.pathname])),ou(l)}function XS(t,{relative:e}={}){let n=R.useContext(K2);Et(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=n1("useViewTransitionState"),o=vu(t,{relative:e});if(!n.isTransitioning)return!1;let l=ni(n.currentLocation.pathname,s)||n.currentLocation.pathname,d=ni(n.nextLocation.pathname,s)||n.nextLocation.pathname;return wh(o.pathname,d)!=null||wh(o.pathname,l)!=null}const WS=()=>{};var Dw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let o=t.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},ZS=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const o=t[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[n++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[n++],d=t[n++],p=t[n++],g=((o&7)<<18|(l&63)<<12|(d&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=t[n++],d=t[n++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},s1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<t.length;o+=3){const l=t[o],d=o+1<t.length,p=d?t[o+1]:0,g=o+2<t.length,y=g?t[o+2]:0,x=l>>2,_=(l&3)<<4|p>>4;let T=(p&15)<<2|y>>6,I=y&63;g||(I=64,d||(T=64)),s.push(n[x],n[_],n[T],n[I])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<t.length;){const l=n[t.charAt(o++)],p=o<t.length?n[t.charAt(o)]:0;++o;const y=o<t.length?n[t.charAt(o)]:64;++o;const _=o<t.length?n[t.charAt(o)]:64;if(++o,l==null||p==null||y==null||_==null)throw new JS;const T=l<<2|p>>4;if(s.push(T),y!==64){const I=p<<4&240|y>>2;if(s.push(I),_!==64){const V=y<<6&192|_;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eC=function(t){const e=r1(t);return s1.encodeByteArray(e,!0)},bh=function(t){return eC(t).replace(/\./g,"")},i1=function(t){try{return s1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=()=>tC().__FIREBASE_DEFAULTS__,rC=()=>{if(typeof process>"u"||typeof Dw>"u")return;const t=Dw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&i1(t[1]);return e&&JSON.parse(e)},af=()=>{try{return WS()||nC()||rC()||sC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},a1=t=>af()?.emulatorHosts?.[t],o1=t=>{const e=a1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},l1=()=>af()?.config,c1=t=>af()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $g(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t};return[bh(JSON.stringify(n)),bh(JSON.stringify(d)),""].join(".")}const tu={};function aC(){const t={prod:[],emulator:[]};for(const e of Object.keys(tu))tu[e]?t.emulator.push(e):t.prod.push(e);return t}function oC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ow=!1;function Gg(t,e){if(typeof window>"u"||typeof document>"u"||!lo(window.location.host)||tu[t]===e||tu[t]||Ow)return;tu[t]=e;function n(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=aC().prod.length>0;function d(){const T=document.getElementById(s);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Ow=!0,d()},T}function x(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=oC(s),I=n("text"),V=document.getElementById(I)||document.createElement("span"),U=n("learnmore"),j=document.getElementById(U)||document.createElement("a"),q=n("preprendIcon"),z=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const F=T.element;p(F),x(j,U);const ie=y();g(z,q),F.append(z,V,j,ie),document.body.appendChild(F)}l?(V.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function cC(){const t=af()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fC(){const t=_n();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mC(){return!cC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pC(){try{return typeof indexedDB=="object"}catch{return!1}}function gC(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="FirebaseError";class Ts extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=yC,Object.setPrototypeOf(this,Ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?vC(l,s):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new Ts(o,p,s)}}function vC(t,e){return t.replace(xC,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const xC=/\{\$([^}]+)}/g;function wC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ri(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const l=t[o],d=e[o];if(Pw(l)&&Pw(d)){if(!ri(l,d))return!1}else if(l!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Pw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Qc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Xc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bC(t,e){const n=new _C(t,e);return n.subscribe.bind(n)}class _C{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");EC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Bp),o.error===void 0&&(o.error=Bp),o.complete===void 0&&(o.complete=Bp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){return t&&t._delegate?t._delegate:t}class ea{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new iC;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NC(e))try{this.getOrInitializeService({instanceIdentifier:Qa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Qa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qa){return this.instances.has(e)}getOptions(e=Qa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[l,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);s===p&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:AC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qa){return this.component?this.component.multipleInstances?e:Qa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AC(t){return t===Qa?void 0:t}function NC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($e||($e={}));const CC={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},RC=$e.INFO,jC={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},IC=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),o=jC[e];if(o)console[o](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kg{constructor(e){this.name=e,this._logLevel=RC,this._logHandler=IC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const kC=(t,e)=>e.some(n=>t instanceof n);let Mw,Lw;function DC(){return Mw||(Mw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OC(){return Lw||(Lw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d1=new WeakMap,lg=new WeakMap,h1=new WeakMap,zp=new WeakMap,Yg=new WeakMap;function PC(t){const e=new Promise((n,s)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",d)},l=()=>{n(Qi(t.result)),o()},d=()=>{s(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&d1.set(n,t)}).catch(()=>{}),Yg.set(e,t),e}function MC(t){if(lg.has(t))return;const e=new Promise((n,s)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",d),t.removeEventListener("abort",d)},l=()=>{n(),o()},d=()=>{s(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",d),t.addEventListener("abort",d)});lg.set(t,e)}let cg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||h1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LC(t){cg=t(cg)}function VC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Fp(this),e,...n);return h1.set(s,e.sort?e.sort():[e]),Qi(s)}:OC().includes(t)?function(...e){return t.apply(Fp(this),e),Qi(d1.get(this))}:function(...e){return Qi(t.apply(Fp(this),e))}}function UC(t){return typeof t=="function"?VC(t):(t instanceof IDBTransaction&&MC(t),kC(t,DC())?new Proxy(t,cg):t)}function Qi(t){if(t instanceof IDBRequest)return PC(t);if(zp.has(t))return zp.get(t);const e=UC(t);return e!==t&&(zp.set(t,e),Yg.set(e,t)),e}const Fp=t=>Yg.get(t);function BC(t,e,{blocked:n,upgrade:s,blocking:o,terminated:l}={}){const d=indexedDB.open(t,e),p=Qi(d);return s&&d.addEventListener("upgradeneeded",g=>{s(Qi(d.result),g.oldVersion,g.newVersion,Qi(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const zC=["get","getKey","getAll","getAllKeys","count"],FC=["put","add","delete","clear"],qp=new Map;function Vw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qp.get(e))return qp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=FC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||zC.includes(n)))return;const l=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return qp.set(e,l),l}LC(t=>({...t,get:(e,n,s)=>Vw(e,n)||t.get(e,n,s),has:(e,n)=>!!Vw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HC(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function HC(t){return t.getComponent()?.type==="VERSION"}const ug="@firebase/app",Uw="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=new Kg("@firebase/app"),$C="@firebase/app-compat",GC="@firebase/analytics-compat",KC="@firebase/analytics",YC="@firebase/app-check-compat",QC="@firebase/app-check",XC="@firebase/auth",WC="@firebase/auth-compat",ZC="@firebase/database",JC="@firebase/data-connect",e4="@firebase/database-compat",t4="@firebase/functions",n4="@firebase/functions-compat",r4="@firebase/installations",s4="@firebase/installations-compat",i4="@firebase/messaging",a4="@firebase/messaging-compat",o4="@firebase/performance",l4="@firebase/performance-compat",c4="@firebase/remote-config",u4="@firebase/remote-config-compat",d4="@firebase/storage",h4="@firebase/storage-compat",f4="@firebase/firestore",m4="@firebase/ai",p4="@firebase/firestore-compat",g4="firebase",y4="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="[DEFAULT]",v4={[ug]:"fire-core",[$C]:"fire-core-compat",[KC]:"fire-analytics",[GC]:"fire-analytics-compat",[QC]:"fire-app-check",[YC]:"fire-app-check-compat",[XC]:"fire-auth",[WC]:"fire-auth-compat",[ZC]:"fire-rtdb",[JC]:"fire-data-connect",[e4]:"fire-rtdb-compat",[t4]:"fire-fn",[n4]:"fire-fn-compat",[r4]:"fire-iid",[s4]:"fire-iid-compat",[i4]:"fire-fcm",[a4]:"fire-fcm-compat",[o4]:"fire-perf",[l4]:"fire-perf-compat",[c4]:"fire-rc",[u4]:"fire-rc-compat",[d4]:"fire-gcs",[h4]:"fire-gcs-compat",[f4]:"fire-fst",[p4]:"fire-fst-compat",[m4]:"fire-vertex","fire-js":"fire-js",[g4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,x4=new Map,hg=new Map;function Bw(t,e){try{t.container.addComponent(e)}catch(n){si.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function to(t){const e=t.name;if(hg.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;hg.set(e,t);for(const n of _h.values())Bw(n,t);for(const n of x4.values())Bw(n,t);return!0}function of(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xi=new xu("app","Firebase",w4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=y4;function f1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:dg,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Xi.create("bad-app-name",{appName:String(o)});if(n||(n=l1()),!n)throw Xi.create("no-options");const l=_h.get(o);if(l){if(ri(n,l.options)&&ri(s,l.config))return l;throw Xi.create("duplicate-app",{appName:o})}const d=new SC(o);for(const g of hg.values())d.addComponent(g);const p=new b4(n,s,d);return _h.set(o,p),p}function Qg(t=dg){const e=_h.get(t);if(!e&&t===dg&&l1())return f1();if(!e)throw Xi.create("no-app",{appName:t});return e}function ps(t,e,n){let s=v4[t]??t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(d.join(" "));return}to(new ea(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="firebase-heartbeat-database",E4=1,lu="firebase-heartbeat-store";let Hp=null;function m1(){return Hp||(Hp=BC(_4,E4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(lu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xi.create("idb-open",{originalErrorMessage:t.message})})),Hp}async function T4(t){try{const n=(await m1()).transaction(lu),s=await n.objectStore(lu).get(p1(t));return await n.done,s}catch(e){if(e instanceof Ts)si.warn(e.message);else{const n=Xi.create("idb-get",{originalErrorMessage:e?.message});si.warn(n.message)}}}async function zw(t,e){try{const s=(await m1()).transaction(lu,"readwrite");await s.objectStore(lu).put(e,p1(t)),await s.done}catch(n){if(n instanceof Ts)si.warn(n.message);else{const s=Xi.create("idb-set",{originalErrorMessage:n?.message});si.warn(s.message)}}}function p1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=1024,N4=30;class S4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new R4(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Fw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>N4){const o=j4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){si.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Fw(),{heartbeatsToSend:n,unsentEntries:s}=C4(this._heartbeatsCache.heartbeats),o=bh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return si.warn(e),""}}}function Fw(){return new Date().toISOString().substring(0,10)}function C4(t,e=A4){const n=[];let s=t.slice();for(const o of t){const l=n.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),qw(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),qw(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class R4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pC()?gC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await T4(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return zw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return zw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function qw(t){return bh(JSON.stringify({version:2,heartbeats:t})).length}function j4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t){to(new ea("platform-logger",e=>new qC(e),"PRIVATE")),to(new ea("heartbeat",e=>new S4(e),"PRIVATE")),ps(ug,Uw,t),ps(ug,Uw,"esm2020"),ps("fire-js","")}I4("");function g1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const k4=g1,y1=new xu("auth","Firebase",g1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Kg("@firebase/auth");function D4(t,...e){Eh.logLevel<=$e.WARN&&Eh.warn(`Auth (${co}): ${t}`,...e)}function uh(t,...e){Eh.logLevel<=$e.ERROR&&Eh.error(`Auth (${co}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t,...e){throw Wg(t,...e)}function zr(t,...e){return Wg(t,...e)}function Xg(t,e,n){const s={...k4(),[e]:n};return new xu("auth","Firebase",s).create(e,{appName:t.name})}function Js(t){return Xg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function O4(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&br(t,"argument-error"),Xg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wg(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return y1.create(t,...e)}function je(t,e,...n){if(!t)throw Wg(e,...n)}function Xs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uh(e),new Error(e)}function ii(t,e){t||Xs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(){return typeof self<"u"&&self.location?.href||""}function P4(){return Hw()==="http:"||Hw()==="https:"}function Hw(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(P4()||dC()||"connection"in navigator)?navigator.onLine:!0}function L4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ii(n>e,"Short delay should be less than long delay!"),this.isMobile=lC()||hC()}get(){return M4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e){ii(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],B4=new bu(3e4,6e4);function ci(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function As(t,e,n,s,o={}){return x1(t,o,async()=>{let l={},d={};s&&(e==="GET"?d=s:l={body:JSON.stringify(s)});const p=wu({key:t.config.apiKey,...d}).slice(1),g=await t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);const y={method:e,headers:g,...l};return uC()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&lo(t.emulatorConfig.host)&&(y.credentials="include"),v1.fetch()(await w1(t,t.config.apiHost,n,p),y)})}async function x1(t,e,n){t._canInitEmulator=!1;const s={...V4,...e};try{const o=new F4(t),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Zd(t,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const p=l.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zd(t,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Zd(t,"email-already-in-use",d);if(g==="USER_DISABLED")throw Zd(t,"user-disabled",d);const x=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Xg(t,x,y);br(t,x)}}catch(o){if(o instanceof Ts)throw o;br(t,"network-request-failed",{message:String(o)})}}async function _u(t,e,n,s,o={}){const l=await As(t,e,n,s,o);return"mfaPendingCredential"in l&&br(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function w1(t,e,n,s){const o=`${e}${n}?${s}`,l=t,d=l.config.emulator?Zg(t.config,o):`${t.config.apiScheme}://${o}`;return U4.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function z4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class F4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(zr(this.auth,"network-request-failed")),B4.get())})}}function Zd(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=zr(t,e,s);return o.customData._tokenResponse=n,o}function $w(t){return t!==void 0&&t.enterprise!==void 0}class q4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return z4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H4(t,e){return As(t,"GET","/v2/recaptchaConfig",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $4(t,e){return As(t,"POST","/v1/accounts:delete",e)}async function Th(t,e){return As(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G4(t,e=!1){const n=It(t),s=await n.getIdToken(e),o=Jg(s);je(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l?.sign_in_provider;return{claims:o,token:s,authTime:nu($p(o.auth_time)),issuedAtTime:nu($p(o.iat)),expirationTime:nu($p(o.exp)),signInProvider:d||null,signInSecondFactor:l?.sign_in_second_factor||null}}function $p(t){return Number(t)*1e3}function Jg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return uh("JWT malformed, contained fewer than 3 sections"),null;try{const o=i1(n);return o?JSON.parse(o):(uh("Failed to decode base64 JWT payload"),null)}catch(o){return uh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Gw(t){const e=Jg(t);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ts&&K4(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function K4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nu(this.lastLoginAt),this.creationTime=nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(t){const e=t.auth,n=await t.getIdToken(),s=await bl(t,Th(e,{idToken:n}));je(s?.users.length,e,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=o.providerUserInfo?.length?b1(o.providerUserInfo):[],d=X4(t.providerData,l),p=t.isAnonymous,g=!(t.email&&o.passwordHash)&&!d?.length,y=p?g:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new mg(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(t,x)}async function Q4(t){const e=It(t);await Ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function X4(t,e){return[...t.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function b1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(t,e){const n=await x1(t,{},async()=>{const s=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=t.config,d=await w1(t,o,"/v1/token",`key=${l}`),p=await t._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return t.emulatorConfig&&lo(t.emulatorConfig.host)&&(g.credentials="include"),v1.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Z4(t,e){return As(t,"POST","/v2/accounts:revokeToken",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){je(e.length!==0,"internal-error");const n=Gw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:l}=await W4(e,n);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:l}=n,d=new ml;return s&&(je(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(je(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(je(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ml,this.toJSON())}_performRefresh(){return Xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t,e){je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ur{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Y4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new mg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await bl(this,this.stsTokenManager.getToken(this.auth,e));return je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return G4(this,e)}reload(){return Q4(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ur({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ah(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(Js(this.auth));const e=await this.getIdToken();return await bl(this,$4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,l=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:I,providerData:V,stsTokenManager:U}=n;je(_&&U,e,"internal-error");const j=ml.fromJSON(this.name,U);je(typeof _=="string",e,"internal-error"),Fi(s,e.name),Fi(o,e.name),je(typeof T=="boolean",e,"internal-error"),je(typeof I=="boolean",e,"internal-error"),Fi(l,e.name),Fi(d,e.name),Fi(p,e.name),Fi(g,e.name),Fi(y,e.name),Fi(x,e.name);const q=new Ur({uid:_,auth:e,email:o,emailVerified:T,displayName:s,isAnonymous:I,photoURL:d,phoneNumber:l,tenantId:p,stsTokenManager:j,createdAt:y,lastLoginAt:x});return V&&Array.isArray(V)&&(q.providerData=V.map(z=>({...z}))),g&&(q._redirectEventId=g),q}static async _fromIdTokenResponse(e,n,s=!1){const o=new ml;o.updateFromServerResponse(n);const l=new Ur({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Ah(l),l}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];je(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?b1(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!l?.length,p=new ml;p.updateFromIdToken(s);const g=new Ur({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new mg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=new Map;function Ws(t){ii(t instanceof Function,"Expected a class definition");let e=Kw.get(t);return e?(ii(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Kw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_1.type="NONE";const Yw=_1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t,e,n){return`firebase:${t}:${e}:${n}`}class pl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=dh(this.userKey,o.apiKey,l),this.fullPersistenceKey=dh("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Th(this.auth,{idToken:e}).catch(()=>{});return n?Ur._fromGetAccountInfoResponse(this.auth,n,e):null}return Ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new pl(Ws(Yw),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Ws(Yw);const d=dh(s,e.config.apiKey,e.name);let p=null;for(const y of n)try{const x=await y._get(d);if(x){let _;if(typeof x=="string"){const T=await Th(e,{idToken:x}).catch(()=>{});if(!T)break;_=await Ur._fromGetAccountInfoResponse(e,T,x)}else _=Ur._fromJSON(e,x);y!==l&&(p=_),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new pl(l,e,s):(l=g[0],p&&await l._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==l)try{await y._remove(d)}catch{}})),new pl(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(N1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(E1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C1(e))return"Blackberry";if(R1(e))return"Webos";if(T1(e))return"Safari";if((e.includes("chrome/")||A1(e))&&!e.includes("edge/"))return"Chrome";if(S1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function E1(t=_n()){return/firefox\//i.test(t)}function T1(t=_n()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A1(t=_n()){return/crios\//i.test(t)}function N1(t=_n()){return/iemobile/i.test(t)}function S1(t=_n()){return/android/i.test(t)}function C1(t=_n()){return/blackberry/i.test(t)}function R1(t=_n()){return/webos/i.test(t)}function e0(t=_n()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function J4(t=_n()){return e0(t)&&!!window.navigator?.standalone}function eR(){return fC()&&document.documentMode===10}function j1(t=_n()){return e0(t)||S1(t)||R1(t)||C1(t)||/windows phone/i.test(t)||N1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(t,e=[]){let n;switch(t){case"Browser":n=Qw(_n());break;case"Worker":n=`${Qw(_n())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=l=>new Promise((d,p)=>{try{const g=e(l);d(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(t,e={}){return As(t,"GET","/v2/passwordPolicy",ci(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=6;class sR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xw(this),this.idTokenSubscription=new Xw(this),this.beforeStateQueue=new tR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=y1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ws(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await pl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Th(this,{idToken:e}),s=await Ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(zn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!l||l===d)&&p?.user&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ah(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(Js(this));const n=e?It(e):null;return n&&je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(Js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(Js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nR(this),n=new sR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Z4(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ws(e)||this._popupRedirectResolver;je(n,this,"argument-error"),this.redirectPersistenceManager=await pl.create(this,[Ws(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(p,this,"internal-error"),p.then(()=>{d||l(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=I1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&D4(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ui(t){return It(t)}class Xw{constructor(e){this.auth=e,this.observer=null,this.addObserver=bC(n=>this.observer=n)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aR(t){lf=t}function k1(t){return lf.loadJS(t)}function oR(){return lf.recaptchaEnterpriseScript}function lR(){return lf.gapiScript}function cR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class uR{constructor(){this.enterprise=new dR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class dR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const hR="recaptcha-enterprise",D1="NO_RECAPTCHA";class fR{constructor(e){this.type=hR,this.auth=ui(e)}async verify(e="verify",n=!1){async function s(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,p)=>{H4(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new q4(g);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function o(l,d,p){const g=window.grecaptcha;$w(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(y=>{d(y)}).catch(()=>{d(D1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uR().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{s(this.auth).then(p=>{if(!n&&$w(window.grecaptcha))o(p,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=oR();g.length!==0&&(g+=p),k1(g).then(()=>{o(p,l,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function Ww(t,e,n,s=!1,o=!1){const l=new fR(t);let d;if(o)d=D1;else try{d=await l.verify(n)}catch{d=await l.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Nh(t,e,n,s,o){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Ww(t,e,n,n==="getOobCode");return s(t,l)}else return s(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Ww(t,e,n,n==="getOobCode");return s(t,d)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t,e){const n=of(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),l=n.getOptions();if(ri(l,e??{}))return o;br(o,"already-initialized")}return n.initialize({options:e})}function pR(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Ws);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function gR(t,e,n){const s=ui(t);je(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=O1(e),{host:d,port:p}=yR(e),g=p===null?"":`:${p}`,y={url:`${l}//${d}${g}/`},x=Object.freeze({host:d,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){je(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),je(ri(y,s.config.emulator)&&ri(x,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=x,s.settings.appVerificationDisabledForTesting=!0,lo(d)?($g(`${l}//${d}${g}`),Gg("Auth",!0)):vR()}function O1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yR(t){const e=O1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Zw(s.substr(l.length+1))}}else{const[l,d]=s.split(":");return{host:l,port:Zw(d)}}}function Zw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xs("not implemented")}_getIdTokenResponse(e){return Xs("not implemented")}_linkToIdToken(e,n){return Xs("not implemented")}_getReauthenticationResolver(e){return Xs("not implemented")}}async function xR(t,e){return As(t,"POST","/v1/accounts:update",e)}async function wR(t,e){return As(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(t,e){return _u(t,"POST","/v1/accounts:signInWithPassword",ci(t,e))}async function _R(t,e){return As(t,"POST","/v1/accounts:sendOobCode",ci(t,e))}async function ER(t,e){return _R(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(t,e){return _u(t,"POST","/v1/accounts:signInWithEmailLink",ci(t,e))}async function AR(t,e){return _u(t,"POST","/v1/accounts:signInWithEmailLink",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends t0{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new cu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new cu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(e,n,"signInWithPassword",bR);case"emailLink":return TR(e,{email:this._email,oobCode:this._password});default:br(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(e,s,"signUpPassword",wR);case"emailLink":return AR(e,{idToken:n,email:this._email,oobCode:this._password});default:br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(t,e){return _u(t,"POST","/v1/accounts:signInWithIdp",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="http://localhost";class no extends t0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new no(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):br("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=n;if(!s||!o)return null;const d=new no(s,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return gl(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,gl(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gl(e,n)}buildRequest(){const e={requestUri:NR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CR(t){const e=Qc(Xc(t)).link,n=e?Qc(Xc(e)).deep_link_id:null,s=Qc(Xc(t)).deep_link_id;return(s?Qc(Xc(s)).link:null)||s||n||e||t}class n0{constructor(e){const n=Qc(Xc(e)),s=n.apiKey??null,o=n.oobCode??null,l=SR(n.mode??null);je(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=CR(e);try{return new n0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.providerId=uo.PROVIDER_ID}static credential(e,n){return cu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=n0.parseLink(n);return je(s,"argument-error"),cu._fromEmailAndCode(e,s.code,s.tenantId)}}uo.PROVIDER_ID="password";uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends r0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Eu{constructor(){super("facebook.com")}static credential(e){return no._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return no._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return fs.credential(n,s)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Eu{constructor(){super("github.com")}static credential(e){return no._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.GITHUB_SIGN_IN_METHOD="github.com";Hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Eu{constructor(){super("twitter.com")}static credential(e,n){return no._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return $i.credential(n,s)}catch{return null}}}$i.TWITTER_SIGN_IN_METHOD="twitter.com";$i.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(t,e){return _u(t,"POST","/v1/accounts:signUp",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const l=await Ur._fromIdTokenResponse(e,s,o),d=Jw(s);return new ro({user:l,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Jw(s);return new ro({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Jw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends Ts{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Sh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Sh(e,n,s,o)}}function P1(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Sh._fromErrorAndOperation(t,l,e,s):l})}async function jR(t,e,n=!1){const s=await bl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ro._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(t,e,n=!1){const{auth:s}=t;if(zn(s.app))return Promise.reject(Js(s));const o="reauthenticate";try{const l=await bl(t,P1(s,o,e,t),n);je(l.idToken,s,"internal-error");const d=Jg(l.idToken);je(d,s,"internal-error");const{sub:p}=d;return je(t.uid===p,s,"user-mismatch"),ro._forOperation(t,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&br(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(t,e,n=!1){if(zn(t.app))return Promise.reject(Js(t));const s="signIn",o=await P1(t,s,e),l=await ro._fromIdTokenResponse(t,s,o);return n||await t._updateCurrentUser(l.user),l}async function IR(t,e){return L1(ui(t),e)}async function kR(t,e){return M1(It(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(t){const e=ui(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DR(t,e,n){const s=ui(t);await Nh(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ER)}async function OR(t,e,n){if(zn(t.app))return Promise.reject(Js(t));const s=ui(t),d=await Nh(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&V1(t),g}),p=await ro._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(p.user),p}function PR(t,e,n){return zn(t.app)?Promise.reject(Js(t)):IR(It(t),uo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&V1(t),s})}function MR(t,e){return LR(It(t),null,e)}async function LR(t,e,n){const{auth:s}=t,l={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(l.password=n);const d=await bl(t,xR(s,l));await t._updateTokensIfNecessary(d,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e){return It(t).setPersistence(e)}function UR(t,e,n,s){return It(t).onIdTokenChanged(e,n,s)}function BR(t,e,n){return It(t).beforeAuthStateChanged(e,n)}function zR(t,e,n,s){return It(t).onAuthStateChanged(e,n,s)}function U1(t){return It(t).signOut()}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=1e3,qR=10;class z1 extends B1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=j1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},l=this.storage.getItem(s);eR()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,qR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},FR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}z1.type="LOCAL";const F1=z1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1 extends B1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}q1.type="SESSION";const H1=q1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new cf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:l}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(d).map(async y=>y(n.origin,l)),g=await HR(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((p,g)=>{const y=s0("",20);o.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(_){const T=_;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(x),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(T.data.response);break;default:clearTimeout(x),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(){return window}function GR(t){gs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(){return typeof gs().WorkerGlobalScope<"u"&&typeof gs().importScripts=="function"}async function KR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YR(){return navigator?.serviceWorker?.controller||null}function QR(){return $1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="firebaseLocalStorageDb",XR=1,Rh="firebaseLocalStorage",K1="fbase_key";class Tu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function uf(t,e){return t.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function WR(){const t=indexedDB.deleteDatabase(G1);return new Tu(t).toPromise()}function pg(){const t=indexedDB.open(G1,XR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Rh,{keyPath:K1})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Rh)?e(s):(s.close(),await WR(),e(await pg()))})})}async function eb(t,e,n){const s=uf(t,!0).put({[K1]:e,value:n});return new Tu(s).toPromise()}async function ZR(t,e){const n=uf(t,!1).get(e),s=await new Tu(n).toPromise();return s===void 0?null:s.value}function tb(t,e){const n=uf(t,!0).delete(e);return new Tu(n).toPromise()}const JR=800,ej=3;class Y1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>ej)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cf._getInstance(QR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await KR(),!this.activeServiceWorker)return;this.sender=new $R(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pg();return await eb(e,Ch,"1"),await tb(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>eb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>ZR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=uf(o,!1).getAll();return new Tu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y1.type="LOCAL";const tj=Y1;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e){return e?Ws(e):(je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends t0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nj(t){return L1(t.auth,new i0(t),t.bypassAuthState)}function rj(t){const{auth:e,user:n}=t;return je(n,e,"internal-error"),M1(n,new i0(t),t.bypassAuthState)}async function sj(t){const{auth:e,user:n}=t;return je(n,e,"internal-error"),jR(n,new i0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:l,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nj;case"linkViaPopup":case"linkViaRedirect":return sj;case"reauthViaPopup":case"reauthViaRedirect":return rj;default:br(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new bu(2e3,1e4);async function W1(t,e,n){if(zn(t.app))return Promise.reject(zr(t,"operation-not-supported-in-this-environment"));const s=ui(t);O4(t,e,r0);const o=Q1(s,n);return new Xa(s,"signInViaPopup",e,o).executeNotNull()}class Xa extends X1{constructor(e,n,s,o,l){super(e,n,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Xa.currentPopupAction&&Xa.currentPopupAction.cancel(),Xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){ii(this.filter.length===1,"Popup operations only handle one event");const e=s0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ij.get())};e()}}Xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj="pendingRedirect",hh=new Map;class oj extends X1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=hh.get(this.auth._key());if(!e){try{const s=await lj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}hh.set(this.auth._key(),e)}return this.bypassAuthState||hh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lj(t,e){const n=dj(e),s=uj(t);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function cj(t,e){hh.set(t._key(),e)}function uj(t){return Ws(t._redirectPersistence)}function dj(t){return dh(aj,t.config.apiKey,t.name)}async function hj(t,e,n=!1){if(zn(t.app))return Promise.reject(Js(t));const s=ui(t),o=Q1(s,e),d=await new oj(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=600*1e3;class mj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Z1(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(zr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fj&&this.cachedEventUids.clear(),this.cachedEventUids.has(nb(e))}saveEventToCache(e){this.cachedEventUids.add(nb(e)),this.lastProcessedEventTime=Date.now()}}function nb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Z1({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function pj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(t,e={}){return As(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vj=/^https?/;async function xj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await gj(t);for(const n of e)try{if(wj(n))return}catch{}br(t,"unauthorized-domain")}function wj(t){const e=fg(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const d=new URL(t);return d.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!vj.test(n))return!1;if(yj.test(t))return s===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=new bu(3e4,6e4);function rb(){const t=gs().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _j(t){return new Promise((e,n)=>{function s(){rb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rb(),n(zr(t,"network-request-failed"))},timeout:bj.get()})}if(gs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gs().gapi?.load)s();else{const o=cR("iframefcb");return gs()[o]=()=>{gapi.load?s():n(zr(t,"network-request-failed"))},k1(`${lR()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw fh=null,e})}let fh=null;function Ej(t){return fh=fh||_j(t),fh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=new bu(5e3,15e3),Aj="__/auth/iframe",Nj="emulator/auth/iframe",Sj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rj(t){const e=t.config;je(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zg(e,Nj):`https://${t.config.authDomain}/${Aj}`,s={apiKey:e.apiKey,appName:t.name,v:co},o=Cj.get(t.config.apiHost);o&&(s.eid=o);const l=t._getFrameworks();return l.length&&(s.fw=l.join(",")),`${n}?${wu(s).slice(1)}`}async function jj(t){const e=await Ej(t),n=gs().gapi;return je(n,t,"internal-error"),e.open({where:document.body,url:Rj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sj,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const d=zr(t,"network-request-failed"),p=gs().setTimeout(()=>{l(d)},Tj.get());function g(){gs().clearTimeout(p),o(s)}s.ping(g).then(g,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kj=500,Dj=600,Oj="_blank",Pj="http://localhost";class sb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Mj(t,e,n,s=kj,o=Dj){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...Ij,width:s.toString(),height:o.toString(),top:l,left:d},y=_n().toLowerCase();n&&(p=A1(y)?Oj:n),E1(y)&&(e=e||Pj,g.scrollbars="yes");const x=Object.entries(g).reduce((T,[I,V])=>`${T}${I}=${V},`,"");if(J4(y)&&p!=="_self")return Lj(e||"",p),new sb(null);const _=window.open(e||"",p,x);je(_,t,"popup-blocked");try{_.focus()}catch{}return new sb(_)}function Lj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="__/auth/handler",Uj="emulator/auth/handler",Bj=encodeURIComponent("fac");async function ib(t,e,n,s,o,l){je(t.config.authDomain,t,"auth-domain-config-required"),je(t.config.apiKey,t,"invalid-api-key");const d={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:co,eventId:o};if(e instanceof r0){e.setDefaultLanguage(t.languageCode),d.providerId=e.providerId||"",wC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,_]of Object.entries({}))d[x]=_}if(e instanceof Eu){const x=e.getScopes().filter(_=>_!=="");x.length>0&&(d.scopes=x.join(","))}t.tenantId&&(d.tid=t.tenantId);const p=d;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const g=await t._getAppCheckToken(),y=g?`#${Bj}=${encodeURIComponent(g)}`:"";return`${zj(t)}?${wu(p).slice(1)}${y}`}function zj({config:t}){return t.emulator?Zg(t,Uj):`https://${t.authDomain}/${Vj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="webStorageSupport";class Fj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H1,this._completeRedirectFn=hj,this._overrideRedirectResult=cj}async _openPopup(e,n,s,o){ii(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await ib(e,n,s,fg(),o);return Mj(e,l,s0())}async _openRedirect(e,n,s,o){await this._originValidation(e);const l=await ib(e,n,s,fg(),o);return GR(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:l}=this.eventManagers[n];return o?Promise.resolve(o):(ii(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await jj(e),s=new mj(e);return n.register("authEvent",o=>(je(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gp,{type:Gp},o=>{const l=o?.[0]?.[Gp];l!==void 0&&n(!!l),br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return j1()||T1()||e0()}}const qj=Fj;var ab="@firebase/auth",ob="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Gj(t){to(new ea("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;je(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:p,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I1(t)},y=new iR(s,o,l,g);return pR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),to(new ea("auth-internal",e=>{const n=ui(e.getProvider("auth").getImmediate());return(s=>new Hj(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ps(ab,ob,$j(t)),ps(ab,ob,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=300,Yj=c1("authIdTokenMaxAge")||Kj;let lb=null;const Qj=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Yj)return;const o=n?.token;lb!==o&&(lb=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Xj(t=Qg()){const e=of(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mR(t,{popupRedirectResolver:qj,persistence:[tj,F1,H1]}),s=c1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const d=Qj(l.toString());BR(n,d,()=>d(n.currentUser)),UR(n,p=>d(p))}}const o=a1("auth");return o&&gR(n,`http://${o}`),n}function Wj(){return document.getElementsByTagName("head")?.[0]??document}aR({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=o=>{const l=zr("internal-error");l.customData=o,n(l)},s.type="text/javascript",s.charset="UTF-8",Wj().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Gj("Browser");var Zj="firebase",Jj="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ps(Zj,Jj,"app");var cb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wi,J1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function S(){}S.prototype=A.prototype,k.F=A.prototype,k.prototype=new S,k.prototype.constructor=k,k.D=function(M,P,O){for(var C=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)C[Ce-2]=arguments[Ce];return A.prototype[P].apply(M,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,A,S){S||(S=0);const M=Array(16);if(typeof A=="string")for(var P=0;P<16;++P)M[P]=A.charCodeAt(S++)|A.charCodeAt(S++)<<8|A.charCodeAt(S++)<<16|A.charCodeAt(S++)<<24;else for(P=0;P<16;++P)M[P]=A[S++]|A[S++]<<8|A[S++]<<16|A[S++]<<24;A=k.g[0],S=k.g[1],P=k.g[2];let O=k.g[3],C;C=A+(O^S&(P^O))+M[0]+3614090360&4294967295,A=S+(C<<7&4294967295|C>>>25),C=O+(P^A&(S^P))+M[1]+3905402710&4294967295,O=A+(C<<12&4294967295|C>>>20),C=P+(S^O&(A^S))+M[2]+606105819&4294967295,P=O+(C<<17&4294967295|C>>>15),C=S+(A^P&(O^A))+M[3]+3250441966&4294967295,S=P+(C<<22&4294967295|C>>>10),C=A+(O^S&(P^O))+M[4]+4118548399&4294967295,A=S+(C<<7&4294967295|C>>>25),C=O+(P^A&(S^P))+M[5]+1200080426&4294967295,O=A+(C<<12&4294967295|C>>>20),C=P+(S^O&(A^S))+M[6]+2821735955&4294967295,P=O+(C<<17&4294967295|C>>>15),C=S+(A^P&(O^A))+M[7]+4249261313&4294967295,S=P+(C<<22&4294967295|C>>>10),C=A+(O^S&(P^O))+M[8]+1770035416&4294967295,A=S+(C<<7&4294967295|C>>>25),C=O+(P^A&(S^P))+M[9]+2336552879&4294967295,O=A+(C<<12&4294967295|C>>>20),C=P+(S^O&(A^S))+M[10]+4294925233&4294967295,P=O+(C<<17&4294967295|C>>>15),C=S+(A^P&(O^A))+M[11]+2304563134&4294967295,S=P+(C<<22&4294967295|C>>>10),C=A+(O^S&(P^O))+M[12]+1804603682&4294967295,A=S+(C<<7&4294967295|C>>>25),C=O+(P^A&(S^P))+M[13]+4254626195&4294967295,O=A+(C<<12&4294967295|C>>>20),C=P+(S^O&(A^S))+M[14]+2792965006&4294967295,P=O+(C<<17&4294967295|C>>>15),C=S+(A^P&(O^A))+M[15]+1236535329&4294967295,S=P+(C<<22&4294967295|C>>>10),C=A+(P^O&(S^P))+M[1]+4129170786&4294967295,A=S+(C<<5&4294967295|C>>>27),C=O+(S^P&(A^S))+M[6]+3225465664&4294967295,O=A+(C<<9&4294967295|C>>>23),C=P+(A^S&(O^A))+M[11]+643717713&4294967295,P=O+(C<<14&4294967295|C>>>18),C=S+(O^A&(P^O))+M[0]+3921069994&4294967295,S=P+(C<<20&4294967295|C>>>12),C=A+(P^O&(S^P))+M[5]+3593408605&4294967295,A=S+(C<<5&4294967295|C>>>27),C=O+(S^P&(A^S))+M[10]+38016083&4294967295,O=A+(C<<9&4294967295|C>>>23),C=P+(A^S&(O^A))+M[15]+3634488961&4294967295,P=O+(C<<14&4294967295|C>>>18),C=S+(O^A&(P^O))+M[4]+3889429448&4294967295,S=P+(C<<20&4294967295|C>>>12),C=A+(P^O&(S^P))+M[9]+568446438&4294967295,A=S+(C<<5&4294967295|C>>>27),C=O+(S^P&(A^S))+M[14]+3275163606&4294967295,O=A+(C<<9&4294967295|C>>>23),C=P+(A^S&(O^A))+M[3]+4107603335&4294967295,P=O+(C<<14&4294967295|C>>>18),C=S+(O^A&(P^O))+M[8]+1163531501&4294967295,S=P+(C<<20&4294967295|C>>>12),C=A+(P^O&(S^P))+M[13]+2850285829&4294967295,A=S+(C<<5&4294967295|C>>>27),C=O+(S^P&(A^S))+M[2]+4243563512&4294967295,O=A+(C<<9&4294967295|C>>>23),C=P+(A^S&(O^A))+M[7]+1735328473&4294967295,P=O+(C<<14&4294967295|C>>>18),C=S+(O^A&(P^O))+M[12]+2368359562&4294967295,S=P+(C<<20&4294967295|C>>>12),C=A+(S^P^O)+M[5]+4294588738&4294967295,A=S+(C<<4&4294967295|C>>>28),C=O+(A^S^P)+M[8]+2272392833&4294967295,O=A+(C<<11&4294967295|C>>>21),C=P+(O^A^S)+M[11]+1839030562&4294967295,P=O+(C<<16&4294967295|C>>>16),C=S+(P^O^A)+M[14]+4259657740&4294967295,S=P+(C<<23&4294967295|C>>>9),C=A+(S^P^O)+M[1]+2763975236&4294967295,A=S+(C<<4&4294967295|C>>>28),C=O+(A^S^P)+M[4]+1272893353&4294967295,O=A+(C<<11&4294967295|C>>>21),C=P+(O^A^S)+M[7]+4139469664&4294967295,P=O+(C<<16&4294967295|C>>>16),C=S+(P^O^A)+M[10]+3200236656&4294967295,S=P+(C<<23&4294967295|C>>>9),C=A+(S^P^O)+M[13]+681279174&4294967295,A=S+(C<<4&4294967295|C>>>28),C=O+(A^S^P)+M[0]+3936430074&4294967295,O=A+(C<<11&4294967295|C>>>21),C=P+(O^A^S)+M[3]+3572445317&4294967295,P=O+(C<<16&4294967295|C>>>16),C=S+(P^O^A)+M[6]+76029189&4294967295,S=P+(C<<23&4294967295|C>>>9),C=A+(S^P^O)+M[9]+3654602809&4294967295,A=S+(C<<4&4294967295|C>>>28),C=O+(A^S^P)+M[12]+3873151461&4294967295,O=A+(C<<11&4294967295|C>>>21),C=P+(O^A^S)+M[15]+530742520&4294967295,P=O+(C<<16&4294967295|C>>>16),C=S+(P^O^A)+M[2]+3299628645&4294967295,S=P+(C<<23&4294967295|C>>>9),C=A+(P^(S|~O))+M[0]+4096336452&4294967295,A=S+(C<<6&4294967295|C>>>26),C=O+(S^(A|~P))+M[7]+1126891415&4294967295,O=A+(C<<10&4294967295|C>>>22),C=P+(A^(O|~S))+M[14]+2878612391&4294967295,P=O+(C<<15&4294967295|C>>>17),C=S+(O^(P|~A))+M[5]+4237533241&4294967295,S=P+(C<<21&4294967295|C>>>11),C=A+(P^(S|~O))+M[12]+1700485571&4294967295,A=S+(C<<6&4294967295|C>>>26),C=O+(S^(A|~P))+M[3]+2399980690&4294967295,O=A+(C<<10&4294967295|C>>>22),C=P+(A^(O|~S))+M[10]+4293915773&4294967295,P=O+(C<<15&4294967295|C>>>17),C=S+(O^(P|~A))+M[1]+2240044497&4294967295,S=P+(C<<21&4294967295|C>>>11),C=A+(P^(S|~O))+M[8]+1873313359&4294967295,A=S+(C<<6&4294967295|C>>>26),C=O+(S^(A|~P))+M[15]+4264355552&4294967295,O=A+(C<<10&4294967295|C>>>22),C=P+(A^(O|~S))+M[6]+2734768916&4294967295,P=O+(C<<15&4294967295|C>>>17),C=S+(O^(P|~A))+M[13]+1309151649&4294967295,S=P+(C<<21&4294967295|C>>>11),C=A+(P^(S|~O))+M[4]+4149444226&4294967295,A=S+(C<<6&4294967295|C>>>26),C=O+(S^(A|~P))+M[11]+3174756917&4294967295,O=A+(C<<10&4294967295|C>>>22),C=P+(A^(O|~S))+M[2]+718787259&4294967295,P=O+(C<<15&4294967295|C>>>17),C=S+(O^(P|~A))+M[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+P&4294967295,k.g[3]=k.g[3]+O&4294967295}s.prototype.v=function(k,A){A===void 0&&(A=k.length);const S=A-this.blockSize,M=this.C;let P=this.h,O=0;for(;O<A;){if(P==0)for(;O<=S;)o(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<A;)if(M[P++]=k.charCodeAt(O++),P==this.blockSize){o(this,M),P=0;break}}else for(;O<A;)if(M[P++]=k[O++],P==this.blockSize){o(this,M),P=0;break}}this.h=P,this.o+=A},s.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;A=this.o*8;for(var S=k.length-8;S<k.length;++S)k[S]=A&255,A/=256;for(this.v(k),k=Array(16),A=0,S=0;S<4;++S)for(let M=0;M<32;M+=8)k[A++]=this.g[S]>>>M&255;return k};function l(k,A){var S=p;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=A(k)}function d(k,A){this.h=A;const S=[];let M=!0;for(let P=k.length-1;P>=0;P--){const O=k[P]|0;M&&O==A||(S[P]=O,M=!1)}this.g=S}var p={};function g(k){return-128<=k&&k<128?l(k,function(A){return new d([A|0],A<0?-1:0)}):new d([k|0],k<0?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return _;if(k<0)return j(y(-k));const A=[];let S=1;for(let M=0;k>=S;M++)A[M]=k/S|0,S*=4294967296;return new d(A,0)}function x(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return j(x(k.substring(1),A));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=y(Math.pow(A,8));let M=_;for(let O=0;O<k.length;O+=8){var P=Math.min(8,k.length-O);const C=parseInt(k.substring(O,O+P),A);P<8?(P=y(Math.pow(A,P)),M=M.j(P).add(y(C))):(M=M.j(S),M=M.add(y(C)))}return M}var _=g(0),T=g(1),I=g(16777216);t=d.prototype,t.m=function(){if(U(this))return-j(this).m();let k=0,A=1;for(let S=0;S<this.g.length;S++){const M=this.i(S);k+=(M>=0?M:4294967296+M)*A,A*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(V(this))return"0";if(U(this))return"-"+j(this).toString(k);const A=y(Math.pow(k,6));var S=this;let M="";for(;;){const P=ie(S,A).g;S=q(S,P.j(A));let O=((S.g.length>0?S.g[0]:S.h)>>>0).toString(k);if(S=P,V(S))return O+M;for(;O.length<6;)O="0"+O;M=O+M}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function V(k){if(k.h!=0)return!1;for(let A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function U(k){return k.h==-1}t.l=function(k){return k=q(this,k),U(k)?-1:V(k)?0:1};function j(k){const A=k.g.length,S=[];for(let M=0;M<A;M++)S[M]=~k.g[M];return new d(S,~k.h).add(T)}t.abs=function(){return U(this)?j(this):this},t.add=function(k){const A=Math.max(this.g.length,k.g.length),S=[];let M=0;for(let P=0;P<=A;P++){let O=M+(this.i(P)&65535)+(k.i(P)&65535),C=(O>>>16)+(this.i(P)>>>16)+(k.i(P)>>>16);M=C>>>16,O&=65535,C&=65535,S[P]=C<<16|O}return new d(S,S[S.length-1]&-2147483648?-1:0)};function q(k,A){return k.add(j(A))}t.j=function(k){if(V(this)||V(k))return _;if(U(this))return U(k)?j(this).j(j(k)):j(j(this).j(k));if(U(k))return j(this.j(j(k)));if(this.l(I)<0&&k.l(I)<0)return y(this.m()*k.m());const A=this.g.length+k.g.length,S=[];for(var M=0;M<2*A;M++)S[M]=0;for(M=0;M<this.g.length;M++)for(let P=0;P<k.g.length;P++){const O=this.i(M)>>>16,C=this.i(M)&65535,Ce=k.i(P)>>>16,_e=k.i(P)&65535;S[2*M+2*P]+=C*_e,z(S,2*M+2*P),S[2*M+2*P+1]+=O*_e,z(S,2*M+2*P+1),S[2*M+2*P+1]+=C*Ce,z(S,2*M+2*P+1),S[2*M+2*P+2]+=O*Ce,z(S,2*M+2*P+2)}for(k=0;k<A;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=A;k<2*A;k++)S[k]=0;return new d(S,0)};function z(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function F(k,A){this.g=k,this.h=A}function ie(k,A){if(V(A))throw Error("division by zero");if(V(k))return new F(_,_);if(U(k))return A=ie(j(k),A),new F(j(A.g),j(A.h));if(U(A))return A=ie(k,j(A)),new F(j(A.g),A.h);if(k.g.length>30){if(U(k)||U(A))throw Error("slowDivide_ only works with positive integers.");for(var S=T,M=A;M.l(k)<=0;)S=ee(S),M=ee(M);var P=de(S,1),O=de(M,1);for(M=de(M,2),S=de(S,2);!V(M);){var C=O.add(M);C.l(k)<=0&&(P=P.add(S),O=C),M=de(M,1),S=de(S,1)}return A=q(k,P.j(A)),new F(P,A)}for(P=_;k.l(A)>=0;){for(S=Math.max(1,Math.floor(k.m()/A.m())),M=Math.ceil(Math.log(S)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),O=y(S),C=O.j(A);U(C)||C.l(k)>0;)S-=M,O=y(S),C=O.j(A);V(O)&&(O=T),P=P.add(O),k=q(k,C)}return new F(P,k)}t.B=function(k){return ie(this,k).h},t.and=function(k){const A=Math.max(this.g.length,k.g.length),S=[];for(let M=0;M<A;M++)S[M]=this.i(M)&k.i(M);return new d(S,this.h&k.h)},t.or=function(k){const A=Math.max(this.g.length,k.g.length),S=[];for(let M=0;M<A;M++)S[M]=this.i(M)|k.i(M);return new d(S,this.h|k.h)},t.xor=function(k){const A=Math.max(this.g.length,k.g.length),S=[];for(let M=0;M<A;M++)S[M]=this.i(M)^k.i(M);return new d(S,this.h^k.h)};function ee(k){const A=k.g.length+1,S=[];for(let M=0;M<A;M++)S[M]=k.i(M)<<1|k.i(M-1)>>>31;return new d(S,k.h)}function de(k,A){const S=A>>5;A%=32;const M=k.g.length-S,P=[];for(let O=0;O<M;O++)P[O]=A>0?k.i(O+S)>>>A|k.i(O+S+1)<<32-A:k.i(O+S);return new d(P,k.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,J1=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=x,Wi=d}).apply(typeof cb<"u"?cb:typeof self<"u"?self:typeof window<"u"?window:{});var Jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var e_,Wc,t_,mh,gg,n_,r_,s_;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jd=="object"&&Jd];for(var v=0;v<h.length;++v){var w=h[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=n(this);function o(h,v){if(v)e:{var w=s;h=h.split(".");for(var N=0;N<h.length-1;N++){var Y=h[N];if(!(Y in w))break e;w=w[Y]}h=h[h.length-1],N=w[h],v=v(N),v!=N&&v!=null&&e(w,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var w=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&w.push([N,v[N]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,w){return h.call.apply(h.bind,arguments)}function y(h,v,w){return y=g,y.apply(null,arguments)}function x(h,v){var w=Array.prototype.slice.call(arguments,1);return function(){var N=w.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function _(h,v){function w(){}w.prototype=v.prototype,h.Z=v.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(N,Y,Z){for(var fe=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)fe[Pe-2]=arguments[Pe];return v.prototype[Y].apply(N,fe)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const v=h.length;if(v>0){const w=Array(v);for(let N=0;N<v;N++)w[N]=h[N];return w}return[]}function V(h,v){for(let N=1;N<arguments.length;N++){const Y=arguments[N];var w=typeof Y;if(w=w!="object"?w:Y?Array.isArray(Y)?"array":w:"null",w=="array"||w=="object"&&typeof Y.length=="number"){w=h.length||0;const Z=Y.length||0;h.length=w+Z;for(let fe=0;fe<Z;fe++)h[w+fe]=Y[fe]}else h.push(Y)}}class U{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function j(h){d.setTimeout(()=>{throw h},0)}function q(){var h=k;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class z{constructor(){this.h=this.g=null}add(v,w){const N=F.get();N.set(v,w),this.h?this.h.next=N:this.g=N,this.h=N}}var F=new U(()=>new ie,h=>h.reset());class ie{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,de=!1,k=new z,A=()=>{const h=Promise.resolve(void 0);ee=()=>{h.then(S)}};function S(){for(var h;h=q();){try{h.h.call(h.g)}catch(w){j(w)}var v=F;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}de=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};d.addEventListener("test",w,v),d.removeEventListener("test",w,v)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function Ce(h,v){P.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}_(Ce,P),Ce.prototype.init=function(h,v){const w=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(w=="mouseover"?v=h.fromElement:w=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),G=0;function oe(h,v,w,N,Y){this.listener=h,this.proxy=null,this.src=v,this.type=w,this.capture=!!N,this.ha=Y,this.key=++G,this.da=this.fa=!1}function ye(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ue(h,v,w){for(const N in h)v.call(w,h[N],N,h)}function L(h,v){for(const w in h)v.call(void 0,h[w],w,h)}function ue(h){const v={};for(const w in h)v[w]=h[w];return v}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(h,v){let w,N;for(let Y=1;Y<arguments.length;Y++){N=arguments[Y];for(w in N)h[w]=N[w];for(let Z=0;Z<pe.length;Z++)w=pe[Z],Object.prototype.hasOwnProperty.call(N,w)&&(h[w]=N[w])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,v,w,N,Y){const Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);const fe=he(h,v,N,Y);return fe>-1?(v=h[fe],w||(v.fa=!1)):(v=new oe(v,this.src,Z,!!N,Y),v.fa=w,h.push(v)),v};function ge(h,v){const w=v.type;if(w in h.g){var N=h.g[w],Y=Array.prototype.indexOf.call(N,v,void 0),Z;(Z=Y>=0)&&Array.prototype.splice.call(N,Y,1),Z&&(ye(v),h.g[w].length==0&&(delete h.g[w],h.h--))}}function he(h,v,w,N){for(let Y=0;Y<h.length;++Y){const Z=h[Y];if(!Z.da&&Z.listener==v&&Z.capture==!!w&&Z.ha==N)return Y}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),rt={};function kn(h,v,w,N,Y){if(Array.isArray(v)){for(let Z=0;Z<v.length;Z++)kn(h,v[Z],w,N,Y);return null}return w=xo(w),h&&h[_e]?h.J(v,w,p(N)?!!N.capture:!1,Y):Ss(h,v,w,!1,N,Y)}function Ss(h,v,w,N,Y,Z){if(!v)throw Error("Invalid event type");const fe=p(Y)?!!Y.capture:!!Y;let Pe=js(h);if(Pe||(h[Be]=Pe=new ce(h)),w=Pe.add(v,w,N,fe,Z),w.proxy)return w;if(N=Qr(),w.proxy=N,N.src=h,N.listener=w,h.addEventListener)O||(Y=fe),Y===void 0&&(Y=!1),h.addEventListener(v.toString(),N,Y);else if(h.attachEvent)h.attachEvent(Rs(v.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Qr(){function h(w){return v.call(h.src,h.listener,w)}const v=vo;return h}function Cs(h,v,w,N,Y){if(Array.isArray(v))for(var Z=0;Z<v.length;Z++)Cs(h,v[Z],w,N,Y);else N=p(N)?!!N.capture:!!N,w=xo(w),h&&h[_e]?(h=h.i,Z=String(v).toString(),Z in h.g&&(v=h.g[Z],w=he(v,w,N,Y),w>-1&&(ye(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete h.g[Z],h.h--)))):h&&(h=js(h))&&(v=h.g[v.toString()],h=-1,v&&(h=he(v,w,N,Y)),(w=h>-1?v[h]:null)&&Ye(w))}function Ye(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[_e])ge(v.i,h);else{var w=h.type,N=h.proxy;v.removeEventListener?v.removeEventListener(w,N,h.capture):v.detachEvent?v.detachEvent(Rs(w),N):v.addListener&&v.removeListener&&v.removeListener(N),(w=js(v))?(ge(w,h),w.h==0&&(w.src=null,v[Be]=null)):ye(h)}}}function Rs(h){return h in rt?rt[h]:rt[h]="on"+h}function vo(h,v){if(h.da)h=!0;else{v=new Ce(v,this);const w=h.listener,N=h.ha||h.src;h.fa&&Ye(h),h=w.call(N,v)}return h}function js(h){return h=h[Be],h instanceof ce?h:null}var an="__closure_events_fn_"+(Math.random()*1e9>>>0);function xo(h){return typeof h=="function"?h:(h[an]||(h[an]=function(v){return h.handleEvent(v)}),h[an])}function Tt(){M.call(this),this.i=new ce(this),this.M=this,this.G=null}_(Tt,M),Tt.prototype[_e]=!0,Tt.prototype.removeEventListener=function(h,v,w,N){Cs(this,h,v,w,N)};function Ut(h,v){var w,N=h.G;if(N)for(w=[];N;N=N.G)w.push(N);if(h=h.M,N=v.type||v,typeof v=="string")v=new P(v,h);else if(v instanceof P)v.target=v.target||h;else{var Y=v;v=new P(N,h),te(v,Y)}Y=!0;let Z,fe;if(w)for(fe=w.length-1;fe>=0;fe--)Z=v.g=w[fe],Y=on(Z,N,!0,v)&&Y;if(Z=v.g=h,Y=on(Z,N,!0,v)&&Y,Y=on(Z,N,!1,v)&&Y,w)for(fe=0;fe<w.length;fe++)Z=v.g=w[fe],Y=on(Z,N,!1,v)&&Y}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const w=h.g[v];for(let N=0;N<w.length;N++)ye(w[N]);delete h.g[v],h.h--}}this.G=null},Tt.prototype.J=function(h,v,w,N){return this.i.add(String(h),v,!1,w,N)},Tt.prototype.K=function(h,v,w,N){return this.i.add(String(h),v,!0,w,N)};function on(h,v,w,N){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let Y=!0;for(let Z=0;Z<v.length;++Z){const fe=v[Z];if(fe&&!fe.da&&fe.capture==w){const Pe=fe.listener,wt=fe.ha||fe.src;fe.fa&&ge(h.i,fe),Y=Pe.call(wt,N)!==!1&&Y}}return Y&&!N.defaultPrevented}function Is(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function Tr(h){h.g=Is(()=>{h.g=null,h.i&&(h.i=!1,Tr(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class wo extends M{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Tr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ar(h){M.call(this),this.h=h,this.g={}}_(Ar,M);var Xr=[];function Zt(h){Ue(h.g,function(v,w){this.g.hasOwnProperty(w)&&Ye(v)},h),h.g={}}Ar.prototype.N=function(){Ar.Z.N.call(this),Zt(this)},Ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dn=d.JSON.stringify,ft=d.JSON.parse,On=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function bo(){}function _o(){}var rr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nr(){P.call(this,"d")}_(Nr,P);function Pn(){P.call(this,"c")}_(Pn,P);var Tn={},Sr=null;function di(){return Sr=Sr||new Tt}Tn.Ia="serverreachability";function ha(h){P.call(this,Tn.Ia,h)}_(ha,P);function Wr(h){const v=di();Ut(v,new ha(v))}Tn.STAT_EVENT="statevent";function hi(h,v){P.call(this,Tn.STAT_EVENT,h),this.stat=v}_(hi,P);function At(h){const v=di();Ut(v,new hi(v,h))}Tn.Ja="timingevent";function Eo(h,v){P.call(this,Tn.Ja,h),this.size=v}_(Eo,P);function Cr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Zr(){this.g=!0}Zr.prototype.ua=function(){this.g=!1};function fa(h,v,w,N,Y,Z){h.info(function(){if(h.g)if(Z){var fe="",Pe=Z.split("&");for(let st=0;st<Pe.length;st++){var wt=Pe[st].split("=");if(wt.length>1){const kt=wt[0];wt=wt[1];const $n=kt.split("_");fe=$n.length>=2&&$n[1]=="type"?fe+(kt+"="+wt+"&"):fe+(kt+"=redacted&")}}}else fe=null;else fe=Z;return"XMLHTTP REQ ("+N+") [attempt "+Y+"]: "+v+`
`+w+`
`+fe})}function ma(h,v,w,N,Y,Z,fe){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+Y+"]: "+v+`
`+w+`
`+Z+" "+fe})}function Rr(h,v,w,N){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+sr(h,w)+(N?" "+N:"")})}function $l(h,v){h.info(function(){return"TIMEOUT: "+v})}Zr.prototype.info=function(){};function sr(h,v){if(!h.g)return v;if(!v)return null;try{const Z=JSON.parse(v);if(Z){for(h=0;h<Z.length;h++)if(Array.isArray(Z[h])){var w=Z[h];if(!(w.length<2)){var N=w[1];if(Array.isArray(N)&&!(N.length<1)){var Y=N[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let fe=1;fe<N.length;fe++)N[fe]=""}}}}return Dn(Z)}catch{return v}}var H={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},me={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ee;function We(){}_(We,bo),We.prototype.g=function(){return new XMLHttpRequest},Ee=new We;function Gt(h){return encodeURIComponent(String(h))}function ir(h){var v=1;h=h.split(":");const w=[];for(;v>0&&h.length;)w.push(h.shift()),v--;return h.length&&w.push(h.join(":")),w}function An(h,v,w,N){this.j=h,this.i=v,this.l=w,this.S=N||1,this.V=new Ar(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ar}function ar(){this.i=null,this.g="",this.h=!1}var fi={},or={};function jr(h,v,w){h.M=1,h.A=Ds(Nt(v)),h.u=w,h.R=!0,Jr(h,null)}function Jr(h,v){h.F=Date.now(),pa(h),h.B=Nt(h.A);var w=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),Uu(w.i,"t",N),h.C=0,w=h.j.L,h.h=new ar,h.g=Oo(h.j,w?v:null,!h.u),h.P>0&&(h.O=new wo(y(h.Y,h,h.g),h.P)),v=h.V,w=h.g,N=h.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(Xr[0]=Y.toString()),Y=Xr);for(let Z=0;Z<Y.length;Z++){const fe=kn(w,Y[Z],N||v.handleEvent,!1,v.h||v);if(!fe)break;v.g[fe.key]=fe}v=h.J?ue(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),Wr(),fa(h.i,h.v,h.B,h.l,h.S,h.u)}An.prototype.ba=function(h){h=h.target;const v=this.O;v&&pn(h)==3?v.j():this.Y(h)},An.prototype.Y=function(h){try{if(h==this.g)e:{const Pe=pn(this.g),wt=this.g.ya(),st=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Na(this.g)))){this.K||Pe!=4||wt==7||(wt==8||st<=0?Wr(3):Wr(2)),ns(this);var v=this.g.ca();this.X=v;var w=es(this);if(this.o=v==200,ma(this.i,this.v,this.B,this.l,this.S,Pe,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,Y=this.g;if((N=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(N)){var Z=N;break t}}Z=null}if(h=Z)Rr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ao(this,h);else{this.o=!1,this.m=3,At(12),rs(this),ga(this);break e}}if(this.R){h=!0;let kt;for(;!this.K&&this.C<w.length;)if(kt=To(this,w),kt==or){Pe==4&&(this.m=4,At(14),h=!1),Rr(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==fi){this.m=4,At(15),Rr(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else Rr(this.i,this.l,kt,null),Ao(this,kt);if(mt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||w.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)Rr(this.i,this.l,w,"[Invalid Chunked Response]"),rs(this),ga(this);else if(w.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),tc(fe),fe.P=!0,At(11))}}else Rr(this.i,this.l,w,null),Ao(this,w);Pe==4&&rs(this),this.o&&!this.K&&(Pe==4?nc(this.j,this):(this.o=!1,pa(this)))}else Sa(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),rs(this),ga(this)}}}catch{}finally{}};function es(h){if(!mt(h))return h.g.la();const v=Na(h.g);if(v==="")return"";let w="";const N=v.length,Y=pn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return rs(h),ga(h),"";h.h.i=new d.TextDecoder}for(let Z=0;Z<N;Z++)h.h.h=!0,w+=h.h.i.decode(v[Z],{stream:!(Y&&Z==N-1)});return v.length=0,h.h.g+=w,h.C=0,h.h.g}function mt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function To(h,v){var w=h.C,N=v.indexOf(`
`,w);return N==-1?or:(w=Number(v.substring(w,N)),isNaN(w)?fi:(N+=1,N+w>v.length?or:(v=v.slice(N,N+w),h.C=N+w,v)))}An.prototype.cancel=function(){this.K=!0,rs(this)};function pa(h){h.T=Date.now()+h.H,ts(h,h.H)}function ts(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Cr(y(h.aa,h),v)}function ns(h){h.D&&(d.clearTimeout(h.D),h.D=null)}An.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?($l(this.i,this.B),this.M!=2&&(Wr(),At(17)),rs(this),this.m=2,ga(this)):ts(this,this.T-h)};function ga(h){h.j.I==0||h.K||nc(h.j,h)}function rs(h){ns(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,Zt(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function Ao(h,v){try{var w=h.j;if(w.I!=0&&(w.g==h||xa(w.h,h))){if(!h.L&&xa(w.h,h)&&w.I==3){try{var N=w.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var Y=N;if(Y[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Do(w),ss(w);else break e;ec(w),At(18)}}else w.xa=Y[1],0<w.xa-w.K&&Y[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Cr(y(w.Va,w),6e3));lr(w.h)<=1&&w.ta&&(w.ta=void 0)}else Ms(w,11)}else if((h.L||w.g==h)&&Do(w),!C(v))for(Y=w.Ba.g.parse(v),v=0;v<Y.length;v++){let st=Y[v];const kt=st[0];if(!(kt<=w.K))if(w.K=kt,st=st[1],w.I==2)if(st[0]=="c"){w.M=st[1],w.ba=st[2];const $n=st[3];$n!=null&&(w.ka=$n,w.j.info("VER="+w.ka));const is=st[4];is!=null&&(w.za=is,w.j.info("SVER="+w.za));const Dr=st[5];Dr!=null&&typeof Dr=="number"&&Dr>0&&(N=1.5*Dr,w.O=N,w.j.info("backChannelRequestTimeoutMs_="+N)),N=w;const Or=h.g;if(Or){const Pr=Or.g?Or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pr){var Z=N.h;Z.g||Pr.indexOf("spdy")==-1&&Pr.indexOf("quic")==-1&&Pr.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(No(Z,Z.h),Z.h=null))}if(N.G){const sc=Or.g?Or.g.getResponseHeader("X-HTTP-Session-Id"):null;sc&&(N.wa=sc,ot(N.J,N.G,sc))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),N=w;var fe=h;if(N.na=Yu(N,N.L?N.ba:null,N.W),fe.L){ks(N.h,fe);var Pe=fe,wt=N.O;wt&&(Pe.H=wt),Pe.D&&(ns(Pe),pa(Pe)),N.g=fe}else Hu(N);w.i.length>0&&Ia(w)}else st[0]!="stop"&&st[0]!="close"||Ms(w,7);else w.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?Ms(w,7):Ra(w):st[0]!="noop"&&w.l&&w.l.qa(st),w.A=0)}}Wr(4)}catch{}}var Vf=class{constructor(h,v){this.g=h,this.map=v}};function ya(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function va(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function lr(h){return h.h?1:h.g?h.g.size:0}function xa(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function No(h,v){h.g?h.g.add(v):h.h=v}function ks(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}ya.prototype.cancel=function(){if(this.i=So(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function So(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const w of h.g.values())v=v.concat(w.G);return v}return I(h.i)}var Co=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uf(h,v){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const N=h[w].indexOf("=");let Y,Z=null;N>=0?(Y=h[w].substring(0,N),Z=h[w].substring(N+1)):Y=h[w],v(Y,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Ir(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof Ir?(this.l=h.l,mi(this,h.j),this.o=h.o,this.g=h.g,wa(this,h.u),this.h=h.h,pi(this,Bu(h.i)),this.m=h.m):h&&(v=String(h).match(Co))?(this.l=!1,mi(this,v[1]||"",!0),this.o=ba(v[2]||""),this.g=ba(v[3]||"",!0),wa(this,v[4]),this.h=ba(v[5]||"",!0),pi(this,v[6]||"",!0),this.m=ba(v[7]||"")):(this.l=!1,this.i=new cr(null,this.l))}Ir.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Jt(v,Kl,!0),":");var w=this.g;return(w||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Jt(v,Kl,!0),"@"),h.push(Gt(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Jt(w,w.charAt(0)=="/"?gi:Yl,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Jt(w,Vu)),h.join("")},Ir.prototype.resolve=function(h){const v=Nt(this);let w=!!h.j;w?mi(v,h.j):w=!!h.o,w?v.o=h.o:w=!!h.g,w?v.g=h.g:w=h.u!=null;var N=h.h;if(w)wa(v,h.u);else if(w=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var Y=v.h.lastIndexOf("/");Y!=-1&&(N=v.h.slice(0,Y+1)+N)}if(Y=N,Y==".."||Y==".")N="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){N=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const Z=[];for(let fe=0;fe<Y.length;){const Pe=Y[fe++];Pe=="."?N&&fe==Y.length&&Z.push(""):Pe==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),N&&fe==Y.length&&Z.push("")):(Z.push(Pe),N=!0)}N=Z.join("/")}else N=Y}return w?v.h=N:w=h.i.toString()!=="",w?pi(v,Bu(h.i)):w=!!h.m,w&&(v.m=h.m),v};function Nt(h){return new Ir(h)}function mi(h,v,w){h.j=w?ba(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function wa(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function pi(h,v,w){v instanceof cr?(h.i=v,Wl(h.i,h.l)):(w||(v=Jt(v,Lu)),h.i=new cr(v,h.l))}function ot(h,v,w){h.i.set(v,w)}function Ds(h){return ot(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ba(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Jt(h,v,w){return typeof h=="string"?(h=encodeURI(h).replace(v,Gl),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Gl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Kl=/[#\/\?@]/g,Yl=/[#\?:]/g,gi=/[#\?]/g,Lu=/[#\?@]/g,Vu=/#/g;function cr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Os(h){h.g||(h.g=new Map,h.h=0,h.i&&Uf(h.i,function(v,w){h.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}t=cr.prototype,t.add=function(h,v){Os(this),this.i=null,h=kr(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(v),this.h+=1,this};function Ql(h,v){Os(h),v=kr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Xl(h,v){return Os(h),v=kr(h,v),h.g.has(v)}t.forEach=function(h,v){Os(this),this.g.forEach(function(w,N){w.forEach(function(Y){h.call(v,Y,N,this)},this)},this)};function Ro(h,v){Os(h);let w=[];if(typeof v=="string")Xl(h,v)&&(w=w.concat(h.g.get(kr(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)w=w.concat(h[v]);return w}t.set=function(h,v){return Os(this),this.i=null,h=kr(this,h),Xl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=Ro(this,h),h.length>0?String(h[0]):v):v};function Uu(h,v,w){Ql(h,v),w.length>0&&(h.i=null,h.g.set(kr(h,v),I(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var w=v[N];const Y=Gt(w);w=Ro(this,w);for(let Z=0;Z<w.length;Z++){let fe=Y;w[Z]!==""&&(fe+="="+Gt(w[Z])),h.push(fe)}}return this.i=h.join("&")};function Bu(h){const v=new cr;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function kr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Wl(h,v){v&&!h.j&&(Os(h),h.i=null,h.g.forEach(function(w,N){const Y=N.toLowerCase();N!=Y&&(Ql(this,N),Uu(this,Y,w))},h)),h.j=v}function Zl(h,v){const w=new Zr;if(d.Image){const N=new Image;N.onload=x(Nn,w,"TestLoadImage: loaded",!0,v,N),N.onerror=x(Nn,w,"TestLoadImage: error",!1,v,N),N.onabort=x(Nn,w,"TestLoadImage: abort",!1,v,N),N.ontimeout=x(Nn,w,"TestLoadImage: timeout",!1,v,N),d.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else v(!1)}function yi(h,v){const w=new Zr,N=new AbortController,Y=setTimeout(()=>{N.abort(),Nn(w,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:N.signal}).then(Z=>{clearTimeout(Y),Z.ok?Nn(w,"TestPingServer: ok",!0,v):Nn(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Y),Nn(w,"TestPingServer: error",!1,v)})}function Nn(h,v,w,N,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),N(w)}catch{}}function zu(){this.g=new On}function _a(h){this.i=h.Sb||null,this.h=h.ab||!1}_(_a,bo),_a.prototype.g=function(){return new Ea(this.i,this.h)};function Ea(h,v){Tt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Ea,Tt),t=Ea.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Ps(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Sn(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ps(this)),this.g&&(this.readyState=3,Ps(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vi(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function vi(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Sn(this):Ps(this),this.readyState==3&&vi(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,Sn(this))},t.Na=function(h){this.g&&(this.response=h,Sn(this))},t.ga=function(){this.g&&Sn(this)};function Sn(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ps(h)}t.setRequestHeader=function(h,v){this.A.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=v.next();return h.join(`\r
`)};function Ps(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function xi(h){let v="";return Ue(h,function(w,N){v+=N,v+=":",v+=w,v+=`\r
`}),v}function ur(h,v,w){e:{for(N in w){var N=!1;break e}N=!0}N||(w=xi(w),typeof h=="string"?w!=null&&Gt(w):ot(h,v,w))}function pt(h){Tt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(pt,Tt);var jo=/^https?$/i,Fu=["POST","PUT"];t=pt.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,v,w,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ee.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(Z){Ta(this,Z);return}if(h=w||"",w=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var Y in N)w.set(Y,N[Y]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Z of N.keys())w.set(Z,N.get(Z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(w.keys()).find(Z=>Z.toLowerCase()=="content-type"),Y=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Fu,v,void 0)>=0)||N||Y||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,fe]of w)this.g.setRequestHeader(Z,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Z){Ta(this,Z)}};function Ta(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Aa(h),Kt(h)}function Aa(h){h.A||(h.A=!0,Ut(h,"complete"),Ut(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ut(this,"complete"),Ut(this,"abort"),Kt(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kt(this,!0)),pt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Jl(this):this.Xa())},t.Xa=function(){Jl(this)};function Jl(h){if(h.h&&typeof l<"u"){if(h.v&&pn(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ut(h,"readystatechange"),pn(h)==4){h.h=!1;try{const Z=h.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var N;if(N=Z===0){let fe=String(h.D).match(Co)[1]||null;!fe&&d.self&&d.self.location&&(fe=d.self.location.protocol.slice(0,-1)),N=!jo.test(fe?fe.toLowerCase():"")}w=N}if(w)Ut(h,"complete"),Ut(h,"success");else{h.o=6;try{var Y=pn(h)>2?h.g.statusText:""}catch{Y=""}h.l=Y+" ["+h.ca()+"]",Aa(h)}}finally{Kt(h)}}}}function Kt(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,v||Ut(h,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function pn(h){return h.g?h.g.readyState:0}t.ca=function(){try{return pn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),ft(v)}};function Na(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Sa(h){const v={};h=(h.g&&pn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(C(h[N]))continue;var w=ir(h[N]);const Y=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Z=v[Y]||[];v[Y]=Z,Z.push(w)}L(v,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(h,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||v}function Io(h){this.za=0,this.i=[],this.j=new Zr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ca("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ca("baseRetryDelayMs",5e3,h),this.Za=Ca("retryDelaySeedMs",1e4,h),this.Ta=Ca("forwardChannelMaxRetries",2,h),this.va=Ca("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ya(h&&h.concurrentRequestLimit),this.Ba=new zu,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Io.prototype,t.ka=8,t.I=1,t.connect=function(h,v,w,N){At(0),this.W=h,this.H=v||{},w&&N!==void 0&&(this.H.OSID=w,this.H.OAID=N),this.F=this.X,this.J=Yu(this,null,this.W),Ia(this)};function Ra(h){if(ja(h),h.I==3){var v=h.V++,w=Nt(h.J);if(ot(w,"SID",h.M),ot(w,"RID",v),ot(w,"TYPE","terminate"),ka(h,w),v=new An(h,h.j,v),v.M=2,v.A=Ds(Nt(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&d.Image&&(new Image().src=v.A,w=!0),w||(v.g=Oo(v.j,null),v.g.ea(v.A)),v.F=Date.now(),pa(v)}Ku(h)}function ss(h){h.g&&(tc(h),h.g.cancel(),h.g=null)}function ja(h){ss(h),h.v&&(d.clearTimeout(h.v),h.v=null),Do(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Ia(h){if(!va(h.h)&&!h.m){h.m=!0;var v=h.Ea;ee||A(),de||(ee(),de=!0),k.add(v,h),h.D=0}}function Bf(h,v){return lr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Cr(y(h.Ea,h,v),Gu(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Y=new An(this,this.j,h);let Z=this.o;if(this.U&&(Z?(Z=ue(Z),te(Z,this.U)):Z=this.U),this.u!==null||this.R||(Y.J=Z,Z=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var N=this.i[w];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=ko(this,Y,v),w=Nt(this.J),ot(w,"RID",h),ot(w,"CVER",22),this.G&&ot(w,"X-HTTP-Session-Id",this.G),ka(this,w),Z&&(this.R?v="headers="+Gt(xi(Z))+"&"+v:this.u&&ur(w,this.u,Z)),No(this.h,Y),this.Ra&&ot(w,"TYPE","init"),this.S?(ot(w,"$req",v),ot(w,"SID","null"),Y.U=!0,jr(Y,w,null)):jr(Y,w,v),this.I=2}}else this.I==3&&(h?qu(this,h):this.i.length==0||va(this.h)||qu(this))};function qu(h,v){var w;v?w=v.l:w=h.V++;const N=Nt(h.J);ot(N,"SID",h.M),ot(N,"RID",w),ot(N,"AID",h.K),ka(h,N),h.u&&h.o&&ur(N,h.u,h.o),w=new An(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),v&&(h.i=v.G.concat(h.i)),v=ko(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),No(h.h,w),jr(w,N,v)}function ka(h,v){h.H&&Ue(h.H,function(w,N){ot(v,N,w)}),h.l&&Ue({},function(w,N){ot(v,N,w)})}function ko(h,v,w){w=Math.min(h.i.length,w);const N=h.l?y(h.l.Ka,h.l,h):null;e:{var Y=h.i;let Pe=-1;for(;;){const wt=["count="+w];Pe==-1?w>0?(Pe=Y[0].g,wt.push("ofs="+Pe)):Pe=0:wt.push("ofs="+Pe);let st=!0;for(let kt=0;kt<w;kt++){var Z=Y[kt].g;const $n=Y[kt].map;if(Z-=Pe,Z<0)Pe=Math.max(0,Y[kt].g-100),st=!1;else try{Z="req"+Z+"_"||"";try{var fe=$n instanceof Map?$n:Object.entries($n);for(const[is,Dr]of fe){let Or=Dr;p(Dr)&&(Or=Dn(Dr)),wt.push(Z+is+"="+encodeURIComponent(Or))}}catch(is){throw wt.push(Z+"type="+encodeURIComponent("_badmap")),is}}catch{N&&N($n)}}if(st){fe=wt.join("&");break e}}fe=void 0}return h=h.i.splice(0,w),v.G=h,fe}function Hu(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;ee||A(),de||(ee(),de=!0),k.add(v,h),h.A=0}}function ec(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Cr(y(h.Da,h),Gu(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,$u(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Cr(y(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),ss(this),$u(this))};function tc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function $u(h){h.g=new An(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Nt(h.na);ot(v,"RID","rpc"),ot(v,"SID",h.M),ot(v,"AID",h.K),ot(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&ot(v,"TO",h.ia),ot(v,"TYPE","xmlhttp"),ka(h,v),h.u&&h.o&&ur(v,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Ds(Nt(v)),w.u=null,w.R=!0,Jr(w,h)}t.Va=function(){this.C!=null&&(this.C=null,ss(this),ec(this),At(19))};function Do(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function nc(h,v){var w=null;if(h.g==v){Do(h),tc(h),h.g=null;var N=2}else if(xa(h.h,v))w=v.G,ks(h.h,v),N=1;else return;if(h.I!=0){if(v.o)if(N==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var Y=h.D;N=di(),Ut(N,new Eo(N,w)),Ia(h)}else Hu(h);else if(Y=v.m,Y==3||Y==0&&v.X>0||!(N==1&&Bf(h,v)||N==2&&ec(h)))switch(w&&w.length>0&&(v=h.h,v.i=v.i.concat(w)),Y){case 1:Ms(h,5);break;case 4:Ms(h,10);break;case 3:Ms(h,6);break;default:Ms(h,2)}}}function Gu(h,v){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*v}function Ms(h,v){if(h.j.info("Error code "+v),v==2){var w=y(h.bb,h),N=h.Ua;const Y=!N;N=new Ir(N||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||mi(N,"https"),Ds(N),Y?Zl(N.toString(),w):yi(N.toString(),w)}else At(2);h.I=0,h.l&&h.l.pa(v),Ku(h),ja(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Ku(h){if(h.I=0,h.ja=[],h.l){const v=So(h.h);(v.length!=0||h.i.length!=0)&&(V(h.ja,v),V(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Yu(h,v,w){var N=w instanceof Ir?Nt(w):new Ir(w);if(N.g!="")v&&(N.g=v+"."+N.g),wa(N,N.u);else{var Y=d.location;N=Y.protocol,v=v?v+"."+Y.hostname:Y.hostname,Y=+Y.port;const Z=new Ir(null);N&&mi(Z,N),v&&(Z.g=v),Y&&wa(Z,Y),w&&(Z.h=w),N=Z}return w=h.G,v=h.wa,w&&v&&ot(N,w,v),ot(N,"VER",h.ka),ka(h,N),N}function Oo(h,v,w){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new pt(new _a({ab:w})):new pt(h.ma),v.Fa(h.L),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qu(){}t=Qu.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Po(){}Po.prototype.g=function(h,v){return new Cn(h,v)};function Cn(h,v){Tt.call(this),this.g=new Io(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!C(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!C(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new wi(this)}_(Cn,Tt),Cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Ra(this.g)},Cn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=Dn(h),h=w);v.i.push(new Vf(v.Ya++,h)),v.I==3&&Ia(v)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Ra(this.g),delete this.g,Cn.Z.N.call(this)};function rc(h){Nr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const w in v){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}_(rc,Nr);function Xu(){Pn.call(this),this.status=1}_(Xu,Pn);function wi(h){this.g=h}_(wi,Qu),wi.prototype.ra=function(){Ut(this.g,"a")},wi.prototype.qa=function(h){Ut(this.g,new rc(h))},wi.prototype.pa=function(h){Ut(this.g,new Xu)},wi.prototype.oa=function(){Ut(this.g,"b")},Po.prototype.createWebChannel=Po.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,s_=function(){return new Po},r_=function(){return di()},n_=Tn,gg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},H.NO_ERROR=0,H.TIMEOUT=8,H.HTTP_ERROR=6,mh=H,me.COMPLETE="complete",t_=me,_o.EventType=rr,rr.OPEN="a",rr.CLOSE="b",rr.ERROR="c",rr.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,Wc=_o,pt.prototype.listenOnce=pt.prototype.K,pt.prototype.getLastError=pt.prototype.Ha,pt.prototype.getLastErrorCode=pt.prototype.ya,pt.prototype.getStatus=pt.prototype.ca,pt.prototype.getResponseJson=pt.prototype.La,pt.prototype.getResponseText=pt.prototype.la,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Fa,e_=pt}).apply(typeof Jd<"u"?Jd:typeof self<"u"?self:typeof window<"u"?window:{});const ub="@firebase/firestore",db="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new Kg("@firebase/firestore");function ul(){return so.logLevel}function xe(t,...e){if(so.logLevel<=$e.DEBUG){const n=e.map(a0);so.debug(`Firestore (${Ol}): ${t}`,...n)}}function ai(t,...e){if(so.logLevel<=$e.ERROR){const n=e.map(a0);so.error(`Firestore (${Ol}): ${t}`,...n)}}function _l(t,...e){if(so.logLevel<=$e.WARN){const n=e.map(a0);so.warn(`Firestore (${Ol}): ${t}`,...n)}}function a0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,i_(t,s,n)}function i_(t,e,n){let s=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ai(s),new Error(s)}function nt(t,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,t||i_(e,o,s)}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class e6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(xn.UNAUTHENTICATED)))}shutdown(){}}class t6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class n6{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let l=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ei,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ei)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nt(typeof s.accessToken=="string",31837,{l:s}),new a_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new xn(e)}}class r6{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class s6{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new r6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nt(this.o===void 0,3512);const s=l=>{l.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,xe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new hb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=a6(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<n&&(s+=e.charAt(o[l]%62))}return s}}function Ge(t,e){return t<e?-1:t>e?1:0}function yg(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const o=t.charAt(s),l=e.charAt(s);if(o!==l)return Kp(o)===Kp(l)?Ge(o,l):Kp(o)?1:-1}return Ge(t.length,e.length)}const o6=55296,l6=57343;function Kp(t){const e=t.charCodeAt(0);return e>=o6&&e<=l6}function El(t,e,n){return t.length===e.length&&t.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="__name__";class ds{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ie(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ie(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ds.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ds?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const l=ds.compareSegments(e.get(o),n.get(o));if(l!==0)return l}return Ge(e.length,n.length)}static compareSegments(e,n){const s=ds.isNumericId(e),o=ds.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?ds.extractNumericId(e).compare(ds.extractNumericId(n)):yg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wi.fromString(e.substring(4,e.length-2))}}class yt extends ds{construct(e,n,s){return new yt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ve(se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new yt(n)}static emptyPath(){return new yt([])}}const c6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends ds{construct(e,n,s){return new fn(e,n,s)}static isValidIdentifier(e){return c6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fb}static keyField(){return new fn([fb])}static fromServerFormat(e){const n=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ve(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ve(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ve(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(s+=p,o++):(l(),o++)}if(l(),d)throw new ve(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(n)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(yt.fromString(e))}static fromName(e){return new Te(yt.fromString(e).popFirst(5))}static empty(){return new Te(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return yt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t,e,n){if(!n)throw new ve(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function u6(t,e,n,s){if(e===!0&&s===!0)throw new ve(se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mb(t){if(!Te.isDocumentKey(t))throw new ve(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pb(t){if(Te.isDocumentKey(t))throw new ve(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function l_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function df(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie(12329,{type:typeof t})}function qr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ve(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=df(t);throw new ve(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t,e){const n={typeString:t};return e&&(n.value=e),n}function Au(t,e){if(!l_(t))throw new ve(se.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const d=t[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){n=`Expected '${s}' field to equal '${l.value}'`;break}}if(n)throw new ve(se.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=-62135596800,yb=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*yb);return new bt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<gb)throw new ve(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yb}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Au(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:$t("string",bt._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new bt(0,0))}static max(){return new Oe(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=-1;function d6(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(s===1e9?new bt(n+1,0):new bt(n,s));return new ta(o,Te.empty(),e)}function h6(t){return new ta(t.readTime,t.key,uu)}class ta{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ta(Oe.min(),Te.empty(),uu)}static max(){return new ta(Oe.max(),Te.empty(),uu)}}function f6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(t.documentKey,e.documentKey),n!==0?n:Ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==m6)throw t;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(n,l).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,s)=>{n(e)}))}static reject(e){return new le(((n,s)=>{s(e)}))}static waitFor(e){return new le(((n,s)=>{let o=0,l=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++l,d&&l===o&&n()}),(g=>s(g)))})),d=!0,l===o&&n()}))}static or(e){let n=le.resolve(!1);for(const s of e)n=n.next((o=>o?le.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,l)=>{s.push(n.call(this,o,l))})),this.waitFor(s)}static mapArray(e,n){return new le(((s,o)=>{const l=e.length,d=new Array(l);let p=0;for(let g=0;g<l;g++){const y=g;n(e[y]).next((x=>{d[y]=x,++p,p===l&&s(d)}),(x=>o(x)))}}))}static doWhile(e,n){return new le(((s,o)=>{const l=()=>{e()===!0?n().next((()=>{l()}),o):s()};l()}))}}function g6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ml(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=-1;function ff(t){return t==null}function jh(t){return t===0&&1/t==-1/0}function y6(t){return typeof t=="number"&&Number.isInteger(t)&&!jh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="";function v6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vb(e)),e=x6(t.get(n),e);return vb(e)}function x6(t,e){let n=e;const s=t.length;for(let o=0;o<s;o++){const l=t.charAt(o);switch(l){case"\0":n+="";break;case c_:n+="";break;default:n+=l}}return n}function vb(t){return t+c_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ca(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function u_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?s(e.key,n):1,n&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,n,s,o,l){this.key=e,this.value=n,this.color=s??hn.RED,this.left=o??hn.EMPTY,this.right=l??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,l){return new hn(e??this.key,n??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,n,s),null):l===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return hn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,n,s,o,l){return this}insert(e,n,s){return new hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wb(this.data.getIterator())}getIteratorFrom(e){return new wb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Wt(this.comparator);return n.data=e,n}}class wb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Jn([])}unionWith(e){let n=new Wt(fn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new d_("Invalid base64 string: "+l):l}})(e);return new mn(n)}static fromUint8Array(e){const n=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new mn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const w6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function na(t){if(nt(!!t,39018),typeof t=="string"){let e=0;const n=w6.exec(t);if(nt(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Mt(t.seconds),nanos:Mt(t.nanos)}}function Mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ra(t){return typeof t=="string"?mn.fromBase64String(t):mn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="server_timestamp",f_="__type__",m_="__previous_value__",p_="__local_write_time__";function c0(t){return(t?.mapValue?.fields||{})[f_]?.stringValue===h_}function mf(t){const e=t.mapValue.fields[m_];return c0(e)?mf(e):e}function du(t){const e=na(t.mapValue.fields[p_].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,n,s,o,l,d,p,g,y,x){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=x}}const Ih="(default)";class hu{constructor(e,n){this.projectId=e,this.database=n||Ih}static empty(){return new hu("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="__type__",_6="__max__",th={mapValue:{}},y_="__vector__",kh="value";function sa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?c0(t)?4:T6(t)?9007199254740991:E6(t)?10:11:Ie(28295,{value:t})}function bs(t,e){if(t===e)return!0;const n=sa(t);if(n!==sa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return du(t).isEqual(du(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=na(o.timestampValue),p=na(l.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(o,l){return ra(o.bytesValue).isEqual(ra(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(o,l){return Mt(o.geoPointValue.latitude)===Mt(l.geoPointValue.latitude)&&Mt(o.geoPointValue.longitude)===Mt(l.geoPointValue.longitude)})(t,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Mt(o.integerValue)===Mt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=Mt(o.doubleValue),p=Mt(l.doubleValue);return d===p?jh(d)===jh(p):isNaN(d)&&isNaN(p)}return!1})(t,e);case 9:return El(t.arrayValue.values||[],e.arrayValue.values||[],bs);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},p=l.mapValue.fields||{};if(xb(d)!==xb(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!bs(d[g],p[g])))return!1;return!0})(t,e);default:return Ie(52216,{left:t})}}function fu(t,e){return(t.values||[]).find((n=>bs(n,e)))!==void 0}function Tl(t,e){if(t===e)return 0;const n=sa(t),s=sa(e);if(n!==s)return Ge(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(t.booleanValue,e.booleanValue);case 2:return(function(l,d){const p=Mt(l.integerValue||l.doubleValue),g=Mt(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(t,e);case 3:return bb(t.timestampValue,e.timestampValue);case 4:return bb(du(t),du(e));case 5:return yg(t.stringValue,e.stringValue);case 6:return(function(l,d){const p=ra(l),g=ra(d);return p.compareTo(g)})(t.bytesValue,e.bytesValue);case 7:return(function(l,d){const p=l.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const x=Ge(p[y],g[y]);if(x!==0)return x}return Ge(p.length,g.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,d){const p=Ge(Mt(l.latitude),Mt(d.latitude));return p!==0?p:Ge(Mt(l.longitude),Mt(d.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return _b(t.arrayValue,e.arrayValue);case 10:return(function(l,d){const p=l.fields||{},g=d.fields||{},y=p[kh]?.arrayValue,x=g[kh]?.arrayValue,_=Ge(y?.values?.length||0,x?.values?.length||0);return _!==0?_:_b(y,x)})(t.mapValue,e.mapValue);case 11:return(function(l,d){if(l===th.mapValue&&d===th.mapValue)return 0;if(l===th.mapValue)return 1;if(d===th.mapValue)return-1;const p=l.fields||{},g=Object.keys(p),y=d.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let _=0;_<g.length&&_<x.length;++_){const T=yg(g[_],x[_]);if(T!==0)return T;const I=Tl(p[g[_]],y[x[_]]);if(I!==0)return I}return Ge(g.length,x.length)})(t.mapValue,e.mapValue);default:throw Ie(23264,{he:n})}}function bb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ge(t,e);const n=na(t),s=na(e),o=Ge(n.seconds,s.seconds);return o!==0?o:Ge(n.nanos,s.nanos)}function _b(t,e){const n=t.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const l=Tl(n[o],s[o]);if(l)return l}return Ge(n.length,s.length)}function Al(t){return vg(t)}function vg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=na(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ra(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Te.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",o=!0;for(const l of n.values||[])o?o=!1:s+=",",s+=vg(l);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",l=!0;for(const d of s)l?l=!1:o+=",",o+=`${d}:${vg(n.fields[d])}`;return o+"}"})(t.mapValue):Ie(61005,{value:t})}function ph(t){switch(sa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mf(t);return e?16+ph(e):16;case 5:return 2*t.stringValue.length;case 6:return ra(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+ph(l)),0)})(t.arrayValue);case 10:case 11:return(function(s){let o=0;return ca(s.fields,((l,d)=>{o+=l.length+ph(d)})),o})(t.mapValue);default:throw Ie(13486,{value:t})}}function Eb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xg(t){return!!t&&"integerValue"in t}function u0(t){return!!t&&"arrayValue"in t}function Tb(t){return!!t&&"nullValue"in t}function Ab(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gh(t){return!!t&&"mapValue"in t}function E6(t){return(t?.mapValue?.fields||{})[g_]?.stringValue===y_}function ru(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ca(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=ru(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ru(t.arrayValue.values[n]);return e}return{...t}}function T6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===_6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ru(n)}setAll(e){let n=fn.emptyPath(),s={},o=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=p.popLast()}d?s[p.lastSegment()]=ru(d):o.push(p.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,s,o)}delete(e){const n=this.field(e.popLast());gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];gh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){ca(n,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Fn(ru(this.value))}}function v_(t){const e=[];return ca(t.fields,((n,s)=>{const o=new fn([n]);if(gh(s)){const l=v_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n,s,o,l,d,p){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=l,this.data=d,this.documentState=p}static newInvalidDocument(e){return new wn(e,0,Oe.min(),Oe.min(),Oe.min(),Fn.empty(),0)}static newFoundDocument(e,n,s,o){return new wn(e,1,n,Oe.min(),s,o,0)}static newNoDocument(e,n){return new wn(e,2,n,Oe.min(),Oe.min(),Fn.empty(),0)}static newUnknownDocument(e,n){return new wn(e,3,n,Oe.min(),Oe.min(),Fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function Nb(t,e,n){let s=0;for(let o=0;o<t.position.length;o++){const l=e[o],d=t.position[o];if(l.field.isKeyField()?s=Te.comparator(Te.fromName(d.referenceValue),n.key):s=Tl(d,n.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Sb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n="asc"){this.field=e,this.dir=n}}function A6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{}class Ht extends x_{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new S6(e,n,s):n==="array-contains"?new j6(e,s):n==="in"?new I6(e,s):n==="not-in"?new k6(e,s):n==="array-contains-any"?new D6(e,s):new Ht(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new C6(e,s):new R6(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Tl(n,this.value)):n!==null&&sa(this.value)===sa(n)&&this.matchesComparison(Tl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hr extends x_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Hr(e,n)}matches(e){return w_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function w_(t){return t.op==="and"}function b_(t){return N6(t)&&w_(t)}function N6(t){for(const e of t.filters)if(e instanceof Hr)return!1;return!0}function wg(t){if(t instanceof Ht)return t.field.canonicalString()+t.op.toString()+Al(t.value);if(b_(t))return t.filters.map((e=>wg(e))).join(",");{const e=t.filters.map((n=>wg(n))).join(",");return`${t.op}(${e})`}}function __(t,e){return t instanceof Ht?(function(s,o){return o instanceof Ht&&s.op===o.op&&s.field.isEqual(o.field)&&bs(s.value,o.value)})(t,e):t instanceof Hr?(function(s,o){return o instanceof Hr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,d,p)=>l&&__(d,o.filters[p])),!0):!1})(t,e):void Ie(19439)}function E_(t){return t instanceof Ht?(function(n){return`${n.field.canonicalString()} ${n.op} ${Al(n.value)}`})(t):t instanceof Hr?(function(n){return n.op.toString()+" {"+n.getFilters().map(E_).join(" ,")+"}"})(t):"Filter"}class S6 extends Ht{constructor(e,n,s){super(e,n,s),this.key=Te.fromName(s.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class C6 extends Ht{constructor(e,n){super(e,"in",n),this.keys=T_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class R6 extends Ht{constructor(e,n){super(e,"not-in",n),this.keys=T_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function T_(t,e){return(e.arrayValue?.values||[]).map((n=>Te.fromName(n.referenceValue)))}class j6 extends Ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return u0(n)&&fu(n.arrayValue,this.value)}}class I6 extends Ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fu(this.value.arrayValue,n)}}class k6 extends Ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fu(this.value.arrayValue,n)}}class D6 extends Ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!u0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>fu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,n=null,s=[],o=[],l=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=d,this.endAt=p,this.Te=null}}function Cb(t,e=null,n=[],s=[],o=null,l=null,d=null){return new O6(t,e,n,s,o,l,d)}function d0(t){const e=Me(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>wg(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),ff(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Al(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Al(s))).join(",")),e.Te=n}return e.Te}function h0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!A6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!__(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sb(t.startAt,e.startAt)&&Sb(t.endAt,e.endAt)}function bg(t){return Te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n=null,s=[],o=[],l=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function P6(t,e,n,s,o,l,d,p){return new Ll(t,e,n,s,o,l,d,p)}function f0(t){return new Ll(t)}function Rb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function A_(t){return t.collectionGroup!==null}function su(t){const e=Me(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Wt(fn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new mu(l,s))})),n.has(fn.keyField().canonicalString())||e.Ie.push(new mu(fn.keyField(),s))}return e.Ie}function ys(t){const e=Me(t);return e.Ee||(e.Ee=M6(e,su(t))),e.Ee}function M6(t,e){if(t.limitType==="F")return Cb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new mu(o.field,l)}));const n=t.endAt?new Dh(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Dh(t.startAt.position,t.startAt.inclusive):null;return Cb(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function _g(t,e){const n=t.filters.concat([e]);return new Ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Oh(t,e,n){return new Ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pf(t,e){return h0(ys(t),ys(e))&&t.limitType===e.limitType}function N_(t){return`${d0(ys(t))}|lt:${t.limitType}`}function dl(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>E_(o))).join(", ")}]`),ff(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Al(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Al(o))).join(",")),`Target(${s})`})(ys(t))}; limitType=${t.limitType})`}function gf(t,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Te.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(t,e)&&(function(s,o){for(const l of su(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(t,e)&&(function(s,o){return!(s.startAt&&!(function(d,p,g){const y=Nb(d,p,g);return d.inclusive?y<=0:y<0})(s.startAt,su(s),o)||s.endAt&&!(function(d,p,g){const y=Nb(d,p,g);return d.inclusive?y>=0:y>0})(s.endAt,su(s),o))})(t,e)}function L6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function S_(t){return(e,n)=>{let s=!1;for(const o of su(t)){const l=V6(o,e,n);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function V6(t,e,n){const s=t.field.isKeyField()?Te.comparator(e.key,n.key):(function(l,d,p){const g=d.data.field(l),y=p.data.field(l);return g!==null&&y!==null?Tl(g,y):Ie(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ca(this.inner,((n,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return u_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=new Ct(Te.comparator);function oi(){return U6}const C_=new Ct(Te.comparator);function Zc(...t){let e=C_;for(const n of t)e=e.insert(n.key,n);return e}function R_(t){let e=C_;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Wa(){return iu()}function j_(){return iu()}function iu(){return new ho((t=>t.toString()),((t,e)=>t.isEqual(e)))}const B6=new Ct(Te.comparator),z6=new Wt(Te.comparator);function Ke(...t){let e=z6;for(const n of t)e=e.add(n);return e}const F6=new Wt(Ge);function q6(){return F6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(e)?"-0":e}}function I_(t){return{integerValue:""+t}}function H6(t,e){return y6(e)?I_(e):m0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this._=void 0}}function $6(t,e,n){return t instanceof Ph?(function(o,l){const d={fields:{[f_]:{stringValue:h_},[p_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&c0(l)&&(l=mf(l)),l&&(d.fields[m_]=l),{mapValue:d}})(n,e):t instanceof Nl?D_(t,e):t instanceof Sl?O_(t,e):(function(o,l){const d=k_(o,l),p=jb(d)+jb(o.Ae);return xg(d)&&xg(o.Ae)?I_(p):m0(o.serializer,p)})(t,e)}function G6(t,e,n){return t instanceof Nl?D_(t,e):t instanceof Sl?O_(t,e):n}function k_(t,e){return t instanceof Mh?(function(s){return xg(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Ph extends yf{}class Nl extends yf{constructor(e){super(),this.elements=e}}function D_(t,e){const n=P_(e);for(const s of t.elements)n.some((o=>bs(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Sl extends yf{constructor(e){super(),this.elements=e}}function O_(t,e){let n=P_(e);for(const s of t.elements)n=n.filter((o=>!bs(o,s)));return{arrayValue:{values:n}}}class Mh extends yf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function jb(t){return Mt(t.integerValue||t.doubleValue)}function P_(t){return u0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n){this.field=e,this.transform=n}}function K6(t,e){return t.field.isEqual(e.field)&&(function(s,o){return s instanceof Nl&&o instanceof Nl||s instanceof Sl&&o instanceof Sl?El(s.elements,o.elements,bs):s instanceof Mh&&o instanceof Mh?bs(s.Ae,o.Ae):s instanceof Ph&&o instanceof Ph})(t.transform,e.transform)}class Y6{constructor(e,n){this.version=e,this.transformResults=n}}class xr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vf{}function L_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new p0(t.key,xr.none()):new Nu(t.key,t.data,xr.none());{const n=t.data,s=Fn.empty();let o=new Wt(fn.comparator);for(let l of e.fields)if(!o.has(l)){let d=n.field(l);d===null&&l.length>1&&(l=l.popLast(),d=n.field(l)),d===null?s.delete(l):s.set(l,d),o=o.add(l)}return new ua(t.key,s,new Jn(o.toArray()),xr.none())}}function Q6(t,e,n){t instanceof Nu?(function(o,l,d){const p=o.value.clone(),g=kb(o.fieldTransforms,l,d.transformResults);p.setAll(g),l.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(t,e,n):t instanceof ua?(function(o,l,d){if(!yh(o.precondition,l))return void l.convertToUnknownDocument(d.version);const p=kb(o.fieldTransforms,l,d.transformResults),g=l.data;g.setAll(V_(o)),g.setAll(p),l.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(t,e,n):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function au(t,e,n,s){return t instanceof Nu?(function(l,d,p,g){if(!yh(l.precondition,d))return p;const y=l.value.clone(),x=Db(l.fieldTransforms,g,d);return y.setAll(x),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(t,e,n,s):t instanceof ua?(function(l,d,p,g){if(!yh(l.precondition,d))return p;const y=Db(l.fieldTransforms,g,d),x=d.data;return x.setAll(V_(l)),x.setAll(y),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(t,e,n,s):(function(l,d,p){return yh(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(t,e,n)}function X6(t,e){let n=null;for(const s of t.fieldTransforms){const o=e.data.field(s.field),l=k_(s.transform,o||null);l!=null&&(n===null&&(n=Fn.empty()),n.set(s.field,l))}return n||null}function Ib(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&El(s,o,((l,d)=>K6(l,d)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nu extends vf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ua extends vf{constructor(e,n,s,o,l=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function V_(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function kb(t,e,n){const s=new Map;nt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let o=0;o<n.length;o++){const l=t[o],d=l.transform,p=e.data.field(l.field);s.set(l.field,G6(d,p,n[o]))}return s}function Db(t,e,n){const s=new Map;for(const o of t){const l=o.transform,d=n.data.field(o.field);s.set(o.field,$6(l,d,e))}return s}class p0 extends vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class W6 extends vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Q6(l,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=au(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=au(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=j_();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let p=this.applyToLocalView(d,l.mutatedFields);p=n.has(o.key)?null:p;const g=L_(d,p);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Oe.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,((n,s)=>Ib(n,s)))&&El(this.baseMutations,e.baseMutations,((n,s)=>Ib(n,s)))}}class g0{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){nt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return B6})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,s[d].version);return new g0(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Xe;function tI(t){switch(t){case se.OK:return Ie(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ie(15467,{code:t})}}function U_(t){if(t===void 0)return ai("GRPC error has no .code"),se.UNKNOWN;switch(t){case Ft.OK:return se.OK;case Ft.CANCELLED:return se.CANCELLED;case Ft.UNKNOWN:return se.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return se.INTERNAL;case Ft.UNAVAILABLE:return se.UNAVAILABLE;case Ft.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Ft.NOT_FOUND:return se.NOT_FOUND;case Ft.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Ft.ABORTED:return se.ABORTED;case Ft.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Ft.DATA_LOSS:return se.DATA_LOSS;default:return Ie(39323,{code:t})}}(Xe=Ft||(Ft={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new Wi([4294967295,4294967295],0);function Ob(t){const e=nI().encode(t),n=new J1;return n.update(e),new Uint8Array(n.digest())}function Pb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Wi([n,s],0),new Wi([o,l],0)]}class y0{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Jc(`Invalid padding: ${n}`);if(s<0)throw new Jc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Jc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Jc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Wi.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Wi.fromNumber(s)));return o.compare(rI)===1&&(o=new Wi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ob(e),[s,o]=Pb(n);for(let l=0;l<this.hashCount;l++){const d=this.ye(s,o,l);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new y0(l,o,n);return s.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=Ob(e),[s,o]=Pb(n);for(let l=0;l<this.hashCount;l++){const d=this.ye(s,o,l);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Jc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n,s,o,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new xf(Oe.min(),o,new Ct(Ge),oi(),Ke())}}class Su{constructor(e,n,s,o,l){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Su(s,n,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class B_{constructor(e,n){this.targetId=e,this.Ce=n}}class z_{constructor(e,n,s=mn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Mb{constructor(){this.ve=0,this.Fe=Lb(),this.Me=mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),n=Ke(),s=Ke();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ie(38017,{changeType:l})}})),new Su(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Lb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sI{constructor(e){this.Ge=e,this.ze=new Map,this.je=oi(),this.Je=nh(),this.He=nh(),this.Ye=new Ct(Ge)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const l=o.target;if(bg(l))if(s===0){const d=new Te(l.path);this.et(n,d,wn.newNoDocument(d,Oe.min()))}else nt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=n;let d,p;try{d=ra(s).toUint8Array()}catch(g){if(g instanceof d_)return _l("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new y0(d,o,l)}catch(g){return _l(g instanceof Jc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((l=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.et(n,l,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((l,d)=>{const p=this.ot(d);if(p){if(l.current&&bg(p.target)){const g=new Te(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,wn.newNoDocument(g,e))}l.Be&&(n.set(d,l.ke()),l.qe())}}));let s=Ke();this.He.forEach(((l,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const o=new xf(e,n,this.Ye,this.je,s);return this.je=oi(),this.Je=nh(),this.He=nh(),this.Ye=new Ct(Ge),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Mb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Wt(Ge),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Wt(Ge),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||xe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Mb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function nh(){return new Ct(Te.comparator)}function Lb(){return new Ct(Te.comparator)}const iI={asc:"ASCENDING",desc:"DESCENDING"},aI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oI={and:"AND",or:"OR"};class lI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Eg(t,e){return t.useProto3Json||ff(e)?e:{value:e}}function Lh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function cI(t,e){return Lh(t,e.toTimestamp())}function vs(t){return nt(!!t,49232),Oe.fromTimestamp((function(n){const s=na(n);return new bt(s.seconds,s.nanos)})(t))}function v0(t,e){return Tg(t,e).canonicalString()}function Tg(t,e){const n=(function(o){return new yt(["projects",o.projectId,"databases",o.database])})(t).child("documents");return e===void 0?n:n.child(e)}function q_(t){const e=yt.fromString(t);return nt(Y_(e),10190,{key:e.toString()}),e}function Ag(t,e){return v0(t.databaseId,e.path)}function Yp(t,e){const n=q_(e);if(n.get(1)!==t.databaseId.projectId)throw new ve(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ve(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Te($_(n))}function H_(t,e){return v0(t.databaseId,e)}function uI(t){const e=q_(t);return e.length===4?yt.emptyPath():$_(e)}function Ng(t){return new yt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $_(t){return nt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Vb(t,e,n){return{name:Ag(t,e),fields:n.value.mapValue.fields}}function dI(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ie(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,x){return y.useProto3Json?(nt(x===void 0||typeof x=="string",58123),mn.fromBase64String(x||"")):(nt(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),mn.fromUint8Array(x||new Uint8Array))})(t,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const x=y.code===void 0?se.UNKNOWN:U_(y.code);return new ve(x,y.message||"")})(d);n=new z_(s,o,l,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Yp(t,s.document.name),l=vs(s.document.updateTime),d=s.document.createTime?vs(s.document.createTime):Oe.min(),p=new Fn({mapValue:{fields:s.document.fields}}),g=wn.newFoundDocument(o,l,d,p),y=s.targetIds||[],x=s.removedTargetIds||[];n=new vh(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Yp(t,s.document),l=s.readTime?vs(s.readTime):Oe.min(),d=wn.newNoDocument(o,l),p=s.removedTargetIds||[];n=new vh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Yp(t,s.document),l=s.removedTargetIds||[];n=new vh([],l,o,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,d=new eI(o,l),p=s.targetId;n=new B_(p,d)}}return n}function hI(t,e){let n;if(e instanceof Nu)n={update:Vb(t,e.key,e.value)};else if(e instanceof p0)n={delete:Ag(t,e.key)};else if(e instanceof ua)n={update:Vb(t,e.key,e.data),updateMask:bI(e.fieldMask)};else{if(!(e instanceof W6))return Ie(16599,{Vt:e.type});n={verify:Ag(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(l,d){const p=d.transform;if(p instanceof Ph)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Nl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Sl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Mh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Ie(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:cI(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie(27497)})(t,e.precondition)),n}function fI(t,e){return t&&t.length>0?(nt(e!==void 0,14353),t.map((n=>(function(o,l){let d=o.updateTime?vs(o.updateTime):vs(l);return d.isEqual(Oe.min())&&(d=vs(l)),new Y6(d,o.transformResults||[])})(n,e)))):[]}function mI(t,e){return{documents:[H_(t,e.path)]}}function pI(t,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=H_(t,o);const l=(function(y){if(y.length!==0)return K_(Hr.create(y,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const d=(function(y){if(y.length!==0)return y.map((x=>(function(T){return{field:hl(T.field),direction:vI(T.dir)}})(x)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Eg(t,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function gI(t){let e=uI(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){nt(s===1,65062);const x=n.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let l=[];n.where&&(l=(function(_){const T=G_(_);return T instanceof Hr&&b_(T)?T.getFilters():[T]})(n.where));let d=[];n.orderBy&&(d=(function(_){return _.map((T=>(function(V){return new mu(fl(V.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(T)))})(n.orderBy));let p=null;n.limit&&(p=(function(_){let T;return T=typeof _=="object"?_.value:_,ff(T)?null:T})(n.limit));let g=null;n.startAt&&(g=(function(_){const T=!!_.before,I=_.values||[];return new Dh(I,T)})(n.startAt));let y=null;return n.endAt&&(y=(function(_){const T=!_.before,I=_.values||[];return new Dh(I,T)})(n.endAt)),P6(e,o,d,l,p,"F",g,y)}function yI(t,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function G_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=fl(n.unaryFilter.field);return Ht.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=fl(n.unaryFilter.field);return Ht.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=fl(n.unaryFilter.field);return Ht.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=fl(n.unaryFilter.field);return Ht.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ht.create(fl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Hr.create(n.compositeFilter.filters.map((s=>G_(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(n.compositeFilter.op))})(t):Ie(30097,{filter:t})}function vI(t){return iI[t]}function xI(t){return aI[t]}function wI(t){return oI[t]}function hl(t){return{fieldPath:t.canonicalString()}}function fl(t){return fn.fromServerFormat(t.fieldPath)}function K_(t){return t instanceof Ht?(function(n){if(n.op==="=="){if(Ab(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NAN"}};if(Tb(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ab(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NAN"}};if(Tb(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(n.field),op:xI(n.op),value:n.value}}})(t):t instanceof Hr?(function(n){const s=n.getFilters().map((o=>K_(o)));return s.length===1?s[0]:{compositeFilter:{op:wI(n.op),filters:s}}})(t):Ie(54877,{filter:t})}function bI(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Y_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,s,o,l=Oe.min(),d=Oe.min(),p=mn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.yt=e}}function EI(t){const e=gI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Oh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.Cn=new AI}addToCollectionParentIndex(e,n){return this.Cn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(ta.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(ta.min())}updateCollectionGroup(e,n,s){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class AI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Wt(yt.comparator),l=!o.has(s);return this.index[n]=o.add(s),l}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Wt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Q_=41943040;class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(Q_,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Cl(0)}static cr(){return new Cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="LruGarbageCollector",NI=1048576;function zb([t,e],[n,s]){const o=Ge(t,n);return o===0?Ge(e,s):o}class SI{constructor(e){this.Ir=e,this.buffer=new Wt(zb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();zb(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class CI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){xe(Bb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ml(n)?xe(Bb,"Ignoring IndexedDB error during garbage collection: ",n):await Pl(n)}await this.Vr(3e5)}))}}class RI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(hf.ce);const s=new SI(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Ub)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ub):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,l,d,p,g,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),o=this.params.maximumSequenceNumbersToCollect):o=_,d=Date.now(),this.nthSequenceNumber(e,o)))).next((_=>(s=_,p=Date.now(),this.removeTargets(e,s,n)))).next((_=>(l=_,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(y=Date.now(),ul()<=$e.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${l} targets in `+(g-p)+`ms
	Removed ${_} documents in `+(y-g)+`ms
Total Duration: ${y-x}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:_}))))}}function jI(t,e){return new RI(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.changes=new ho((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?le.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&au(s.mutation,o,Jn.empty(),bt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ke()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ke()){const o=Wa();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((l=>{let d=Zc();return l.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Wa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ke())))}populateOverlays(e,n,s){const o=[];return s.forEach((l=>{n.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,s,o){let l=oi();const d=iu(),p=(function(){return iu()})();return n.forEach(((g,y)=>{const x=s.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof ua)?l=l.insert(y.key,y):x!==void 0?(d.set(y.key,x.mutation.getFieldMask()),au(x.mutation,y,x.mutation.getFieldMask(),bt.now())):d.set(y.key,Jn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,x)=>d.set(y,x))),n.forEach(((y,x)=>p.set(y,new kI(x,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const s=iu();let o=new Ct(((d,p)=>d-p)),l=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let x=s.get(g)||Jn.empty();x=p.applyToLocalView(y,x),s.set(g,x);const _=(o.get(p.batchId)||Ke()).add(g);o=o.insert(p.batchId,_)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,x=g.value,_=j_();x.forEach((T=>{if(!l.has(T)){const I=L_(n.get(T),s.get(T));I!==null&&_.set(T,I),l=l.add(T)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,_))}return le.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return Te.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):A_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-l.size):le.resolve(Wa());let p=uu,g=l;return d.next((y=>le.forEach(y,((x,_)=>(p<_.largestBatchId&&(p=_.largestBatchId),l.get(x)?le.resolve():this.remoteDocumentCache.getEntry(e,x).next((T=>{g=g.insert(x,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Ke()))).next((x=>({batchId:p,changes:R_(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((s=>{let o=Zc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const l=n.collectionGroup;let d=Zc();return this.indexManager.getCollectionParents(e,l).next((p=>le.forEach(p,(g=>{const y=(function(_,T){return new Ll(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((x=>{x.forEach(((_,T)=>{d=d.insert(_,T)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,l,o)))).next((d=>{l.forEach(((g,y)=>{const x=y.getKey();d.get(x)===null&&(d=d.insert(x,wn.newInvalidDocument(x)))}));let p=Zc();return d.forEach(((g,y)=>{const x=l.get(g);x!==void 0&&au(x.mutation,y,Jn.empty(),bt.now()),gf(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return le.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:vs(o.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:EI(o.bundledQuery),readTime:vs(o.readTime)}})(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.overlays=new Ct(Te.comparator),this.qr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Wa();return le.forEach(n,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,l)=>{this.St(e,n,l)})),le.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),le.resolve()}getOverlaysForCollection(e,n,s){const o=Wa(),l=n.length+1,d=new Te(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return le.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let l=new Ct(((y,x)=>y-x));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let x=l.get(y.largestBatchId);x===null&&(x=Wa(),l=l.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const p=Wa(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,x)=>p.set(y,x))),!(p.size()>=o)););return le.resolve(p)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new J6(n,s));let l=this.qr.get(n);l===void 0&&(l=Ke(),this.qr.set(n,l)),this.qr.set(n,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.Qr=new Wt(rn.$r),this.Ur=new Wt(rn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new rn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new rn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Te(new yt([])),s=new rn(n,e),o=new rn(n,e+1),l=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),l.push(d.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new yt([])),s=new rn(n,e),o=new rn(n,e+1);let l=Ke();return this.Ur.forEachInRange([s,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const n=new rn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class rn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||Ge(e.Yr,n.Yr)}static Kr(e,n){return Ge(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Wt(rn.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Z6(l,n,s,o);this.mutationQueue.push(d);for(const p of o)this.Zr=this.Zr.add(new rn(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,n){return le.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),l=o<0?0:o;return le.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?l0:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new rn(n,0),o=new rn(n,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(d=>{const p=this.Xr(d.Yr);l.push(p)})),le.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Wt(Ge);return n.forEach((o=>{const l=new rn(o,0),d=new rn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,d],(p=>{s=s.add(p.Yr)}))})),le.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let l=s;Te.isDocumentKey(l)||(l=l.child(""));const d=new rn(new Te(l),0);let p=new Wt(Ge);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Yr)),!0)}),d),le.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){nt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return le.forEach(n.mutations,(o=>{const l=new rn(o.key,n.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new rn(n,0),o=this.Zr.firstAfterOrEqual(s);return le.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.ri=e,this.docs=(function(){return new Ct(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),l=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return le.resolve(s?s.document.mutableCopy():wn.newInvalidDocument(n))}getEntries(e,n){let s=oi();return n.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():wn.newInvalidDocument(o))})),le.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let l=oi();const d=n.path,p=new Te(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||f6(h6(x),s)<=0||(o.has(x.key)||gf(n,x))&&(l=l.insert(x.key,x.mutableCopy()))}return le.resolve(l)}getAllFromCollectionGroup(e,n,s,o){Ie(9500)}ii(e,n){return le.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new UI(this)}getSize(e){return le.resolve(this.size)}}class UI extends II{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),le.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.persistence=e,this.si=new ho((n=>d0(n)),h0),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new x0,this.targetCount=0,this.ai=Cl.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),le.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Cl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.Pr(n),le.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,s){let o=0;const l=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(d),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),le.waitFor(l).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return le.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),le.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,l=[];return o&&n.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),le.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return le.resolve(s)}containsKey(e,n){return le.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n){this.ui={},this.overlays={},this.ci=new hf(0),this.li=!1,this.li=!0,this.hi=new MI,this.referenceDelegate=e(this),this.Pi=new BI(this),this.indexManager=new TI,this.remoteDocumentCache=(function(o){return new VI(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new _I(n),this.Ii=new OI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new LI(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){xe("MemoryPersistence","Starting transaction:",e);const o=new zI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,n){return le.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class zI extends p6{constructor(e){super(),this.currentSequenceNumber=e}}class w0{constructor(e){this.persistence=e,this.Ri=new x0,this.Vi=null}static mi(e){return new w0(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),le.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(s=>{const o=Te.fromPath(s);return this.gi(e,o).next((l=>{l||n.removeEntry(o,Oe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return le.or([()=>le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Vh{constructor(e,n){this.persistence=e,this.pi=new ho((s=>v6(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=jI(this,n)}static mi(e,n){return new Vh(e,n)}Ei(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return le.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?le.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((p=>{p||(s++,l.removeEntry(d,Oe.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),le.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ph(e.data.value)),n}br(e,n,s){return le.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return le.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Ke(),o=Ke();for(const l of n.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new b0(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return mC()?8:g6(_n())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const l={result:null};return this.ys(e,n).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ws(e,n,o,s).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new FI;return this.Ss(e,n,d).next((p=>{if(l.result=p,this.Vs)return this.bs(e,n,d,p.size)}))})).next((()=>l.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(ul()<=$e.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",dl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(ul()<=$e.DEBUG&&xe("QueryEngine","Query:",dl(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ul()<=$e.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",dl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(n))):le.resolve())}ys(e,n){if(Rb(n))return le.resolve(null);let s=ys(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Oh(n,null,"F"),s=ys(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const d=Ke(...l);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,d,g.readTime)?this.ys(e,Oh(n,null,"F")):this.vs(e,y,n,g)}))))})))))}ws(e,n,s,o){return Rb(n)||o.isEqual(Oe.min())?le.resolve(null):this.ps.getDocuments(e,s).next((l=>{const d=this.Ds(n,l);return this.Cs(n,d,s,o)?le.resolve(null):(ul()<=$e.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),dl(n)),this.vs(e,d,n,d6(o,uu)).next((p=>p)))}))}Ds(e,n){let s=new Wt(S_(e));return n.forEach(((o,l)=>{gf(e,l)&&(s=s.add(l))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,n,s){return ul()<=$e.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",dl(n)),this.ps.getDocumentsMatchingQuery(e,n,ta.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(n.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="LocalStore",HI=3e8;class $I{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Ct(Ge),this.xs=new ho((l=>d0(l)),h0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function GI(t,e,n,s){return new $I(t,e,n,s)}async function W_(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((l=>{const d=[],p=[];let g=Ke();for(const y of o){d.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of l){p.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function KI(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,x){const _=y.batch,T=_.keys();let I=le.resolve();return T.forEach((V=>{I=I.next((()=>x.getEntry(g,V))).next((U=>{const j=y.docVersions.get(V);nt(j!==null,48541),U.version.compareTo(j)<0&&(_.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),x.addEntry(U)))}))})),I.next((()=>p.mutationQueue.removeMutationBatch(g,_)))})(n,s,e,l).next((()=>l.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=Ke();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Z_(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function YI(t,e){const n=Me(t),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((x,_)=>{const T=o.get(_);if(!T)return;p.push(n.Pi.removeMatchingKeys(l,x.removedDocuments,_).next((()=>n.Pi.addMatchingKeys(l,x.addedDocuments,_))));let I=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(mn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):x.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(x.resumeToken,s)),o=o.insert(_,I),(function(U,j,q){return U.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=HI?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(T,I,x)&&p.push(n.Pi.updateTargetData(l,I))}));let g=oi(),y=Ke();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(l,x))})),p.push(QI(l,d,e.documentUpdates).next((x=>{g=x.ks,y=x.qs}))),!s.isEqual(Oe.min())){const x=n.Pi.getLastRemoteSnapshotVersion(l).next((_=>n.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));p.push(x)}return le.waitFor(p).next((()=>d.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(n.Ms=o,l)))}function QI(t,e,n){let s=Ke(),o=Ke();return n.forEach((l=>s=s.add(l))),e.getEntries(t,s).next((l=>{let d=oi();return n.forEach(((p,g)=>{const y=l.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):xe(_0,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function XI(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=l0),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function WI(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((l=>l?(o=l,le.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new Gi(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Sg(t,e,n){const s=Me(t),o=s.Ms.get(e),l=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",l,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ml(d))throw d;xe(_0,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Fb(t,e,n){const s=Me(t);let o=Oe.min(),l=Ke();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,x){const _=Me(g),T=_.xs.get(x);return T!==void 0?le.resolve(_.Ms.get(T)):_.Pi.getTargetData(y,x)})(s,d,ys(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:Oe.min(),n?l:Ke()))).next((p=>(ZI(s,L6(e),p),{documents:p,Qs:l})))))}function ZI(t,e,n){let s=t.Os.get(e)||Oe.min();n.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),t.Os.set(e,s)}class qb{constructor(){this.activeTargetIds=q6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JI{constructor(){this.Mo=new qb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qb,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="ConnectivityMonitor";class $b{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xe(Hb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xe(Hb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh=null;function Cg(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="RestConnection",t3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class n3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Ih?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,l){const d=Cg(),p=this.zo(e,n.toUriEncodedString());xe(Qp,`Sending RPC '${e}' ${d}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(p),x=lo(y);return this.Jo(e,p,g,s,x).then((_=>(xe(Qp,`Received RPC '${e}' ${d}: `,_),_)),(_=>{throw _l(Qp,`RPC '${e}' ${d} failed with error: `,_,"url: ",p,"request:",s),_}))}Ho(e,n,s,o,l,d){return this.Go(e,n,s,o,l)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,n){const s=t3[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class s3 extends n3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,l){const d=Cg();return new Promise(((p,g)=>{const y=new e_;y.setWithCredentials(!0),y.listenOnce(t_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case mh.NO_ERROR:const _=y.getResponseJson();xe(vn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(_)),p(_);break;case mh.TIMEOUT:xe(vn,`RPC '${e}' ${d} timed out`),g(new ve(se.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const T=y.getStatus();if(xe(vn,`RPC '${e}' ${d} failed with status:`,T,"response text:",y.getResponseText()),T>0){let I=y.getResponseJson();Array.isArray(I)&&(I=I[0]);const V=I?.error;if(V&&V.status&&V.message){const U=(function(q){const z=q.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(z)>=0?z:se.UNKNOWN})(V.status);g(new ve(U,V.message))}else g(new ve(se.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ve(se.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{xe(vn,`RPC '${e}' ${d} completed.`)}}));const x=JSON.stringify(o);xe(vn,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",x,s,15)}))}T_(e,n,s){const o=Cg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=s_(),p=r_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const x=l.join("");xe(vn,`Creating RPC '${e}' stream ${o}: ${x}`,g);const _=d.createWebChannel(x,g);this.I_(_);let T=!1,I=!1;const V=new r3({Yo:j=>{I?xe(vn,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(T||(xe(vn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),T=!0),xe(vn,`RPC '${e}' stream ${o} sending:`,j),_.send(j))},Zo:()=>_.close()}),U=(j,q,z)=>{j.listen(q,(F=>{try{z(F)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return U(_,Wc.EventType.OPEN,(()=>{I||(xe(vn,`RPC '${e}' stream ${o} transport opened.`),V.o_())})),U(_,Wc.EventType.CLOSE,(()=>{I||(I=!0,xe(vn,`RPC '${e}' stream ${o} transport closed`),V.a_(),this.E_(_))})),U(_,Wc.EventType.ERROR,(j=>{I||(I=!0,_l(vn,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),V.a_(new ve(se.UNAVAILABLE,"The operation could not be completed")))})),U(_,Wc.EventType.MESSAGE,(j=>{if(!I){const q=j.data[0];nt(!!q,16349);const z=q,F=z?.error||z[0]?.error;if(F){xe(vn,`RPC '${e}' stream ${o} received error:`,F);const ie=F.status;let ee=(function(A){const S=Ft[A];if(S!==void 0)return U_(S)})(ie),de=F.message;ee===void 0&&(ee=se.INTERNAL,de="Unknown error status: "+ie+" with message "+F.message),I=!0,V.a_(new ve(ee,de)),_.close()}else xe(vn,`RPC '${e}' stream ${o} received:`,q),V.u_(q)}})),U(p,n_.STAT_EVENT,(j=>{j.stat===gg.PROXY?xe(vn,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===gg.NOPROXY&&xe(vn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Xp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(t){return new lI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="PersistentStream";class eE{constructor(e,n,s,o,l,d,p,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new J_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(ai(n.toString()),ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new ve(se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(Gb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(xe(Gb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class i3 extends eE{constructor(e,n,s,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=dI(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Oe.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Oe.min():d.readTime?vs(d.readTime):Oe.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Ng(this.serializer),n.addTarget=(function(l,d){let p;const g=d.target;if(p=bg(g)?{documents:mI(l,g)}:{query:pI(l,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=F_(l,d.resumeToken);const y=Eg(l,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Oe.min())>0){p.readTime=Lh(l,d.snapshotVersion.toTimestamp());const y=Eg(l,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const s=yI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Ng(this.serializer),n.removeTarget=e,this.q_(n)}}class a3 extends eE{constructor(e,n,s,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=fI(e.writeResults,e.commitTime),s=vs(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Ng(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>hI(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{}class l3 extends o3{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ve(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Go(e,Tg(n,s),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ve(se.UNKNOWN,l.toString())}))}Ho(e,n,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,Tg(n,s),o,d,p,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ve(se.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class c3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ai(n),this.aa=!1):xe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="RemoteStore";class u3{constructor(e,n,s,o,l){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{fo(this)&&(xe(io,"Restarting streams for network reachability change."),await(async function(g){const y=Me(g);y.Ea.add(4),await Cu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await bf(y)})(this))}))})),this.Ra=new c3(s,o)}}async function bf(t){if(fo(t))for(const e of t.da)await e(!0)}async function Cu(t){for(const e of t.da)await e(!1)}function tE(t,e){const n=Me(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),N0(n)?A0(n):Vl(n).O_()&&T0(n,e))}function E0(t,e){const n=Me(t),s=Vl(n);n.Ia.delete(e),s.O_()&&nE(n,e),n.Ia.size===0&&(s.O_()?s.L_():fo(n)&&n.Ra.set("Unknown"))}function T0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vl(t).Y_(e)}function nE(t,e){t.Va.Ue(e),Vl(t).Z_(e)}function A0(t){t.Va=new sI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Vl(t).start(),t.Ra.ua()}function N0(t){return fo(t)&&!Vl(t).x_()&&t.Ia.size>0}function fo(t){return Me(t).Ea.size===0}function rE(t){t.Va=void 0}async function d3(t){t.Ra.set("Online")}async function h3(t){t.Ia.forEach(((e,n)=>{T0(t,e)}))}async function f3(t,e){rE(t),N0(t)?(t.Ra.ha(e),A0(t)):t.Ra.set("Unknown")}async function m3(t,e,n){if(t.Ra.set("Online"),e instanceof z_&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const p of l.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.Va.removeTarget(p))})(t,e)}catch(s){xe(io,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Uh(t,s)}else if(e instanceof vh?t.Va.Ze(e):e instanceof B_?t.Va.st(e):t.Va.tt(e),!n.isEqual(Oe.min()))try{const s=await Z_(t.localStore);n.compareTo(s)>=0&&await(function(l,d){const p=l.Va.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=l.Ia.get(y);x&&l.Ia.set(y,x.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const x=l.Ia.get(g);if(!x)return;l.Ia.set(g,x.withResumeToken(mn.EMPTY_BYTE_STRING,x.snapshotVersion)),nE(l,g);const _=new Gi(x.target,g,y,x.sequenceNumber);T0(l,_)})),l.remoteSyncer.applyRemoteEvent(p)})(t,n)}catch(s){xe(io,"Failed to raise snapshot:",s),await Uh(t,s)}}async function Uh(t,e,n){if(!Ml(e))throw e;t.Ea.add(1),await Cu(t),t.Ra.set("Offline"),n||(n=()=>Z_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{xe(io,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await bf(t)}))}function sE(t,e){return e().catch((n=>Uh(t,n,e)))}async function _f(t){const e=Me(t),n=ia(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:l0;for(;p3(e);)try{const o=await XI(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,g3(e,o)}catch(o){await Uh(e,o)}iE(e)&&aE(e)}function p3(t){return fo(t)&&t.Ta.length<10}function g3(t,e){t.Ta.push(e);const n=ia(t);n.O_()&&n.X_&&n.ea(e.mutations)}function iE(t){return fo(t)&&!ia(t).x_()&&t.Ta.length>0}function aE(t){ia(t).start()}async function y3(t){ia(t).ra()}async function v3(t){const e=ia(t);for(const n of t.Ta)e.ea(n.mutations)}async function x3(t,e,n){const s=t.Ta.shift(),o=g0.from(s,e,n);await sE(t,(()=>t.remoteSyncer.applySuccessfulWrite(o))),await _f(t)}async function w3(t,e){e&&ia(t).X_&&await(async function(s,o){if((function(d){return tI(d)&&d!==se.ABORTED})(o.code)){const l=s.Ta.shift();ia(s).B_(),await sE(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await _f(s)}})(t,e),iE(t)&&aE(t)}async function Kb(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),xe(io,"RemoteStore received new credentials");const s=fo(n);n.Ea.add(3),await Cu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await bf(n)}async function b3(t,e){const n=Me(t);e?(n.Ea.delete(2),await bf(n)):e||(n.Ea.add(2),await Cu(n),n.Ra.set("Unknown"))}function Vl(t){return t.ma||(t.ma=(function(n,s,o){const l=Me(n);return l.sa(),new i3(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(t.datastore,t.asyncQueue,{Xo:d3.bind(null,t),t_:h3.bind(null,t),r_:f3.bind(null,t),H_:m3.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),N0(t)?A0(t):t.Ra.set("Unknown")):(await t.ma.stop(),rE(t))}))),t.ma}function ia(t){return t.fa||(t.fa=(function(n,s,o){const l=Me(n);return l.sa(),new a3(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:y3.bind(null,t),r_:w3.bind(null,t),ta:v3.bind(null,t),na:x3.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await _f(t)):(await t.fa.stop(),t.Ta.length>0&&(xe(io,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n,s,o,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,l){const d=Date.now()+s,p=new S0(e,n,d,o,l);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function C0(t,e){if(ai("AsyncQueue",`${e}: ${t}`),Ml(t))return new ve(se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{static emptySet(e){return new yl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Te.comparator(n.key,s.key):(n,s)=>Te.comparator(n.key,s.key),this.keyedMap=Zc(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new yl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.ga=new Ct(Te.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Rl{constructor(e,n,s,o,l,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,l){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Rl(e,n,yl.emptySet(n),d,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class E3{constructor(){this.queries=Qb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Me(n),l=o.queries;o.queries=Qb(),l.forEach(((d,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new ve(se.ABORTED,"Firestore shutting down"))}}function Qb(){return new ho((t=>N_(t)),pf)}async function oE(t,e){const n=Me(t);let s=3;const o=e.query;let l=n.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new _3,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await n.onListen(o,!0);break;case 1:l.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=C0(d,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,l),l.Sa.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&R0(n)}async function lE(t,e){const n=Me(t),s=e.query;let o=3;const l=n.queries.get(s);if(l){const d=l.Sa.indexOf(e);d>=0&&(l.Sa.splice(d,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function T3(t,e){const n=Me(t);let s=!1;for(const o of e){const l=o.query,d=n.queries.get(l);if(d){for(const p of d.Sa)p.Fa(o)&&(s=!0);d.wa=o}}s&&R0(n)}function A3(t,e,n){const s=Me(t),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(n);s.queries.delete(e)}function R0(t){t.Ca.forEach((e=>{e.next()}))}var Rg,Xb;(Xb=Rg||(Rg={})).Ma="default",Xb.Cache="cache";class cE{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Rl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e){this.key=e}}class dE{constructor(e){this.key=e}}class N3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=S_(e),this.tu=new yl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Yb,o=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,_)=>{const T=o.get(x),I=gf(this.query,_)?_:null,V=!!T&&this.mutatedKeys.has(T.key),U=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let j=!1;T&&I?T.data.isEqual(I.data)?V!==U&&(s.track({type:3,doc:I}),j=!0):this.su(T,I)||(s.track({type:2,doc:I}),j=!0,(g&&this.eu(I,g)>0||y&&this.eu(I,y)<0)&&(p=!0)):!T&&I?(s.track({type:0,doc:I}),j=!0):T&&!I&&(s.track({type:1,doc:T}),j=!0,(g||y)&&(p=!0)),j&&(I?(d=d.add(I),l=U?l.add(x):l.delete(x)):(d=d.delete(x),l=l.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),l=l.delete(x.key),s.track({type:1,doc:x})}return{tu:d,iu:s,Cs:p,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((x,_)=>(function(I,V){const U=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:j})}};return U(I)-U(V)})(x.type,_.type)||this.eu(x.doc,_.doc))),this.ou(s),o=o??!1;const p=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new Rl(this.query,e.tu,l,d,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Yb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ke(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new dE(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new uE(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const j0="SyncEngine";class S3{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class C3{constructor(e){this.key=e,this.hu=!1}}class R3{constructor(e,n,s,o,l,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ho((p=>N_(p)),pf),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(Te.comparator),this.Au=new Map,this.Ru=new x0,this.Vu={},this.mu=new Map,this.fu=Cl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function j3(t,e,n=!0){const s=yE(t);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await hE(s,e,n,!0),o}async function I3(t,e){const n=yE(t);await hE(n,e,!0,!1)}async function hE(t,e,n,s){const o=await WI(t.localStore,ys(e)),l=o.targetId,d=t.sharedClientState.addLocalQueryTarget(l,n);let p;return s&&(p=await k3(t,e,l,d==="current",o.resumeToken)),t.isPrimaryClient&&n&&tE(t.remoteStore,o),p}async function k3(t,e,n,s,o){t.pu=(_,T,I)=>(async function(U,j,q,z){let F=j.view.ru(q);F.Cs&&(F=await Fb(U.localStore,j.query,!1).then((({documents:k})=>j.view.ru(k,F))));const ie=z&&z.targetChanges.get(j.targetId),ee=z&&z.targetMismatches.get(j.targetId)!=null,de=j.view.applyChanges(F,U.isPrimaryClient,ie,ee);return Zb(U,j.targetId,de.au),de.snapshot})(t,_,T,I);const l=await Fb(t.localStore,e,!0),d=new N3(e,l.Qs),p=d.ru(l.documents),g=Su.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",o),y=d.applyChanges(p,t.isPrimaryClient,g);Zb(t,n,y.au);const x=new S3(e,n,d);return t.Tu.set(e,x),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),y.snapshot}async function D3(t,e,n){const s=Me(t),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((d=>!pf(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Sg(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&E0(s.remoteStore,o.targetId),jg(s,o.targetId)})).catch(Pl)):(jg(s,o.targetId),await Sg(s.localStore,o.targetId,!0))}async function O3(t,e){const n=Me(t),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),E0(n.remoteStore,s.targetId))}async function P3(t,e,n){const s=F3(t);try{const o=await(function(d,p){const g=Me(d),y=bt.now(),x=p.reduce(((I,V)=>I.add(V.key)),Ke());let _,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let V=oi(),U=Ke();return g.Ns.getEntries(I,x).next((j=>{V=j,V.forEach(((q,z)=>{z.isValidDocument()||(U=U.add(q))}))})).next((()=>g.localDocuments.getOverlayedDocuments(I,V))).next((j=>{_=j;const q=[];for(const z of p){const F=X6(z,_.get(z.key).overlayedDocument);F!=null&&q.push(new ua(z.key,F,v_(F.value.mapValue),xr.exists(!0)))}return g.mutationQueue.addMutationBatch(I,y,q,p)})).next((j=>{T=j;const q=j.applyToLocalDocumentSet(_,U);return g.documentOverlayCache.saveOverlays(I,j.batchId,q)}))})).then((()=>({batchId:T.batchId,changes:R_(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new Ct(Ge)),y=y.insert(p,g),d.Vu[d.currentUser.toKey()]=y})(s,o.batchId,n),await Ru(s,o.changes),await _f(s.remoteStore)}catch(o){const l=C0(o,"Failed to persist write");n.reject(l)}}async function fE(t,e){const n=Me(t);try{const s=await YI(n.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=n.Au.get(l);d&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?nt(d.hu,14607):o.removedDocuments.size>0&&(nt(d.hu,42227),d.hu=!1))})),await Ru(n,s,e)}catch(s){await Pl(s)}}function Wb(t,e,n){const s=Me(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((l,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=Me(d);g.onlineState=p;let y=!1;g.queries.forEach(((x,_)=>{for(const T of _.Sa)T.va(p)&&(y=!0)})),y&&R0(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function M3(t,e,n){const s=Me(t);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),l=o&&o.key;if(l){let d=new Ct(Te.comparator);d=d.insert(l,wn.newNoDocument(l,Oe.min()));const p=Ke().add(l),g=new xf(Oe.min(),new Map,new Ct(Ge),d,p);await fE(s,g),s.du=s.du.remove(l),s.Au.delete(e),I0(s)}else await Sg(s.localStore,e,!1).then((()=>jg(s,e,n))).catch(Pl)}async function L3(t,e){const n=Me(t),s=e.batch.batchId;try{const o=await KI(n.localStore,e);pE(n,s,null),mE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ru(n,o)}catch(o){await Pl(o)}}async function V3(t,e,n){const s=Me(t);try{const o=await(function(d,p){const g=Me(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return g.mutationQueue.lookupMutationBatch(y,p).next((_=>(nt(_!==null,37113),x=_.keys(),g.mutationQueue.removeMutationBatch(y,_)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>g.localDocuments.getDocuments(y,x)))}))})(s.localStore,e);pE(s,e,n),mE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ru(s,o)}catch(o){await Pl(o)}}function mE(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function pE(t,e,n){const s=Me(t);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(n?l.reject(n):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function jg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||gE(t,s)}))}function gE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(E0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),I0(t))}function Zb(t,e,n){for(const s of n)s instanceof uE?(t.Ru.addReference(s.key,e),U3(t,s)):s instanceof dE?(xe(j0,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||gE(t,s.key)):Ie(19791,{wu:s})}function U3(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(xe(j0,"New document in limbo: "+n),t.Eu.add(s),I0(t))}function I0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Te(yt.fromString(e)),s=t.fu.next();t.Au.set(s,new C3(n)),t.du=t.du.insert(n,s),tE(t.remoteStore,new Gi(ys(f0(n.path)),s,"TargetPurposeLimboResolution",hf.ce))}}async function Ru(t,e,n){const s=Me(t),o=[],l=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{d.push(s.pu(g,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const x=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(y){o.push(y);const x=b0.As(g.targetId,y);l.push(x)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(g,y){const x=Me(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>le.forEach(y,(T=>le.forEach(T.Es,(I=>x.persistence.referenceDelegate.addReference(_,T.targetId,I))).next((()=>le.forEach(T.ds,(I=>x.persistence.referenceDelegate.removeReference(_,T.targetId,I)))))))))}catch(_){if(!Ml(_))throw _;xe(_0,"Failed to update sequence numbers: "+_)}for(const _ of y){const T=_.targetId;if(!_.fromCache){const I=x.Ms.get(T),V=I.snapshotVersion,U=I.withLastLimboFreeSnapshotVersion(V);x.Ms=x.Ms.insert(T,U)}}})(s.localStore,l))}async function B3(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){xe(j0,"User change. New user:",e.toKey());const s=await W_(n.localStore,e);n.currentUser=e,(function(l,d){l.mu.forEach((p=>{p.forEach((g=>{g.reject(new ve(se.CANCELLED,d))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ru(n,s.Ls)}}function z3(t,e){const n=Me(t),s=n.Au.get(e);if(s&&s.hu)return Ke().add(s.key);{let o=Ke();const l=n.Iu.get(e);if(!l)return o;for(const d of l){const p=n.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function yE(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M3.bind(null,e),e.Pu.H_=T3.bind(null,e.eventManager),e.Pu.yu=A3.bind(null,e.eventManager),e}function F3(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V3.bind(null,e),e}class Bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return GI(this.persistence,new qI,e.initialUser,this.serializer)}Cu(e){return new X_(w0.mi,this.serializer)}Du(e){return new JI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bh.provider={build:()=>new Bh};class q3 extends Bh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){nt(this.persistence.referenceDelegate instanceof Vh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new CI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new X_((s=>Vh.mi(s,n)),this.serializer)}}class Ig{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Wb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=B3.bind(null,this.syncEngine),await b3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new E3})()}createDatastore(e){const n=wf(e.databaseInfo.databaseId),s=(function(l){return new s3(l)})(e.databaseInfo);return(function(l,d,p,g){return new l3(l,d,p,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,l,d,p){return new u3(s,o,l,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Wb(this.syncEngine,n,0)),(function(){return $b.v()?new $b:new e3})())}createSyncEngine(e,n){return(function(o,l,d,p,g,y,x){const _=new R3(o,l,d,p,g,y);return x&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Me(n);xe(io,"RemoteStore shutting down."),s.Ea.add(5),await Cu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ig.provider={build:()=>new Ig};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ai("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="FirestoreClient";class H3{constructor(e,n,s,o,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=xn.UNAUTHENTICATED,this.clientId=o0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async d=>{xe(aa,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(xe(aa,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=C0(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Wp(t,e){t.asyncQueue.verifyOperationInProgress(),xe(aa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async o=>{s.isEqual(o)||(await W_(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Jb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $3(t);xe(aa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>Kb(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,o)=>Kb(e.remoteStore,o))),t._onlineComponents=e}async function $3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){xe(aa,"Using user provided OfflineComponentProvider");try{await Wp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===se.FAILED_PRECONDITION||o.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;_l("Error using user provided cache. Falling back to memory cache: "+n),await Wp(t,new Bh)}}else xe(aa,"Using default OfflineComponentProvider"),await Wp(t,new q3(void 0));return t._offlineComponents}async function xE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(xe(aa,"Using user provided OnlineComponentProvider"),await Jb(t,t._uninitializedComponentsProvider._online)):(xe(aa,"Using default OnlineComponentProvider"),await Jb(t,new Ig))),t._onlineComponents}function G3(t){return xE(t).then((e=>e.syncEngine))}async function wE(t){const e=await xE(t),n=e.eventManager;return n.onListen=j3.bind(null,e.syncEngine),n.onUnlisten=D3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=I3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=O3.bind(null,e.syncEngine),n}function K3(t,e,n={}){const s=new ei;return t.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,g,y){const x=new vE({next:T=>{x.Nu(),d.enqueueAndForget((()=>lE(l,_)));const I=T.docs.has(p);!I&&T.fromCache?y.reject(new ve(se.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&T.fromCache&&g&&g.source==="server"?y.reject(new ve(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new cE(f0(p.path),x,{includeMetadataChanges:!0,qa:!0});return oE(l,_)})(await wE(t),t.asyncQueue,e,n,s))),s.promise}function Y3(t,e,n={}){const s=new ei;return t.asyncQueue.enqueueAndForget((async()=>(function(l,d,p,g,y){const x=new vE({next:T=>{x.Nu(),d.enqueueAndForget((()=>lE(l,_))),T.fromCache&&g.source==="server"?y.reject(new ve(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new cE(p,x,{includeMetadataChanges:!0,qa:!0});return oE(l,_)})(await wE(t),t.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="firestore.googleapis.com",t2=!0;class n2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_E,this.ssl=t2}else this.host=e.host,this.ssl=e.ssl??t2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Q_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NI)throw new ve(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}u6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ef{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new e6;switch(s.type){case"firstParty":return new s6(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ve(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=e2.get(n);s&&(xe("ComponentProvider","Removing Datastore"),e2.delete(n),s.terminate())})(this),Promise.resolve()}}function Q3(t,e,n,s={}){t=qr(t,Ef);const o=lo(e),l=t._getSettings(),d={...l,emulatorOptions:t._getEmulatorOptions()},p=`${e}:${n}`;o&&($g(`https://${p}`),Gg("Firestore",!0)),l.host!==_E&&l.host!==p&&_l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:p,ssl:o,emulatorOptions:s};if(!ri(g,d)&&(t._setSettings(g),s.mockUserToken)){let y,x;if(typeof s.mockUserToken=="string")y=s.mockUserToken,x=xn.MOCK_USER;else{y=u1(s.mockUserToken,t._app?.options.projectId);const _=s.mockUserToken.sub||s.mockUserToken.user_id;if(!_)throw new ve(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new xn(_)}t._authCredentials=new t6(new a_(y,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new da(this.firestore,e,this._query)}}class Lt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Au(n,Lt._jsonSchema))return new Lt(e,s||null,new Te(yt.fromString(n.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:$t("string",Lt._jsonSchemaVersion),referencePath:$t("string")};class Zi extends da{constructor(e,n,s){super(e,n,f0(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new Te(e))}withConverter(e){return new Zi(this.firestore,e,this._path)}}function Xt(t,e,...n){if(t=It(t),o_("collection","path",e),t instanceof Ef){const s=yt.fromString(e,...n);return pb(s),new Zi(t,null,s)}{if(!(t instanceof Lt||t instanceof Zi))throw new ve(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(yt.fromString(e,...n));return pb(s),new Zi(t.firestore,null,s)}}function dt(t,e,...n){if(t=It(t),arguments.length===1&&(e=o0.newId()),o_("doc","path",e),t instanceof Ef){const s=yt.fromString(e,...n);return mb(s),new Lt(t,null,new Te(s))}{if(!(t instanceof Lt||t instanceof Zi))throw new ve(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(yt.fromString(e,...n));return mb(s),new Lt(t.firestore,t instanceof Zi?t.converter:null,new Te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="AsyncQueue";class s2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new J_(this,"async_queue_retry"),this._c=()=>{const s=Xp();s&&xe(r2,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Xp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Xp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ei;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ml(e))throw e;xe(r2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ai("INTERNAL UNHANDLED ERROR: ",i2(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=S0.createAndSchedule(this,e,n,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ie(47125,{Pc:i2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function i2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class mo extends Ef{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new s2,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s2(e),this._firestoreClient=void 0,await e}}}function X3(t,e){const n=typeof t=="object"?t:Qg(),s=typeof t=="string"?t:Ih,o=of(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=o1("firestore");l&&Q3(o,...l)}return o}function k0(t){if(t._terminated)throw new ve(se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||W3(t),t._firestoreClient}function W3(t){const e=t._freezeSettings(),n=(function(o,l,d,p){return new b6(o,l,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,bE(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new H3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vr(mn.fromBase64String(e))}catch(n){throw new ve(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vr(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Au(e,vr._jsonSchema))return vr.fromBase64String(e.bytes)}}vr._jsonSchemaVersion="firestore/bytes/1.0",vr._jsonSchema={type:$t("string",vr._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xs._jsonSchemaVersion}}static fromJSON(e){if(Au(e,xs._jsonSchema))return new xs(e.latitude,e.longitude)}}xs._jsonSchemaVersion="firestore/geoPoint/1.0",xs._jsonSchema={type:$t("string",xs._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ws._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Au(e,ws._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ws(e.vectorValues);throw new ve(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ws._jsonSchemaVersion="firestore/vectorValue/1.0",ws._jsonSchema={type:$t("string",ws._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=/^__.*__$/;class J3{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ua(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nu(e,this.data,n,this.fieldTransforms)}}class EE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ua(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function TE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:t})}}class Af{constructor(e,n,s,o,l,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Af({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(TE(this.Ac)&&Z3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class e5{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||wf(e)}Cc(e,n,s,o=!1){return new Af({Ac:e,methodName:n,Dc:s,path:fn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nf(t){const e=t._freezeSettings(),n=wf(t._databaseId);return new e5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AE(t,e,n,s,o,l={}){const d=t.Cc(l.merge||l.mergeFields?2:0,e,n,o);P0("Data must be an object, but it was:",d,s);const p=SE(s,d);let g,y;if(l.merge)g=new Jn(d.fieldMask),y=d.fieldTransforms;else if(l.mergeFields){const x=[];for(const _ of l.mergeFields){const T=kg(e,_,n);if(!d.contains(T))throw new ve(se.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);RE(x,T)||x.push(T)}g=new Jn(x),y=d.fieldTransforms.filter((_=>g.covers(_.field)))}else g=null,y=d.fieldTransforms;return new J3(new Fn(p),g,y)}class Sf extends ju{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sf}}function NE(t,e,n){return new Af({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class D0 extends ju{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=NE(this,e,!0),s=this.vc.map((l=>po(l,n))),o=new Nl(s);return new M_(e.path,o)}isEqual(e){return e instanceof D0&&ri(this.vc,e.vc)}}class O0 extends ju{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=NE(this,e,!0),s=this.vc.map((l=>po(l,n))),o=new Sl(s);return new M_(e.path,o)}isEqual(e){return e instanceof O0&&ri(this.vc,e.vc)}}function t5(t,e,n,s){const o=t.Cc(1,e,n);P0("Data must be an object, but it was:",o,s);const l=[],d=Fn.empty();ca(s,((g,y)=>{const x=M0(e,g,n);y=It(y);const _=o.yc(x);if(y instanceof Sf)l.push(x);else{const T=po(y,_);T!=null&&(l.push(x),d.set(x,T))}}));const p=new Jn(l);return new EE(d,p,o.fieldTransforms)}function n5(t,e,n,s,o,l){const d=t.Cc(1,e,n),p=[kg(e,s,n)],g=[o];if(l.length%2!=0)throw new ve(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)p.push(kg(e,l[T])),g.push(l[T+1]);const y=[],x=Fn.empty();for(let T=p.length-1;T>=0;--T)if(!RE(y,p[T])){const I=p[T];let V=g[T];V=It(V);const U=d.yc(I);if(V instanceof Sf)y.push(I);else{const j=po(V,U);j!=null&&(y.push(I),x.set(I,j))}}const _=new Jn(y);return new EE(x,_,d.fieldTransforms)}function r5(t,e,n,s=!1){return po(n,t.Cc(s?4:3,e))}function po(t,e){if(CE(t=It(t)))return P0("Unsupported field value:",e,t),SE(t,e);if(t instanceof ju)return(function(s,o){if(!TE(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let d=0;for(const p of s){let g=po(p,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),d++}return{arrayValue:{values:l}}})(t,e)}return(function(s,o){if((s=It(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return H6(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=bt.fromDate(s);return{timestampValue:Lh(o.serializer,l)}}if(s instanceof bt){const l=new bt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Lh(o.serializer,l)}}if(s instanceof xs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof vr)return{bytesValue:F_(o.serializer,s._byteString)};if(s instanceof Lt){const l=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(l))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:v0(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ws)return(function(d,p){return{mapValue:{fields:{[g_]:{stringValue:y_},[kh]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return m0(p.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${df(s)}`)})(t,e)}function SE(t,e){const n={};return u_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ca(t,((s,o)=>{const l=po(o,e.mc(s));l!=null&&(n[s]=l)})),{mapValue:{fields:n}}}function CE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof xs||t instanceof vr||t instanceof Lt||t instanceof ju||t instanceof ws)}function P0(t,e,n){if(!CE(n)||!l_(n)){const s=df(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function kg(t,e,n){if((e=It(e))instanceof Tf)return e._internalPath;if(typeof e=="string")return M0(t,e);throw zh("Field path arguments must be of type string or ",t,!1,void 0,n)}const s5=new RegExp("[~\\*/\\[\\]]");function M0(t,e,n){if(e.search(s5)>=0)throw zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Tf(...e.split("."))._internalPath}catch{throw zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zh(t,e,n,s,o){const l=s&&!s.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(l||d)&&(g+=" (found",l&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new ve(se.INVALID_ARGUMENT,p+t+g)}function RE(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n,s,o,l){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class i5 extends jE{data(){return super.data()}}function Cf(t,e){return typeof e=="string"?M0(t,e):e instanceof Tf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ve(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class L0{}class V0 extends L0{}function li(t,e,...n){let s=[];e instanceof L0&&s.push(e),s=s.concat(n),(function(l){const d=l.filter((g=>g instanceof U0)).length,p=l.filter((g=>g instanceof Rf)).length;if(d>1||d>0&&p>0)throw new ve(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)t=o._apply(t);return t}class Rf extends V0{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Rf(e,n,s)}_apply(e){const n=this._parse(e);return IE(e._query,n),new da(e.firestore,e.converter,_g(e._query,n))}_parse(e){const n=Nf(e.firestore);return(function(l,d,p,g,y,x,_){let T;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new ve(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){o2(_,x);const V=[];for(const U of _)V.push(a2(g,l,U));T={arrayValue:{values:V}}}else T=a2(g,l,_)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||o2(_,x),T=r5(p,d,_,x==="in"||x==="not-in");return Ht.create(y,x,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function pu(t,e,n){const s=e,o=Cf("where",t);return Rf._create(o,s,n)}class U0 extends L0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new U0(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Hr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,l){let d=o;const p=l.getFlattenedFilters();for(const g of p)IE(d,g),d=_g(d,g)})(e._query,n),new da(e.firestore,e.converter,_g(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class B0 extends V0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new B0(e,n)}_apply(e){const n=(function(o,l,d){if(o.startAt!==null)throw new ve(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ve(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mu(l,d)})(e._query,this._field,this._direction);return new da(e.firestore,e.converter,(function(o,l){const d=o.explicitOrderBy.concat([l]);return new Ll(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Ul(t,e="asc"){const n=e,s=Cf("orderBy",t);return B0._create(s,n)}class z0 extends V0{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new z0(e,n,s)}_apply(e){return new da(e.firestore,e.converter,Oh(e._query,this._limit,this._limitType))}}function o5(t){return z0._create("limit",t,"F")}function a2(t,e,n){if(typeof(n=It(n))=="string"){if(n==="")throw new ve(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A_(e)&&n.indexOf("/")!==-1)throw new ve(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(yt.fromString(n));if(!Te.isDocumentKey(s))throw new ve(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Eb(t,new Te(s))}if(n instanceof Lt)return Eb(t,n._key);throw new ve(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${df(n)}.`)}function o2(t,e){if(!Array.isArray(t)||t.length===0)throw new ve(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IE(t,e){const n=(function(o,l){for(const d of o)for(const p of d.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(t.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ve(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class l5{convertValue(e,n="none"){switch(sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ra(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ca(e,((o,l)=>{s[o]=this.convertValue(l,n)})),s}convertVectorValue(e){const n=e.fields?.[kh].arrayValue?.values?.map((s=>Mt(s.doubleValue)));return new ws(n)}convertGeoPoint(e){return new xs(Mt(e.latitude),Mt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=mf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(du(e));default:return null}}convertTimestamp(e){const n=na(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=yt.fromString(e);nt(Y_(s),9688,{name:e});const o=new hu(s.get(1),s.get(3)),l=new Te(s.popFirst(5));return o.isEqual(n)||ai(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class eu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ja extends jE{constructor(e,n,s,o,l,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Cf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ja._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ja._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ja._jsonSchema={type:$t("string",Ja._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class xh extends Ja{data(e={}){return super.data(e)}}class vl{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new eu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new xh(this._firestore,this._userDataWriter,s.key,s,new eu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new xh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new eu(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const g=new xh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new eu(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),x=d.indexOf(p.doc.key)),{type:c5(p.type),doc:g,oldIndex:y,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=o0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function c5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t){t=qr(t,Lt);const e=qr(t.firestore,mo);return K3(k0(e),t._key).then((n=>u5(e,t,n)))}vl._jsonSchemaVersion="firestore/querySnapshot/1.0",vl._jsonSchema={type:$t("string",vl._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class DE extends l5{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}function bn(t){t=qr(t,da);const e=qr(t.firestore,mo),n=k0(e),s=new DE(e);return a5(t._query),Y3(n,t._query).then((o=>new vl(e,s,t,o)))}function oa(t,e,n){t=qr(t,Lt);const s=qr(t.firestore,mo),o=kE(t.converter,e,n);return If(s,[AE(Nf(s),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,xr.none())])}function ms(t,e,n,...s){t=qr(t,Lt);const o=qr(t.firestore,mo),l=Nf(o);let d;return d=typeof(e=It(e))=="string"||e instanceof Tf?n5(l,"updateDoc",t._key,e,n,s):t5(l,"updateDoc",t._key,e),If(o,[d.toMutation(t._key,xr.exists(!0))])}function F0(t){return If(qr(t.firestore,mo),[new p0(t._key,xr.none())])}function jf(t,e){const n=qr(t.firestore,mo),s=dt(t),o=kE(t.converter,e);return If(n,[AE(Nf(t.firestore),"addDoc",s._key,o,t.converter!==null,{}).toMutation(s._key,xr.exists(!1))]).then((()=>s))}function If(t,e){return(function(s,o){const l=new ei;return s.asyncQueue.enqueueAndForget((async()=>P3(await G3(s),o,l))),l.promise})(k0(t),e)}function u5(t,e,n){const s=n.docs.get(e._key),o=new DE(t);return new Ja(t,o,e._key,s,new eu(n.hasPendingWrites,n.fromCache),e.converter)}function l2(...t){return new D0("arrayUnion",t)}function c2(...t){return new O0("arrayRemove",t)}(function(e,n=!0){(function(o){Ol=o})(co),to(new ea("firestore",((s,{instanceIdentifier:o,options:l})=>{const d=s.getProvider("app").getImmediate(),p=new mo(new n6(s.getProvider("auth-internal")),new i6(d,s.getProvider("app-check-internal")),(function(y,x){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ve(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(y.options.projectId,x)})(d,o),d);return l={useFetchStreams:n,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),ps(ub,db,e),ps(ub,db,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="firebasestorage.googleapis.com",d5="storageBucket",h5=120*1e3,f5=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Ts{constructor(e,n,s=0){super(Zp(e),`Firebase Storage: ${n} (${Zp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ns.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _s;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_s||(_s={}));function Zp(t){return"storage/"+t}function m5(){const t="An unknown error occurred, please check the error payload for server response.";return new Ns(_s.UNKNOWN,t)}function p5(){return new Ns(_s.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function g5(){return new Ns(_s.CANCELED,"User canceled the upload/download.")}function y5(t){return new Ns(_s.INVALID_URL,"Invalid URL '"+t+"'.")}function v5(t){return new Ns(_s.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function u2(t){return new Ns(_s.INVALID_ARGUMENT,t)}function PE(){return new Ns(_s.APP_DELETED,"The Firebase app was deleted.")}function x5(t){return new Ns(_s.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Br.makeFromUrl(e,n)}catch{return new Br(e,"")}if(s.path==="")return s;throw v5(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function l(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(ie){ie.path_=decodeURIComponent(ie.path)}const x="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",I=new RegExp(`^https?://${_}/${x}/b/${o}/o${T}`,"i"),V={bucket:1,path:3},U=n===OE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",q=new RegExp(`^https?://${U}/${o}/${j}`,"i"),F=[{regex:p,indices:g,postModify:l},{regex:I,indices:V,postModify:y},{regex:q,indices:{bucket:1,path:2},postModify:y}];for(let ie=0;ie<F.length;ie++){const ee=F[ie],de=ee.regex.exec(e);if(de){const k=de[ee.indices.bucket];let A=de[ee.indices.path];A||(A=""),s=new Br(k,A),ee.postModify(s);break}}if(s==null)throw y5(e);return s}}class w5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(t,e,n){let s=1,o=null,l=null,d=!1,p=0;function g(){return p===2}let y=!1;function x(...j){y||(y=!0,e.apply(null,j))}function _(j){o=setTimeout(()=>{o=null,t(I,g())},j)}function T(){l&&clearTimeout(l)}function I(j,...q){if(y){T();return}if(j){T(),x.call(null,j,...q);return}if(g()||d){T(),x.call(null,j,...q);return}s<64&&(s*=2);let F;p===1?(p=2,F=0):F=(s+Math.random())*1e3,_(F)}let V=!1;function U(j){V||(V=!0,T(),!y&&(o!==null?(j||(p=2),clearTimeout(o),_(0)):j||(p=1)))}return _(0),l=setTimeout(()=>{d=!0,U(!0)},n),U}function _5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t){return t!==void 0}function d2(t,e,n,s){if(s<e)throw u2(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw u2(`Invalid value for '${t}'. Expected ${n} or less.`)}function T5(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const o=e(s)+"="+e(t[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Fh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fh||(Fh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(t,e){const n=t>=500&&t<600,o=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,n,s,o,l,d,p,g,y,x,_,T=!0,I=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=x,this.connectionFactory_=_,this.retry=T,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,U)=>{this.resolve_=V,this.reject_=U,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new sh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const p=l.getErrorCode()===Fh.NO_ERROR,g=l.getStatus();if(!p||A5(g,this.additionalRetryCodes_)&&this.retry){const x=l.getErrorCode()===Fh.ABORT;s(!1,new sh(!1,null,x));return}const y=this.successCodes_.indexOf(g)!==-1;s(!0,new sh(y,l))})},n=(s,o)=>{const l=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());E5(g)?l(g):l()}catch(g){d(g)}else if(p!==null){const g=m5();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(o.canceled){const g=this.appDelete_?PE():g5();d(g)}else{const g=p5();d(g)}};this.canceled_?n(!1,new sh(!1,null,!0)):this.backoffId_=b5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sh{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function S5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function C5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function R5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function j5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function I5(t,e,n,s,o,l,d=!0,p=!1){const g=T5(t.urlParams),y=t.url+g,x=Object.assign({},t.headers);return R5(x,e),S5(x,n),C5(x,l),j5(x,s),new N5(y,t.method,x,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o,d,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function D5(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this._service=e,n instanceof Br?this._location=n:this._location=Br.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new qh(e,n)}get root(){const e=new Br(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return D5(this._location.path)}get storage(){return this._service}get parent(){const e=k5(this._location.path);if(e===null)return null;const n=new Br(this._location.bucket,e);return new qh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw x5(e)}}function h2(t,e){const n=e?.[d5];return n==null?null:Br.makeFromBucketSpec(n,t)}function O5(t,e,n,s={}){t.host=`${e}:${n}`;const o=lo(e);o&&($g(`https://${t.host}/b`),Gg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=o?"https":"http";const{mockUserToken:l}=s;l&&(t._overrideAuthToken=typeof l=="string"?l:u1(l,t.app.options.projectId))}class P5{constructor(e,n,s,o,l,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=d,this._bucket=null,this._host=OE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=h5,this._maxUploadRetryTime=f5,this._requests=new Set,o!=null?this._bucket=Br.makeFromBucketSpec(o,this._host):this._bucket=h2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Br.makeFromBucketSpec(this._url,e):this._bucket=h2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){d2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){d2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qh(this,e)}_makeRequest(e,n,s,o,l=!0){if(this._deleted)return new w5(PE());{const d=I5(e,this._appId,s,o,n,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const f2="@firebase/storage",m2="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="storage";function M5(t=Qg(),e){t=It(t);const s=of(t,ME).getImmediate({identifier:e}),o=o1("storage");return o&&L5(s,...o),s}function L5(t,e,n,s={}){O5(t,e,n,s)}function V5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new P5(n,s,o,e,co)}function U5(){to(new ea(ME,V5,"PUBLIC").setMultipleInstances(!0)),ps(f2,m2,""),ps(f2,m2,"esm2020")}U5();const Dg={apiKey:"AIzaSyDzEL20_gjVbq1gmskOJ2H2mFUocpamJzU",authDomain:"psgshop-62518.firebaseapp.com",projectId:"psgshop-62518",storageBucket:"psgshop-62518.firebasestorage.app",messagingSenderId:"951270215395",appId:"1:951270215395:web:d6c1ec0787e43351c17fd6"};console.log("Firebase config values:",{apiKey:"***",authDomain:"psgshop-62518.firebaseapp.com",projectId:"psgshop-62518",storageBucket:"psgshop-62518.firebasestorage.app",messagingSenderId:"951270215395",appId:"1:951270215395:web:d6c1ec0787e43351c17fd6"});const LE=Object.values(Dg).every(t=>t&&t!=="");console.log("Is Firebase config valid:",LE);let ih,De,Fr,B5;if(LE)try{console.log("Initializing Firebase app..."),ih=f1(Dg),console.log("Firebase app initialized successfully"),console.log("Initializing Firestore..."),De=X3(ih),console.log("Firestore initialized successfully"),console.log("Initializing Auth..."),Fr=Xj(ih),VR(Fr,F1).then(()=>{console.log("Auth persistence set to browser local storage")}).catch(t=>{console.error("Error setting auth persistence:",t)}),console.log("Auth initialized successfully"),console.log("Initializing Storage..."),B5=M5(ih),console.log("Storage initialized successfully")}catch(t){console.error("Firebase initialization error:",t),console.error("Error code:",t.code),console.error("Error message:",t.message)}else{const t=Object.entries(Dg).filter(([e,n])=>!n||n==="").map(([e])=>e);console.warn("Firebase configuration is missing or incomplete. Missing keys:",t),console.warn("Please check your .env file and ensure all Firebase config variables are set.")}const VE=R.createContext(),z5=(t,e)=>{switch(e.type){case"SET_CART":return{...t,items:e.payload.items||[],coupon:e.payload.coupon||null};case"ADD_TO_CART":const n=t.items.find(g=>g.id===e.payload.id);if(n){const g=n.quantity+(e.payload.quantity||1),y=e.payload.stock!==void 0?e.payload.stock:1/0;return g>y?t:{...t,items:t.items.map(x=>x.id===e.payload.id?{...x,quantity:g}:x)}}const s=e.payload.quantity||1,o=e.payload.stock!==void 0?e.payload.stock:1/0;return s>o?t:{...t,items:[...t.items,{...e.payload,quantity:s}]};case"REMOVE_FROM_CART":return{...t,items:t.items.filter(g=>g.id!==e.payload)};case"UPDATE_QUANTITY":const l=t.items.find(g=>g.id===e.payload.id);if(!l)return t;const d=l.stock!==void 0?l.stock:1/0,p=Math.min(e.payload.quantity,d);return p<=0?{...t,items:t.items.filter(g=>g.id!==e.payload.id)}:{...t,items:t.items.map(g=>g.id===e.payload.id?{...g,quantity:p}:g)};case"CLEAR_CART":return{...t,items:[],coupon:null};case"APPLY_COUPON":return{...t,coupon:e.payload};case"REMOVE_COUPON":return{...t,coupon:null};default:return t}},F5=({children:t})=>{const[e,n]=R.useReducer(z5,{items:[],coupon:null}),[s,o]=R.useState(!0),{currentUser:l}=Yr(),d=R.useRef(!0);console.log("CartProvider initialized with currentUser:",l);const p=R.useCallback(async()=>{if(o(!0),!l){console.log("No user logged in, clearing cart"),n({type:"SET_CART",payload:{items:[],coupon:null}}),o(!1);return}try{console.log("Attempting to load cart from Firestore for user:",l.uid);const j=dt(De,"carts",l.uid),q=await $r(j);if(q.exists()){const z=q.data();console.log("Cart data loaded from Firestore:",z),n({type:"SET_CART",payload:{items:z.items||[],coupon:z.coupon||null}})}else console.log("No cart found for user, initializing empty cart"),n({type:"SET_CART",payload:{items:[],coupon:null}})}catch(j){console.error("Error loading cart from Firestore:",j),console.error("Error details:",j.code,j.message),n({type:"SET_CART",payload:{items:[],coupon:null}})}finally{o(!1)}},[l]);R.useEffect(()=>{console.log("CartProvider useEffect triggered with currentUser:",l),p()},[l,p]),R.useEffect(()=>{if(!l||s||d.current){d.current&&(console.log("Skipping save during initial cart load"),d.current=!1);return}const j=async()=>{console.log("Saving cart to Firestore:",{userId:l.uid,itemsCount:e.items.length,items:e.items,coupon:e.coupon});try{const z=dt(De,"carts",l.uid),F={userId:l.uid,items:e.items.map(ee=>({...ee,lastUpdated:Date.now()})),coupon:e.coupon,updatedAt:new Date().toISOString(),timestamp:Date.now()};await oa(z,F,{merge:!0}),console.log("Successfully saved cart to Firestore with data:",F),(await $r(z)).exists()?console.log("Verification: Cart successfully saved and can be read back"):console.error("Verification: Failed to verify cart save")}catch(z){console.error("Error saving cart to Firestore:",z),console.error("Error details:",z.code,z.message)}},q=setTimeout(()=>{j()},500);return()=>clearTimeout(q)},[e.items,e.coupon,l,s]);const g=j=>{console.log("Adding to cart:",j),n({type:"ADD_TO_CART",payload:j})},y=async j=>{if(console.log("Removing from cart:",j),n({type:"REMOVE_FROM_CART",payload:j}),l)try{const q=dt(De,"carts",l.uid)}catch(q){console.error("Error removing item from Firestore cart:",q)}},x=(j,q)=>{if(console.log("Updating quantity:",j,q),q<=0){y(j);return}n({type:"UPDATE_QUANTITY",payload:{id:j,quantity:q}})},_=async()=>{if(n({type:"CLEAR_CART"}),l)try{const j=dt(De,"carts",l.uid);await oa(j,{userId:l.uid,items:[],coupon:null,updatedAt:new Date})}catch(j){console.error("Error clearing cart in Firestore:",j)}},T=()=>e.items.reduce((j,q)=>j+q.quantity,0),I=()=>{const j=e.items.reduce((q,z)=>q+z.price*z.quantity,0);if(e.coupon){if(e.coupon.discountType==="percentage")return j*(1-e.coupon.discountValue/100);if(e.coupon.discountType==="fixed")return Math.max(0,j-e.coupon.discountValue)}return j},V=async j=>{try{const q=Xt(De,"coupons"),z=li(q,pu("code","==",j)),F=await bn(z);if(F.empty)throw new Error("Cupón no válido");const ie=F.docs[0],ee={id:ie.id,...ie.data()};if(!ee.isActive)throw new Error("Este cupón no está activo");const de=new Date;if(ee.expiryDate&&de>ee.expiryDate.toDate())throw new Error("Este cupón ha expirado");return n({type:"APPLY_COUPON",payload:ee}),ee}catch(q){throw console.error("Error applying coupon:",q),q}},U=()=>{n({type:"REMOVE_COUPON"})};return u.jsx(VE.Provider,{value:{items:e.items,coupon:e.coupon,loading:s,addToCart:g,removeFromCart:y,updateQuantity:x,clearCart:_,getTotalItems:T,getTotalPrice:I,applyCoupon:V,removeCoupon:U},children:t})},Bl=()=>{const t=R.useContext(VE);if(!t)throw new Error("useCart must be used within a CartProvider");return t},UE=R.createContext(),kf=()=>R.useContext(UE),q5=({children:t})=>{const[e,n]=R.useState([]),[s,o]=R.useState(!0),{currentUser:l}=Yr(),d=R.useRef(!0),p=R.useCallback(async()=>{if(o(!0),!l){n([]),o(!1),d.current=!1;return}try{const V=dt(De,"wishlists",l.uid),U=await $r(V);if(U.exists()){const j=U.data();n(j.items||[])}else n([])}catch(V){console.error("Error loading wishlist from Firestore:",V),n([])}finally{o(!1),d.current=!1}},[l]);R.useEffect(()=>{p()},[l,p]),R.useEffect(()=>{if(!l||s||d.current)return;const V=async()=>{try{const j=dt(De,"wishlists",l.uid),q={userId:l.uid,items:e.map(F=>({...F,lastUpdated:Date.now()})),updatedAt:new Date().toISOString(),timestamp:Date.now()};await oa(j,q,{merge:!0}),(await $r(j)).exists()||console.error("Verification: Failed to verify wishlist save")}catch(j){console.error("Error saving wishlist to Firestore:",j)}},U=setTimeout(()=>{V()},500);return()=>clearTimeout(U)},[e,l,s]);const g=V=>{n(U=>U.find(q=>q.id===V.id)?U:[...U,{...V}])},y=V=>{n(U=>U.filter(j=>j.id!==V))},x=V=>e.some(U=>U.id===V),_=async()=>{if(n([]),l)try{const V=dt(De,"wishlists",l.uid);await oa(V,{userId:l.uid,items:[],updatedAt:new Date})}catch(V){console.error("Error clearing wishlist in Firestore:",V)}},T=()=>e.length,I=()=>{p()};return u.jsx(UE.Provider,{value:{items:e,loading:s,addToWishlist:g,removeFromWishlist:y,isInWishlist:x,clearWishlist:_,getTotalItems:T,refreshWishlist:I},children:t})},H5=async()=>{try{const t=Xt(De,"products");return(await bn(t)).docs.map(s=>({id:s.id,...s.data()}))}catch(t){throw console.error("Error fetching products:",t),t}},$5=async t=>{try{const e=dt(De,"products",t),n=await $r(e);if(n.exists())return{id:n.id,...n.data()};throw new Error("Product not found")}catch(e){throw console.error("Error fetching product:",e),e}},Hh=({rating:t,size:e="md"})=>{const n=Math.max(0,Math.min(5,t||0)),s=Math.floor(n),o=n-s,l={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},d=l[e]||l.md,p=[];for(let y=0;y<s;y++)p.push(u.jsx("svg",{className:`${d} text-yellow-400`,fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},`full-${y}`));if(o>0){const y=o*100;p.push(u.jsxs("div",{className:"relative",children:[u.jsx("svg",{className:`${d} text-gray-300`,fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),u.jsx("div",{className:"absolute top-0 left-0 overflow-hidden",style:{width:`${y}%`},children:u.jsx("svg",{className:`${d} text-yellow-400`,fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})]},"fractional"))}const g=p.length;for(let y=g;y<5;y++)p.push(u.jsx("svg",{className:`${d} text-gray-300`,fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},`empty-${y}`));return u.jsxs("div",{className:"flex items-center",children:[p,u.jsx("span",{className:"ml-1 text-gray-600 text-sm",children:n.toFixed(1)})]})};/*!
* sweetalert2 v11.23.0
* Released under the MIT License.
*/function BE(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function G5(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p2(t,e){return t.get(BE(t,e))}function K5(t,e,n){G5(t,e),e.set(t,n)}function Y5(t,e,n){return t.set(BE(t,e),n),n}const Q5=100,Ne={},X5=()=>{Ne.previousActiveElement instanceof HTMLElement?(Ne.previousActiveElement.focus(),Ne.previousActiveElement=null):document.body&&document.body.focus()},W5=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,s=window.scrollY;Ne.restoreFocusTimeout=setTimeout(()=>{X5(),e()},Q5),window.scrollTo(n,s)}),zE="swal2-",Z5=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],J=Z5.reduce((t,e)=>(t[e]=zE+e,t),{}),J5=["success","warning","info","question","error"],$h=J5.reduce((t,e)=>(t[e]=zE+e,t),{}),FE="SweetAlert2:",q0=t=>t.charAt(0).toUpperCase()+t.slice(1),jn=t=>{console.warn(`${FE} ${typeof t=="object"?t.join(" "):t}`)},go=t=>{console.error(`${FE} ${t}`)},g2=[],ek=t=>{g2.includes(t)||(g2.push(t),jn(t))},qE=(t,e=null)=>{ek(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Df=t=>typeof t=="function"?t():t,H0=t=>t&&typeof t.toPromise=="function",Iu=t=>H0(t)?t.toPromise():Promise.resolve(t),$0=t=>t&&Promise.resolve(t)===t,In=()=>document.body.querySelector(`.${J.container}`),ku=t=>{const e=In();return e?e.querySelector(t):null},tr=t=>ku(`.${t}`),Je=()=>tr(J.popup),zl=()=>tr(J.icon),tk=()=>tr(J["icon-content"]),HE=()=>tr(J.title),G0=()=>tr(J["html-container"]),$E=()=>tr(J.image),K0=()=>tr(J["progress-steps"]),Of=()=>tr(J["validation-message"]),Es=()=>ku(`.${J.actions} .${J.confirm}`),Fl=()=>ku(`.${J.actions} .${J.cancel}`),yo=()=>ku(`.${J.actions} .${J.deny}`),nk=()=>tr(J["input-label"]),ql=()=>ku(`.${J.loader}`),Du=()=>tr(J.actions),GE=()=>tr(J.footer),Pf=()=>tr(J["timer-progress-bar"]),Y0=()=>tr(J.close),rk=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Q0=()=>{const t=Je();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((l,d)=>{const p=parseInt(l.getAttribute("tabindex")||"0"),g=parseInt(d.getAttribute("tabindex")||"0");return p>g?1:p<g?-1:0}),s=t.querySelectorAll(rk),o=Array.from(s).filter(l=>l.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(o))].filter(l=>Hn(l))},X0=()=>ti(document.body,J.shown)&&!ti(document.body,J["toast-shown"])&&!ti(document.body,J["no-backdrop"]),Mf=()=>{const t=Je();return t?ti(t,J.toast):!1},sk=()=>{const t=Je();return t?t.hasAttribute("data-loading"):!1},nr=(t,e)=>{if(t.textContent="",e){const s=new DOMParser().parseFromString(e,"text/html"),o=s.querySelector("head");o&&Array.from(o.childNodes).forEach(d=>{t.appendChild(d)});const l=s.querySelector("body");l&&Array.from(l.childNodes).forEach(d=>{d instanceof HTMLVideoElement||d instanceof HTMLAudioElement?t.appendChild(d.cloneNode(!0)):t.appendChild(d)})}},ti=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let s=0;s<n.length;s++)if(!t.classList.contains(n[s]))return!1;return!0},ik=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(J).includes(n)&&!Object.values($h).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},er=(t,e,n)=>{if(ik(t,e),!e.customClass)return;const s=e.customClass[n];if(s){if(typeof s!="string"&&!s.forEach){jn(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof s}"`);return}tt(t,s)}},Lf=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${J.popup} > .${J[e]}`);case"checkbox":return t.querySelector(`.${J.popup} > .${J.checkbox} input`);case"radio":return t.querySelector(`.${J.popup} > .${J.radio} input:checked`)||t.querySelector(`.${J.popup} > .${J.radio} input:first-child`);case"range":return t.querySelector(`.${J.popup} > .${J.range} input`);default:return t.querySelector(`.${J.popup} > .${J.input}`)}},KE=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},YE=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(s=>{Array.isArray(t)?t.forEach(o=>{n?o.classList.add(s):o.classList.remove(s)}):n?t.classList.add(s):t.classList.remove(s)}))},tt=(t,e)=>{YE(t,e,!0)},_r=(t,e)=>{YE(t,e,!1)},Ki=(t,e)=>{const n=Array.from(t.children);for(let s=0;s<n.length;s++){const o=n[s];if(o instanceof HTMLElement&&ti(o,e))return o}},eo=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},sn=(t,e="flex")=>{t&&(t.style.display=e)},En=t=>{t&&(t.style.display="none")},W0=(t,e="block")=>{t&&new MutationObserver(()=>{Ou(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},y2=(t,e,n,s)=>{const o=t.querySelector(e);o&&o.style.setProperty(n,s)},Ou=(t,e,n="flex")=>{e?sn(t,n):En(t)},Hn=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),ak=()=>!Hn(Es())&&!Hn(yo())&&!Hn(Fl()),Og=t=>t.scrollHeight>t.clientHeight,ok=(t,e)=>{let n=t;for(;n&&n!==e;){if(Og(n))return!0;n=n.parentElement}return!1},QE=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),s=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||s>0},Z0=(t,e=!1)=>{const n=Pf();n&&Hn(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},lk=()=>{const t=Pf();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),s=e/n*100;t.style.width=`${s}%`},ck=()=>typeof window>"u"||typeof document>"u",uk=`
 <div aria-labelledby="${J.title}" aria-describedby="${J["html-container"]}" class="${J.popup}" tabindex="-1">
   <button type="button" class="${J.close}"></button>
   <ul class="${J["progress-steps"]}"></ul>
   <div class="${J.icon}"></div>
   <img class="${J.image}" />
   <h2 class="${J.title}" id="${J.title}"></h2>
   <div class="${J["html-container"]}" id="${J["html-container"]}"></div>
   <input class="${J.input}" id="${J.input}" />
   <input type="file" class="${J.file}" />
   <div class="${J.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${J.select}" id="${J.select}"></select>
   <div class="${J.radio}"></div>
   <label class="${J.checkbox}">
     <input type="checkbox" id="${J.checkbox}" />
     <span class="${J.label}"></span>
   </label>
   <textarea class="${J.textarea}" id="${J.textarea}"></textarea>
   <div class="${J["validation-message"]}" id="${J["validation-message"]}"></div>
   <div class="${J.actions}">
     <div class="${J.loader}"></div>
     <button type="button" class="${J.confirm}"></button>
     <button type="button" class="${J.deny}"></button>
     <button type="button" class="${J.cancel}"></button>
   </div>
   <div class="${J.footer}"></div>
   <div class="${J["timer-progress-bar-container"]}">
     <div class="${J["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),dk=()=>{const t=In();return t?(t.remove(),_r([document.documentElement,document.body],[J["no-backdrop"],J["toast-shown"],J["has-column"]]),!0):!1},Ya=()=>{Ne.currentInstance.resetValidationMessage()},hk=()=>{const t=Je(),e=Ki(t,J.input),n=Ki(t,J.file),s=t.querySelector(`.${J.range} input`),o=t.querySelector(`.${J.range} output`),l=Ki(t,J.select),d=t.querySelector(`.${J.checkbox} input`),p=Ki(t,J.textarea);e.oninput=Ya,n.onchange=Ya,l.onchange=Ya,d.onchange=Ya,p.oninput=Ya,s.oninput=()=>{Ya(),o.value=s.value},s.onchange=()=>{Ya(),o.value=s.value}},fk=t=>typeof t=="string"?document.querySelector(t):t,mk=t=>{const e=Je();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},pk=t=>{window.getComputedStyle(t).direction==="rtl"&&tt(In(),J.rtl)},gk=t=>{const e=dk();if(ck()){go("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=J.container,e&&tt(n,J["no-transition"]),nr(n,uk),n.dataset.swal2Theme=t.theme;const s=fk(t.target);s.appendChild(n),t.topLayer&&(n.setAttribute("popover",""),n.showPopover()),mk(t),pk(s),hk()},J0=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?yk(t,e):t&&nr(e,t)},yk=(t,e)=>{t.jquery?vk(e,t):nr(e,t.toString())},vk=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},xk=(t,e)=>{const n=Du(),s=ql();!n||!s||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?En(n):sn(n),er(n,e,"actions"),wk(n,s,e),nr(s,e.loaderHtml||""),er(s,e,"loader"))};function wk(t,e,n){const s=Es(),o=yo(),l=Fl();!s||!o||!l||(eg(s,"confirm",n),eg(o,"deny",n),eg(l,"cancel",n),bk(s,o,l,n),n.reverseButtons&&(n.toast?(t.insertBefore(l,s),t.insertBefore(o,s)):(t.insertBefore(l,e),t.insertBefore(o,e),t.insertBefore(s,e))))}function bk(t,e,n,s){if(!s.buttonsStyling){_r([t,e,n],J.styled);return}tt([t,e,n],J.styled),s.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",s.confirmButtonColor),s.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",s.denyButtonColor),s.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",s.cancelButtonColor),Jp(t),Jp(e),Jp(n)}function Jp(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function eg(t,e,n){const s=q0(e);Ou(t,n[`show${s}Button`],"inline-block"),nr(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=J[e],er(t,n,`${e}Button`)}const _k=(t,e)=>{const n=Y0();n&&(nr(n,e.closeButtonHtml||""),er(n,e,"closeButton"),Ou(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},Ek=(t,e)=>{const n=In();n&&(Tk(n,e.backdrop),Ak(n,e.position),Nk(n,e.grow),er(n,e,"container"))};function Tk(t,e){typeof e=="string"?t.style.background=e:e||tt([document.documentElement,document.body],J["no-backdrop"])}function Ak(t,e){e&&(e in J?tt(t,J[e]):(jn('The "position" parameter is not valid, defaulting to "center"'),tt(t,J.center)))}function Nk(t,e){e&&tt(t,J[`grow-${e}`])}var vt={innerParams:new WeakMap,domCache:new WeakMap};const Sk=["input","file","range","select","radio","checkbox","textarea"],Ck=(t,e)=>{const n=Je();if(!n)return;const s=vt.innerParams.get(t),o=!s||e.input!==s.input;Sk.forEach(l=>{const d=Ki(n,J[l]);d&&(Ik(l,e.inputAttributes),d.className=J[l],o&&En(d))}),e.input&&(o&&Rk(e),kk(e))},Rk=t=>{if(!t.input)return;if(!Pt[t.input]){go(`Unexpected type of input! Expected ${Object.keys(Pt).join(" | ")}, got "${t.input}"`);return}const e=XE(t.input);if(!e)return;const n=Pt[t.input](e,t);sn(e),t.inputAutoFocus&&setTimeout(()=>{KE(n)})},jk=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},Ik=(t,e)=>{const n=Je();if(!n)return;const s=Lf(n,t);if(s){jk(s);for(const o in e)s.setAttribute(o,e[o])}},kk=t=>{if(!t.input)return;const e=XE(t.input);e&&er(e,t,"input")},ey=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},Pu=(t,e,n)=>{if(n.inputLabel){const s=document.createElement("label"),o=J["input-label"];s.setAttribute("for",t.id),s.className=o,typeof n.customClass=="object"&&tt(s,n.customClass.inputLabel),s.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",s)}},XE=t=>{const e=Je();if(e)return Ki(e,J[t]||J.input)},Gh=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:$0(e)||jn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Pt={};Pt.text=Pt.email=Pt.password=Pt.number=Pt.tel=Pt.url=Pt.search=Pt.date=Pt["datetime-local"]=Pt.time=Pt.week=Pt.month=(t,e)=>(Gh(t,e.inputValue),Pu(t,t,e),ey(t,e),t.type=e.input,t);Pt.file=(t,e)=>(Pu(t,t,e),ey(t,e),t);Pt.range=(t,e)=>{const n=t.querySelector("input"),s=t.querySelector("output");return Gh(n,e.inputValue),n.type=e.input,Gh(s,e.inputValue),Pu(n,t,e),t};Pt.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");nr(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return Pu(t,t,e),t};Pt.radio=t=>(t.textContent="",t);Pt.checkbox=(t,e)=>{const n=Lf(Je(),"checkbox");n.value="1",n.checked=!!e.inputValue;const s=t.querySelector("span");return nr(s,e.inputPlaceholder||e.inputLabel),n};Pt.textarea=(t,e)=>{Gh(t,e.inputValue),ey(t,e),Pu(t,t,e);const n=s=>parseInt(window.getComputedStyle(s).marginLeft)+parseInt(window.getComputedStyle(s).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const s=parseInt(window.getComputedStyle(Je()).width),o=()=>{if(!document.body.contains(t))return;const l=t.offsetWidth+n(t);l>s?Je().style.width=`${l}px`:eo(Je(),"width",e.width)};new MutationObserver(o).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const Dk=(t,e)=>{const n=G0();n&&(W0(n),er(n,e,"htmlContainer"),e.html?(J0(e.html,n),sn(n,"block")):e.text?(n.textContent=e.text,sn(n,"block")):En(n),Ck(t,e))},Ok=(t,e)=>{const n=GE();n&&(W0(n),Ou(n,e.footer,"block"),e.footer&&J0(e.footer,n),er(n,e,"footer"))},Pk=(t,e)=>{const n=vt.innerParams.get(t),s=zl();if(!s)return;if(n&&e.icon===n.icon){x2(s,e),v2(s,e);return}if(!e.icon&&!e.iconHtml){En(s);return}if(e.icon&&Object.keys($h).indexOf(e.icon)===-1){go(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),En(s);return}sn(s),x2(s,e),v2(s,e),tt(s,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",WE)},v2=(t,e)=>{for(const[n,s]of Object.entries($h))e.icon!==n&&_r(t,s);tt(t,e.icon&&$h[e.icon]),Vk(t,e),WE(),er(t,e,"icon")},WE=()=>{const t=Je();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let s=0;s<n.length;s++)n[s].style.backgroundColor=e},Mk=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,Lk=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,x2=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,s="";e.iconHtml?s=w2(e.iconHtml):e.icon==="success"?(s=Mk(e),n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?s=Lk:e.icon&&(s=w2({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==s.trim()&&nr(t,s)},Vk=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])y2(t,n,"background-color",e.iconColor);y2(t,".swal2-success-ring","border-color",e.iconColor)}},w2=t=>`<div class="${J["icon-content"]}">${t}</div>`,Uk=(t,e)=>{const n=$E();if(n){if(!e.imageUrl){En(n);return}sn(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),eo(n,"width",e.imageWidth),eo(n,"height",e.imageHeight),n.className=J.image,er(n,e,"image")}};let ty=!1,ZE=0,JE=0,eT=0,tT=0;const Bk=t=>{t.addEventListener("mousedown",Kh),document.body.addEventListener("mousemove",Yh),t.addEventListener("mouseup",Qh),t.addEventListener("touchstart",Kh),document.body.addEventListener("touchmove",Yh),t.addEventListener("touchend",Qh)},zk=t=>{t.removeEventListener("mousedown",Kh),document.body.removeEventListener("mousemove",Yh),t.removeEventListener("mouseup",Qh),t.removeEventListener("touchstart",Kh),document.body.removeEventListener("touchmove",Yh),t.removeEventListener("touchend",Qh)},Kh=t=>{const e=Je();if(t.target===e||zl().contains(t.target)){ty=!0;const n=nT(t);ZE=n.clientX,JE=n.clientY,eT=parseInt(e.style.insetInlineStart)||0,tT=parseInt(e.style.insetBlockStart)||0,tt(e,"swal2-dragging")}},Yh=t=>{const e=Je();if(ty){let{clientX:n,clientY:s}=nT(t);e.style.insetInlineStart=`${eT+(n-ZE)}px`,e.style.insetBlockStart=`${tT+(s-JE)}px`}},Qh=()=>{const t=Je();ty=!1,_r(t,"swal2-dragging")},nT=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},Fk=(t,e)=>{const n=In(),s=Je();if(!(!n||!s)){if(e.toast){eo(n,"width",e.width),s.style.width="100%";const o=ql();o&&s.insertBefore(o,zl())}else eo(s,"width",e.width);eo(s,"padding",e.padding),e.color&&(s.style.color=e.color),e.background&&(s.style.background=e.background),En(Of()),qk(s,e),e.draggable&&!e.toast?(tt(s,J.draggable),Bk(s)):(_r(s,J.draggable),zk(s))}},qk=(t,e)=>{const n=e.showClass||{};t.className=`${J.popup} ${Hn(t)?n.popup:""}`,e.toast?(tt([document.documentElement,document.body],J["toast-shown"]),tt(t,J.toast)):tt(t,J.modal),er(t,e,"popup"),typeof e.customClass=="string"&&tt(t,e.customClass),e.icon&&tt(t,J[`icon-${e.icon}`])},Hk=(t,e)=>{const n=K0();if(!n)return;const{progressSteps:s,currentProgressStep:o}=e;if(!s||s.length===0||o===void 0){En(n);return}sn(n),n.textContent="",o>=s.length&&jn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),s.forEach((l,d)=>{const p=$k(l);if(n.appendChild(p),d===o&&tt(p,J["active-progress-step"]),d!==s.length-1){const g=Gk(e);n.appendChild(g)}})},$k=t=>{const e=document.createElement("li");return tt(e,J["progress-step"]),nr(e,t),e},Gk=t=>{const e=document.createElement("li");return tt(e,J["progress-step-line"]),t.progressStepsDistance&&eo(e,"width",t.progressStepsDistance),e},Kk=(t,e)=>{const n=HE();n&&(W0(n),Ou(n,e.title||e.titleText,"block"),e.title&&J0(e.title,n),e.titleText&&(n.innerText=e.titleText),er(n,e,"title"))},rT=(t,e)=>{Fk(t,e),Ek(t,e),Hk(t,e),Pk(t,e),Uk(t,e),Kk(t,e),_k(t,e),Dk(t,e),xk(t,e),Ok(t,e);const n=Je();typeof e.didRender=="function"&&n&&e.didRender(n),Ne.eventEmitter.emit("didRender",n)},Yk=()=>Hn(Je()),sT=()=>{var t;return(t=Es())===null||t===void 0?void 0:t.click()},Qk=()=>{var t;return(t=yo())===null||t===void 0?void 0:t.click()},Xk=()=>{var t;return(t=Fl())===null||t===void 0?void 0:t.click()},Hl=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),iT=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},Wk=(t,e,n)=>{iT(t),e.toast||(t.keydownHandler=s=>Jk(e,s,n),t.keydownTarget=e.keydownListenerCapture?window:Je(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},Pg=(t,e)=>{var n;const s=Q0();if(s.length){t=t+e,t===-2&&(t=s.length-1),t===s.length?t=0:t===-1&&(t=s.length-1),s[t].focus();return}(n=Je())===null||n===void 0||n.focus()},aT=["ArrowRight","ArrowDown"],Zk=["ArrowLeft","ArrowUp"],Jk=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?eD(e,t):e.key==="Tab"?tD(e):[...aT,...Zk].includes(e.key)?nD(e.key):e.key==="Escape"&&rD(e,t,n)))},eD=(t,e)=>{if(!Df(e.allowEnterKey))return;const n=Lf(Je(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;sT(),t.preventDefault()}},tD=t=>{const e=t.target,n=Q0();let s=-1;for(let o=0;o<n.length;o++)if(e===n[o]){s=o;break}t.shiftKey?Pg(s,-1):Pg(s,1),t.stopPropagation(),t.preventDefault()},nD=t=>{const e=Du(),n=Es(),s=yo(),o=Fl();if(!e||!n||!s||!o)return;const l=[n,s,o];if(document.activeElement instanceof HTMLElement&&!l.includes(document.activeElement))return;const d=aT.includes(t)?"nextElementSibling":"previousElementSibling";let p=document.activeElement;if(p){for(let g=0;g<e.children.length;g++){if(p=p[d],!p)return;if(p instanceof HTMLButtonElement&&Hn(p))break}p instanceof HTMLButtonElement&&p.focus()}},rD=(t,e,n)=>{t.preventDefault(),Df(e.allowEscapeKey)&&n(Hl.esc)};var jl={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const sD=()=>{const t=In();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},oT=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},lT=typeof window<"u"&&!!window.GestureEvent,iD=()=>{if(lT&&!ti(document.body,J.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,tt(document.body,J.iosfix),aD()}},aD=()=>{const t=In();if(!t)return;let e;t.ontouchstart=n=>{e=oD(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},oD=t=>{const e=t.target,n=In(),s=G0();return!n||!s||lD(t)||cD(t)?!1:e===n||!Og(n)&&e instanceof HTMLElement&&!ok(e,s)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(Og(s)&&s.contains(e))},lD=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",cD=t=>t.touches&&t.touches.length>1,uD=()=>{if(ti(document.body,J.iosfix)){const t=parseInt(document.body.style.top,10);_r(document.body,J.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},dD=()=>{const t=document.createElement("div");t.className=J["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let xl=null;const hD=t=>{xl===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(xl=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${xl+dD()}px`)},fD=()=>{xl!==null&&(document.body.style.paddingRight=`${xl}px`,xl=null)};function cT(t,e,n,s){Mf()?b2(t,s):(W5(n).then(()=>b2(t,s)),iT(Ne)),lT?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),X0()&&(fD(),uD(),oT()),mD()}function mD(){_r([document.documentElement,document.body],[J.shown,J["height-auto"],J["no-backdrop"],J["toast-shown"]])}function Yi(t){t=gD(t);const e=jl.swalPromiseResolve.get(this),n=pD(this);this.isAwaitingPromise?t.isDismissed||(Mu(this),e(t)):n&&e(t)}const pD=t=>{const e=Je();if(!e)return!1;const n=vt.innerParams.get(t);if(!n||ti(e,n.hideClass.popup))return!1;_r(e,n.showClass.popup),tt(e,n.hideClass.popup);const s=In();return _r(s,n.showClass.backdrop),tt(s,n.hideClass.backdrop),yD(t,e,n),!0};function uT(t){const e=jl.swalPromiseReject.get(this);Mu(this),e&&e(t)}const Mu=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,vt.innerParams.get(t)||t._destroy())},gD=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),yD=(t,e,n)=>{var s;const o=In(),l=QE(e);typeof n.willClose=="function"&&n.willClose(e),(s=Ne.eventEmitter)===null||s===void 0||s.emit("willClose",e),l?vD(t,e,o,n.returnFocus,n.didClose):cT(t,o,n.returnFocus,n.didClose)},vD=(t,e,n,s,o)=>{Ne.swalCloseEventFinishedCallback=cT.bind(null,t,n,s,o);const l=function(d){if(d.target===e){var p;(p=Ne.swalCloseEventFinishedCallback)===null||p===void 0||p.call(Ne),delete Ne.swalCloseEventFinishedCallback,e.removeEventListener("animationend",l),e.removeEventListener("transitionend",l)}};e.addEventListener("animationend",l),e.addEventListener("transitionend",l)},b2=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=Ne.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},Il=t=>{let e=Je();if(e||new Ae,e=Je(),!e)return;const n=ql();Mf()?En(zl()):xD(e,t),sn(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},xD=(t,e)=>{const n=Du(),s=ql();!n||!s||(!e&&Hn(Es())&&(e=Es()),sn(n),e&&(En(e),s.setAttribute("data-button-to-replace",e.className),n.insertBefore(s,e)),tt([t,n],J.loading))},wD=(t,e)=>{e.input==="select"||e.input==="radio"?AD(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(H0(e.inputValue)||$0(e.inputValue))&&(Il(Es()),ND(t,e))},bD=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return _D(n);case"radio":return ED(n);case"file":return TD(n);default:return e.inputAutoTrim?n.value.trim():n.value}},_D=t=>t.checked?1:0,ED=t=>t.checked?t.value:null,TD=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,AD=(t,e)=>{const n=Je();if(!n)return;const s=o=>{e.input==="select"?SD(n,Xh(o),e):e.input==="radio"&&CD(n,Xh(o),e)};H0(e.inputOptions)||$0(e.inputOptions)?(Il(Es()),Iu(e.inputOptions).then(o=>{t.hideLoading(),s(o)})):typeof e.inputOptions=="object"?s(e.inputOptions):go(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},ND=(t,e)=>{const n=t.getInput();n&&(En(n),Iu(e.inputValue).then(s=>{n.value=e.input==="number"?`${parseFloat(s)||0}`:`${s}`,sn(n),n.focus(),t.hideLoading()}).catch(s=>{go(`Error in inputValue promise: ${s}`),n.value="",sn(n),n.focus(),t.hideLoading()}))};function SD(t,e,n){const s=Ki(t,J.select);if(!s)return;const o=(l,d,p)=>{const g=document.createElement("option");g.value=p,nr(g,d),g.selected=dT(p,n.inputValue),l.appendChild(g)};e.forEach(l=>{const d=l[0],p=l[1];if(Array.isArray(p)){const g=document.createElement("optgroup");g.label=d,g.disabled=!1,s.appendChild(g),p.forEach(y=>o(g,y[1],y[0]))}else o(s,p,d)}),s.focus()}function CD(t,e,n){const s=Ki(t,J.radio);if(!s)return;e.forEach(l=>{const d=l[0],p=l[1],g=document.createElement("input"),y=document.createElement("label");g.type="radio",g.name=J.radio,g.value=d,dT(d,n.inputValue)&&(g.checked=!0);const x=document.createElement("span");nr(x,p),x.className=J.label,y.appendChild(g),y.appendChild(x),s.appendChild(y)});const o=s.querySelectorAll("input");o.length&&o[0].focus()}const Xh=t=>{const e=[];return t instanceof Map?t.forEach((n,s)=>{let o=n;typeof o=="object"&&(o=Xh(o)),e.push([s,o])}):Object.keys(t).forEach(n=>{let s=t[n];typeof s=="object"&&(s=Xh(s)),e.push([n,s])}),e},dT=(t,e)=>!!e&&e.toString()===t.toString(),RD=t=>{const e=vt.innerParams.get(t);t.disableButtons(),e.input?hT(t,"confirm"):ry(t,!0)},jD=t=>{const e=vt.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?hT(t,"deny"):ny(t,!1)},ID=(t,e)=>{t.disableButtons(),e(Hl.cancel)},hT=(t,e)=>{const n=vt.innerParams.get(t);if(!n.input){go(`The "input" parameter is needed to be set when using returnInputValueOn${q0(e)}`);return}const s=t.getInput(),o=bD(t,n);n.inputValidator?kD(t,o,e):s&&!s.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||s.validationMessage)):e==="deny"?ny(t,o):ry(t,o)},kD=(t,e,n)=>{const s=vt.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Iu(s.inputValidator(e,s.validationMessage))).then(l=>{t.enableButtons(),t.enableInput(),l?t.showValidationMessage(l):n==="deny"?ny(t,e):ry(t,e)})},ny=(t,e)=>{const n=vt.innerParams.get(t||void 0);n.showLoaderOnDeny&&Il(yo()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Iu(n.preDeny(e,n.validationMessage))).then(o=>{o===!1?(t.hideLoading(),Mu(t)):t.close({isDenied:!0,value:typeof o>"u"?e:o})}).catch(o=>fT(t||void 0,o))):t.close({isDenied:!0,value:e})},_2=(t,e)=>{t.close({isConfirmed:!0,value:e})},fT=(t,e)=>{t.rejectPromise(e)},ry=(t,e)=>{const n=vt.innerParams.get(t||void 0);n.showLoaderOnConfirm&&Il(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Iu(n.preConfirm(e,n.validationMessage))).then(o=>{Hn(Of())||o===!1?(t.hideLoading(),Mu(t)):_2(t,typeof o>"u"?e:o)}).catch(o=>fT(t||void 0,o))):_2(t,e)};function Wh(){const t=vt.innerParams.get(this);if(!t)return;const e=vt.domCache.get(this);En(e.loader),Mf()?t.icon&&sn(zl()):DD(e),_r([e.popup,e.actions],J.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const DD=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?sn(e[0],"inline-block"):ak()&&En(t.actions)};function mT(){const t=vt.innerParams.get(this),e=vt.domCache.get(this);return e?Lf(e.popup,t.input):null}function pT(t,e,n){const s=vt.domCache.get(t);e.forEach(o=>{s[o].disabled=n})}function gT(t,e){const n=Je();if(!(!n||!t))if(t.type==="radio"){const s=n.querySelectorAll(`[name="${J.radio}"]`);for(let o=0;o<s.length;o++)s[o].disabled=e}else t.disabled=e}function yT(){pT(this,["confirmButton","denyButton","cancelButton"],!1)}function vT(){pT(this,["confirmButton","denyButton","cancelButton"],!0)}function xT(){gT(this.getInput(),!1)}function wT(){gT(this.getInput(),!0)}function bT(t){const e=vt.domCache.get(this),n=vt.innerParams.get(this);nr(e.validationMessage,t),e.validationMessage.className=J["validation-message"],n.customClass&&n.customClass.validationMessage&&tt(e.validationMessage,n.customClass.validationMessage),sn(e.validationMessage);const s=this.getInput();s&&(s.setAttribute("aria-invalid","true"),s.setAttribute("aria-describedby",J["validation-message"]),KE(s),tt(s,J.inputerror))}function _T(){const t=vt.domCache.get(this);t.validationMessage&&En(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),_r(e,J.inputerror))}const wl={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},OD=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],PD={allowEnterKey:void 0},MD=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],ET=t=>Object.prototype.hasOwnProperty.call(wl,t),TT=t=>OD.indexOf(t)!==-1,AT=t=>PD[t],LD=t=>{ET(t)||jn(`Unknown parameter "${t}"`)},VD=t=>{MD.includes(t)&&jn(`The parameter "${t}" is incompatible with toasts`)},UD=t=>{const e=AT(t);e&&qE(t,e)},NT=t=>{t.backdrop===!1&&t.allowOutsideClick&&jn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&jn(`Invalid theme "${t.theme}"`);for(const e in t)LD(e),t.toast&&VD(e),UD(e)};function ST(t){const e=In(),n=Je(),s=vt.innerParams.get(this);if(!n||ti(n,s.hideClass.popup)){jn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const o=BD(t),l=Object.assign({},s,o);NT(l),e.dataset.swal2Theme=l.theme,rT(this,l),vt.innerParams.set(this,l),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const BD=t=>{const e={};return Object.keys(t).forEach(n=>{TT(n)?e[n]=t[n]:jn(`Invalid parameter to update: ${n}`)}),e};function CT(){const t=vt.domCache.get(this),e=vt.innerParams.get(this);if(!e){RT(this);return}t.popup&&Ne.swalCloseEventFinishedCallback&&(Ne.swalCloseEventFinishedCallback(),delete Ne.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),Ne.eventEmitter.emit("didDestroy"),zD(this)}const zD=t=>{RT(t),delete t.params,delete Ne.keydownHandler,delete Ne.keydownTarget,delete Ne.currentInstance},RT=t=>{t.isAwaitingPromise?(tg(vt,t),t.isAwaitingPromise=!0):(tg(jl,t),tg(vt,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},tg=(t,e)=>{for(const n in t)t[n].delete(e)};var FD=Object.freeze({__proto__:null,_destroy:CT,close:Yi,closeModal:Yi,closePopup:Yi,closeToast:Yi,disableButtons:vT,disableInput:wT,disableLoading:Wh,enableButtons:yT,enableInput:xT,getInput:mT,handleAwaitingPromise:Mu,hideLoading:Wh,rejectPromise:uT,resetValidationMessage:_T,showValidationMessage:bT,update:ST});const qD=(t,e,n)=>{t.toast?HD(t,e,n):(GD(e),KD(e),YD(t,e,n))},HD=(t,e,n)=>{e.popup.onclick=()=>{t&&($D(t)||t.timer||t.input)||n(Hl.close)}},$D=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let Zh=!1;const GD=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(Zh=!0)}}},KD=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(Zh=!0)}}},YD=(t,e,n)=>{e.container.onclick=s=>{if(Zh){Zh=!1;return}s.target===e.container&&Df(t.allowOutsideClick)&&n(Hl.backdrop)}},QD=t=>typeof t=="object"&&t.jquery,E2=t=>t instanceof Element||QD(t),XD=t=>{const e={};return typeof t[0]=="object"&&!E2(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,s)=>{const o=t[s];typeof o=="string"||E2(o)?e[n]=o:o!==void 0&&go(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof o}`)}),e};function WD(...t){return new this(...t)}function ZD(t){class e extends this{_main(s,o){return super._main(s,Object.assign({},t,o))}}return e}const JD=()=>Ne.timeout&&Ne.timeout.getTimerLeft(),jT=()=>{if(Ne.timeout)return lk(),Ne.timeout.stop()},IT=()=>{if(Ne.timeout){const t=Ne.timeout.start();return Z0(t),t}},eO=()=>{const t=Ne.timeout;return t&&(t.running?jT():IT())},tO=t=>{if(Ne.timeout){const e=Ne.timeout.increase(t);return Z0(e,!0),e}},nO=()=>!!(Ne.timeout&&Ne.timeout.isRunning());let T2=!1;const Mg={};function rO(t="data-swal-template"){Mg[t]=this,T2||(document.body.addEventListener("click",sO),T2=!0)}const sO=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in Mg){const s=e.getAttribute(n);if(s){Mg[n].fire({template:s});return}}};class iO{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const s=this._getHandlersByEventName(e);s.includes(n)||s.push(n)}once(e,n){const s=(...o)=>{this.removeListener(e,s),n.apply(this,o)};this.on(e,s)}emit(e,...n){this._getHandlersByEventName(e).forEach(s=>{try{s.apply(this,n)}catch(o){console.error(o)}})}removeListener(e,n){const s=this._getHandlersByEventName(e),o=s.indexOf(n);o>-1&&s.splice(o,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}Ne.eventEmitter=new iO;const aO=(t,e)=>{Ne.eventEmitter.on(t,e)},oO=(t,e)=>{Ne.eventEmitter.once(t,e)},lO=(t,e)=>{if(!t){Ne.eventEmitter.reset();return}e?Ne.eventEmitter.removeListener(t,e):Ne.eventEmitter.removeAllListeners(t)};var cO=Object.freeze({__proto__:null,argsToParams:XD,bindClickHandler:rO,clickCancel:Xk,clickConfirm:sT,clickDeny:Qk,enableLoading:Il,fire:WD,getActions:Du,getCancelButton:Fl,getCloseButton:Y0,getConfirmButton:Es,getContainer:In,getDenyButton:yo,getFocusableElements:Q0,getFooter:GE,getHtmlContainer:G0,getIcon:zl,getIconContent:tk,getImage:$E,getInputLabel:nk,getLoader:ql,getPopup:Je,getProgressSteps:K0,getTimerLeft:JD,getTimerProgressBar:Pf,getTitle:HE,getValidationMessage:Of,increaseTimer:tO,isDeprecatedParameter:AT,isLoading:sk,isTimerRunning:nO,isUpdatableParameter:TT,isValidParameter:ET,isVisible:Yk,mixin:ZD,off:lO,on:aO,once:oO,resumeTimer:IT,showLoading:Il,stopTimer:jT,toggleTimer:eO});class uO{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const kT=["swal-title","swal-html","swal-footer"],dO=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return xO(n),Object.assign(hO(n),fO(n),mO(n),pO(n),gO(n),yO(n),vO(n,kT))},hO=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(s=>{ao(s,["name","value"]);const o=s.getAttribute("name"),l=s.getAttribute("value");!o||!l||(typeof wl[o]=="boolean"?e[o]=l!=="false":typeof wl[o]=="object"?e[o]=JSON.parse(l):e[o]=l)}),e},fO=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(s=>{const o=s.getAttribute("name"),l=s.getAttribute("value");!o||!l||(e[o]=new Function(`return ${l}`)())}),e},mO=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(s=>{ao(s,["type","color","aria-label"]);const o=s.getAttribute("type");!o||!["confirm","cancel","deny"].includes(o)||(e[`${o}ButtonText`]=s.innerHTML,e[`show${q0(o)}Button`]=!0,s.hasAttribute("color")&&(e[`${o}ButtonColor`]=s.getAttribute("color")),s.hasAttribute("aria-label")&&(e[`${o}ButtonAriaLabel`]=s.getAttribute("aria-label")))}),e},pO=t=>{const e={},n=t.querySelector("swal-image");return n&&(ao(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},gO=t=>{const e={},n=t.querySelector("swal-icon");return n&&(ao(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},yO=t=>{const e={},n=t.querySelector("swal-input");n&&(ao(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const s=Array.from(t.querySelectorAll("swal-input-option"));return s.length&&(e.inputOptions={},s.forEach(o=>{ao(o,["value"]);const l=o.getAttribute("value");if(!l)return;const d=o.innerHTML;e.inputOptions[l]=d})),e},vO=(t,e)=>{const n={};for(const s in e){const o=e[s],l=t.querySelector(o);l&&(ao(l,[]),n[o.replace(/^swal-/,"")]=l.innerHTML.trim())}return n},xO=t=>{const e=kT.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const s=n.tagName.toLowerCase();e.includes(s)||jn(`Unrecognized element <${s}>`)})},ao=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&jn([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},DT=10,wO=t=>{const e=In(),n=Je();typeof t.willOpen=="function"&&t.willOpen(n),Ne.eventEmitter.emit("willOpen",n);const o=window.getComputedStyle(document.body).overflowY;EO(e,n,t),setTimeout(()=>{bO(e,n)},DT),X0()&&(_O(e,t.scrollbarPadding,o),sD()),!Mf()&&!Ne.previousActiveElement&&(Ne.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),Ne.eventEmitter.emit("didOpen",n),_r(e,J["no-transition"])},Jh=t=>{const e=Je();if(t.target!==e)return;const n=In();e.removeEventListener("animationend",Jh),e.removeEventListener("transitionend",Jh),n.style.overflowY="auto"},bO=(t,e)=>{QE(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Jh),e.addEventListener("transitionend",Jh)):t.style.overflowY="auto"},_O=(t,e,n)=>{iD(),e&&n!=="hidden"&&hD(n),setTimeout(()=>{t.scrollTop=0})},EO=(t,e,n)=>{tt(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),sn(e,"grid"),setTimeout(()=>{tt(e,n.showClass.popup),e.style.removeProperty("opacity")},DT)):sn(e,"grid"),tt([document.documentElement,document.body],J.shown),n.heightAuto&&n.backdrop&&!n.toast&&tt([document.documentElement,document.body],J["height-auto"])};var A2={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function TO(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=A2.email),t.input==="url"&&(t.inputValidator=A2.url))}function AO(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(jn('Target parameter is not valid, defaulting to "body"'),t.target="body")}function NO(t){TO(t),t.showLoaderOnConfirm&&!t.preConfirm&&jn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),AO(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),gk(t)}let hs;var ah=new WeakMap;class Vt{constructor(...e){if(K5(this,ah,void 0),typeof window>"u")return;hs=this;const n=Object.freeze(this.constructor.argsToParams(e));this.params=n,this.isAwaitingPromise=!1,Y5(ah,this,this._main(hs.params))}_main(e,n={}){if(NT(Object.assign({},n,e)),Ne.currentInstance){const l=jl.swalPromiseResolve.get(Ne.currentInstance),{isAwaitingPromise:d}=Ne.currentInstance;Ne.currentInstance._destroy(),d||l({isDismissed:!0}),X0()&&oT()}Ne.currentInstance=hs;const s=CO(e,n);NO(s),Object.freeze(s),Ne.timeout&&(Ne.timeout.stop(),delete Ne.timeout),clearTimeout(Ne.restoreFocusTimeout);const o=RO(hs);return rT(hs,s),vt.innerParams.set(hs,s),SO(hs,o,s)}then(e){return p2(ah,this).then(e)}finally(e){return p2(ah,this).finally(e)}}const SO=(t,e,n)=>new Promise((s,o)=>{const l=d=>{t.close({isDismissed:!0,dismiss:d})};jl.swalPromiseResolve.set(t,s),jl.swalPromiseReject.set(t,o),e.confirmButton.onclick=()=>{RD(t)},e.denyButton.onclick=()=>{jD(t)},e.cancelButton.onclick=()=>{ID(t,l)},e.closeButton.onclick=()=>{l(Hl.close)},qD(n,e,l),Wk(Ne,n,l),wD(t,n),wO(n),jO(Ne,n,l),IO(e,n),setTimeout(()=>{e.container.scrollTop=0})}),CO=(t,e)=>{const n=dO(t),s=Object.assign({},wl,e,n,t);return s.showClass=Object.assign({},wl.showClass,s.showClass),s.hideClass=Object.assign({},wl.hideClass,s.hideClass),s.animation===!1&&(s.showClass={backdrop:"swal2-noanimation"},s.hideClass={}),s},RO=t=>{const e={popup:Je(),container:In(),actions:Du(),confirmButton:Es(),denyButton:yo(),cancelButton:Fl(),loader:ql(),closeButton:Y0(),validationMessage:Of(),progressSteps:K0()};return vt.domCache.set(t,e),e},jO=(t,e,n)=>{const s=Pf();En(s),e.timer&&(t.timeout=new uO(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(sn(s),er(s,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&Z0(e.timer)})))},IO=(t,e)=>{if(!e.toast){if(!Df(e.allowEnterKey)){qE("allowEnterKey"),OO();return}kO(t)||DO(t,e)||Pg(-1,1)}},kO=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&Hn(n))return n.focus(),!0;return!1},DO=(t,e)=>e.focusDeny&&Hn(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&Hn(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&Hn(t.confirmButton)?(t.confirmButton.focus(),!0):!1,OO=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Vt.prototype.disableButtons=vT;Vt.prototype.enableButtons=yT;Vt.prototype.getInput=mT;Vt.prototype.disableInput=wT;Vt.prototype.enableInput=xT;Vt.prototype.hideLoading=Wh;Vt.prototype.disableLoading=Wh;Vt.prototype.showValidationMessage=bT;Vt.prototype.resetValidationMessage=_T;Vt.prototype.close=Yi;Vt.prototype.closePopup=Yi;Vt.prototype.closeModal=Yi;Vt.prototype.closeToast=Yi;Vt.prototype.rejectPromise=uT;Vt.prototype.update=ST;Vt.prototype._destroy=CT;Object.assign(Vt,cO);Object.keys(FD).forEach(t=>{Vt[t]=function(...e){return hs&&hs[t]?hs[t](...e):null}});Vt.DismissReason=Hl;Vt.version="11.23.0";const Ae=Vt;Ae.default=Ae;typeof document<"u"&&(function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const ng=()=>{const[t,e]=R.useState([]),[n,s]=R.useState(!0),[o,l]=R.useState(null),[d,p]=R.useState("all"),[g,y]=R.useState(""),{addToCart:x}=Bl(),{addToWishlist:_}=kf(),{currentUser:T}=Yr();R.useEffect(()=>{(async()=>{try{s(!0);const F=await H5();e(F)}catch(F){l("Failed to load products"),console.error("Error fetching products:",F)}finally{s(!1)}})()},[]);const I=R.useMemo(()=>{let z=d==="all"?t:t.filter(F=>F.category===d);if(g){const F=g.toLowerCase();z=z.filter(ie=>ie.name.toLowerCase().includes(F)||ie.description&&ie.description.toLowerCase().includes(F)||ie.category&&ie.category.toLowerCase().includes(F)||ie.material&&ie.material.toLowerCase().includes(F)||ie.color&&ie.color.toLowerCase().includes(F))}return z},[t,d,g]),V=["all",...new Set(t.map(z=>z.category))],U=z=>{if(z.imageUrls&&z.imageUrls.length>0){const F=z.imageUrls.filter(ie=>ie&&(typeof ie=="string"||ie.data&&typeof ie.data=="string"));if(F.length>0){const ie=z.primaryImageIndex||0,ee=Math.min(ie,F.length-1),de=F[ee];if(typeof de=="string")return de;if(de&&de.data)return de.data}}return z.imageUrl||"https://via.placeholder.com/300x300.png?text=Moño"},j=z=>{if(!T){Ae.fire({title:"Inicia sesión",text:"Debes iniciar sesión para agregar productos al carrito",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(ie=>{ie.isConfirmed&&(window.location.href="/login")});return}if((z.stock!==void 0?z.stock:1/0)===0){Ae.fire({title:"Producto agotado",text:"Este producto no está disponible actualmente.",icon:"error",confirmButtonText:"Aceptar"});return}x({...z,quantity:1}),Ae.fire({title:"Producto agregado",text:"Producto agregado correctamente al carrito",icon:"success",confirmButtonText:"Aceptar"})},q=z=>{if(!T){Ae.fire({title:"Inicia sesión",text:"Debes iniciar sesión para agregar productos a tu lista de deseos",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(F=>{F.isConfirmed&&(window.location.href="/login")});return}_(z),Ae.fire({title:"Producto agregado",text:"Producto agregado correctamente a tu lista de deseos",icon:"success",confirmButtonText:"Aceptar"})};return u.jsx("div",{children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nuestra Colección"}),u.jsxs("div",{className:"mt-4 md:mt-0 flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 w-full sm:w-64",value:g,onChange:z=>y(z.target.value)}),u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"category-filter",className:"mr-2 text-sm font-medium text-gray-700",children:"Filtrar por:"}),u.jsx("select",{id:"category-filter",className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:d,onChange:z=>p(z.target.value),children:V.map(z=>u.jsx("option",{value:z,children:z==="all"?"Todos":z},z))})]})]})]}),n?u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):o?u.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[u.jsx("strong",{className:"font-bold",children:"Error! "}),u.jsx("span",{className:"block sm:inline",children:o})]}):u.jsxs(u.Fragment,{children:[g&&u.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:[I.length,' producto(s) encontrado(s) para "',g,'"']}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:I.map(z=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[u.jsx(He,{to:`/product/${z.id}`,children:u.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden",children:u.jsx("img",{src:U(z),alt:z.name,className:"w-full h-64 object-cover",onError:F=>{F.target.onerror=null,F.target.src="https://via.placeholder.com/300x300.png?text=Moño"}})})}),u.jsxs("div",{className:"p-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:z.category}),z.stock!==void 0&&z.stock<=5&&u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:z.stock>0?`Solo ${z.stock} disponibles`:"Agotado"})]}),u.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:z.name}),z.rating>0&&u.jsx("div",{className:"mt-2",children:u.jsx(Hh,{rating:z.rating,size:"sm"})}),u.jsx("div",{className:"mt-2",children:u.jsxs("span",{className:"text-lg font-semibold text-indigo-600",children:["$",parseFloat(z.price).toLocaleString("es-CO")]})}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsx("button",{className:"flex-1 bg-indigo-600 border border-transparent rounded-md py-2 px-4 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:F=>{F.preventDefault(),j(z)},children:"Agregar al Carrito"}),u.jsx("button",{className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:F=>{F.preventDefault(),F.stopPropagation(),q(z)},children:u.jsx("svg",{className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]})]})]},z.id))})]}),!n&&!o&&I.length===0&&u.jsxs("div",{className:"text-center py-12",children:[u.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No se encontraron productos"}),u.jsx("p",{className:"mt-1 text-gray-500",children:g?`No se encontraron productos que coincidan con "${g}".`:"No hay productos disponibles en esta categoría."}),g&&u.jsx("div",{className:"mt-6",children:u.jsx("button",{onClick:()=>{y(""),p("all")},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Ver todos los productos"})})]})]})})},OT=async t=>{try{const e=Xt(De,"reviews");return{id:(await jf(e,{...t,createdAt:new Date,updatedAt:new Date})).id,...t,createdAt:new Date,updatedAt:new Date}}catch(e){throw console.error("Error creating review:",e),e}},N2=async t=>{try{const e=Xt(De,"reviews"),n=li(e,pu("productId","==",t),Ul("createdAt","desc"));return(await bn(n)).docs.map(l=>({id:l.id,...l.data()}))}catch(e){if(console.error("Error fetching reviews:",e),e.code==="failed-precondition"||e.message&&e.message.includes("index"))try{const n=Xt(De,"reviews"),s=li(n,pu("productId","==",t));return(await bn(s)).docs.map(p=>({id:p.id,...p.data()})).sort((p,g)=>{const y=p.createdAt?.toDate?p.createdAt.toDate():new Date(p.createdAt);return(g.createdAt?.toDate?g.createdAt.toDate():new Date(g.createdAt))-y})}catch(n){throw console.error("Error fetching reviews without index:",n),n}else throw e}},S2=async()=>{try{const t=Xt(De,"reviews"),e=li(t,Ul("createdAt","desc"));return(await bn(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(t){if(console.error("Error fetching all reviews:",t),t.code==="failed-precondition"||t.message&&t.message.includes("index"))try{const e=Xt(De,"reviews");return(await bn(e)).docs.map(l=>({id:l.id,...l.data()})).sort((l,d)=>{const p=l.createdAt?.toDate?l.createdAt.toDate():new Date(l.createdAt);return(d.createdAt?.toDate?d.createdAt.toDate():new Date(d.createdAt))-p})}catch(e){throw console.error("Error fetching all reviews without index:",e),e}else throw t}},PO=async(t,e)=>{try{const n=dt(De,"reviews",t);return await ms(n,{...e,updatedAt:new Date}),{id:t,...e,updatedAt:new Date}}catch(n){throw console.error("Error updating review:",n),n}},MO=async t=>{try{const e=dt(De,"reviews",t);return await F0(e),t}catch(e){throw console.error("Error deleting review:",e),e}},LO=()=>{const{id:t}=sS(),[e,n]=R.useState(null),[s,o]=R.useState(!0),[l,d]=R.useState(null),[p,g]=R.useState(1),[y,x]=R.useState(0),{addToCart:_}=Bl(),{addToWishlist:T}=kf(),{currentUser:I}=Yr(),V=Er(),[U,j]=R.useState([]),[q,z]=R.useState(!0),[F,ie]=R.useState({rating:0,comment:""}),[ee,de]=R.useState(!1);R.useEffect(()=>{t&&(async()=>{try{o(!0);const oe=await $5(t);n(oe),x(0)}catch(oe){d("Failed to load product"),console.error("Error fetching product:",oe)}finally{o(!1)}})()},[t]),R.useEffect(()=>{(async()=>{if(t)try{z(!0);const oe=await N2(t);j(oe)}catch(oe){console.error("Error fetching reviews:",oe)}finally{z(!1)}})()},[t]);const k=()=>{if(!I){Ae.fire({title:"Inicia sesión",text:"Debes iniciar sesión para agregar productos al carrito",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(G=>{G.isConfirmed&&V("/login")});return}if(e){if((e.stock!==void 0?e.stock:1/0)===0){Ae.fire({title:"Producto agotado",text:"Este producto no está disponible actualmente.",icon:"error",confirmButtonText:"Aceptar"});return}_({...e,quantity:1}),Ae.fire({title:"Producto agregado",text:"Producto agregado correctamente al carrito",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{})}},A=()=>{if(!I){Ae.fire({title:"Inicia sesión",text:"Debes iniciar sesión para agregar productos a tu lista de deseos",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(G=>{G.isConfirmed&&V("/login")});return}e&&(T(e),Ae.fire({title:"Producto agregado",text:"Producto agregado correctamente a tu lista de deseos",icon:"success",confirmButtonText:"Aceptar"}))},S=()=>{if(e?.imageUrls&&Array.isArray(e.imageUrls)){const G=e.imageUrls.filter(oe=>oe&&(typeof oe=="string"||oe.data&&typeof oe.data=="string"));return G.length>0?G.map(ye=>typeof ye=="string"?ye:ye&&ye.data?ye.data:"https://via.placeholder.com/600x600.png?text=Moño"):["https://via.placeholder.com/600x600.png?text=Moño"]}return e?.imageUrl?[e.imageUrl]:["https://via.placeholder.com/600x600.png?text=Moño"]},M=()=>{const G=S();return G[y]||G[0]},P=G=>{const{name:oe,value:ye}=G.target;ie(Ue=>({...Ue,[oe]:ye}))},O=G=>{ie(oe=>({...oe,rating:G}))},C=async G=>{if(G.preventDefault(),!I){Ae.fire({title:"Inicia sesión",text:"Debes iniciar sesión para dejar una reseña",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(oe=>{oe.isConfirmed&&V("/login")});return}if(F.rating===0){Ae.fire({title:"Error",text:"Por favor selecciona una calificación",icon:"error",confirmButtonText:"Aceptar"});return}if(F.comment.trim()===""){Ae.fire({title:"Error",text:"Por favor escribe un comentario",icon:"error",confirmButtonText:"Aceptar"});return}de(!0);try{const oe={productId:t,userId:I.uid,userEmail:I.email,userName:I.displayName||I.email.split("@")[0],rating:F.rating,comment:F.comment.trim()};await OT(oe),ie({rating:0,comment:""});const ye=await N2(t);j(ye),Ae.fire({title:"Reseña enviada",text:"Tu reseña ha sido enviada correctamente",icon:"success",confirmButtonText:"Aceptar"})}catch(oe){console.error("Error submitting review:",oe),Ae.fire({title:"Error",text:"Hubo un error al enviar tu reseña. Por favor intenta nuevamente.",icon:"error",confirmButtonText:"Aceptar"})}finally{de(!1)}},Ce=G=>G?G instanceof Date?G.toLocaleDateString("es-CO"):G.toDate?G.toDate().toLocaleDateString("es-CO"):"N/A":"N/A";if(s)return u.jsx("div",{children:u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"w-12 h-12 border-b-2 border-gray-900 rounded-full animate-spin"})})});if(l||!e)return u.jsx("div",{children:u.jsx("div",{className:"px-4 py-8 mx-auto max-w-7xl sm:px-6 lg:px-8",children:u.jsxs("div",{className:"relative px-4 py-3 text-red-700 bg-red-100 border border-red-400 rounded",role:"alert",children:[u.jsx("strong",{className:"font-bold",children:"Error! "}),u.jsx("span",{className:"block sm:inline",children:l||"Product not found"})]})})});const _e=S();return u.jsx("div",{children:u.jsxs("div",{className:"px-4 py-8 mx-auto max-w-7xl sm:px-6 lg:px-8",children:[u.jsx("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:u.jsxs("ol",{className:"flex items-center space-x-2",children:[u.jsx("li",{children:u.jsx(He,{to:"/home",className:"text-gray-500 hover:text-gray-700",children:"Home"})}),u.jsx("li",{children:u.jsx("span",{className:"text-gray-500",children:"/"})}),u.jsx("li",{children:u.jsx(He,{to:"/shop",className:"text-gray-500 hover:text-gray-700",children:"Shop"})}),u.jsx("li",{children:u.jsx("span",{className:"text-gray-500",children:"/"})}),u.jsx("li",{children:u.jsx("span",{className:"text-gray-900",children:e.name})})]})}),u.jsxs("div",{className:"lg:grid lg:grid-cols-2 lg:gap-x-8 lg:items-start",children:[u.jsxs("div",{className:"flex flex-col-reverse",children:[_e.length>1&&u.jsx("div",{className:"hidden w-full max-w-2xl mx-auto mt-6 sm:block lg:max-w-none",children:u.jsx("div",{className:"grid grid-cols-4 gap-6","aria-orientation":"horizontal",children:_e.map((G,oe)=>u.jsxs("button",{className:`relative h-24 bg-white rounded-md flex items-center justify-center text-sm font-medium uppercase text-gray-900 cursor-pointer hover:bg-gray-50 focus:outline-none focus:ring focus:ring-offset-4 focus:ring-indigo-500 ${y===oe?"ring-2 ring-indigo-500":""}`,onClick:()=>x(oe),children:[u.jsxs("span",{className:"sr-only",children:["Imagen ",oe+1]}),u.jsx("span",{className:"absolute inset-0 overflow-hidden rounded-md",children:u.jsx("img",{src:G,alt:`Imagen ${oe+1}`,className:"object-cover w-full h-full",onError:ye=>{ye.target.onerror=null,ye.target.src="https://via.placeholder.com/100x100.png?text=Moño"}})}),y===oe&&u.jsx("span",{className:"absolute inset-0 rounded-md pointer-events-none ring-2 ring-offset-2 ring-indigo-500","aria-hidden":"true"})]},oe))})}),u.jsx("div",{className:"w-full aspect-w-1 aspect-h-1",children:u.jsx("img",{src:M(),alt:e.name,className:"object-cover object-center w-full h-full sm:rounded-lg",onError:G=>{G.target.onerror=null,G.target.src="https://via.placeholder.com/600x600.png?text=Moño"}})})]}),u.jsxs("div",{className:"px-4 mt-10 sm:px-0 sm:mt-16 lg:mt-0",children:[u.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-gray-900",children:e.name}),u.jsxs("div",{className:"mt-3",children:[u.jsx("h2",{className:"sr-only",children:"Product information"}),u.jsxs("p",{className:"text-3xl text-gray-900",children:["$",parseFloat(e.price).toLocaleString("es-CO")]})]}),e.rating>0&&u.jsx("div",{className:"mt-2",children:u.jsx(Hh,{rating:e.rating,size:"lg"})}),u.jsxs("div",{className:"mt-6",children:[u.jsx("h3",{className:"sr-only",children:"Description"}),u.jsx("div",{className:"space-y-6 text-base text-gray-700",children:u.jsx("p",{children:e.description})})]}),u.jsxs("div",{className:"mt-6",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{className:"mr-2 text-gray-700",children:"Categoría:"}),u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.category})]}),e.stock!==void 0&&u.jsxs("div",{className:"flex items-center mt-2",children:[u.jsx("span",{className:"mr-2 text-gray-700",children:"Stock:"}),u.jsx("span",{className:`font-medium ${e.stock>5?"text-green-600":e.stock>0?"text-yellow-600":"text-red-600"}`,children:e.stock>0?`${e.stock} disponibles`:"Agotado"})]}),e.material&&u.jsxs("div",{className:"flex items-center mt-2",children:[u.jsx("span",{className:"mr-2 text-gray-700",children:"Material:"}),u.jsx("span",{className:"text-gray-900",children:e.material})]}),e.color&&u.jsxs("div",{className:"flex items-center mt-2",children:[u.jsx("span",{className:"mr-2 text-gray-700",children:"Color:"}),u.jsx("span",{className:"text-gray-900",children:e.color})]}),e.size&&u.jsxs("div",{className:"flex items-center mt-2",children:[u.jsx("span",{className:"mr-2 text-gray-700",children:"Tamaño:"}),u.jsx("span",{className:"text-gray-900",children:e.size})]}),e.style&&u.jsxs("div",{className:"flex items-center mt-2",children:[u.jsx("span",{className:"mr-2 text-gray-700",children:"Estilo:"}),u.jsx("span",{className:"text-gray-900",children:e.style})]})]}),u.jsx("form",{className:"mt-6",children:u.jsxs("div",{className:"flex gap-3 mt-10 sm:flex-col1",children:[u.jsx("button",{type:"button",onClick:k,className:"flex items-center justify-center flex-1 max-w-xs px-8 py-3 text-base font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:w-full",disabled:e.stock===0,children:"Agregar al Carrito"}),u.jsxs("button",{type:"button",onClick:A,className:"flex items-center justify-center px-4 py-3 ml-4 text-gray-400 rounded-md hover:bg-gray-100 hover:text-gray-500",children:[u.jsx("svg",{className:"flex-shrink-0 w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),u.jsx("span",{className:"sr-only",children:"Add to favorites"})]})]})})]})]}),u.jsx("div",{className:"mt-16",children:u.jsxs("div",{className:"border-t border-gray-200 pt-10",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Reseñas de Clientes"}),I&&u.jsxs("div",{className:"mb-10",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Deja tu reseña"}),u.jsxs("form",{onSubmit:C,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calificación"}),u.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(G=>u.jsx("button",{type:"button",onClick:()=>O(G),className:"text-2xl focus:outline-none",children:G<=F.rating?u.jsx("span",{className:"text-yellow-400",children:"★"}):u.jsx("span",{className:"text-gray-300",children:"☆"})},G)),u.jsx("span",{className:"ml-2 text-sm text-gray-500",children:F.rating>0?`${F.rating} de 5 estrellas`:"Selecciona una calificación"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentario"}),u.jsx("textarea",{id:"comment",name:"comment",rows:4,value:F.comment,onChange:P,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border border-gray-300 rounded-md p-3",placeholder:"Comparte tu experiencia con este producto..."})]}),u.jsx("div",{children:u.jsx("button",{type:"submit",disabled:ee,className:`inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${ee?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:ee?"Enviando...":"Enviar Reseña"})})]})]}),u.jsx("div",{children:q?u.jsx("div",{className:"flex justify-center py-8",children:u.jsx("div",{className:"w-8 h-8 border-b-2 border-gray-900 rounded-full animate-spin"})}):U.length===0?u.jsxs("div",{className:"text-center py-8",children:[u.jsx("p",{className:"text-gray-500",children:"No hay reseñas para este producto aún."}),!I&&u.jsx("p",{className:"mt-2 text-sm text-gray-500",children:u.jsx(He,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Inicia sesión para dejar la primera reseña"})})]}):u.jsx("div",{className:"space-y-6",children:U.map(G=>u.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-medium text-gray-900",children:G.userName}),u.jsx("div",{className:"mt-1",children:u.jsx(Hh,{rating:G.rating,size:"sm"})})]}),u.jsx("p",{className:"text-sm text-gray-500",children:Ce(G.createdAt)})]}),u.jsx("div",{className:"mt-4",children:u.jsx("p",{className:"text-gray-700",children:G.comment})})]},G.id))})})]})})]})})},VO=()=>{const{items:t,updateQuantity:e,removeFromCart:n,getTotalPrice:s,loading:o,coupon:l,applyCoupon:d,removeCoupon:p}=Bl(),g=Er(),[y,x]=R.useState(""),[_,T]=R.useState(""),[I,V]=R.useState(!1);if(o)return u.jsx("div",{children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})})});const U=()=>{g("/checkout")},j=async F=>{if(F.preventDefault(),!!y.trim()){V(!0),T("");try{await d(y.trim()),x("")}catch(ie){T(ie.message||"Error al aplicar el cupón")}finally{V(!1)}}},q=()=>{p(),x(""),T("")},z=t.reduce((F,ie)=>F+ie.price*ie.quantity,0);return u.jsx("div",{children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Tu Carrito de Compras"}),t.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),u.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Tu carrito está vacío"}),u.jsx("p",{className:"mt-1 text-gray-500",children:"Empieza a agregar productos a tu carrito"}),u.jsx("div",{className:"mt-6",children:u.jsx(He,{to:"/shop",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Continuar Comprando"})})]}):u.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-x-12",children:[u.jsx("div",{className:"lg:col-span-8",children:u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:u.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(F=>u.jsx("li",{className:"p-4 sm:p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"flex-shrink-0 w-24 h-24 border border-gray-200 rounded-md overflow-hidden",children:u.jsx("img",{src:F.imageUrl||"https://via.placeholder.com/100x100.png?text=Moño",alt:F.name,className:"w-full h-full object-center object-cover",onError:ie=>{ie.target.onerror=null,ie.target.src="https://via.placeholder.com/100x100.png?text=Moño"}})}),u.jsxs("div",{className:"ml-4 flex-1 flex flex-col",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[u.jsx("h3",{children:u.jsx(He,{to:`/product/${F.id}`,children:F.name})}),u.jsxs("p",{className:"ml-4",children:["$",parseFloat(F.price*F.quantity).toLocaleString("es-CO")]})]}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:F.category}),F.stock!==void 0&&u.jsx("p",{className:"mt-1 text-sm",children:u.jsx("span",{className:`font-medium ${F.stock>5?"text-green-600":F.stock>0?"text-yellow-600":"text-red-600"}`,children:F.stock>0?`Stock: ${F.stock} disponibles`:"Agotado"})})]}),u.jsxs("div",{className:"flex-1 flex items-end justify-between text-sm",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsxs("button",{onClick:()=>e(F.id,F.quantity-1),className:"text-gray-500 hover:text-gray-600",disabled:F.quantity<=1,children:[u.jsx("span",{className:"sr-only",children:"Remove one"}),u.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})})]}),u.jsx("span",{className:"mx-2 text-gray-500",children:F.quantity}),u.jsxs("button",{onClick:()=>{const ie=F.stock!==void 0?F.stock:1/0;F.quantity<ie&&e(F.id,F.quantity+1)},className:"text-gray-500 hover:text-gray-600",disabled:F.stock!==void 0&&F.quantity>=F.stock,children:[u.jsx("span",{className:"sr-only",children:"Add one"}),u.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]})]}),u.jsx("div",{className:"flex",children:u.jsx("button",{type:"button",onClick:()=>n(F.id),className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Eliminar"})})]})]})]})},F.id))})})}),u.jsx("div",{className:"mt-8 lg:mt-0 lg:col-span-4",children:u.jsxs("div",{className:"bg-gray-50 rounded-lg px-4 py-6 sm:p-6 lg:p-8",children:[u.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Resumen del Pedido"}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-md font-medium text-gray-900 mb-2",children:"Cupón de Descuento"}),l?u.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-md",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium text-green-800",children:l.code}),u.jsx("span",{className:"ml-2 text-sm text-green-600",children:l.discountType==="percentage"?`-${l.discountValue}%`:`-$${l.discountValue.toLocaleString("es-CO")}`})]}),u.jsx("button",{onClick:q,className:"text-sm text-red-600 hover:text-red-800",children:"Eliminar"})]}):u.jsxs("form",{onSubmit:j,className:"flex space-x-2",children:[u.jsx("input",{type:"text",value:y,onChange:F=>x(F.target.value),placeholder:"Ingresa tu código",className:"flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",disabled:I}),u.jsx("button",{type:"submit",disabled:I||!y.trim(),className:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white ${I||!y.trim()?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}`,children:I?"Aplicando...":"Aplicar"})]}),_&&u.jsx("p",{className:"mt-2 text-sm text-red-600",children:_})]}),u.jsxs("dl",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("dt",{className:"text-sm text-gray-600",children:"Subtotal"}),u.jsxs("dd",{className:"text-sm font-medium text-gray-900",children:["$",parseFloat(z).toLocaleString("es-CO")]})]}),l&&u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("dt",{className:"text-sm text-gray-600",children:["Descuento (",l.code,")"]}),u.jsxs("dd",{className:"text-sm font-medium text-green-600",children:["-$",parseFloat(z-s()).toLocaleString("es-CO")]})]}),u.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-6",children:[u.jsx("dt",{className:"text-base font-medium text-gray-900",children:"Total del Pedido"}),u.jsxs("dd",{className:"text-base font-medium text-gray-900",children:["$",parseFloat(s()).toLocaleString("es-CO")]})]})]}),t.some(F=>F.stock!==void 0&&F.stock<F.quantity)&&u.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Algunos productos tienen stock limitado"}),u.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:u.jsx("p",{children:"La cantidad en tu carrito excede el stock disponible para algunos productos. Por favor, ajusta las cantidades."})})]})]})}),u.jsx("div",{className:"mt-6",children:u.jsx("button",{type:"button",onClick:U,className:"w-full bg-indigo-600 border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-indigo-500",disabled:t.some(F=>F.stock!==void 0&&F.stock<F.quantity),children:"Proceder al Pago"})}),u.jsx("div",{className:"mt-4 text-center",children:u.jsx(He,{to:"/shop",className:"text-indigo-600 hover:text-indigo-500",children:"← Continuar Comprando"})})]})})]})]})})};/*!
 * react-paypal-js v8.9.2 (2025-10-02T20:17:55.069Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;(function(t){t.INITIAL="initial",t.PENDING="pending",t.REJECTED="rejected",t.RESOLVED="resolved"})(Bn||(Bn={}));var Ji;(function(t){t.LOADING_STATUS="setLoadingStatus",t.RESET_OPTIONS="resetOptions",t.SET_BRAINTREE_INSTANCE="braintreeInstance"})(Ji||(Ji={}));var C2;(function(t){t.NUMBER="number",t.CVV="cvv",t.EXPIRATION_DATE="expirationDate",t.EXPIRATION_MONTH="expirationMonth",t.EXPIRATION_YEAR="expirationYear",t.POSTAL_CODE="postalCode"})(C2||(C2={}));var qt=function(){return qt=Object.assign||function(e){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},qt.apply(this,arguments)};function PT(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n}function R2(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,l;s<o;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return t.concat(l||Array.prototype.slice.call(e))}var gu="data-react-paypal-script-id",Za={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},UO="Failed to load the PayPal JS SDK script.",MT="paypal",BO="usePayPalScriptReducer must be used within a PayPalScriptProvider";function zO(t){return t===void 0&&(t=MT),window[t]}function FO(t){for(var e="",n=0;n<t.length;n++){var s=t[n].charCodeAt(0)*n;t[n+1]&&(s+=t[n+1].charCodeAt(0)*(n-1)),e+=String.fromCharCode(97+Math.abs(s)%26)}return e}function qO(t){var e=t.reactComponentName,n=t.sdkComponentKey,s=t.sdkRequestedComponents,o=s===void 0?"":s,l=t.sdkDataNamespace,d=l===void 0?MT:l,p=n.charAt(0).toUpperCase().concat(n.substring(1)),g="Unable to render <".concat(e," /> because window.").concat(d,".").concat(p," is undefined."),y=typeof o=="string"?o:o.join(",");if(!y.includes(n)){var x=[y,n].filter(Boolean).join();g+=`
To fix the issue, add '`.concat(n,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(x,"'}}>`.")}return g}function LT(t){var e=t,n=gu;e[n];var s=PT(e,[n+""]);return"react-paypal-js-".concat(FO(JSON.stringify(s)))}function HO(t){var e=self.document.querySelector("script[".concat(gu,'="').concat(t,'"]'));e?.parentNode&&e.parentNode.removeChild(e)}function $O(t,e){var n,s;switch(e.type){case Ji.LOADING_STATUS:return typeof e.value=="object"?qt(qt({},t),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):qt(qt({},t),{loadingStatus:e.value});case Ji.RESET_OPTIONS:return HO(t.options[gu]),qt(qt({},t),{loadingStatus:Bn.PENDING,options:qt(qt((n={},n[Za.DATA_SDK_INTEGRATION_SOURCE]=Za.DATA_LIBRARY_VALUE,n),e.value),(s={},s[gu]="".concat(LT(e.value)),s))});case Ji.SET_BRAINTREE_INSTANCE:return qt(qt({},t),{braintreePayPalCheckoutInstance:e.value});default:return t}}var VT=R.createContext(null);function GO(t){if(typeof t?.dispatch=="function"&&t.dispatch.length!==0)return t;throw new Error(BO)}function KO(){var t=GO(R.useContext(VT)),e=qt(qt({},t),{isInitial:t.loadingStatus===Bn.INITIAL,isPending:t.loadingStatus===Bn.PENDING,isResolved:t.loadingStatus===Bn.RESOLVED,isRejected:t.loadingStatus===Bn.REJECTED});return[e,t.dispatch]}R.createContext({});function YO(t){var e=R.useRef(new Proxy({},{get:function(n,s,o){return typeof n[s]=="function"?function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return n[s].apply(n,l)}:Reflect.get(n,s,o)}}));return e.current=Object.assign(e.current,t),e.current}var sy=function(t){var e,n=t.className,s=n===void 0?"":n,o=t.disabled,l=o===void 0?!1:o,d=t.children,p=t.forceReRender,g=p===void 0?[]:p,y=PT(t,["className","disabled","children","forceReRender"]),x=l?{opacity:.38}:{},_="".concat(s," ").concat(l?"paypal-buttons-disabled":"").trim(),T=R.useRef(null),I=R.useRef(null),V=YO(y),U=KO()[0],j=U.isResolved,q=U.options,z=R.useState(null),F=z[0],ie=z[1],ee=R.useState(!0),de=ee[0],k=ee[1],A=R.useState(null),S=A[1];function M(){I.current!==null&&I.current.close().catch(function(){})}return!((e=I.current)===null||e===void 0)&&e.updateProps&&I.current.updateProps({message:y.message}),R.useEffect(function(){if(j===!1)return M;var P=zO(q.dataNamespace);if(P===void 0||P.Buttons===void 0)return S(function(){throw new Error(qO({reactComponentName:sy.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:q.components,sdkDataNamespace:q[Za.DATA_NAMESPACE]}))}),M;var O=function(C,Ce){ie(Ce),typeof y.onInit=="function"&&y.onInit(C,Ce)};try{I.current=P.Buttons(qt(qt({},V),{onInit:O}))}catch(C){return S(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(C))})}return I.current.isEligible()===!1?(k(!1),M):(T.current&&I.current.render(T.current).catch(function(C){T.current===null||T.current.children.length===0||S(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(C))})}),M)},R2(R2([j],g,!0),[y.fundingSource],!1)),R.useEffect(function(){F!==null&&(l===!0?F.disable().catch(function(){}):F.enable().catch(function(){}))},[l,F]),qn.createElement(qn.Fragment,null,de?qn.createElement("div",{ref:T,style:x,className:_}):d)};sy.displayName="PayPalButtons";function QO(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n}function XO(t,e){var n=document.querySelector('script[src="'.concat(t,'"]'));if(n===null)return null;var s=UT(t,e),o=n.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(s.dataset).length)return null;var l=!0;return Object.keys(o.dataset).forEach(function(d){o.dataset[d]!==s.dataset[d]&&(l=!1)}),l?n:null}function WO(t){var e=t.url,n=t.attributes,s=t.onSuccess,o=t.onError,l=UT(e,n);l.onerror=o,l.onload=s,document.head.insertBefore(l,document.head.firstElementChild)}function ZO(t){var e=t.sdkBaseUrl,n=t.environment,s=QO(t,["sdkBaseUrl","environment"]),o=e||tP(n),l=s,d=Object.keys(l).filter(function(y){return typeof l[y]<"u"&&l[y]!==null&&l[y]!==""}).reduce(function(y,x){var _=l[x].toString();return x=JO(x),x.substring(0,4)==="data"||x==="crossorigin"?y.attributes[x]=_:y.queryParams[x]=_,y},{queryParams:{},attributes:{}}),p=d.queryParams,g=d.attributes;return p["merchant-id"]&&p["merchant-id"].indexOf(",")!==-1&&(g["data-merchant-id"]=p["merchant-id"],p["merchant-id"]="*"),{url:"".concat(o,"?").concat(eP(p)),attributes:g}}function JO(t){var e=function(n,s){return(s?"-":"")+n.toLowerCase()};return t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function eP(t){var e="";return Object.keys(t).forEach(function(n){e.length!==0&&(e+="&"),e+=n+"="+t[n]}),e}function tP(t){return t==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function UT(t,e){e===void 0&&(e={});var n=document.createElement("script");return n.src=t,Object.keys(e).forEach(function(s){n.setAttribute(s,e[s]),s==="data-csp-nonce"&&n.setAttribute("nonce",e["data-csp-nonce"])}),n}function nP(t,e){if(e===void 0&&(e=Promise),BT(t,e),typeof document>"u")return e.resolve(null);var n=ZO(t),s=n.url,o=n.attributes,l=o["data-namespace"]||"paypal",d=j2(l);return o["data-js-sdk-library"]||(o["data-js-sdk-library"]="paypal-js"),XO(s,o)&&d?e.resolve(d):rP({url:s,attributes:o},e).then(function(){var p=j2(l);if(p)return p;throw new Error("The window.".concat(l," global variable is not available."))})}function rP(t,e){e===void 0&&(e=Promise),BT(t,e);var n=t.url,s=t.attributes;if(typeof n!="string"||n.length===0)throw new Error("Invalid url.");if(typeof s<"u"&&typeof s!="object")throw new Error("Expected attributes to be an object.");return new e(function(o,l){if(typeof document>"u")return o();WO({url:n,attributes:s,onSuccess:function(){return o()},onError:function(){var d=new Error('The script "'.concat(n,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return l(d)}})})}function j2(t){return window[t]}function BT(t,e){if(typeof t!="object"||t===null)throw new Error("Expected an options object.");var n=t.environment;if(n&&n!=="production"&&n!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var sP=function(t){var e,n=t.options,s=n===void 0?{clientId:"test"}:n,o=t.children,l=t.deferLoading,d=l===void 0?!1:l,p=R.useReducer($O,{options:qt(qt({},s),(e={},e[Za.DATA_JS_SDK_LIBRARY]=Za.DATA_LIBRARY_VALUE,e[Za.DATA_SDK_INTEGRATION_SOURCE]=Za.DATA_LIBRARY_VALUE,e[gu]="".concat(LT(s)),e)),loadingStatus:d?Bn.INITIAL:Bn.PENDING}),g=p[0],y=p[1];return R.useEffect(function(){if(d===!1&&g.loadingStatus===Bn.INITIAL)return y({type:Ji.LOADING_STATUS,value:Bn.PENDING});if(g.loadingStatus===Bn.PENDING){var x=!0;return nP(g.options).then(function(){x&&y({type:Ji.LOADING_STATUS,value:Bn.RESOLVED})}).catch(function(_){console.error("".concat(UO," ").concat(_)),x&&y({type:Ji.LOADING_STATUS,value:{state:Bn.REJECTED,message:String(_)}})}),function(){x=!1}}},[g.options,d,g.loadingStatus]),qn.createElement(VT.Provider,{value:qt(qt({},g),{dispatch:y})},o)};function I2(){}R.createContext({cardFieldsForm:null,fields:{},registerField:I2,unregisterField:I2});var zT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},k2=qn.createContext&&qn.createContext(zT),iP=["attr","size","title"];function aP(t,e){if(t==null)return{};var n=oP(t,e),s,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(o=0;o<l.length;o++)s=l[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function oP(t,e){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function ef(){return ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ef.apply(this,arguments)}function D2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,s)}return n}function tf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D2(Object(n),!0).forEach(function(s){lP(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D2(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function lP(t,e,n){return e=cP(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cP(t){var e=uP(t,"string");return typeof e=="symbol"?e:e+""}function uP(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FT(t){return t&&t.map((e,n)=>qn.createElement(e.tag,tf({key:n},e.attr),FT(e.child)))}function xt(t){return e=>qn.createElement(dP,ef({attr:tf({},t.attr)},e),FT(t.child))}function dP(t){var e=n=>{var{attr:s,size:o,title:l}=t,d=aP(t,iP),p=o||n.size||"1em",g;return n.className&&(g=n.className),t.className&&(g=(g?g+" ":"")+t.className),qn.createElement("svg",ef({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,d,{className:g,style:tf(tf({color:t.color||n.color},n.style),t.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),l&&qn.createElement("title",null,l),t.children)};return k2!==void 0?qn.createElement(k2.Consumer,null,n=>e(n)):e(zT)}function hP(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(t)}function fP(t){return xt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(t)}function mP(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function pP(t){return xt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function gP(t){return xt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function yP(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function vP(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function xP(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function wP(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function bP(t){return xt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(t)}function _P(t){return xt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function EP(t){return xt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function O2(t){return xt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}const nf=()=>{const[t,e]=R.useState(!1),[n,s]=R.useState(!1),{currentUser:o,isAdmin:l,userProfile:d}=Yr(),{items:p}=Bl(),{items:g}=kf(),y=Er(),x=R.useRef(null);R.useEffect(()=>{console.log("Navbar isAdmin value:",l)},[l]),R.useEffect(()=>{const F=ie=>{x.current&&!x.current.contains(ie.target)&&s(!1)};return document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[]);const _=()=>{e(!t)},T=()=>{console.log("Toggling profile menu, current state:",n),s(!n)},I=()=>{console.log("Closing profile menu"),s(!1)},V=async()=>{try{await U1(Fr),I(),y("/home")}catch(F){console.error("Error signing out:",F)}},U="text-slate-600 hover:text-slate-900 transition-colors duration-300",j="relative text-slate-600 hover:text-slate-900 transition-colors duration-300 cursor-pointer",q=p.reduce((F,ie)=>F+ie.quantity,0),z=g.length;return u.jsxs(u.Fragment,{children:[u.jsx("header",{className:"sticky top-0 z-50 font-sans bg-white shadow-sm",children:u.jsxs("nav",{className:"flex items-center justify-between p-4 mx-auto max-w-7xl",children:[u.jsx("div",{className:"text-2xl font-bold text-slate-800",children:u.jsx(He,{to:"/home",children:"PSGSHOP"})}),u.jsxs("ul",{className:"items-center hidden space-x-8 md:flex",children:[u.jsx("li",{children:u.jsx(He,{to:"/home",className:U,children:"Inicio"})}),u.jsx("li",{children:u.jsx(He,{to:"/shop",className:U,children:"Productos"})}),u.jsx("li",{children:u.jsx(He,{to:"/blog",className:U,children:"Blog"})}),u.jsx("li",{children:u.jsx(He,{to:"/contact",className:U,children:"Contacto"})})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:`hidden md:block ${j} text-xl`,children:u.jsx(wP,{})}),u.jsxs(He,{to:"/wishlist",className:`${j} text-xl flex items-center justify-center relative`,children:[u.jsx(vP,{}),z>0&&u.jsx("span",{className:"absolute flex items-center justify-center w-5 h-5 text-xs font-semibold text-white bg-green-500 rounded-full -top-2 -right-3",children:z})]}),u.jsxs(He,{to:"/cart",className:`${j} text-xl flex items-center justify-center relative`,children:[u.jsx(bP,{}),q>0&&u.jsx("span",{className:"absolute flex items-center justify-center w-5 h-5 text-xs font-semibold text-white bg-green-500 rounded-full -top-2 -right-3",children:q})]}),u.jsxs("div",{className:"relative",ref:x,children:[o?u.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-200 border border-gray-300 rounded-full cursor-pointer",onClick:T,children:d?.profileImage?u.jsx("img",{src:d.profileImage,alt:"Profile",className:"object-cover w-full h-full rounded-full"}):u.jsx("span",{className:"text-xs font-bold text-gray-600",children:d?.displayName?.charAt(0).toUpperCase()||o.email?.charAt(0).toUpperCase()||"U"})}):u.jsx(He,{to:"/login",className:"flex items-center justify-center w-8 h-8 bg-gray-200 border border-gray-300 rounded-full cursor-pointer",children:u.jsx(O2,{className:"text-gray-600"})}),o&&n&&u.jsxs("div",{className:"absolute right-0 z-50 w-64 mt-2 bg-gray-800 rounded-lg shadow-lg",children:[u.jsx("div",{className:"p-4 border-b border-gray-700",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gray-200 border border-gray-300 rounded-full",children:d?.profileImage?u.jsx("img",{src:d.profileImage,alt:"Profile",className:"object-cover w-full h-full rounded-full"}):u.jsx("span",{className:"text-sm font-bold text-gray-600",children:d?.displayName?.charAt(0).toUpperCase()||o.email?.charAt(0).toUpperCase()||"U"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-sm font-bold text-white",children:d?.displayName||o.email?.split("@")[0]||"Usuario"}),u.jsx("p",{className:"text-xs text-gray-400",children:o.email})]})]})}),u.jsxs("div",{className:"py-1",children:[console.log("Rendering admin link, isAdmin:",l),l&&u.jsxs(He,{to:"/admin",className:"flex items-center px-4 py-2 text-sm text-white hover:bg-gray-700",onClick:I,children:[u.jsx(yP,{className:"mr-3 text-gray-400"}),u.jsx("span",{children:"Administrar página"})]}),u.jsxs(He,{to:"/profile",className:"flex items-center px-4 py-2 text-sm text-white hover:bg-gray-700",onClick:I,children:[u.jsx(O2,{className:"mr-3 text-gray-400"}),u.jsx("span",{children:"Editar perfil"})]}),u.jsx("div",{className:"border-t border-gray-700",children:u.jsxs(He,{to:"/orders",className:"flex items-center px-4 py-2 text-sm text-white hover:bg-gray-700",onClick:I,children:[u.jsx(xP,{className:"mr-3 text-gray-400"}),u.jsx("span",{children:"Mis Pedidos"})]})}),u.jsxs("button",{onClick:V,className:"flex items-center w-full px-4 py-2 text-sm text-left text-white hover:bg-gray-700",children:[u.jsx(_P,{className:"mr-3 text-gray-400"}),u.jsx("span",{children:"Cerrar sesión"})]})]})]})]}),u.jsxs("div",{className:"ml-3 text-2xl cursor-pointer md:hidden text-slate-800",onClick:_,children:[u.jsx(gP,{}),u.jsx("span",{className:"absolute flex items-center justify-center w-5 h-5 text-xs font-semibold text-white bg-green-500 rounded-full -top-1 -right-1",children:"11"})]})]})]})}),u.jsxs(u.Fragment,{children:[t&&u.jsx("div",{className:"fixed inset-0 z-40 bg-black/40",onClick:_}),u.jsxs("aside",{className:`fixed top-0 left-0 h-full w-72 bg-white shadow-xl transform ${t?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 p-5 flex flex-col font-sans`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-10",children:[u.jsx("div",{className:"text-xl font-bold text-slate-800",children:"BOWSHOP"}),u.jsx("button",{onClick:_,className:"text-2xl cursor-pointer text-slate-600 hover:text-slate-900",children:u.jsx(EP,{})})]}),u.jsxs("ul",{className:"flex-grow space-y-4",children:[u.jsx("li",{children:u.jsx(He,{to:"/home",className:`text-lg ${U}`,onClick:_,children:"Inicio"})}),u.jsx("li",{children:u.jsx(He,{to:"/shop",className:`text-lg ${U}`,onClick:_,children:"Productos"})}),u.jsx("li",{children:u.jsx(He,{to:"/blog",className:`text-lg ${U}`,onClick:_,children:"Blog"})}),u.jsx("li",{children:u.jsx(He,{to:"/contact",className:`text-lg ${U}`,onClick:_,children:"Contacto"})}),u.jsx("li",{children:u.jsx(He,{to:"/cart",className:`text-lg ${U}`,onClick:_,children:"Carrito"})}),u.jsx("li",{children:u.jsx(He,{to:"/wishlist",className:`text-lg ${U}`,onClick:_,children:"Favoritos"})}),o&&l&&u.jsx("li",{children:u.jsx(He,{to:"/admin",className:"text-lg font-medium text-blue-600",onClick:_,children:"Panel administrativo"})})]}),u.jsx("div",{className:"mt-4",children:o?u.jsx("button",{onClick:()=>{V(),_()},className:"w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar Sesión"}):u.jsx(He,{to:"/login",className:"block w-full px-4 py-2 text-sm font-medium text-center text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:_,children:"Iniciar Sesión"})}),u.jsxs("div",{className:"flex justify-center p-5 mt-auto space-x-6",children:[u.jsx("a",{href:"#",className:`text-2xl ${j}`,children:u.jsx(pP,{})}),u.jsx("a",{href:"#",className:`text-2xl ${j}`,children:u.jsx(fP,{})}),u.jsx("a",{href:"#",className:`text-2xl ${j}`,children:u.jsx(hP,{})}),u.jsx("a",{href:"#",className:`text-2xl ${j}`,children:u.jsx(mP,{})})]})]})]})]})},TP=()=>{const{items:t,getTotalPrice:e,loading:n,clearCart:s,coupon:o}=Bl(),{currentUser:l}=Yr(),d=Er(),[p,g]=R.useState([]),[y,x]=R.useState(null),[_,T]=R.useState({name:"",street:"",city:"",state:"",zipCode:"",country:"Colombia"}),[I,V]=R.useState(!1),[U,j]=R.useState(!0),[q,z]=R.useState(!1),F=t.reduce((O,C)=>O+C.price*C.quantity,0),ie=o?F-e():0,ee=e();R.useEffect(()=>{(async()=>{if(!l){d("/login");return}try{const C=dt(De,"users",l.uid),Ce=await $r(C);if(Ce.exists()){const G=Ce.data().addresses||[];g(G);const oe=G.find(ye=>ye.isDefault);oe?x(oe):G.length>0&&x(G[0])}}catch(C){console.error("Error loading addresses:",C),Ae.fire({title:"Error",text:"Error al cargar las direcciones",icon:"error",confirmButtonText:"Aceptar"})}finally{j(!1)}})()},[l,d]);const de=O=>{const{name:C,value:Ce}=O.target;T(_e=>({..._e,[C]:Ce}))},k=async O=>{if(O.preventDefault(),!_.name||!_.street||!_.city||!_.state||!_.zipCode){Ae.fire({title:"Error",text:"Por favor completa todos los campos de la dirección",icon:"error",confirmButtonText:"Aceptar"});return}try{const C=dt(De,"users",l.uid),Ce={..._,id:Date.now(),isDefault:p.length===0};await ms(C,{addresses:[...p,Ce]});const _e=[...p,Ce];g(_e),x(Ce),V(!1),T({name:"",street:"",city:"",state:"",zipCode:"",country:"Colombia"}),Ae.fire({title:"Dirección agregada",text:"La dirección se ha agregado correctamente",icon:"success",confirmButtonText:"Aceptar"})}catch(C){console.error("Error adding address:",C),Ae.fire({title:"Error",text:"Error al agregar la dirección: "+C.message,icon:"error",confirmButtonText:"Aceptar"})}},A=async(O,C)=>{try{const Ce={userId:l.uid,userEmail:l.email,items:t,subtotal:parseFloat(F),discount:parseFloat(ie),totalAmount:parseFloat(ee),address:y,paymentMethod:O,paymentStatus:C,orderStatus:"pending",coupon:o||null,createdAt:new Date,updatedAt:new Date},_e=Xt(De,"orders"),G=await jf(_e,Ce);return console.log("Order created with ID:",G.id),G.id}catch(Ce){throw console.error("Error creating order:",Ce),Ce}},S=(O,C)=>C.order.capture().then(async Ce=>{z(!0);try{await A("PayPal","completed"),s(),Ae.fire({title:"¡Pago exitoso!",text:`Gracias por tu compra, ${Ce.payer.name.given_name}!`,icon:"success",confirmButtonText:"Aceptar"}).then(()=>{d("/home")})}catch(_e){console.error("Error processing order:",_e),Ae.fire({title:"Error",text:"Hubo un error al procesar tu pedido. Por favor contacta al soporte.",icon:"error",confirmButtonText:"Aceptar"})}finally{z(!1)}}),M=O=>{console.error("PayPal payment error:",O),Ae.fire({title:"Error",text:"Hubo un error al procesar el pago con PayPal. Por favor intenta nuevamente.",icon:"error",confirmButtonText:"Aceptar"})},P=async()=>{if(!y){Ae.fire({title:"Error",text:"Por favor selecciona una dirección de envío",icon:"error",confirmButtonText:"Aceptar"});return}z(!0);try{await A("Cash on Delivery","pending"),s(),Ae.fire({title:"Pedido confirmado",text:"Tu pedido ha sido confirmado. Pagarás contra entrega.",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{d("/home")})}catch(O){console.error("Error processing order:",O),Ae.fire({title:"Error",text:"Error al procesar el pedido: "+O.message,icon:"error",confirmButtonText:"Aceptar"})}finally{z(!1)}};return n||U?u.jsxs("div",{children:[u.jsx(nf,{}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})})]}):t.length===0?(d("/cart"),null):u.jsxs("div",{children:[u.jsx(nf,{}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Checkout"}),u.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-x-12",children:[u.jsxs("div",{className:"lg:col-span-8",children:[u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-8",children:u.jsxs("div",{className:"px-4 py-6 sm:px-6",children:[u.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dirección de Envío"}),p.length===0?u.jsxs("div",{className:"text-center py-8",children:[u.jsxs("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),u.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay direcciones guardadas"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Agrega una nueva dirección para continuar."})]}):u.jsx("div",{className:"space-y-4",children:p.map(O=>u.jsx("div",{className:`border rounded-lg p-4 cursor-pointer ${y&&y.id===O.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>x(O),children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex items-center h-5",children:u.jsx("input",{type:"radio",name:"address",checked:y&&y.id===O.id,onChange:()=>x(O),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"})}),u.jsxs("div",{className:"ml-3",children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[O.name,O.isDefault&&u.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:"Predeterminada"})]}),u.jsxs("div",{className:"mt-1 text-sm text-gray-500",children:[u.jsx("p",{children:O.street}),u.jsxs("p",{children:[O.city,", ",O.state," ",O.zipCode]}),u.jsx("p",{children:O.country})]})]})]})},O.id))}),u.jsx("div",{className:"mt-6",children:u.jsxs("button",{type:"button",onClick:()=>V(!I),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[u.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),p.length===0?"Agregar Dirección":"Agregar Nueva Dirección"]})}),I&&u.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[u.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:p.length===0?"Agregar Dirección":"Nueva Dirección"}),u.jsxs("form",{onSubmit:k,children:[u.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre de la Dirección"}),u.jsx("input",{type:"text",name:"name",id:"name",value:_.name,onChange:de,placeholder:"Ej: Casa, Trabajo",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700",children:"Calle y Número"}),u.jsx("input",{type:"text",name:"street",id:"street",value:_.street,onChange:de,placeholder:"Ej: Av. Principal 123",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"Ciudad"}),u.jsx("input",{type:"text",name:"city",id:"city",value:_.city,onChange:de,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700",children:"Estado/Provincia"}),u.jsx("input",{type:"text",name:"state",id:"state",value:_.state,onChange:de,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700",children:"Código Postal"}),u.jsx("input",{type:"text",name:"zipCode",id:"zipCode",value:_.zipCode,onChange:de,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:"País"}),u.jsx("input",{type:"text",name:"country",id:"country",value:_.country,onChange:de,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),u.jsxs("div",{className:"mt-6 flex space-x-3",children:[u.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Guardar Dirección"}),u.jsx("button",{type:"button",onClick:()=>V(!1),className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"})]})]})]})]})}),u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:u.jsxs("div",{className:"px-4 py-6 sm:px-6",children:[u.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumen del Pedido"}),u.jsx("div",{className:"flow-root",children:u.jsx("ul",{className:"-my-6 divide-y divide-gray-200",children:t.map(O=>u.jsxs("li",{className:"py-6 flex",children:[u.jsx("div",{className:"flex-shrink-0 w-24 h-24 border border-gray-200 rounded-md overflow-hidden",children:u.jsx("img",{src:O.imageUrl||"https://via.placeholder.com/100x100.png?text=Moño",alt:O.name,className:"w-full h-full object-center object-cover",onError:C=>{C.target.onerror=null,C.target.src="https://via.placeholder.com/100x100.png?text=Moño"}})}),u.jsxs("div",{className:"ml-4 flex-1 flex flex-col",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[u.jsx("h3",{children:O.name}),u.jsxs("p",{className:"ml-4",children:["$",parseFloat(O.price*O.quantity).toLocaleString("es-CO")]})]}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:O.category})]}),u.jsx("div",{className:"flex-1 flex items-end justify-between text-sm",children:u.jsxs("p",{className:"text-gray-500",children:["Cantidad: ",O.quantity]})})]})]},O.id))})})]})})]}),u.jsx("div",{className:"mt-8 lg:mt-0 lg:col-span-4",children:u.jsxs("div",{className:"bg-gray-50 rounded-lg px-4 py-6 sm:p-6 lg:p-8",children:[u.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Resumen del Pedido"}),u.jsxs("dl",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("dt",{className:"text-sm text-gray-600",children:"Subtotal"}),u.jsxs("dd",{className:"text-sm font-medium text-gray-900",children:["$",parseFloat(F).toLocaleString("es-CO")]})]}),o&&u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("dt",{className:"text-sm text-gray-600",children:["Descuento (",o.code,")"]}),u.jsxs("dd",{className:"text-sm font-medium text-green-600",children:["-$",parseFloat(ie).toLocaleString("es-CO")]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("dt",{className:"text-sm text-gray-600",children:"Envío"}),u.jsx("dd",{className:"text-sm font-medium text-gray-900",children:"$0"})]}),u.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-6",children:[u.jsx("dt",{className:"text-base font-medium text-gray-900",children:"Total"}),u.jsxs("dd",{className:"text-base font-medium text-gray-900",children:["$",parseFloat(ee).toLocaleString("es-CO")]})]})]}),y&&u.jsxs("div",{className:"mt-8 p-4 bg-white rounded-lg border border-gray-200",children:[u.jsx("h3",{className:"text-md font-medium text-gray-900 mb-2",children:"Dirección de Envío"}),u.jsxs("div",{className:"text-sm text-gray-500",children:[u.jsx("p",{className:"font-medium",children:y.name}),u.jsx("p",{children:y.street}),u.jsxs("p",{children:[y.city,", ",y.state," ",y.zipCode]}),u.jsx("p",{children:y.country})]})]}),u.jsxs("div",{className:"mt-8",children:[u.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Método de Pago"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"w-full",children:y?u.jsx(sy,{style:{layout:"vertical"},createOrder:(O,C)=>C.order.create({purchase_units:[{amount:{value:parseFloat(ee).toFixed(2),currency_code:"COP"}}]}),onApprove:S,onError:M}):u.jsxs("button",{disabled:!0,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white opacity-50 cursor-not-allowed",children:[u.jsxs("svg",{className:"mr-2 h-5 w-5",viewBox:"0 0 38 24",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{fill:"#253b80",d:"M35.71 15.39c.27-.4.4-.87.36-1.35-.04-.48-.24-.93-.57-1.28-.33-.35-.76-.55-1.22-.56-.46 0-.89.19-1.22.53-.33.34-.52.8-.54 1.28-.02.48.12.94.4 1.33.28.39.68.67 1.14.8.46.13.95.1 1.4-.08.45-.18.84-.49 1.12-.89z"}),u.jsx("path",{fill:"#179bd7",d:"M13.34 15.96c.34-.46.52-1.02.51-1.59-.01-.57-.22-1.12-.59-1.54-.37-.42-.87-.67-1.41-.71-.54-.04-1.08.13-1.51.46-.43.33-.73.81-.85 1.35-.12.54-.07 1.11.14 1.62.21.51.57.94 1.03 1.23.46.29.99.42 1.53.37.54-.05 1.05-.27 1.47-.63z"}),u.jsx("path",{fill:"#253b80",d:"M22.72 16.11c.41-.36.67-.87.72-1.41.05-.54-.09-1.08-.39-1.51-.3-.43-.75-.73-1.26-.84-.51-.11-1.04-.06-1.52.14-.5.2-.88.54-1.15.97-.27.43-.41.94-.4 1.47.01.53.18 1.04.48 1.47.3.43.74.75 1.24.91.5.16 1.03.17 1.54.03.51-.14.96-.43 1.3-.83z"}),u.jsx("path",{fill:"#179bd7",d:"M30.21 16.26c.45-.31.75-.8.83-1.34.08-.54-.03-1.09-.31-1.55-.28-.46-.72-.81-1.23-.96-.51-.15-1.05-.13-1.55.05-.5.18-.92.51-1.19.94-.27.43-.4.93-.37 1.44.03.51.21.99.51 1.4.3.41.74.72 1.23.88.49.16 1.01.18 1.51.06.5-.12.94-.4 1.26-.78z"}),u.jsx("path",{fill:"#253b80",d:"M5.39 16.39c.47-.23.81-.66.93-1.16.12-.5.03-1.03-.25-1.45-.28-.42-.71-.71-1.2-.82-.49-.11-1-.08-1.46.09-.46.17-.85.49-1.11.89-.26.4-.37.88-.32 1.37.05.49.27.95.61 1.31.34.36.79.6 1.28.68.49.08 1-.01 1.44-.24z"})]}),"Pagar con PayPal"]})}),u.jsxs("button",{onClick:P,disabled:q||!y,className:`w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${q||!y?"opacity-50 cursor-not-allowed":""}`,children:[q?u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):u.jsx("svg",{className:"mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Pagar Contra Entrega"]})]})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsx("button",{onClick:()=>d("/cart"),className:"text-indigo-600 hover:text-indigo-500",children:"← Volver al Carrito"})})]})})]})]})]})},AP=()=>{const{currentUser:t,userRole:e,refreshUserData:n}=Yr(),s=Er(),[o,l]=R.useState({displayName:"",email:"",phone:"",profileImage:""}),[d,p]=R.useState({currentPassword:"",newPassword:"",confirmNewPassword:""}),[g,y]=R.useState([]),[x,_]=R.useState({id:Date.now(),name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1}),[T,I]=R.useState(null),[V,U]=R.useState({id:null,name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1}),[j,q]=R.useState("profile"),[z,F]=R.useState(!0),[ie,ee]=R.useState(!1),[de,k]=R.useState(!1),[A,S]=R.useState(!1);R.useEffect(()=>{(async()=>{if(!t){s("/login");return}try{const ce=dt(De,"users",t.uid),ge=await $r(ce);if(ge.exists()){const he=ge.data();l({displayName:he.displayName||t.displayName||"",email:t.email,phone:he.phone||"",profileImage:he.profileImage||t.photoURL||""}),y(he.addresses||[])}else l({displayName:t.displayName||"",email:t.email,phone:"",profileImage:t.photoURL||""}),y([])}catch(ce){console.error("Error loading profile:",ce),Ae.fire({title:"Error",text:"Error al cargar el perfil",icon:"error",confirmButtonText:"Aceptar"})}finally{F(!1)}})()},[t,s]);const M=te=>{const{name:ce,value:ge}=te.target;l(he=>({...he,[ce]:ge}))},P=te=>{const{name:ce,value:ge}=te.target;p(he=>({...he,[ce]:ge}))},O=te=>{const{name:ce,value:ge}=te.target;_(he=>({...he,[ce]:ge}))},C=te=>{const{name:ce,value:ge}=te.target;U(he=>({...he,[ce]:ge}))},Ce=te=>{const ce=te.target.files[0];if(ce){if(ce.size>2*1024*1024){Ae.fire({title:"Archivo muy grande",text:"La imagen debe ser menor a 2MB",icon:"warning",confirmButtonText:"Aceptar"});return}if(!ce.type.match("image.*")){Ae.fire({title:"Tipo de archivo inválido",text:"Por favor selecciona una imagen",icon:"warning",confirmButtonText:"Aceptar"});return}const ge=new FileReader;ge.onload=he=>{l(Be=>({...Be,profileImage:he.target.result}))},ge.readAsDataURL(ce)}},_e=async te=>{te.preventDefault(),ee(!0);try{const ce=dt(De,"users",t.uid),ge=await $r(ce);let he={...o,updatedAt:new Date};if(ge.exists()){const Be=ge.data();Be.hasOwnProperty("role")&&(he.role=Be.role),Be.hasOwnProperty("createdAt")&&(he.createdAt=Be.createdAt),Be.hasOwnProperty("addresses")&&(he.addresses=Be.addresses)}else he.role="customer",he.createdAt=new Date,he.addresses=[];await oa(ce,he),console.log("Profile saved, refreshing user data"),n(),Ae.fire({title:"Perfil actualizado",text:"Tu perfil se ha actualizado correctamente",icon:"success",confirmButtonText:"Aceptar"})}catch(ce){console.error("Error saving profile:",ce),Ae.fire({title:"Error",text:"Error al guardar el perfil: "+ce.message,icon:"error",confirmButtonText:"Aceptar"})}finally{ee(!1)}},G=async te=>{if(te.preventDefault(),k(!0),d.newPassword!==d.confirmNewPassword){Ae.fire({title:"Error",text:"Las contraseñas nuevas no coinciden",icon:"error",confirmButtonText:"Aceptar"}),k(!1);return}if(d.newPassword.length<6){Ae.fire({title:"Error",text:"La nueva contraseña debe tener al menos 6 caracteres",icon:"error",confirmButtonText:"Aceptar"}),k(!1);return}try{const ce=uo.credential(t.email,d.currentPassword);await kR(t,ce),await MR(t,d.newPassword),Ae.fire({title:"Contraseña actualizada",text:"Tu contraseña se ha actualizado correctamente",icon:"success",confirmButtonText:"Aceptar"}),p({currentPassword:"",newPassword:"",confirmNewPassword:""})}catch(ce){console.error("Error changing password:",ce);let ge="Error al cambiar la contraseña";switch(ce.code){case"auth/wrong-password":ge="La contraseña actual es incorrecta";break;case"auth/too-many-requests":ge="Demasiados intentos. Por favor, inténtalo más tarde";break;default:ge="Error al cambiar la contraseña: "+ce.message}Ae.fire({title:"Error",text:ge,icon:"error",confirmButtonText:"Aceptar"})}finally{k(!1)}},oe=async te=>{if(te.preventDefault(),S(!0),!x.name||!x.street||!x.city||!x.state||!x.zipCode||!x.country){Ae.fire({title:"Error",text:"Por favor completa todos los campos de la dirección",icon:"error",confirmButtonText:"Aceptar"}),S(!1);return}try{const ce=dt(De,"users",t.uid),ge={...x,id:Date.now()};if(g.length===0||x.isDefault){ge.isDefault=!0;const he=g.map(Be=>({...Be,isDefault:!1}));y([...he,ge])}else y([...g,ge]);await ms(ce,{addresses:l2(ge)}),Ae.fire({title:"Dirección agregada",text:"La dirección se ha agregado correctamente",icon:"success",confirmButtonText:"Aceptar"}),_({id:Date.now(),name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1})}catch(ce){console.error("Error adding address:",ce),Ae.fire({title:"Error",text:"Error al agregar la dirección: "+ce.message,icon:"error",confirmButtonText:"Aceptar"})}finally{S(!1)}},ye=te=>{I(te.id),U({...te})},Ue=()=>{I(null),U({id:null,name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1})},L=async te=>{if(te.preventDefault(),S(!0),!V.name||!V.street||!V.city||!V.state||!V.zipCode||!V.country){Ae.fire({title:"Error",text:"Por favor completa todos los campos de la dirección",icon:"error",confirmButtonText:"Aceptar"}),S(!1);return}try{const ce=dt(De,"users",t.uid),ge=g.find(Be=>Be.id===V.id);ge&&await ms(ce,{addresses:c2(ge)});const he={...V};await ms(ce,{addresses:l2(he)}),y(g.map(Be=>Be.id===V.id?he:Be)),Ae.fire({title:"Dirección actualizada",text:"La dirección se ha actualizado correctamente",icon:"success",confirmButtonText:"Aceptar"}),I(null),U({id:null,name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1})}catch(ce){console.error("Error updating address:",ce),Ae.fire({title:"Error",text:"Error al actualizar la dirección: "+ce.message,icon:"error",confirmButtonText:"Aceptar"})}finally{S(!1)}},ue=async te=>{Ae.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async ce=>{if(ce.isConfirmed)try{const ge=dt(De,"users",t.uid),he=g.find(Be=>Be.id===te);he&&(await ms(ge,{addresses:c2(he)}),y(g.filter(Be=>Be.id!==te)),Ae.fire({title:"Dirección eliminada",text:"La dirección se ha eliminado correctamente",icon:"success",confirmButtonText:"Aceptar"}))}catch(ge){console.error("Error deleting address:",ge),Ae.fire({title:"Error",text:"Error al eliminar la dirección: "+ge.message,icon:"error",confirmButtonText:"Aceptar"})}})},pe=async te=>{try{const ce=dt(De,"users",t.uid),ge=g.map(he=>({...he,isDefault:he.id===te}));y(ge),await ms(ce,{addresses:ge}),Ae.fire({title:"Dirección predeterminada",text:"La dirección se ha establecido como predeterminada",icon:"success",confirmButtonText:"Aceptar"})}catch(ce){console.error("Error setting default address:",ce),Ae.fire({title:"Error",text:"Error al establecer la dirección predeterminada: "+ce.message,icon:"error",confirmButtonText:"Aceptar"})}};return z?u.jsx("div",{children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})})}):u.jsx("div",{children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Mi Perfil"}),u.jsx("div",{className:"border-b border-gray-200 mb-8",children:u.jsxs("nav",{className:"-mb-px flex space-x-8",children:[u.jsx("button",{onClick:()=>q("profile"),className:`py-4 px-1 border-b-2 font-medium text-sm ${j==="profile"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Perfil"}),u.jsx("button",{onClick:()=>q("security"),className:`py-4 px-1 border-b-2 font-medium text-sm ${j==="security"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Seguridad"}),u.jsx("button",{onClick:()=>q("addresses"),className:`py-4 px-1 border-b-2 font-medium text-sm ${j==="addresses"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Direcciones"})]})}),j==="profile"&&u.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:u.jsx("div",{className:"px-6 py-8",children:u.jsxs("form",{onSubmit:_e,children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Foto de Perfil"}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"flex-shrink-0",children:o.profileImage?u.jsx("img",{src:o.profileImage,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-2 border-gray-300"}):u.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 border-2 border-gray-300 flex items-center justify-center",children:u.jsx("span",{className:"text-gray-500 text-3xl font-bold",children:o.displayName?.charAt(0)||o.email?.charAt(0)||"U"})})}),u.jsxs("div",{className:"ml-6",children:[u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:"Cambiar foto"}),u.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Ce})]}),u.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"JPG, GIF o PNG. Tamaño máximo 2MB"})]})]})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Información Personal"}),u.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700",children:"Nombre Completo"}),u.jsx("input",{type:"text",name:"displayName",id:"displayName",value:o.displayName,onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Correo Electrónico"}),u.jsx("input",{type:"email",name:"email",id:"email",value:o.email,disabled:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 bg-gray-100"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"El correo no puede ser modificado"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Teléfono"}),u.jsx("input",{type:"tel",name:"phone",id:"phone",value:o.phone,onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Rol"}),u.jsx("input",{type:"text",name:"role",id:"role",value:e||"customer",disabled:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 bg-gray-100"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"El rol no puede ser modificado"})]})]})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{type:"submit",disabled:ie,className:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:ie?"Guardando...":"Guardar Cambios"})})]})})}),j==="security"&&u.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:u.jsxs("div",{className:"px-6 py-8",children:[u.jsxs("form",{onSubmit:G,children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cambiar Contraseña"}),u.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:u.jsxs("div",{children:[u.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:"Contraseña Actual"}),u.jsx("input",{type:"password",name:"currentPassword",id:"currentPassword",value:d.currentPassword,onChange:P,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})}),u.jsxs("div",{className:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"Nueva Contraseña"}),u.jsx("input",{type:"password",name:"newPassword",id:"newPassword",value:d.newPassword,onChange:P,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmNewPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmar Nueva Contraseña"}),u.jsx("input",{type:"password",name:"confirmNewPassword",id:"confirmNewPassword",value:d.confirmNewPassword,onChange:P,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{type:"submit",disabled:de,className:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:de?"Guardando...":"Cambiar Contraseña"})})]}),u.jsxs("div",{className:"mt-12",children:[u.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dispositivos Activos"}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:u.jsx("svg",{className:"h-6 w-6 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Este dispositivo"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Última actividad: Ahora mismo"})]}),u.jsx("div",{className:"ml-auto",children:u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activo"})})]})}),u.jsx("div",{className:"mt-4 text-sm text-gray-500",children:u.jsx("p",{children:"Para seguridad adicional, si ves un dispositivo que no reconoces, cierra la sesión en todos los dispositivos y cambia tu contraseña."})})]})]})}),j==="addresses"&&u.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:u.jsxs("div",{className:"px-6 py-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:T?"Editar Dirección":"Agregar Nueva Dirección"}),u.jsxs("form",{onSubmit:T?L:oe,children:[u.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"addressName",className:"block text-sm font-medium text-gray-700",children:"Nombre de la Dirección"}),u.jsx("input",{type:"text",name:"name",id:"addressName",value:T?V.name:x.name,onChange:T?C:O,placeholder:"Ej: Casa, Trabajo",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"addressStreet",className:"block text-sm font-medium text-gray-700",children:"Calle y Número"}),u.jsx("input",{type:"text",name:"street",id:"addressStreet",value:T?V.street:x.street,onChange:T?C:O,placeholder:"Ej: Av. Principal 123",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"addressCity",className:"block text-sm font-medium text-gray-700",children:"Ciudad"}),u.jsx("input",{type:"text",name:"city",id:"addressCity",value:T?V.city:x.city,onChange:T?C:O,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"addressState",className:"block text-sm font-medium text-gray-700",children:"Estado/Provincia"}),u.jsx("input",{type:"text",name:"state",id:"addressState",value:T?V.state:x.state,onChange:T?C:O,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"addressZipCode",className:"block text-sm font-medium text-gray-700",children:"Código Postal"}),u.jsx("input",{type:"text",name:"zipCode",id:"addressZipCode",value:T?V.zipCode:x.zipCode,onChange:T?C:O,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"addressCountry",className:"block text-sm font-medium text-gray-700",children:"País"}),u.jsx("input",{type:"text",name:"country",id:"addressCountry",value:T?V.country:x.country,onChange:T?C:O,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{id:"addressIsDefault",name:"isDefault",type:"checkbox",checked:T?V.isDefault:x.isDefault,onChange:te=>T?U(ce=>({...ce,isDefault:te.target.checked})):_(ce=>({...ce,isDefault:te.target.checked})),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),u.jsx("label",{htmlFor:"addressIsDefault",className:"ml-2 block text-sm text-gray-900",children:"Establecer como dirección predeterminada"})]})]}),u.jsxs("div",{className:"mt-6 flex space-x-3",children:[u.jsx("button",{type:"submit",disabled:A,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:A?"Guardando...":T?"Guardar Cambios":"Agregar Dirección"}),T&&u.jsx("button",{type:"button",onClick:Ue,className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"})]})]})]}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Direcciones Guardadas"}),g.length===0?u.jsxs("div",{className:"text-center py-8",children:[u.jsxs("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),u.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay direcciones"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Agrega tu primera dirección usando el formulario de arriba."})]}):u.jsx("div",{className:"space-y-4",children:g.map(te=>u.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-gray-900",children:te.name}),u.jsx("p",{className:"text-sm text-gray-500",children:te.street}),u.jsxs("p",{className:"text-sm text-gray-500",children:[te.city,", ",te.state," ",te.zipCode]}),u.jsx("p",{className:"text-sm text-gray-500",children:te.country}),te.isDefault&&u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 mt-2",children:"Predeterminada"})]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{onClick:()=>ye(te),className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-indigo-700 bg-indigo-100 hover:bg-indigo-200",children:"Editar"}),u.jsx("button",{onClick:()=>pe(te.id),disabled:te.isDefault,className:`inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-indigo-700 ${te.isDefault?"bg-gray-100":"bg-indigo-100 hover:bg-indigo-200"}`,children:te.isDefault?"Predeterminada":"Hacer Predeterminada"}),u.jsx("button",{onClick:()=>ue(te.id),className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-red-700 bg-red-100 hover:bg-red-200",children:"Eliminar"})]})]})},te.id))})]})]})})]})})})},NP=()=>{const[t,e]=R.useState(""),[n,s]=R.useState(""),[o,l]=R.useState(""),[d,p]=R.useState(!1),g=Er(),{currentUser:y}=Yr();qn.useEffect(()=>{y&&g("/home")},[y,g]);const x=async()=>{l(""),p(!0);try{const T=new fs,V=(await W1(Fr,T)).user,U=dt(De,"users",V.uid);(await $r(U)).exists()||(await oa(U,{email:V.email,displayName:V.displayName||"",profileImage:V.photoURL||"",createdAt:new Date,role:"customer"}),console.log("User info stored successfully for Google user")),g("/home")}catch(T){console.error("Google sign-in error:",T),l("Error al iniciar sesión con Google. Por favor, inténtalo de nuevo.")}finally{p(!1)}},_=async T=>{T.preventDefault(),l(""),p(!0);try{await PR(Fr,t,n),g("/home")}catch(I){switch(I.code){case"auth/user-not-found":l("No se encontró una cuenta con ese correo electrónico.");break;case"auth/wrong-password":l("Contraseña incorrecta.");break;case"auth/invalid-email":l("El correo electrónico no es válido.");break;case"auth/user-disabled":l("Esta cuenta ha sido deshabilitada.");break;default:l("Error al iniciar sesión. Por favor, verifica tus credenciales.")}}finally{p(!1)}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white py-12 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full space-y-8",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:u.jsx("svg",{className:"h-6 w-6 text-purple-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Login"}),u.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"See your growth and get consulting support!"})]}),o&&u.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:u.jsx("span",{className:"block sm:inline",children:o})}),u.jsx("div",{children:u.jsxs("button",{onClick:x,disabled:d,className:"w-full flex items-center justify-center gap-3 rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50",children:[u.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[u.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),u.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),u.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),u.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),u.jsx("span",{children:"Sign in with Google"})]})}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"bg-white px-2 text-gray-500",children:"or Sign in with Email"})})]}),u.jsxs("form",{className:"mt-8 space-y-6",onSubmit:_,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email*"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"mail@website.com",value:t,onChange:T=>e(T.target.value),disabled:d})})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password*"}),u.jsx("div",{className:"text-sm",children:u.jsx(He,{to:"/reset-password",className:"font-medium text-purple-600 hover:text-purple-500",children:"Forgot password?"})})]}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"Min. 8 character",value:n,onChange:T=>s(T.target.value),disabled:d})})]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),u.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),u.jsx("div",{children:u.jsx("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-full text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:d?"Logging in...":"Login"})})]}),u.jsx("div",{className:"text-center",children:u.jsxs("p",{className:"text-sm text-gray-500",children:["Not registered yet?"," ",u.jsx(He,{to:"/register",className:"font-medium text-purple-600 hover:text-purple-500",children:"Create an Account"})]})}),u.jsx("div",{className:"mt-8 text-center",children:u.jsx("p",{className:"text-xs text-gray-500",children:"©2020 Felix All rights reserved."})})]})})},SP=()=>{const[t,e]=R.useState(""),[n,s]=R.useState(""),[o,l]=R.useState(""),[d,p]=R.useState(""),[g,y]=R.useState(""),[x,_]=R.useState(!1),T=Er(),{firebaseError:I}=Yr(),V=async()=>{p(""),y(""),_(!0);try{const j=new fs,z=(await W1(Fr,j)).user,F=dt(De,"users",z.uid);(await $r(F)).exists()||(await oa(F,{email:z.email,displayName:z.displayName||"",profileImage:z.photoURL||"",createdAt:new Date,role:"customer"}),console.log("User info stored successfully for Google user")),T("/home")}catch(j){console.error("Google sign-up error:",j),p("Error al registrarse con Google. Por favor, inténtalo de nuevo.")}finally{_(!1)}},U=async j=>{if(j.preventDefault(),p(""),y(""),I){p(I);return}if(!Fr||!De){p("Firebase no está configurado correctamente. Por favor, verifica tu archivo .env");return}if(n!==o){p("Las contraseñas no coinciden");return}if(n.length<6){p("La contraseña debe tener al menos 6 caracteres");return}_(!0);try{console.log("Attempting to create user with email:",t);const z=(await OR(Fr,t,n)).user;console.log("User created successfully:",z),console.log("Storing user info in Firestore..."),await oa(dt(De,"users",z.uid),{email:z.email,displayName:"",profileImage:"",createdAt:new Date,role:"customer"}),console.log("User info stored successfully"),y("Cuenta creada exitosamente. Redirigiendo..."),setTimeout(()=>{T("/home")},2e3)}catch(q){switch(console.error("Registration error:",q),console.error("Error code:",q.code),console.error("Error message:",q.message),q.code){case"auth/email-already-in-use":p("Este correo electrónico ya está registrado.");break;case"auth/invalid-email":p("El correo electrónico no es válido.");break;case"auth/operation-not-allowed":p("El registro de usuarios está deshabilitado. Por favor, habilita la autenticación en la consola de Firebase.");break;case"auth/weak-password":p("La contraseña es muy débil.");break;default:p(`Error al crear la cuenta: ${q.message}`)}}finally{_(!1)}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white py-12 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full space-y-8",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:u.jsx("svg",{className:"h-6 w-6 text-purple-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Register"}),u.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Create an account to get started!"})]}),I&&u.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[u.jsx("strong",{className:"font-bold",children:"Configuración incompleta! "}),u.jsx("span",{className:"block sm:inline",children:I})]}),d&&u.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:u.jsx("span",{className:"block sm:inline",children:d})}),g&&u.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:u.jsx("span",{className:"block sm:inline",children:g})}),u.jsx("div",{children:u.jsxs("button",{onClick:V,disabled:x||I,className:"w-full flex items-center justify-center gap-3 rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50",children:[u.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[u.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),u.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),u.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),u.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),u.jsx("span",{children:"Sign up with Google"})]})}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"bg-white px-2 text-gray-500",children:"or Sign up with Email"})})]}),u.jsxs("form",{className:"mt-8 space-y-6",onSubmit:U,children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email*"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"mail@website.com",value:t,onChange:j=>e(j.target.value),disabled:I||x})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password*"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"Min. 8 character",value:n,onChange:j=>s(j.target.value),disabled:I||x})})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm Password*"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"Confirm your password",value:o,onChange:j=>l(j.target.value),disabled:I||x})})]})]}),u.jsx("div",{children:u.jsx("button",{type:"submit",disabled:x||I,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-full text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:x?"Creating Account...":"Create Account"})})]}),u.jsx("div",{className:"text-center",children:u.jsxs("p",{className:"text-sm text-gray-500",children:["Already have an account?"," ",u.jsx(He,{to:"/login",className:"font-medium text-purple-600 hover:text-purple-500",children:"Sign in"})]})}),u.jsx("div",{className:"mt-8 text-center",children:u.jsx("p",{className:"text-xs text-gray-500",children:"©2020 Felix All rights reserved."})})]})})},CP=()=>{const[t,e]=R.useState(""),[n,s]=R.useState(""),[o,l]=R.useState(""),[d,p]=R.useState(!1);Er();const g=async y=>{y.preventDefault(),l(""),s(""),p(!0);try{await DR(Fr,t),s("Se ha enviado un correo para restablecer tu contraseña. Revisa tu bandeja de entrada.")}catch(x){switch(x.code){case"auth/user-not-found":l("No se encontró una cuenta con ese correo electrónico.");break;case"auth/invalid-email":l("El correo electrónico no es válido.");break;default:l("Error al enviar el correo de restablecimiento. Por favor, inténtalo de nuevo.")}}finally{p(!1)}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white py-12 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"max-w-md w-full space-y-8",children:[u.jsxs("div",{children:[u.jsx("div",{className:"mx-auto h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:u.jsx("svg",{className:"h-6 w-6 text-purple-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),u.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Restablecer Contraseña"}),u.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña."})]}),n&&u.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:u.jsx("span",{className:"block sm:inline",children:n})}),o&&u.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:u.jsx("span",{className:"block sm:inline",children:o})}),u.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Correo Electrónico"}),u.jsx("div",{className:"mt-1",children:u.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"mail@website.com",value:t,onChange:y=>e(y.target.value),disabled:d})})]}),u.jsx("div",{children:u.jsx("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-full text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:d?"Enviando...":"Enviar Enlace de Restablecimiento"})})]}),u.jsx("div",{className:"text-center",children:u.jsx(He,{to:"/login",className:"font-medium text-purple-600 hover:text-purple-500",children:"← Volver al inicio de sesión"})}),u.jsx("div",{className:"mt-8 text-center",children:u.jsx("p",{className:"text-xs text-gray-500",children:"©2020 Felix All rights reserved."})})]})})},P2=async()=>{try{const t=Xt(De,"users");return(await bn(t)).docs.map(s=>({id:s.id,...s.data()}))}catch(t){throw console.error("Error fetching users:",t),t}},RP=async(t,e)=>{try{const n=dt(De,"users",t);return await ms(n,{role:e}),{id:t,role:e}}catch(n){throw console.error("Error updating user role:",n),n}},rg=t=>{switch(t){case"pending":return"Pendiente";case"processing":return"Procesando";case"shipped":return"Enviado";case"delivered":return"Entregado";case"cancelled":return"Cancelado";default:return t}},sg=t=>{switch(t){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-indigo-100 text-indigo-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},jP=async t=>{try{const e=Xt(De,"orders"),n=li(e,pu("userId","==",t),Ul("createdAt","desc"));return(await bn(n)).docs.map(l=>({id:l.id,...l.data()}))}catch(e){if(console.error("Error fetching orders:",e),e.code==="failed-precondition"||e.message&&e.message.includes("index"))try{const n=Xt(De,"orders"),s=li(n,pu("userId","==",t));return(await bn(s)).docs.map(p=>({id:p.id,...p.data()})).sort((p,g)=>{const y=p.createdAt?.toDate?p.createdAt.toDate():new Date(p.createdAt);return(g.createdAt?.toDate?g.createdAt.toDate():new Date(g.createdAt))-y})}catch(n){throw console.error("Error fetching orders without index:",n),n}else throw e}},IP=async()=>{try{const t=Xt(De,"orders"),e=li(t,Ul("createdAt","desc"));return(await bn(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(t){if(console.error("Error fetching all orders:",t),t.code==="failed-precondition"||t.message&&t.message.includes("index"))try{const e=Xt(De,"orders");return(await bn(e)).docs.map(l=>({id:l.id,...l.data()})).sort((l,d)=>{const p=l.createdAt?.toDate?l.createdAt.toDate():new Date(l.createdAt);return(d.createdAt?.toDate?d.createdAt.toDate():new Date(d.createdAt))-p})}catch(e){throw console.error("Error fetching all orders without index:",e),e}else throw t}},kP=()=>{const[t,e]=R.useState([]),[n,s]=R.useState(!0),[o,l]=R.useState(null),[d,p]=R.useState(""),[g,y]=R.useState({code:"",discountType:"percentage",discountValue:"",isActive:!0,expiryDate:""}),[x,_]=R.useState(null),T=Xt(De,"coupons"),I=async()=>{try{const de=li(T,Ul("createdAt","desc")),k=await bn(de);e(k.docs.map(A=>({...A.data(),id:A.id})))}catch(de){console.error("Firebase error fetching coupons: ",de),l("No se pudieron cargar los cupones. Revisa las reglas de seguridad de Firebase y la consola del navegador.")}s(!1)};R.useEffect(()=>{I()},[]);const V=de=>{p(de),setTimeout(()=>p(""),3e3)},U=de=>{const{name:k,value:A,type:S,checked:M}=de.target;y({...g,[k]:S==="checkbox"?M:A})},j=de=>{const{name:k,value:A,type:S,checked:M}=de.target;_({...x,[k]:S==="checkbox"?M:A})},q=async de=>{if(de.preventDefault(),!g.code||!g.discountValue){l("Por favor, completa todos los campos obligatorios.");return}if(g.discountType==="percentage"&&(g.discountValue<1||g.discountValue>100)){l("El porcentaje de descuento debe estar entre 1 y 100.");return}try{const k={code:g.code.toUpperCase(),discountType:g.discountType,discountValue:parseFloat(g.discountValue),isActive:g.isActive,createdAt:new Date,...g.expiryDate&&{expiryDate:new Date(g.expiryDate)}};await jf(T,k),y({code:"",discountType:"percentage",discountValue:"",isActive:!0,expiryDate:""}),l(null),V("Cupón creado exitosamente!"),I()}catch(k){console.error("Firebase error creating coupon: ",k),l("Error al crear el cupón. ¿Tienes permisos de escritura?")}},z=async(de,k)=>{if(window.confirm(`¿Estás seguro de que quieres eliminar el cupón "${k}"?`))try{const S=dt(De,"coupons",de);await F0(S),e(t.filter(M=>M.id!==de)),V("Cupón eliminado exitosamente!")}catch(S){console.error("Firebase error deleting coupon: ",S),l("Error al eliminar el cupón. ¿Tienes permisos de escritura?")}},F=async de=>{if(de.preventDefault(),!x.code||!x.discountValue){l("Por favor, completa todos los campos obligatorios.");return}if(x.discountType==="percentage"&&(x.discountValue<1||x.discountValue>100)){l("El porcentaje de descuento debe estar entre 1 y 100.");return}try{const k=dt(De,"coupons",x.id),A={code:x.code.toUpperCase(),discountType:x.discountType,discountValue:parseFloat(x.discountValue),isActive:x.isActive,updatedAt:new Date,...x.expiryDate&&{expiryDate:new Date(x.expiryDate)}};await ms(k,A),_(null),l(null),V("Cupón actualizado exitosamente!"),I()}catch(k){console.error("Firebase error updating coupon: ",k),l("Error al actualizar el cupón. ¿Tienes permisos de escritura?")}},ie=de=>de?de instanceof Date?de.toLocaleDateString("es-CO"):de.toDate?de.toDate().toLocaleDateString("es-CO"):"N/A":"N/A",ee=de=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(de||0);return u.jsxs("div",{className:"mt-8",children:[d&&u.jsxs("div",{className:"relative px-4 py-3 mb-4 text-green-700 bg-green-100 border border-green-400 rounded",role:"alert",children:[u.jsx("strong",{className:"font-bold",children:"Éxito! "}),u.jsx("span",{className:"block sm:inline",children:d})]}),o&&u.jsxs("div",{className:"relative px-4 py-3 mb-4 text-red-700 bg-red-100 border border-red-400 rounded",role:"alert",children:[u.jsx("strong",{className:"font-bold",children:"Error! "}),u.jsx("span",{className:"block sm:inline",children:o})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-8",children:[u.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:u.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:x?"Editar Cupón":"Agregar Nuevo Cupón"})}),u.jsx("div",{className:"px-4 py-5 sm:p-6",children:u.jsxs("form",{onSubmit:x?F:q,children:[u.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700",children:"Código del Cupón *"}),u.jsx("input",{type:"text",name:"code",id:"code",required:!0,value:x?x.code:g.code,onChange:x?j:U,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Ej: DESCUENTO10"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"discountType",className:"block text-sm font-medium text-gray-700",children:"Tipo de Descuento *"}),u.jsxs("select",{name:"discountType",id:"discountType",required:!0,value:x?x.discountType:g.discountType,onChange:x?j:U,className:"mt-1 block w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[u.jsx("option",{value:"percentage",children:"Porcentaje"}),u.jsx("option",{value:"fixed",children:"Monto Fijo"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"discountValue",className:"block text-sm font-medium text-gray-700",children:"Valor del Descuento *"}),u.jsx("input",{type:"number",name:"discountValue",id:"discountValue",required:!0,min:"0",step:"0.01",value:x?x.discountValue:g.discountValue,onChange:x?j:U,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:x?x.discountType==="percentage"?"Ej: 15":"Ej: 5000":g.discountType==="percentage"?"Ej: 15":"Ej: 5000"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:x?x.discountType==="percentage"?"Porcentaje de descuento (1-100%)":"Monto fijo en COP":g.discountType==="percentage"?"Porcentaje de descuento (1-100%)":"Monto fijo en COP"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"expiryDate",className:"block text-sm font-medium text-gray-700",children:"Fecha de Expiración"}),u.jsx("input",{type:"date",name:"expiryDate",id:"expiryDate",value:x?x.expiryDate:g.expiryDate,onChange:x?j:U,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),u.jsx("div",{className:"sm:col-span-2",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{id:"isActive",name:"isActive",type:"checkbox",checked:x?x.isActive:g.isActive,onChange:x?j:U,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),u.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"Cupón Activo"})]})})]}),u.jsx("div",{className:"mt-6 flex space-x-3",children:x?u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Guardar Cambios"}),u.jsx("button",{type:"button",onClick:()=>_(null),className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"})]}):u.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Crear Cupón"})})]})})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[u.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:u.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Cupones Existentes"})}),u.jsx("div",{className:"px-4 py-5 sm:px-6",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Código"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Tipo"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Valor"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Estado"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Expiración"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?u.jsx("tr",{children:u.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:"w-6 h-6 border-b-2 border-gray-900 rounded-full animate-spin"})})})}):o?u.jsx("tr",{children:u.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-red-500",children:o})}):t.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No hay cupones disponibles"})}):t.map(de=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"text-sm font-medium text-gray-900",children:de.code})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:de.discountType==="percentage"?"Porcentaje":"Monto Fijo"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:de.discountType==="percentage"?`${de.discountValue}%`:ee(de.discountValue)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:de.isActive?u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activo"}):u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactivo"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:de.expiryDate?ie(de.expiryDate):"Nunca"}),u.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:[u.jsx("button",{onClick:()=>_(de),className:"mr-3 text-indigo-600 hover:text-indigo-900",children:"Editar"}),u.jsx("button",{onClick:()=>z(de.id,de.code),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},de.id))})]})})})]})]})},qT=({order:t,isOpen:e,onClose:n,formatDate:s,formatCurrency:o,getOrderStatusText:l,getStatusBadgeClass:d})=>!e||!t?null:u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:u.jsx("div",{className:"relative w-full max-w-2xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Detalles de la Orden"}),u.jsx("button",{onClick:n,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),u.jsxs("div",{className:"mt-2 space-y-6",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Información de la Orden"}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"ID de Orden"}),u.jsx("p",{className:"font-medium",children:t.id})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Fecha"}),u.jsx("p",{className:"font-medium",children:s(t.createdAt)})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Estado"}),u.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d(t.orderStatus||"pending")}`,children:l(t.orderStatus||"pending")})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Método de Pago"}),u.jsx("p",{className:"font-medium",children:t.paymentMethod||"N/A"}),u.jsx("p",{className:"text-sm text-gray-500",children:t.paymentStatus==="completed"?"Pagado":"Pendiente"})]})]})})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Información del Cliente"}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Nombre"}),u.jsx("p",{className:"font-medium",children:t.userEmail||"N/A"})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"ID de Usuario"}),u.jsx("p",{className:"font-medium",children:t.userId?.substring(0,8)||"N/A"})]})]})})]}),t.address&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Dirección de Envío"}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("p",{className:"font-medium",children:t.address.name}),u.jsx("p",{children:t.address.street}),u.jsxs("p",{children:[t.address.city,", ",t.address.state," ",t.address.zipCode]}),u.jsx("p",{children:t.address.country})]})]}),t.coupon&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Cupón de Descuento"}),u.jsx("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Código"}),u.jsx("p",{className:"font-medium",children:t.coupon.code})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Descuento"}),u.jsx("p",{className:"font-medium",children:t.coupon.discountType==="percentage"?`${t.coupon.discountValue}%`:o(t.coupon.discountValue)})]})]})})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Productos"}),u.jsx("div",{className:"bg-gray-50 rounded-lg divide-y divide-gray-200",children:t.items?.map((p,g)=>u.jsx("div",{className:"p-4",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"flex-shrink-0 w-16 h-16 border border-gray-200 rounded-md overflow-hidden",children:u.jsx("img",{src:p.imageUrl||"https://via.placeholder.com/64x64.png?text=Moño",alt:p.name,className:"w-full h-full object-center object-cover",onError:y=>{y.target.onerror=null,y.target.src="https://via.placeholder.com/64x64.png?text=Moño"}})}),u.jsxs("div",{className:"ml-4 flex-1",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("h5",{className:"font-medium text-gray-900",children:p.name}),u.jsx("p",{className:"font-medium",children:o(p.price*p.quantity)})]}),u.jsx("p",{className:"text-sm text-gray-500",children:p.category}),u.jsxs("div",{className:"flex justify-between mt-1",children:[u.jsxs("p",{className:"text-sm text-gray-500",children:["Cantidad: ",p.quantity]}),u.jsxs("p",{className:"text-sm text-gray-500",children:["Precio unitario: ",o(p.price)]})]})]})]})},g))})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Resumen del Pedido"}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("p",{className:"text-gray-600",children:"Subtotal"}),u.jsx("p",{className:"font-medium",children:o(t.subtotal||0)})]}),t.coupon&&u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("p",{className:"text-gray-600",children:["Descuento (",t.coupon.code,")"]}),u.jsxs("p",{className:"font-medium text-green-600",children:["-",o(t.discount||0)]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("p",{className:"text-gray-600",children:"Envío"}),u.jsx("p",{className:"font-medium",children:"$0"})]}),u.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[u.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Total"}),u.jsx("p",{className:"text-lg font-medium text-gray-900",children:o(t.totalAmount||0)})]})]})]})]}),u.jsx("div",{className:"flex justify-end pt-4",children:u.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar"})})]})})});function M2(t){return xt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function L2(t){return xt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function DP(t){return xt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function OP(t){return xt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function V2(t){return xt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(t)}function U2(t){return xt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function PP(t){return xt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function oh(t){return xt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"path",attr:{d:"M16 10a4 4 0 0 1-8 0"},child:[]}]})(t)}function B2(t){return xt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(t)}function MP(t){return xt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(t)}function z2(t){return xt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function F2(t){return xt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function ig(t){return xt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const LP=()=>{const{currentUser:t,isAdmin:e}=Yr(),n=Er(),[s,o]=R.useState(!1),[l,d]=R.useState("analytics"),[p,g]=R.useState({totalProducts:0,totalOrders:0,totalUsers:0,totalReviews:0,totalRevenue:0,recentOrders:[],recentUsers:[]}),[y,x]=R.useState(!1),[_,T]=R.useState([]),[I,V]=R.useState(!1),[U,j]=R.useState({name:"",description:"",price:"",imageUrls:[],primaryImageIndex:0,category:"",material:"",color:"",size:"",style:"",stock:0,rating:0}),[q,z]=R.useState(null),[F,ie]=R.useState(!1),[ee,de]=R.useState("add"),[k,A]=R.useState([]),[S,M]=R.useState(!1),[P,O]=R.useState([]),[C,Ce]=R.useState(!1),[_e,G]=R.useState(null),[oe,ye]=R.useState(!1),[Ue,L]=R.useState([]),[ue,pe]=R.useState(!1),[te,ce]=R.useState(null),[ge,he]=R.useState(!1),[Be,rt]=R.useState({}),[kn,Ss]=R.useState(!1),Qr=R.useRef(null),[Cs,Ye]=R.useState(null),[Rs,vo]=R.useState(""),[js,an]=R.useState(!1);R.useEffect(()=>{const H=me=>{Qr.current&&!Qr.current.contains(me.target)&&Ss(!1)};return document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[]);const xo=()=>{Ss(!kn)},Tt=()=>{Ss(!1)},Ut=async()=>{try{await U1(Fr),Tt(),n("/login")}catch(H){console.error("Error signing out:",H),Ye("Error al cerrar sesión")}},on=H=>{vo(H),setTimeout(()=>vo(""),3e3)},Is=H=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(H||0),Tr=H=>H?H instanceof Date?H.toLocaleDateString("es-CO"):H.toDate?H.toDate().toLocaleDateString("es-CO"):"N/A":"N/A",wo=async()=>{try{x(!0);const me=(await bn(Xt(De,"products"))).size,Ee=await bn(Xt(De,"orders")),We=Ee.size;let Gt=0;Ee.docs.forEach(mt=>{const To=mt.data();Gt+=To.totalAmount||0});const ir=await P2(),An=ir.length,fi=(await S2()).length,or=li(Xt(De,"orders"),Ul("createdAt","desc"),o5(5)),Jr=(await bn(or)).docs.map(mt=>({id:mt.id,...mt.data()})),es=ir.slice(0,5);g({totalProducts:me,totalOrders:We,totalUsers:An,totalReviews:fi,totalRevenue:Gt,recentOrders:Jr,recentUsers:es})}catch(H){console.error("Error fetching dashboard stats:",H),Ye("Error al cargar las estadísticas del dashboard")}finally{x(!1)}},Ar=async()=>{try{V(!0);const me=(await bn(Xt(De,"products"))).docs.map(Ee=>({id:Ee.id,...Ee.data()}));T(me)}catch(H){console.error("Error fetching products:",H),Ye("Error al cargar los productos")}finally{V(!1)}},Xr=async()=>{try{M(!0);const H=await P2();A(H)}catch(H){console.error("Error fetching users:",H),Ye("Error al cargar los usuarios")}finally{M(!1)}},Zt=async()=>{try{Ce(!0);const H=await S2();O(H)}catch(H){console.error("Error fetching reviews:",H),Ye("Error al cargar las reseñas")}finally{Ce(!1)}},Dn=async()=>{try{pe(!0);const H=await IP();L(H)}catch(H){console.error("Error fetching orders:",H),Ye("Error al cargar los pedidos")}finally{pe(!1)}};R.useEffect(()=>{if(e)switch(x(!1),V(!1),M(!1),Ce(!1),pe(!1),l){case"analytics":wo();break;case"products":V(!0),Ar();break;case"users":M(!0),Xr();break;case"reviews":Ce(!0),Zt();break;case"orders":pe(!0),Dn();break;default:wo()}},[l,e]);const ft=H=>{j({...U,[H.target.name]:H.target.value})},On=H=>{z({...q,[H.target.name]:H.target.value})},bo=async H=>{if(!H)return null;if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(H.type))return Ye("Por favor, sube una imagen válida (JPEG, JPG, PNG, GIF)."),null;if(H.size>1024*1024)return Ye("La imagen debe ser menor a 1MB."),null;try{an(!0);const Ee=await _o(H);return{name:H.name,type:H.type,data:Ee,timestamp:Date.now()}}catch(Ee){return console.error("Error converting file to base64:",Ee),Ye("Error al procesar la imagen: "+Ee.message),null}finally{an(!1)}},_o=H=>new Promise((me,Ee)=>{const We=new FileReader;We.readAsDataURL(H),We.onload=()=>me(We.result),We.onerror=Gt=>Ee(Gt)}),rr=async(H=!1)=>{const me=document.createElement("input");me.type="file",me.accept="image/*",me.multiple=!0,me.onchange=async Ee=>{const We=Array.from(Ee.target.files);if(!We.length)return;const Gt=H?q.imageUrls:U.imageUrls;if(Gt.length+We.length>4){Ye(`Solo puedes subir un máximo de 4 imágenes. Actualmente tienes ${Gt.length} imágenes.`);return}const ir=[];for(const An of We){const ar=await bo(An);ar&&ir.push(ar)}ir.length>0&&(H?z({...q,imageUrls:[...q.imageUrls,...ir]}):j({...U,imageUrls:[...U.imageUrls,...ir]}),on(`${ir.length} imagen(es) subida(s) exitosamente!`))},me.click()},Nr=(H,me=!1)=>{if(me){const Ee=[...q.imageUrls];Ee.splice(H,1),z({...q,imageUrls:Ee})}else{const Ee=[...U.imageUrls];Ee.splice(H,1),j({...U,imageUrls:Ee})}},Pn=(H,me=!1)=>{me?z({...q,primaryImageIndex:H}):j({...U,primaryImageIndex:H})},Tn=async H=>{if(H.preventDefault(),!U.name||!U.price){Ye("Por favor, introduce al menos un nombre y un precio.");return}try{const me=parseFloat(U.price);if(isNaN(me)){Ye("El precio debe ser un número válido.");return}const Ee=parseInt(U.stock);if(isNaN(Ee)){Ye("El stock debe ser un número válido.");return}const We=parseFloat(U.rating);if(isNaN(We)||We<0||We>5){Ye("La calificación debe ser un número entre 0 y 5.");return}await jf(Xt(De,"products"),{...U,price:me,stock:Ee,rating:We,createdAt:new Date}),j({name:"",description:"",price:"",stock:0,rating:0,imageUrls:[],primaryImageIndex:0,category:"",material:"",color:"",size:"",style:""}),on("Producto añadido exitosamente!"),ie(!1),Ar()}catch(me){console.error("Firebase error: ",me),Ye("Error al crear el producto. ¿Tienes permisos de escritura?")}},Sr=async H=>{if(H.preventDefault(),!q.name||!q.price){Ye("Por favor, introduce al menos un nombre y un precio.");return}try{const me=parseFloat(q.price);if(isNaN(me)){Ye("El precio debe ser un número válido.");return}const Ee=parseInt(q.stock);if(isNaN(Ee)){Ye("El stock debe ser un número válido.");return}const We=parseFloat(q.rating);if(isNaN(We)||We<0||We>5){Ye("La calificación debe ser un número entre 0 y 5.");return}const Gt=dt(De,"products",q.id);await ms(Gt,{...q,price:me,stock:Ee,rating:We,updatedAt:new Date}),on("Producto actualizado exitosamente!"),ie(!1),z(null),Ar()}catch(me){console.error("Firebase error: ",me),Ye("Error al actualizar el producto. ¿Tienes permisos de escritura?")}},di=async(H,me)=>{if(window.confirm(`¿Estás seguro de que quieres eliminar el producto "${me}"?`))try{const We=dt(De,"products",H);await F0(We),T(_.filter(Gt=>Gt.id!==H)),on("Producto eliminado exitosamente!")}catch(We){console.error("Firebase error: ",We),Ye("Error al eliminar el producto. ¿Tienes permisos de escritura?")}},ha=()=>{j({name:"",description:"",price:"",imageUrls:[],primaryImageIndex:0,category:"",material:"",color:"",size:"",style:"",stock:0,rating:0}),de("add"),ie(!0)},Wr=H=>{z({...H}),de("edit"),ie(!0)},hi=async(H,me)=>{try{await RP(H,me),A(k.map(Ee=>Ee.id===H?{...Ee,role:me,updatedAt:new Date}:Ee)),on(`Usuario actualizado a ${me==="admin"?"administrador":"cliente"} exitosamente!`)}catch(Ee){console.error("Firebase error updating user role: ",Ee),Ye("Error al actualizar el rol del usuario. ¿Tienes permisos de escritura?")}},At=H=>{const{name:me,value:Ee}=H.target;G({..._e,[me]:Ee})},Eo=H=>{G({..._e,rating:H})},Cr=async H=>{if(H.preventDefault(),_e.rating<1||_e.rating>5){Ye("La calificación debe estar entre 1 y 5 estrellas.");return}if(!_e.comment||_e.comment.trim()===""){Ye("El comentario no puede estar vacío.");return}try{await PO(_e.id,{rating:_e.rating,comment:_e.comment.trim()}),O(P.map(me=>me.id===_e.id?{...me,rating:_e.rating,comment:_e.comment.trim()}:me)),G(null),ye(!1),on("Reseña actualizada exitosamente!")}catch(me){console.error("Firebase error: ",me),Ye("Error al actualizar la reseña. ¿Tienes permisos de escritura?")}},Zr=async H=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta reseña?"))try{await MO(H),O(P.filter(Ee=>Ee.id!==H)),on("Reseña eliminada exitosamente!")}catch(Ee){console.error("Firebase error: ",Ee),Ye("Error al eliminar la reseña. ¿Tienes permisos de escritura?")}},fa=H=>{G({...H}),ye(!0)},ma=H=>{ce(H),he(!0)},Rr=()=>{he(!1),ce(null)},$l=[{id:"analytics",label:"Analytics",icon:u.jsx(M2,{})},{id:"products",label:"Productos",icon:u.jsx(oh,{})},{id:"users",label:"Usuarios",icon:u.jsx(F2,{})},{id:"reviews",label:"Reviews",icon:u.jsx(V2,{})},{id:"coupons",label:"Códigos Promocionales",icon:u.jsx(MP,{})},{id:"orders",label:"Pedidos",icon:u.jsx(U2,{})}],sr=()=>{switch(l){case"analytics":return u.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[u.jsx("div",{className:"p-6 bg-white shadow-sm rounded-xl",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:u.jsx(oh,{className:"text-blue-600",size:24})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Productos"}),u.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:p.totalProducts})]})]})}),u.jsx("div",{className:"p-6 bg-white shadow-sm rounded-xl",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:u.jsx(U2,{className:"text-green-600",size:24})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Pedidos"}),u.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:p.totalOrders})]})]})}),u.jsx("div",{className:"p-6 bg-white shadow-sm rounded-xl",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:u.jsx(F2,{className:"text-purple-600",size:24})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Usuarios"}),u.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:p.totalUsers})]})]})}),u.jsx("div",{className:"p-6 bg-white shadow-sm rounded-xl",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:u.jsx(V2,{className:"text-yellow-600",size:24})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Reseñas"}),u.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:p.totalReviews})]})]})}),u.jsx("div",{className:"p-6 bg-white shadow-sm rounded-xl",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:u.jsx(M2,{className:"text-indigo-600",size:24})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ingresos Totales"}),u.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Is(p.totalRevenue)})]})]})}),u.jsxs("div",{className:"p-6 bg-white shadow-sm rounded-xl md:col-span-2 lg:col-span-3",children:[u.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Pedidos Recientes"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"ID"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Cliente"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Fecha"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Total"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Estado"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.recentOrders.map(H=>u.jsxs("tr",{children:[u.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:[H.id.substring(0,8),"..."]}),u.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap",children:H.userEmail||"N/A"}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Tr(H.createdAt)}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Is(H.totalAmount||0)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${sg(H.orderStatus||"pending")}`,children:rg(H.orderStatus||"pending")})})]},H.id))})]})})]}),u.jsxs("div",{className:"p-6 bg-white shadow-sm rounded-xl md:col-span-2 lg:col-span-3",children:[u.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Usuarios Recientes"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Nombre"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Email"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Rol"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Fecha de Registro"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.recentUsers.map(H=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap",children:H.name||H.email}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:H.email}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${H.role==="admin"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:H.role==="admin"?"Administrador":"Cliente"})}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Tr(H.createdAt)})]},H.id))})]})})]})]});case"products":return u.jsxs("div",{className:"p-6 bg-white shadow-sm rounded-xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestión de Productos"}),u.jsxs("button",{onClick:ha,className:"flex items-center px-4 py-2 text-white transition-colors bg-blue-600 rounded-lg hover:bg-blue-700",children:[u.jsx(PP,{className:"mr-2"}),"Añadir Producto"]})]}),I?u.jsx("div",{className:"flex justify-center py-8",children:u.jsx("div",{className:"w-8 h-8 border-b-2 border-blue-600 rounded-full animate-spin"})}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Imagen"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Nombre"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Stock"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Precio"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(H=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"flex-shrink-0 w-10 h-10",children:H.imageUrls&&H.imageUrls.length>0?u.jsx("img",{className:"object-cover w-10 h-10 rounded-md",src:typeof H.imageUrls[H.primaryImageIndex]=="string"?H.imageUrls[H.primaryImageIndex]:H.imageUrls[H.primaryImageIndex]?.data||H.imageUrls[0],alt:H.name,onError:me=>{me.target.onerror=null,me.target.src="https://via.placeholder.com/40x40.png?text=Moño"}}):u.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gray-200 rounded-md",children:u.jsx(oh,{className:"text-gray-500"})})})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.name})}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:H.stock}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Is(H.price)}),u.jsxs("td",{className:"px-6 py-4 text-sm font-medium whitespace-nowrap",children:[u.jsx("button",{onClick:()=>Wr(H),className:"mr-3 text-blue-600 hover:text-blue-900",title:"Editar producto",children:u.jsx(L2,{})}),u.jsx("button",{onClick:()=>di(H.id,H.name),className:"text-red-600 hover:text-red-900",title:"Eliminar producto",children:u.jsx(z2,{})})]})]},H.id))})]})})]});case"users":return u.jsxs("div",{className:"p-6 bg-white shadow-sm rounded-xl",children:[u.jsx("h2",{className:"mb-6 text-xl font-semibold text-gray-900",children:"Gestión de Usuarios"}),S?u.jsx("div",{className:"flex justify-center py-8",children:u.jsx("div",{className:"w-8 h-8 border-b-2 border-blue-600 rounded-full animate-spin"})}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Email"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Rol"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(H=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:H.email}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${H.role==="admin"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:H.role==="admin"?"Administrador":"Cliente"})}),u.jsx("td",{className:"px-6 py-4 text-sm font-medium whitespace-nowrap",children:u.jsx("button",{onClick:()=>{const me=H.role==="admin"?"customer":"admin";hi(H.id,me)},className:`px-3 py-1 text-xs rounded-md ${H.role==="admin"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-blue-100 text-blue-800 hover:bg-blue-200"}`,children:H.role==="admin"?"Hacer Cliente":"Hacer Administrador"})})]},H.id))})]})})]});case"reviews":return u.jsxs("div",{className:"p-6 bg-white shadow-sm rounded-xl",children:[u.jsx("h2",{className:"mb-6 text-xl font-semibold text-gray-900",children:"Gestión de Reseñas"}),C?u.jsx("div",{className:"flex justify-center py-8",children:u.jsx("div",{className:"w-8 h-8 border-b-2 border-blue-600 rounded-full animate-spin"})}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Producto"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Usuario"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Calificación"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Fecha"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(H=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:H.productId||"N/A"}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.userName||"N/A"}),u.jsx("div",{className:"text-sm text-gray-500",children:H.userEmail||"N/A"})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx(Hh,{rating:H.rating})}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Tr(H.createdAt)}),u.jsxs("td",{className:"px-6 py-4 text-sm font-medium whitespace-nowrap",children:[u.jsx("button",{onClick:()=>fa(H),className:"mr-3 text-blue-600 hover:text-blue-900",title:"Editar reseña",children:u.jsx(L2,{})}),u.jsx("button",{onClick:()=>Zr(H.id),className:"text-red-600 hover:text-red-900",title:"Eliminar reseña",children:u.jsx(z2,{})})]})]},H.id))})]})})]});case"coupons":return u.jsxs("div",{className:"p-6 bg-white shadow-sm rounded-xl",children:[u.jsx("h2",{className:"mb-6 text-xl font-semibold text-gray-900",children:"Gestión de Códigos Promocionales"}),u.jsx(kP,{})]});case"orders":return u.jsxs("div",{className:"p-6 bg-white shadow-sm rounded-xl",children:[u.jsx("h2",{className:"mb-6 text-xl font-semibold text-gray-900",children:"Gestión de Pedidos"}),ue?u.jsx("div",{className:"flex justify-center py-8",children:u.jsx("div",{className:"w-8 h-8 border-b-2 border-blue-600 rounded-full animate-spin"})}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"ID"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Cliente"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Fecha"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Total"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Estado"}),u.jsx("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Acciones"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ue.map(H=>u.jsxs("tr",{children:[u.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:[H.id.substring(0,8),"..."]}),u.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap",children:H.userEmail||"N/A"}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Tr(H.createdAt)}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:Is(H.totalAmount||0)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${sg(H.orderStatus||"pending")}`,children:rg(H.orderStatus||"pending")})}),u.jsx("td",{className:"px-6 py-4 text-sm font-medium whitespace-nowrap",children:u.jsx("button",{onClick:()=>ma(H),className:"text-blue-600 hover:text-blue-900",children:"Ver Detalles"})})]},H.id))})]})})]});default:return u.jsxs("div",{className:"p-6 bg-white shadow-sm rounded-xl",children:[u.jsx("h2",{className:"mb-4 text-xl font-semibold text-gray-900",children:"Dashboard"}),u.jsx("p",{className:"text-gray-600",children:"Bienvenido al panel de administración moderno."})]})}};return e?u.jsxs("div",{className:"flex h-screen bg-gray-50",children:[s&&u.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>o(!1)}),u.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 ${s?"translate-x-0":"-translate-x-full"}`,children:[u.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(oh,{className:"text-blue-600",size:24}),u.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Ecommerce Admin"})]}),u.jsx("button",{className:"p-1 rounded-md lg:hidden",onClick:()=>o(!1),children:u.jsx(ig,{size:24})})]}),u.jsx("nav",{className:"mt-6",children:$l.map(H=>u.jsxs("button",{className:`flex items-center w-full px-6 py-3 text-left transition-colors duration-200 ${l===H.id?"bg-blue-50 border-l-4 border-blue-500 text-blue-600":"text-gray-600 hover:bg-gray-50"}`,onClick:()=>{d(H.id),o(!1)},children:[u.jsx("span",{className:"mr-3",children:H.icon}),u.jsx("span",{className:"font-medium",children:H.label})]},H.id))})]}),u.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[u.jsxs("header",{className:"flex items-center justify-between h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("button",{className:"p-2 mr-2 rounded-md lg:hidden",onClick:()=>o(!0),children:u.jsx(OP,{size:24})}),u.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Panel de Administración"})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("button",{onClick:()=>n("/shop"),className:"flex items-center px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:[u.jsx(B2,{className:"mr-2"}),"Ir a la tienda"]}),u.jsxs("div",{className:"relative",ref:Qr,children:[u.jsxs("div",{className:"flex items-center px-3 py-1 text-sm bg-gray-100 rounded-full cursor-pointer",onClick:xo,children:[u.jsx("div",{className:"flex items-center justify-center w-8 h-8 mr-2 font-semibold text-white bg-blue-500 rounded-full",children:t?.email?.charAt(0).toUpperCase()||"A"}),u.jsx("span",{className:"font-medium text-gray-700",children:"Administrador"})]}),kn&&u.jsx("div",{className:"absolute right-0 z-50 w-48 mt-2 bg-white rounded-md shadow-lg",children:u.jsxs("div",{className:"py-1",children:[u.jsxs("button",{onClick:()=>{n("/shop"),Tt()},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[u.jsx(B2,{className:"mr-3 text-gray-400"}),"Ir a la tienda"]}),u.jsxs("button",{onClick:()=>{Ut(),Tt()},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[u.jsx(DP,{className:"mr-3 text-gray-400"}),"Cerrar sesión"]})]})})]})]})]}),Rs&&u.jsx("div",{className:"p-4 mx-4 mt-4 border-l-4 border-green-500 bg-green-50 lg:mx-6",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("span",{className:"text-green-500",children:"✓"})}),u.jsx("div",{className:"ml-3",children:u.jsx("p",{className:"text-sm text-green-700",children:Rs})})]})}),Cs&&u.jsx("div",{className:"p-4 mx-4 mt-4 border-l-4 border-red-500 bg-red-50 lg:mx-6",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("span",{className:"text-red-500",children:"✕"})}),u.jsx("div",{className:"ml-3",children:u.jsx("p",{className:"text-sm text-red-700",children:Cs})})]})}),u.jsx("main",{className:"flex-1 p-4 overflow-y-auto lg:p-6 bg-gray-50",children:l==="analytics"&&y?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"w-8 h-8 border-b-2 border-blue-600 rounded-full animate-spin"})}):sr()})]}),F&&u.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:u.jsxs("div",{className:"flex items-end justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[u.jsx("div",{className:"fixed inset-0 z-40 transition-opacity bg-gray-500 bg-opacity-75","aria-hidden":"true",onClick:()=>ie(!1)}),u.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),u.jsxs("div",{className:"z-50 inline-block overflow-hidden text-left align-bottom transition-all transform bg-white shadow-xl rounded-2xl sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",style:{boxShadow:"0 10px 30px rgba(0,0,0,0.1)",width:"650px"},children:[u.jsxs("div",{className:"px-8 py-8",children:[u.jsxs("div",{className:"mb-8 text-center",children:[u.jsx("h3",{className:"text-2xl font-semibold text-gray-900",children:ee==="add"?"Añadir Producto":"Editar Producto"}),u.jsx("p",{className:"mt-2 text-sm text-gray-500",children:ee==="add"?"Ingresa los detalles del nuevo producto":"Modifica la información del producto"})]}),u.jsx("div",{className:"mt-2",children:u.jsxs("form",{onSubmit:ee==="add"?Tn:Sr,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-700",children:"Nombre del Producto"}),u.jsx("input",{type:"text",name:"name",value:ee==="add"?U.name:q?.name,onChange:ee==="add"?ft:On,className:"w-full px-4 py-3 text-gray-900 placeholder-gray-400 transition-all border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900",placeholder:"Nombre del producto",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-700",children:"Descripción"}),u.jsx("textarea",{name:"description",value:ee==="add"?U.description:q?.description,onChange:ee==="add"?ft:On,className:"w-full px-4 py-3 text-gray-900 placeholder-gray-400 transition-all border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900",rows:"4",placeholder:"Descripción del producto"})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-700",children:"Precio (COP)"}),u.jsx("input",{type:"number",name:"price",step:"0.01",min:"0",value:ee==="add"?U.price:q?.price,onChange:ee==="add"?ft:On,className:"w-full px-4 py-3 text-gray-900 placeholder-gray-400 transition-all border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900",placeholder:"0.00",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-700",children:"Stock"}),u.jsx("input",{type:"number",name:"stock",min:"0",value:ee==="add"?U.stock:q?.stock,onChange:ee==="add"?ft:On,className:"w-full px-4 py-3 text-gray-900 placeholder-gray-400 transition-all border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900",placeholder:"Cantidad disponible"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-700",children:"Calificación"}),u.jsx("input",{type:"number",name:"rating",step:"0.1",min:"0",max:"5",value:ee==="add"?U.rating:q?.rating,onChange:ee==="add"?ft:On,className:"w-full px-4 py-3 text-gray-900 placeholder-gray-400 transition-all border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900",placeholder:"0.0 - 5.0"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-700",children:"Material"}),u.jsx("input",{type:"text",name:"material",value:ee==="add"?U.material:q?.material,onChange:ee==="add"?ft:On,className:"w-full px-4 py-3 text-gray-900 placeholder-gray-400 transition-all border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900",placeholder:"Material del producto"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-700",children:"Color"}),u.jsx("input",{type:"text",name:"color",value:ee==="add"?U.color:q?.color,onChange:ee==="add"?ft:On,className:"w-full px-4 py-3 text-gray-900 placeholder-gray-400 transition-all border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900",placeholder:"Color del producto"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-700",children:"Tamaño"}),u.jsx("input",{type:"text",name:"size",value:ee==="add"?U.size:q?.size,onChange:ee==="add"?ft:On,className:"w-full px-4 py-3 text-gray-900 placeholder-gray-400 transition-all border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900",placeholder:"Tamaño del producto"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-700",children:"Estilo"}),u.jsx("input",{type:"text",name:"style",value:ee==="add"?U.style:q?.style,onChange:ee==="add"?ft:On,className:"w-full px-4 py-3 text-gray-900 placeholder-gray-400 transition-all border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900",placeholder:"Estilo del producto"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-700",children:"Categoría"}),u.jsxs("select",{name:"category",value:ee==="add"?U.category:q?.category,onChange:ee==="add"?ft:On,className:"w-full px-4 py-3 text-gray-900 transition-all border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900",children:[u.jsx("option",{value:"",children:"Seleccionar categoría"}),u.jsx("option",{value:"Moños Elegantes",children:"Moños Elegantes"}),u.jsx("option",{value:"Moños Infantiles",children:"Moños Infantiles"}),u.jsx("option",{value:"Moños Deportivos",children:"Moños Deportivos"}),u.jsx("option",{value:"Moños Casuales",children:"Moños Casuales"}),u.jsx("option",{value:"Moños de Novia",children:"Moños de Novia"}),u.jsx("option",{value:"Moños de Gala",children:"Moños de Gala"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-700",children:"Imágenes"}),u.jsxs("div",{className:"mt-3",children:[u.jsx("button",{type:"button",onClick:()=>rr(ee==="edit"),className:"inline-flex items-center px-4 py-2.5 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 transition-all",disabled:js||(ee==="add"?U.imageUrls.length>=4:q?.imageUrls.length>=4),children:js?"Subiendo...":`Añadir Imagen${ee==="add"?U.imageUrls.length>0?` (${U.imageUrls.length}/4)`:"":q?.imageUrls.length>0?` (${q?.imageUrls.length}/4)`:""}`}),(ee==="add"?U.imageUrls.length>=4:q?.imageUrls.length>=4)&&u.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Has alcanzado el límite máximo de 4 imágenes."}),js&&u.jsx("div",{className:"mt-4",children:u.jsx("div",{className:"w-8 h-8 border-b-2 border-gray-900 rounded-full animate-spin"})}),ee==="add"?U.imageUrls.length>0&&u.jsx("div",{className:"grid grid-cols-2 gap-4 mt-5",children:U.imageUrls.map((H,me)=>u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:typeof H=="string"?H:H.data,alt:`Preview ${me}`,className:"object-cover w-full h-32 rounded-lg",onError:Ee=>{Ee.target.onerror=null,Ee.target.src="https://via.placeholder.com/150x150.png?text=Imagen"}}),u.jsx("button",{type:"button",onClick:()=>Nr(me),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1.5 hover:bg-red-700 transition-colors shadow-md",children:u.jsx(ig,{size:14})}),u.jsx("button",{type:"button",onClick:()=>Pn(me),className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 text-xs px-2.5 py-1 rounded-full shadow-sm ${U.primaryImageIndex===me?"bg-gray-900 text-white":"bg-white text-gray-800 border border-gray-300"}`,children:"Principal"})]},me))}):q?.imageUrls.length>0&&u.jsx("div",{className:"grid grid-cols-2 gap-4 mt-5",children:q.imageUrls.map((H,me)=>u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:typeof H=="string"?H:H.data,alt:`Preview ${me}`,className:"object-cover w-full h-32 rounded-lg",onError:Ee=>{Ee.target.onerror=null,Ee.target.src="https://via.placeholder.com/150x150.png?text=Imagen"}}),u.jsx("button",{type:"button",onClick:()=>Nr(me,!0),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1.5 hover:bg-red-700 transition-colors shadow-md",children:u.jsx(ig,{size:14})}),u.jsx("button",{type:"button",onClick:()=>Pn(me,!0),className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 text-xs px-2.5 py-1 rounded-full shadow-sm ${q.primaryImageIndex===me?"bg-gray-900 text-white":"bg-white text-gray-800 border border-gray-300"}`,children:"Principal"})]},me))})]})]})]})})]}),u.jsxs("div",{className:"flex justify-between px-8 py-5 bg-white border-t border-gray-200",children:[u.jsx("button",{type:"button",onClick:()=>ie(!1),className:"inline-flex justify-center px-5 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 transition-all",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:ee==="add"?Tn:Sr,className:"inline-flex justify-center px-5 py-2.5 text-sm font-medium text-white bg-gray-900 border border-transparent rounded-lg hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 transition-all",children:ee==="add"?"Añadir Producto":"Actualizar Producto"})]})]})]})}),oe&&_e&&u.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:u.jsxs("div",{className:"flex items-end justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[u.jsx("div",{className:"fixed inset-0 z-40 transition-opacity bg-gray-500 bg-opacity-75","aria-hidden":"true",onClick:()=>ye(!1)}),u.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),u.jsxs("div",{className:"z-50 inline-block overflow-hidden text-left align-bottom transition-all transform bg-white shadow-xl rounded-2xl sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",style:{boxShadow:"0 10px 30px rgba(0,0,0,0.1)",width:"650px"},children:[u.jsxs("div",{className:"px-8 py-8",children:[u.jsxs("div",{className:"mb-8 text-center",children:[u.jsx("h3",{className:"text-2xl font-semibold text-gray-900",children:"Editar Reseña"}),u.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Modifica la calificación y el comentario de la reseña"})]}),u.jsx("div",{className:"mt-2",children:u.jsxs("form",{onSubmit:Cr,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block mb-4 text-sm font-medium text-gray-700",children:"Calificación"}),u.jsx("div",{className:"flex items-center justify-center space-x-2",children:[1,2,3,4,5].map(H=>u.jsx("button",{type:"button",onClick:()=>Eo(H),className:"text-4xl transition-transform focus:outline-none hover:scale-110",children:H<=_e.rating?u.jsx("span",{className:"text-yellow-400",children:"★"}):u.jsx("span",{className:"text-gray-300",children:"☆"})},H))}),u.jsx("div",{className:"mt-3 text-center",children:u.jsxs("span",{className:"text-sm text-gray-500",children:[_e.rating," de 5 estrellas"]})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block mb-3 text-sm font-medium text-gray-700",children:"Comentario"}),u.jsx("textarea",{name:"comment",rows:6,value:_e.comment,onChange:At,className:"w-full px-4 py-3 text-gray-900 placeholder-gray-400 transition-all border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900",placeholder:"Escribe tu reseña aquí..."})]})]})})]}),u.jsxs("div",{className:"flex justify-between px-8 py-5 bg-white border-t border-gray-200",children:[u.jsx("button",{type:"button",onClick:()=>ye(!1),className:"inline-flex justify-center px-5 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 transition-all",children:"Cancelar"}),u.jsx("button",{type:"button",onClick:Cr,className:"inline-flex justify-center px-5 py-2.5 text-sm font-medium text-white bg-gray-900 border border-transparent rounded-lg hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 transition-all",children:"Guardar Cambios"})]})]})]})}),ge&&te&&u.jsx(qT,{order:te,isOpen:ge,onClose:Rr,formatDate:Tr,formatCurrency:Is,getOrderStatusText:rg,getStatusBadgeClass:sg})]}):u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Acceso Denegado"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"No tienes permisos para acceder a esta sección."})]})})},VP=()=>{const{currentUser:t}=Yr(),e=Er(),[n,s]=R.useState([]),[o,l]=R.useState(!0),[d,p]=R.useState(null),[g,y]=R.useState(null),[x,_]=R.useState(!1),[T,I]=R.useState(null),V=A=>{switch(A){case"pending":return"Pendiente";case"processing":return"Procesando";case"shipped":return"Enviado";case"delivered":return"Entregado";case"cancelled":return"Cancelado";default:return A}},U=A=>{switch(A){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-indigo-100 text-indigo-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=A=>A?A instanceof Date?A.toLocaleDateString("es-CO"):A.toDate?A.toDate().toLocaleDateString("es-CO"):"N/A":"N/A",q=A=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(A||0),z=A=>{y(A),_(!0)},F=()=>{_(!1),y(null)},ie=A=>{I({productId:A.id,productName:A.name,rating:0,comment:""})},ee=A=>{const{name:S,value:M}=A.target;I(P=>({...P,[S]:M}))},de=A=>{I(S=>({...S,rating:A}))},k=async()=>{if(T.rating===0){Ae.fire({title:"Error",text:"Por favor selecciona una calificación",icon:"error",confirmButtonText:"Aceptar"});return}if(T.comment.trim()===""){Ae.fire({title:"Error",text:"Por favor escribe un comentario",icon:"error",confirmButtonText:"Aceptar"});return}try{const A={productId:T.productId,userId:t.uid,userEmail:t.email,userName:t.displayName||t.email.split("@")[0],rating:T.rating,comment:T.comment.trim()};await OT(A),Ae.fire({title:"Reseña enviada",text:"Tu reseña ha sido enviada correctamente",icon:"success",confirmButtonText:"Aceptar"}),I(null)}catch(A){console.error("Error submitting review:",A),Ae.fire({title:"Error",text:"Hubo un error al enviar tu reseña. Por favor intenta nuevamente.",icon:"error",confirmButtonText:"Aceptar"})}};return R.useEffect(()=>{(async()=>{if(!t){e("/login");return}try{const S=await jP(t.uid);s(S)}catch(S){console.error("Error fetching user orders:",S),p("No se pudieron cargar tus órdenes. Por favor, intenta nuevamente.")}finally{l(!1)}})()},[t,e]),o?u.jsx("div",{children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})})}):u.jsxs("div",{children:[u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Pedidos"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"Consulta el estado de tus pedidos recientes"})]}),d&&u.jsx("div",{className:"rounded-md bg-red-50 p-4 mb-6",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),u.jsx("div",{className:"ml-3",children:u.jsx("h3",{className:"text-sm font-medium text-red-800",children:d})})]})}),n.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),u.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No tienes pedidos"}),u.jsx("p",{className:"mt-1 text-gray-500",children:"Aún no has realizado ningún pedido."}),u.jsx("div",{className:"mt-6",children:u.jsx(He,{to:"/shop",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Comprar ahora"})})]}):u.jsx("div",{className:"space-y-6",children:n.map(A=>u.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[u.jsx("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Pedido #",A.id.substring(0,8)]}),u.jsxs("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:["Realizado el ",j(A.createdAt)]})]}),u.jsxs("div",{className:"mt-4 md:mt-0 flex items-center space-x-2",children:[u.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${U(A.orderStatus)}`,children:V(A.orderStatus)}),u.jsx("button",{onClick:()=>z(A),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Ver detalles"})]})]})}),u.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[u.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),u.jsx("p",{className:"text-lg font-medium text-gray-900",children:q(A.totalAmount)})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Productos"}),u.jsxs("p",{className:"text-lg font-medium text-gray-900",children:[A.items?.length||0," ",A.items?.length===1?"producto":"productos"]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Método de Pago"}),u.jsx("p",{className:"text-lg font-medium text-gray-900",children:A.paymentMethod||"N/A"})]})]}),u.jsxs("div",{className:"mt-6",children:[u.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Productos en este pedido"}),u.jsx("div",{className:"space-y-4",children:A.items?.map((S,M)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"flex-shrink-0 w-16 h-16 border border-gray-200 rounded-md overflow-hidden",children:u.jsx("img",{src:S.imageUrl||"https://via.placeholder.com/64x64.png?text=Moño",alt:S.name,className:"w-full h-full object-center object-cover",onError:P=>{P.target.onerror=null,P.target.src="https://via.placeholder.com/64x64.png?text=Moño"}})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("h5",{className:"text-sm font-medium text-gray-900",children:S.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:["Cantidad: ",S.quantity]})]})]}),u.jsx("button",{onClick:()=>ie(S),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Dejar reseña"})]},M))})]})]})]},A.id))})]}),T&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:u.jsx("div",{className:"relative w-full max-w-md mx-auto my-8 bg-white rounded-lg shadow-xl",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Dejar una reseña"}),u.jsx("button",{onClick:()=>I(null),className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),u.jsxs("div",{className:"mt-2",children:[u.jsx("h4",{className:"font-medium text-gray-900",children:T.productName}),u.jsxs("div",{className:"mt-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calificación"}),u.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(A=>u.jsx("button",{type:"button",onClick:()=>de(A),className:"text-2xl focus:outline-none",children:A<=T.rating?u.jsx("span",{className:"text-yellow-400",children:"★"}):u.jsx("span",{className:"text-gray-300",children:"☆"})},A)),u.jsx("span",{className:"ml-2 text-sm text-gray-500",children:T.rating>0?`${T.rating} de 5 estrellas`:"Selecciona una calificación"})]})]}),u.jsxs("div",{className:"mt-4",children:[u.jsx("label",{htmlFor:"review-comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentario"}),u.jsx("textarea",{id:"review-comment",name:"comment",rows:4,value:T.comment,onChange:ee,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border border-gray-300 rounded-md p-3",placeholder:"Comparte tu experiencia con este producto..."})]}),u.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:()=>I(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"}),u.jsx("button",{onClick:k,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Enviar Reseña"})]})]})]})})}),u.jsx(qT,{order:g,isOpen:x,onClose:F,formatDate:j,formatCurrency:q,getOrderStatusText:V,getStatusBadgeClass:U})]})},UP=()=>{const{applyCoupon:t,removeCoupon:e,coupon:n}=Bl(),s=async()=>{try{const l=await t("DESCUENTO10");console.log("Coupon applied successfully:",l),alert("Coupon applied successfully!")}catch(l){console.error("Error applying coupon:",l),alert("Error applying coupon: "+l.message)}},o=()=>{e(),alert("Coupon removed!")};return u.jsxs("div",{children:[u.jsx(nf,{}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Prueba de Cupones"}),u.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden p-6",children:[u.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-4",children:"Funcionalidad de Cupones"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Estado Actual"}),n?u.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[u.jsxs("p",{className:"font-medium text-green-800",children:["Cupón Aplicado: ",n.code]}),u.jsxs("p",{className:"text-sm text-green-600",children:["Descuento: ",n.discountType==="percentage"?`${n.discountValue}%`:`$${n.discountValue}`]})]}):u.jsx("p",{className:"text-gray-500",children:"No hay cupón aplicado"})]}),u.jsxs("div",{className:"flex space-x-4",children:[u.jsx("button",{onClick:s,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Aplicar Cupón de Prueba (DESCUENTO10)"}),u.jsx("button",{onClick:o,disabled:!n,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${n?"bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500":"bg-gray-400 cursor-not-allowed"}`,children:"Remover Cupón"})]}),u.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[u.jsx("h3",{className:"text-md font-medium text-blue-800 mb-2",children:"Instrucciones"}),u.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-700 space-y-1",children:[u.jsx("li",{children:"Primero, asegúrate de haber creado un cupón de prueba en Firestore"}),u.jsx("li",{children:'Haz clic en "Aplicar Cupón de Prueba" para probar la funcionalidad'}),u.jsx("li",{children:"Verifica que el cupón se aplique correctamente"}),u.jsx("li",{children:'Haz clic en "Remover Cupón" para eliminarlo'})]})]})]})]})]})]})},BP=()=>{const{items:t,removeFromWishlist:e,loading:n}=kf();return n?u.jsx("div",{children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Mi Lista de Deseos"}),u.jsx("div",{className:"flex justify-center items-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})]})}):u.jsx("div",{children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Mi Lista de Deseos"}),t.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),u.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Tu lista de deseos está vacía"}),u.jsx("p",{className:"mt-1 text-gray-500",children:"Empieza a agregar productos a tu lista de deseos"}),u.jsx("div",{className:"mt-6",children:u.jsx(He,{to:"/shop",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Explorar Productos"})})]}):u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(s=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[u.jsx(He,{to:`/product/${s.id}`,children:u.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden",children:u.jsx("img",{src:s.imageUrls&&s.imageUrls.length>0?typeof s.imageUrls[0]=="string"?s.imageUrls[0]:s.imageUrls[0].data:s.imageUrl||"https://via.placeholder.com/300x300.png?text=Moño",alt:s.name,className:"w-full h-64 object-cover",onError:o=>{o.target.onerror=null,o.target.src="https://via.placeholder.com/300x300.png?text=Moño"}})})}),u.jsxs("div",{className:"p-4",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:s.category})}),u.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:s.name}),s.rating>0&&u.jsx("div",{className:"mt-2",children:u.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((o,l)=>u.jsx("svg",{className:`w-4 h-4 ${l<Math.floor(s.rating)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},l)),u.jsx("span",{className:"ml-1 text-sm text-gray-600",children:s.rating})]})}),u.jsx("div",{className:"mt-2",children:u.jsxs("span",{className:"text-lg font-semibold text-indigo-600",children:["$",parseFloat(s.price).toLocaleString("es-CO")]})}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsx(He,{to:`/product/${s.id}`,className:"flex-1 bg-indigo-600 border border-transparent rounded-md py-2 px-4 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 text-center",children:"Ver Detalles"}),u.jsx("button",{onClick:()=>e(s.id),className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:u.jsx("svg",{className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},s.id))})]})})},zP=()=>u.jsx("footer",{className:"bg-gray-800 text-white py-8",children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold mb-4",children:"Tienda de Moños"}),u.jsx("p",{className:"text-gray-300",children:"La mejor selección de moños para todas las ocasiones."})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Enlaces Rápidos"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx("a",{href:"/home",className:"text-gray-300 hover:text-white",children:"Inicio"})}),u.jsx("li",{children:u.jsx("a",{href:"/cart",className:"text-gray-300 hover:text-white",children:"Carrito"})}),u.jsx("li",{children:u.jsx("a",{href:"/login",className:"text-gray-300 hover:text-white",children:"Iniciar Sesión"})}),u.jsx("li",{children:u.jsx("a",{href:"/register",className:"text-gray-300 hover:text-white",children:"Registrarse"})})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Contacto"}),u.jsxs("address",{className:"text-gray-300 not-italic",children:[u.jsx("p",{children:"Email: psgmoños@gmail.com"}),u.jsx("p",{children:"Teléfono: (123) 456-7890"})]})]})]}),u.jsx("div",{className:"border-t border-gray-700 mt-8 pt-6 text-center text-gray-400",children:u.jsxs("p",{children:["© ",new Date().getFullYear()," Tienda de Moños. Todos los derechos reservados."]})})]})}),HT=qn.createContext(),Yr=()=>qn.useContext(HT);function FP(){const[t,e]=R.useState(null),[n,s]=R.useState(null),[o,l]=R.useState(!0),[d,p]=R.useState(!1);R.useEffect(()=>zR(Fr,async T=>{if(e(T),T)try{const I=dt(De,"users",T.uid),V=await $r(I);if(V.exists()){const U=V.data();s(U),p(U.role==="admin")}else s(null),p(!1)}catch(I){console.error("Error fetching user profile:",I),s(null),p(!1)}else s(null),p(!1);l(!1)}),[]);const g={currentUser:t,userProfile:n,isAdmin:d};if(o)return u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})});const y=({children:_,adminOnly:T=!1})=>t?T&&!d?u.jsx(Vp,{to:"/home"}):_:u.jsx(Vp,{to:"/login"}),x=({children:_})=>t?u.jsx(Vp,{to:"/home"}):_;return u.jsx(HT.Provider,{value:g,children:u.jsx(F5,{children:u.jsx(q5,{children:u.jsxs("div",{className:"flex flex-col min-h-screen",children:[u.jsxs(Iw,{children:[u.jsx(dn,{path:"/admin/*",element:null}),u.jsx(dn,{path:"*",element:u.jsx(nf,{})})]}),u.jsx("main",{className:"flex-grow",children:u.jsxs(Iw,{children:[u.jsx(dn,{path:"/",element:u.jsx(ng,{})}),u.jsx(dn,{path:"/home",element:u.jsx(ng,{})}),u.jsx(dn,{path:"/shop",element:u.jsx(ng,{})}),u.jsx(dn,{path:"/product/:id",element:u.jsx(LO,{})}),u.jsx(dn,{path:"/cart",element:u.jsx(VO,{})}),u.jsx(dn,{path:"/wishlist",element:u.jsx(BP,{})}),u.jsx(dn,{path:"/checkout",element:u.jsx(y,{children:u.jsx(TP,{})})}),u.jsx(dn,{path:"/profile",element:u.jsx(y,{children:u.jsx(AP,{})})}),u.jsx(dn,{path:"/orders",element:u.jsx(y,{children:u.jsx(VP,{})})}),u.jsx(dn,{path:"/login",element:u.jsx(x,{children:u.jsx(NP,{})})}),u.jsx(dn,{path:"/register",element:u.jsx(x,{children:u.jsx(SP,{})})}),u.jsx(dn,{path:"/reset-password",element:u.jsx(x,{children:u.jsx(CP,{})})}),u.jsx(dn,{path:"/admin",element:u.jsx(y,{adminOnly:!0,children:u.jsx(LP,{})})}),u.jsx(dn,{path:"/coupon-test",element:u.jsx(y,{adminOnly:!0,children:u.jsx(UP,{})})})]})}),u.jsx(zP,{})]})})})})}const qP={"client-id":"ECmX0zT4f25SE12Wz3vY6RNnLLG1iK_uOE1UvckTz5o2Pn9DhFtVpeKOBvJSLGu1MpPYduxBNjUWPKwP",currency:"COP",intent:"capture"};CN.createRoot(document.getElementById("root")).render(u.jsx(R.StrictMode,{children:u.jsx(sP,{options:qP,children:u.jsx(zS,{children:u.jsx(FP,{})})})}));
