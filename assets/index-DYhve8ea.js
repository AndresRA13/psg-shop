(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function vN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dp={exports:{}},Gc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function wN(){if(ww)return Gc;ww=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:t,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Gc.Fragment=e,Gc.jsx=n,Gc.jsxs=n,Gc}var bw;function bN(){return bw||(bw=1,Dp.exports=wN()),Dp.exports}var l=bN(),Op={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _w;function _N(){if(_w)return Le;_w=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function T(V){return V===null||typeof V!="object"?null:(V=_&&V[_]||V["@@iterator"],typeof V=="function"?V:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,U={};function j(V,ue,ye){this.props=V,this.context=ue,this.refs=U,this.updater=ye||I}j.prototype.isReactComponent={},j.prototype.setState=function(V,ue){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ue,"setState")},j.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function H(){}H.prototype=j.prototype;function F(V,ue,ye){this.props=V,this.context=ue,this.refs=U,this.updater=ye||I}var q=F.prototype=new H;q.constructor=F,B(q,j.prototype),q.isPureReactComponent=!0;var ie=Array.isArray,te={H:null,A:null,T:null,S:null,V:null},de=Object.prototype.hasOwnProperty;function k(V,ue,ye,ee,le,pe){return ye=pe.ref,{$$typeof:t,type:V,key:ue,ref:ye!==void 0?ye:null,props:pe}}function A(V,ue){return k(V.type,ue,void 0,void 0,void 0,V.props)}function S(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function L(V){var ue={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ye){return ue[ye]})}var M=/\/+/g;function O(V,ue){return typeof V=="object"&&V!==null&&V.key!=null?L(""+V.key):ue.toString(36)}function C(){}function ke(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(C,C):(V.status="pending",V.then(function(ue){V.status==="pending"&&(V.status="fulfilled",V.value=ue)},function(ue){V.status==="pending"&&(V.status="rejected",V.reason=ue)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Ee(V,ue,ye,ee,le){var pe=typeof V;(pe==="undefined"||pe==="boolean")&&(V=null);var he=!1;if(V===null)he=!0;else switch(pe){case"bigint":case"string":case"number":he=!0;break;case"object":switch(V.$$typeof){case t:case e:he=!0;break;case v:return he=V._init,Ee(he(V._payload),ue,ye,ee,le)}}if(he)return le=le(V),he=ee===""?"."+O(V,0):ee,ie(le)?(ye="",he!=null&&(ye=he.replace(M,"$&/")+"/"),Ee(le,ue,ye,"",function(On){return On})):le!=null&&(S(le)&&(le=A(le,ye+(le.key==null||V&&V.key===le.key?"":(""+le.key).replace(M,"$&/")+"/")+he)),ue.push(le)),1;he=0;var Ue=ee===""?".":ee+":";if(ie(V))for(var et=0;et<V.length;et++)ee=V[et],pe=Ue+O(ee,et),he+=Ee(ee,ue,ye,pe,le);else if(et=T(V),typeof et=="function")for(V=et.call(V),et=0;!(ee=V.next()).done;)ee=ee.value,pe=Ue+O(ee,et++),he+=Ee(ee,ue,ye,pe,le);else if(pe==="object"){if(typeof V.then=="function")return Ee(ke(V),ue,ye,ee,le);throw ue=String(V),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return he}function G(V,ue,ye){if(V==null)return V;var ee=[],le=0;return Ee(V,ee,"","",function(pe){return ue.call(ye,pe,le++)}),ee}function oe(V){if(V._status===-1){var ue=V._result;ue=ue(),ue.then(function(ye){(V._status===0||V._status===-1)&&(V._status=1,V._result=ye)},function(ye){(V._status===0||V._status===-1)&&(V._status=2,V._result=ye)}),V._status===-1&&(V._status=0,V._result=ue)}if(V._status===1)return V._result.default;throw V._result}var ge=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function Ve(){}return Le.Children={map:G,forEach:function(V,ue,ye){G(V,function(){ue.apply(this,arguments)},ye)},count:function(V){var ue=0;return G(V,function(){ue++}),ue},toArray:function(V){return G(V,function(ue){return ue})||[]},only:function(V){if(!S(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Le.Component=j,Le.Fragment=n,Le.Profiler=o,Le.PureComponent=F,Le.StrictMode=s,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,Le.__COMPILER_RUNTIME={__proto__:null,c:function(V){return te.H.useMemoCache(V)}},Le.cache=function(V){return function(){return V.apply(null,arguments)}},Le.cloneElement=function(V,ue,ye){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ee=B({},V.props),le=V.key,pe=void 0;if(ue!=null)for(he in ue.ref!==void 0&&(pe=void 0),ue.key!==void 0&&(le=""+ue.key),ue)!de.call(ue,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&ue.ref===void 0||(ee[he]=ue[he]);var he=arguments.length-2;if(he===1)ee.children=ye;else if(1<he){for(var Ue=Array(he),et=0;et<he;et++)Ue[et]=arguments[et+2];ee.children=Ue}return k(V.type,le,void 0,void 0,pe,ee)},Le.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:c,_context:V},V},Le.createElement=function(V,ue,ye){var ee,le={},pe=null;if(ue!=null)for(ee in ue.key!==void 0&&(pe=""+ue.key),ue)de.call(ue,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(le[ee]=ue[ee]);var he=arguments.length-2;if(he===1)le.children=ye;else if(1<he){for(var Ue=Array(he),et=0;et<he;et++)Ue[et]=arguments[et+2];le.children=Ue}if(V&&V.defaultProps)for(ee in he=V.defaultProps,he)le[ee]===void 0&&(le[ee]=he[ee]);return k(V,pe,void 0,void 0,null,le)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(V){return{$$typeof:p,render:V}},Le.isValidElement=S,Le.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:oe}},Le.memo=function(V,ue){return{$$typeof:y,type:V,compare:ue===void 0?null:ue}},Le.startTransition=function(V){var ue=te.T,ye={};te.T=ye;try{var ee=V(),le=te.S;le!==null&&le(ye,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Ve,ge)}catch(pe){ge(pe)}finally{te.T=ue}},Le.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},Le.use=function(V){return te.H.use(V)},Le.useActionState=function(V,ue,ye){return te.H.useActionState(V,ue,ye)},Le.useCallback=function(V,ue){return te.H.useCallback(V,ue)},Le.useContext=function(V){return te.H.useContext(V)},Le.useDebugValue=function(){},Le.useDeferredValue=function(V,ue){return te.H.useDeferredValue(V,ue)},Le.useEffect=function(V,ue,ye){var ee=te.H;if(typeof ye=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(V,ue)},Le.useId=function(){return te.H.useId()},Le.useImperativeHandle=function(V,ue,ye){return te.H.useImperativeHandle(V,ue,ye)},Le.useInsertionEffect=function(V,ue){return te.H.useInsertionEffect(V,ue)},Le.useLayoutEffect=function(V,ue){return te.H.useLayoutEffect(V,ue)},Le.useMemo=function(V,ue){return te.H.useMemo(V,ue)},Le.useOptimistic=function(V,ue){return te.H.useOptimistic(V,ue)},Le.useReducer=function(V,ue,ye){return te.H.useReducer(V,ue,ye)},Le.useRef=function(V){return te.H.useRef(V)},Le.useState=function(V){return te.H.useState(V)},Le.useSyncExternalStore=function(V,ue,ye){return te.H.useSyncExternalStore(V,ue,ye)},Le.useTransition=function(){return te.H.useTransition()},Le.version="19.1.1",Le}var Ew;function Bg(){return Ew||(Ew=1,Op.exports=_N()),Op.exports}var R=Bg();const $n=vN(R);var Pp={exports:{}},Kc={},Mp={exports:{}},Lp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw;function EN(){return Tw||(Tw=1,(function(t){function e(G,oe){var ge=G.length;G.push(oe);e:for(;0<ge;){var Ve=ge-1>>>1,V=G[Ve];if(0<o(V,oe))G[Ve]=oe,G[ge]=V,ge=Ve;else break e}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var oe=G[0],ge=G.pop();if(ge!==oe){G[0]=ge;e:for(var Ve=0,V=G.length,ue=V>>>1;Ve<ue;){var ye=2*(Ve+1)-1,ee=G[ye],le=ye+1,pe=G[le];if(0>o(ee,ge))le<V&&0>o(pe,ee)?(G[Ve]=pe,G[le]=ge,Ve=le):(G[Ve]=ee,G[ye]=ge,Ve=ye);else if(le<V&&0>o(pe,ge))G[Ve]=pe,G[le]=ge,Ve=le;else break e}}return oe}function o(G,oe){var ge=G.sortIndex-oe.sortIndex;return ge!==0?ge:G.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();t.unstable_now=function(){return d.now()-p}}var g=[],y=[],v=1,_=null,T=3,I=!1,B=!1,U=!1,j=!1,H=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function ie(G){for(var oe=n(y);oe!==null;){if(oe.callback===null)s(y);else if(oe.startTime<=G)s(y),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=n(y)}}function te(G){if(U=!1,ie(G),!B)if(n(g)!==null)B=!0,de||(de=!0,O());else{var oe=n(y);oe!==null&&Ee(te,oe.startTime-G)}}var de=!1,k=-1,A=5,S=-1;function L(){return j?!0:!(t.unstable_now()-S<A)}function M(){if(j=!1,de){var G=t.unstable_now();S=G;var oe=!0;try{e:{B=!1,U&&(U=!1,F(k),k=-1),I=!0;var ge=T;try{t:{for(ie(G),_=n(g);_!==null&&!(_.expirationTime>G&&L());){var Ve=_.callback;if(typeof Ve=="function"){_.callback=null,T=_.priorityLevel;var V=Ve(_.expirationTime<=G);if(G=t.unstable_now(),typeof V=="function"){_.callback=V,ie(G),oe=!0;break t}_===n(g)&&s(g),ie(G)}else s(g);_=n(g)}if(_!==null)oe=!0;else{var ue=n(y);ue!==null&&Ee(te,ue.startTime-G),oe=!1}}break e}finally{_=null,T=ge,I=!1}oe=void 0}}finally{oe?O():de=!1}}}var O;if(typeof q=="function")O=function(){q(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ke=C.port2;C.port1.onmessage=M,O=function(){ke.postMessage(null)}}else O=function(){H(M,0)};function Ee(G,oe){k=H(function(){G(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(G){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var ge=T;T=oe;try{return G()}finally{T=ge}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(G,oe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ge=T;T=G;try{return oe()}finally{T=ge}},t.unstable_scheduleCallback=function(G,oe,ge){var Ve=t.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Ve+ge:Ve):ge=Ve,G){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ge+V,G={id:v++,callback:oe,priorityLevel:G,startTime:ge,expirationTime:V,sortIndex:-1},ge>Ve?(G.sortIndex=ge,e(y,G),n(g)===null&&G===n(y)&&(U?(F(k),k=-1):U=!0,Ee(te,ge-Ve))):(G.sortIndex=V,e(g,G),B||I||(B=!0,de||(de=!0,O()))),G},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(G){var oe=T;return function(){var ge=T;T=oe;try{return G.apply(this,arguments)}finally{T=ge}}}})(Lp)),Lp}var Aw;function TN(){return Aw||(Aw=1,Mp.exports=EN()),Mp.exports}var Vp={exports:{}},xn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw;function AN(){if(Nw)return xn;Nw=1;var t=Bg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:g,containerInfo:y,implementation:v}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,xn.createPortal=function(g,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,v)},xn.flushSync=function(g){var y=d.T,v=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=v,s.d.f()}},xn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},xn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},xn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var v=y.as,_=p(v,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,I=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:I}):v==="script"&&s.d.X(g,{crossOrigin:_,integrity:T,fetchPriority:I,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},xn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},xn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,_=p(v,y.crossOrigin);s.d.L(g,v,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},xn.preloadModule=function(g,y){if(typeof g=="string")if(y){var v=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},xn.requestFormReset=function(g){s.d.r(g)},xn.unstable_batchedUpdates=function(g,y){return g(y)},xn.useFormState=function(g,y,v){return d.H.useFormState(g,y,v)},xn.useFormStatus=function(){return d.H.useHostTransitionStatus()},xn.version="19.1.1",xn}var Sw;function NN(){if(Sw)return Vp.exports;Sw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Vp.exports=AN(),Vp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function SN(){if(Cw)return Kc;Cw=1;var t=TN(),e=Bg(),n=NN();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function c(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function d(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(c(r)!==r)throw Error(s(188))}function g(r){var i=r.alternate;if(!i){if(i=c(r),i===null)throw Error(s(188));return i!==r?null:r}for(var a=r,u=i;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return p(f),r;if(m===u)return p(f),i;m=m.sibling}throw Error(s(188))}if(a.return!==u.return)a=f,u=m;else{for(var b=!1,E=f.child;E;){if(E===a){b=!0,a=f,u=m;break}if(E===u){b=!0,u=f,a=m;break}E=E.sibling}if(!b){for(E=m.child;E;){if(E===a){b=!0,a=m,u=f;break}if(E===u){b=!0,u=m,a=f;break}E=E.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?r:i}function y(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=y(r),i!==null)return i;r=r.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),q=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function O(r){return r===null||typeof r!="object"?null:(r=M&&r[M]||r["@@iterator"],typeof r=="function"?r:null)}var C=Symbol.for("react.client.reference");function ke(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===C?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case B:return"Fragment";case j:return"Profiler";case U:return"StrictMode";case te:return"Suspense";case de:return"SuspenseList";case S:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case I:return"Portal";case q:return(r.displayName||"Context")+".Provider";case F:return(r._context.displayName||"Context")+".Consumer";case ie:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case k:return i=r.displayName||null,i!==null?i:ke(r.type)||"Memo";case A:i=r._payload,r=r._init;try{return ke(r(i))}catch{}}return null}var Ee=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Ve=[],V=-1;function ue(r){return{current:r}}function ye(r){0>V||(r.current=Ve[V],Ve[V]=null,V--)}function ee(r,i){V++,Ve[V]=r.current,r.current=i}var le=ue(null),pe=ue(null),he=ue(null),Ue=ue(null);function et(r,i){switch(ee(he,i),ee(pe,r),ee(le,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?Yv(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=Yv(i),r=Qv(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ye(le),ee(le,r)}function On(){ye(le),ye(pe),ye(he)}function Rs(r){r.memoizedState!==null&&ee(Ue,r);var i=le.current,a=Qv(i,r.type);i!==a&&(ee(pe,r),ee(le,a))}function Xr(r){pe.current===r&&(ye(le),ye(pe)),Ue.current===r&&(ye(Ue),zc._currentValue=ge)}var js=Object.prototype.hasOwnProperty,Ye=t.unstable_scheduleCallback,Is=t.unstable_cancelCallback,wo=t.unstable_shouldYield,ks=t.unstable_requestPaint,on=t.unstable_now,bo=t.unstable_getCurrentPriorityLevel,Et=t.unstable_ImmediatePriority,Ut=t.unstable_UserBlockingPriority,Zt=t.unstable_NormalPriority,Wr=t.unstable_LowPriority,Kn=t.unstable_IdlePriority,_o=t.log,Zr=t.unstable_setDisableYieldValue,ar=null,Jt=null;function Pn(r){if(typeof _o=="function"&&Zr(r),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(ar,r)}catch{}}var ln=Math.clz32?Math.clz32:Eo,Mn=Math.log,An=Math.LN2;function Eo(r){return r>>>=0,r===0?32:31-(Mn(r)/An|0)|0}var or=256,Jr=4194304;function Ln(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Nn(r,i,a){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,b=r.pingedLanes;r=r.warmLanes;var E=u&134217727;return E!==0?(u=E&~m,u!==0?f=Ln(u):(b&=E,b!==0?f=Ln(b):a||(a=E&~r,a!==0&&(f=Ln(a))))):(E=u&~m,E!==0?f=Ln(E):b!==0?f=Ln(b):a||(a=u&~r,a!==0&&(f=Ln(a)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:f}function Rr(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Ds(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ya(){var r=or;return or<<=1,(or&4194048)===0&&(or=256),r}function es(){var r=Jr;return Jr<<=1,(Jr&62914560)===0&&(Jr=4194304),r}function gi(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function wt(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function To(r,i,a,u,f,m){var b=r.pendingLanes;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=a,r.entangledLanes&=a,r.errorRecoveryDisabledLanes&=a,r.shellSuspendCounter=0;var E=r.entanglements,D=r.expirationTimes,Q=r.hiddenUpdates;for(a=b&~a;0<a;){var ne=31-ln(a),ae=1<<ne;E[ne]=0,D[ne]=-1;var X=Q[ne];if(X!==null)for(Q[ne]=null,ne=0;ne<X.length;ne++){var W=X[ne];W!==null&&(W.lane&=-536870913)}a&=~ae}u!==0&&ts(r,u,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(b&~i))}function ts(r,i,a){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-ln(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|a&4194090}function jr(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var u=31-ln(a),f=1<<u;f&i|r[u]&i&&(r[u]|=i),a&=~f}}function yi(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function xi(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function lr(){var r=oe.p;return r!==0?r:(r=window.event,r===void 0?32:mw(r.type))}function $l(r,i){var a=oe.p;try{return oe.p=r,i()}finally{oe.p=a}}var cr=Math.random().toString(36).slice(2),Tt="__reactFiber$"+cr,P="__reactProps$"+cr,me="__reactContainer$"+cr,be="__reactEvents$"+cr,We="__reactListeners$"+cr,Sn="__reactHandles$"+cr,Bt="__reactResources$"+cr,ur="__reactMarker$"+cr;function ns(r){delete r[Tt],delete r[P],delete r[be],delete r[We],delete r[Sn]}function dr(r){var i=r[Tt];if(i)return i;for(var a=r.parentNode;a;){if(i=a[me]||a[Tt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=Jv(r);r!==null;){if(a=r[Tt])return a;r=Jv(r)}return i}r=a,a=r.parentNode}return null}function hr(r){if(r=r[Tt]||r[me]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function Os(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function rs(r){var i=r[Bt];return i||(i=r[Bt]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function At(r){r[ur]=!0}var Ps=new Set,Ms={};function ss(r,i){is(r,i),is(r+"Capture",i)}function is(r,i){for(Ms[r]=i,r=0;r<i.length;r++)Ps.add(i[r])}var xa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),as={},Ao={};function Bf(r){return js.call(Ao,r)?!0:js.call(as,r)?!1:xa.test(r)?Ao[r]=!0:(as[r]=!0,!1)}function va(r,i,a){if(Bf(i))if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+a)}}function wa(r,i,a){if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+a)}}function fr(r,i,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttributeNS(i,a,""+u)}}var ba,No;function Ls(r){if(ba===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ba=i&&i[1]||"",No=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ba+r+No}var So=!1;function Co(r,i){if(!r||So)return"";So=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(W){var X=W}Reflect.construct(r,[],ae)}else{try{ae.call()}catch(W){X=W}r.call(ae.prototype)}}else{try{throw Error()}catch(W){X=W}(ae=r())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(W){if(W&&X&&typeof W.stack=="string")return[W.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),b=m[0],E=m[1];if(b&&E){var D=b.split(`
`),Q=E.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===Q.length)for(u=D.length-1,f=Q.length-1;1<=u&&0<=f&&D[u]!==Q[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==Q[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==Q[f]){var ne=`
`+D[u].replace(" at new "," at ");return r.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",r.displayName)),ne}while(1<=u&&0<=f);break}}}finally{So=!1,Error.prepareStackTrace=a}return(a=r?r.displayName||r.name:"")?Ls(a):""}function zf(r){switch(r.tag){case 26:case 27:case 5:return Ls(r.type);case 16:return Ls("Lazy");case 13:return Ls("Suspense");case 19:return Ls("SuspenseList");case 0:case 15:return Co(r.type,!1);case 11:return Co(r.type.render,!1);case 1:return Co(r.type,!0);case 31:return Ls("Activity");default:return""}}function Ir(r){try{var i="";do i+=zf(r),r=r.return;while(r);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Nt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function vi(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function _a(r){var i=vi(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),u=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(b){u=""+b,m.call(this,b)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function wi(r){r._valueTracker||(r._valueTracker=_a(r))}function lt(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return r&&(u=vi(r)?r.checked?"true":"false":r.value),r=u,r!==a?(i.setValue(r),!0):!1}function Vs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ea=/[\n"\\]/g;function en(r){return r.replace(Ea,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Gl(r,i,a,u,f,m,b,E){r.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?r.type=b:r.removeAttribute("type"),i!=null?b==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Nt(i)):r.value!==""+Nt(i)&&(r.value=""+Nt(i)):b!=="submit"&&b!=="reset"||r.removeAttribute("value"),i!=null?Yl(r,b,Nt(i)):a!=null?Yl(r,b,Nt(a)):u!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.name=""+Nt(E):r.removeAttribute("name")}function Kl(r,i,a,u,f,m,b,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;a=a!=null?""+Nt(a):"",i=i!=null?""+Nt(i):a,E||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=E?r.checked:!!u,r.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.name=b)}function Yl(r,i,a){i==="number"&&Vs(r.ownerDocument)===r||r.defaultValue===""+a||(r.defaultValue=""+a)}function bi(r,i,a,u){if(r=r.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=i.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&u&&(r[a].defaultSelected=!0)}else{for(a=""+Nt(a),i=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function Uu(r,i,a){if(i!=null&&(i=""+Nt(i),i!==r.value&&(r.value=i),a==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=a!=null?""+Nt(a):""}function Bu(r,i,a,u){if(i==null){if(u!=null){if(a!=null)throw Error(s(92));if(Ee(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),i=a}a=Nt(i),r.defaultValue=a,u=r.textContent,u===a&&u!==""&&u!==null&&(r.value=u)}function mr(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var Us=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(r,i,a){var u=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,a):typeof a!="number"||a===0||Us.has(i)?i==="float"?r.cssFloat=a:r[i]=(""+a).trim():r[i]=a+"px"}function Xl(r,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&a[f]!==u&&Ql(r,f,u)}else for(var m in i)i.hasOwnProperty(m)&&Ql(r,m,i[m])}function Ro(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kr(r){return Fu.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Wl=null;function Zl(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _i=null,Cn=null;function qu(r){var i=hr(r);if(i&&(r=i.stateNode)){var a=r[P]||null;e:switch(r=i.stateNode,i.type){case"input":if(Gl(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+en(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==r&&u.form===r.form){var f=u[P]||null;if(!f)throw Error(s(90));Gl(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)u=a[i],u.form===r.form&&lt(u)}break e;case"textarea":Uu(r,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&bi(r,!!a.multiple,i,!1)}}}var Ta=!1;function Aa(r,i,a){if(Ta)return r(i,a);Ta=!0;try{var u=r(i);return u}finally{if(Ta=!1,(_i!==null||Cn!==null)&&(kd(),_i&&(i=_i,r=Cn,Cn=_i=null,qu(i),r)))for(i=0;i<r.length;i++)qu(r[i])}}function Ei(r,i){var a=r.stateNode;if(a===null)return null;var u=a[P]||null;if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bs=!1;if(Rn)try{var Ti={};Object.defineProperty(Ti,"passive",{get:function(){Bs=!0}}),window.addEventListener("test",Ti,Ti),window.removeEventListener("test",Ti,Ti)}catch{Bs=!1}var pr=null,ft=null,jo=null;function Hu(){if(jo)return jo;var r,i=ft,a=i.length,u,f="value"in pr?pr.value:pr.textContent,m=f.length;for(r=0;r<a&&i[r]===f[r];r++);var b=a-r;for(u=1;u<=b&&i[a-u]===f[m-u];u++);return jo=f.slice(r,1<u?1-u:void 0)}function Na(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Sa(){return!0}function Jl(){return!1}function Kt(r){function i(a,u,f,m,b){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var E in r)r.hasOwnProperty(E)&&(a=r[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Sa:Jl,this.isPropagationStopped=Jl,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Sa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Sa)},persist:function(){},isPersistent:Sa}),i}var gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=Kt(gn),Ra=v({},gn,{view:0,detail:0}),ja=Kt(Ra),Io,Ia,os,ka=v({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oo,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==os&&(os&&r.type==="mousemove"?(Io=r.screenX-os.screenX,Ia=r.screenY-os.screenY):Ia=Io=0,os=r),Io)},movementY:function(r){return"movementY"in r?r.movementY:Ia}}),Da=Kt(ka),Ff=v({},ka,{dataTransfer:0}),$u=Kt(Ff),Oa=v({},Ra,{relatedTarget:0}),ko=Kt(Oa),Gu=v({},gn,{animationName:0,elapsedTime:0,pseudoElement:0}),ec=Kt(Gu),tc=v({},gn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ku=Kt(tc),Do=v({},gn,{data:0}),nc=Kt(Do),Yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xu(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Qu[r])?!!i[r]:!1}function Oo(){return Xu}var Wu=v({},Ra,{key:function(r){if(r.key){var i=Yu[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Na(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?zs[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oo,charCode:function(r){return r.type==="keypress"?Na(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Na(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Po=Kt(Wu),jn=v({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rc=Kt(jn),Zu=v({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oo}),Ai=Kt(Zu),h=v({},gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=Kt(h),w=v({},ka,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),N=Kt(w),Y=v({},gn,{newState:0,oldState:0}),Z=Kt(Y),fe=[9,13,27,32],Pe=Rn&&"CompositionEvent"in window,xt=null;Rn&&"documentMode"in document&&(xt=document.documentMode);var st=Rn&&"TextEvent"in window&&!xt,kt=Rn&&(!Pe||xt&&8<xt&&11>=xt),Yn=" ",ls=!1;function Dr(r,i){switch(r){case"keyup":return fe.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Or(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Pr=!1;function sc(r,i){switch(r){case"compositionend":return Or(i);case"keypress":return i.which!==32?null:(ls=!0,Yn);case"textInput":return r=i.data,r===Yn&&ls?null:r;default:return null}}function GT(r,i){if(Pr)return r==="compositionend"||!Pe&&Dr(r,i)?(r=Hu(),jo=ft=pr=null,Pr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return kt&&i.locale!=="ko"?null:i.data;default:return null}}var KT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ly(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!KT[r.type]:i==="textarea"}function cy(r,i,a,u){_i?Cn?Cn.push(u):Cn=[u]:_i=u,i=Vd(i,"onChange"),0<i.length&&(a=new Ca("onChange","change",null,a,u),r.push({event:a,listeners:i}))}var ic=null,ac=null;function YT(r){qv(r,0)}function Ju(r){var i=Os(r);if(lt(i))return r}function uy(r,i){if(r==="change")return i}var dy=!1;if(Rn){var qf;if(Rn){var Hf="oninput"in document;if(!Hf){var hy=document.createElement("div");hy.setAttribute("oninput","return;"),Hf=typeof hy.oninput=="function"}qf=Hf}else qf=!1;dy=qf&&(!document.documentMode||9<document.documentMode)}function fy(){ic&&(ic.detachEvent("onpropertychange",my),ac=ic=null)}function my(r){if(r.propertyName==="value"&&Ju(ac)){var i=[];cy(i,ac,r,Zl(r)),Aa(YT,i)}}function QT(r,i,a){r==="focusin"?(fy(),ic=i,ac=a,ic.attachEvent("onpropertychange",my)):r==="focusout"&&fy()}function XT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ju(ac)}function WT(r,i){if(r==="click")return Ju(i)}function ZT(r,i){if(r==="input"||r==="change")return Ju(i)}function JT(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Qn=typeof Object.is=="function"?Object.is:JT;function oc(r,i){if(Qn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!js.call(i,f)||!Qn(r[f],i[f]))return!1}return!0}function py(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function gy(r,i){var a=py(r);r=0;for(var u;a;){if(a.nodeType===3){if(u=r+a.textContent.length,r<=i&&u>=i)return{node:a,offset:i-r};r=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=py(a)}}function yy(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?yy(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function xy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Vs(r.document);i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=Vs(r.document)}return i}function $f(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var eA=Rn&&"documentMode"in document&&11>=document.documentMode,Mo=null,Gf=null,lc=null,Kf=!1;function vy(r,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Kf||Mo==null||Mo!==Vs(u)||(u=Mo,"selectionStart"in u&&$f(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),lc&&oc(lc,u)||(lc=u,u=Vd(Gf,"onSelect"),0<u.length&&(i=new Ca("onSelect","select",null,i,a),r.push({event:i,listeners:u}),i.target=Mo)))}function Pa(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var Lo={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionrun:Pa("Transition","TransitionRun"),transitionstart:Pa("Transition","TransitionStart"),transitioncancel:Pa("Transition","TransitionCancel"),transitionend:Pa("Transition","TransitionEnd")},Yf={},wy={};Rn&&(wy=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Ma(r){if(Yf[r])return Yf[r];if(!Lo[r])return r;var i=Lo[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in wy)return Yf[r]=i[a];return r}var by=Ma("animationend"),_y=Ma("animationiteration"),Ey=Ma("animationstart"),tA=Ma("transitionrun"),nA=Ma("transitionstart"),rA=Ma("transitioncancel"),Ty=Ma("transitionend"),Ay=new Map,Qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qf.push("scrollEnd");function Mr(r,i){Ay.set(r,i),ss(i,[r])}var Ny=new WeakMap;function gr(r,i){if(typeof r=="object"&&r!==null){var a=Ny.get(r);return a!==void 0?a:(i={value:r,source:i,stack:Ir(i)},Ny.set(r,i),i)}return{value:r,source:i,stack:Ir(i)}}var yr=[],Vo=0,Xf=0;function ed(){for(var r=Vo,i=Xf=Vo=0;i<r;){var a=yr[i];yr[i++]=null;var u=yr[i];yr[i++]=null;var f=yr[i];yr[i++]=null;var m=yr[i];if(yr[i++]=null,u!==null&&f!==null){var b=u.pending;b===null?f.next=f:(f.next=b.next,b.next=f),u.pending=f}m!==0&&Sy(a,f,m)}}function td(r,i,a,u){yr[Vo++]=r,yr[Vo++]=i,yr[Vo++]=a,yr[Vo++]=u,Xf|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Wf(r,i,a,u){return td(r,i,a,u),nd(r)}function Uo(r,i){return td(r,null,null,i),nd(r)}function Sy(r,i,a){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a);for(var f=!1,m=r.return;m!==null;)m.childLanes|=a,u=m.alternate,u!==null&&(u.childLanes|=a),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&i!==null&&(f=31-ln(a),r=m.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=a|536870912),m):null}function nd(r){if(50<Dc)throw Dc=0,rp=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Bo={};function sA(r,i,a,u){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(r,i,a,u){return new sA(r,i,a,u)}function Zf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Fs(r,i){var a=r.alternate;return a===null?(a=Xn(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&65011712,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a.refCleanup=r.refCleanup,a}function Cy(r,i){r.flags&=65011714;var a=r.alternate;return a===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,i=a.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function rd(r,i,a,u,f,m){var b=0;if(u=r,typeof r=="function")Zf(r)&&(b=1);else if(typeof r=="string")b=aN(r,a,le.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case S:return r=Xn(31,a,i,f),r.elementType=S,r.lanes=m,r;case B:return La(a.children,f,m,i);case U:b=8,f|=24;break;case j:return r=Xn(12,a,i,f|2),r.elementType=j,r.lanes=m,r;case te:return r=Xn(13,a,i,f),r.elementType=te,r.lanes=m,r;case de:return r=Xn(19,a,i,f),r.elementType=de,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case H:case q:b=10;break e;case F:b=9;break e;case ie:b=11;break e;case k:b=14;break e;case A:b=16,u=null;break e}b=29,a=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=Xn(b,a,i,f),i.elementType=r,i.type=u,i.lanes=m,i}function La(r,i,a,u){return r=Xn(7,r,u,i),r.lanes=a,r}function Jf(r,i,a){return r=Xn(6,r,null,i),r.lanes=a,r}function em(r,i,a){return i=Xn(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var zo=[],Fo=0,sd=null,id=0,xr=[],vr=0,Va=null,qs=1,Hs="";function Ua(r,i){zo[Fo++]=id,zo[Fo++]=sd,sd=r,id=i}function Ry(r,i,a){xr[vr++]=qs,xr[vr++]=Hs,xr[vr++]=Va,Va=r;var u=qs;r=Hs;var f=32-ln(u)-1;u&=~(1<<f),a+=1;var m=32-ln(i)+f;if(30<m){var b=f-f%5;m=(u&(1<<b)-1).toString(32),u>>=b,f-=b,qs=1<<32-ln(i)+f|a<<f|u,Hs=m+r}else qs=1<<m|a<<f|u,Hs=r}function tm(r){r.return!==null&&(Ua(r,1),Ry(r,1,0))}function nm(r){for(;r===sd;)sd=zo[--Fo],zo[Fo]=null,id=zo[--Fo],zo[Fo]=null;for(;r===Va;)Va=xr[--vr],xr[vr]=null,Hs=xr[--vr],xr[vr]=null,qs=xr[--vr],xr[vr]=null}var In=null,Rt=null,tt=!1,Ba=null,cs=!1,rm=Error(s(519));function za(r){var i=Error(s(418,""));throw dc(gr(i,r)),rm}function jy(r){var i=r.stateNode,a=r.type,u=r.memoizedProps;switch(i[Tt]=r,i[P]=u,a){case"dialog":qe("cancel",i),qe("close",i);break;case"iframe":case"object":case"embed":qe("load",i);break;case"video":case"audio":for(a=0;a<Pc.length;a++)qe(Pc[a],i);break;case"source":qe("error",i);break;case"img":case"image":case"link":qe("error",i),qe("load",i);break;case"details":qe("toggle",i);break;case"input":qe("invalid",i),Kl(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),wi(i);break;case"select":qe("invalid",i);break;case"textarea":qe("invalid",i),Bu(i,u.value,u.defaultValue,u.children),wi(i)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||u.suppressHydrationWarning===!0||Kv(i.textContent,a)?(u.popover!=null&&(qe("beforetoggle",i),qe("toggle",i)),u.onScroll!=null&&qe("scroll",i),u.onScrollEnd!=null&&qe("scrollend",i),u.onClick!=null&&(i.onclick=Ud),i=!0):i=!1,i||za(r)}function Iy(r){for(In=r.return;In;)switch(In.tag){case 5:case 13:cs=!1;return;case 27:case 3:cs=!0;return;default:In=In.return}}function cc(r){if(r!==In)return!1;if(!tt)return Iy(r),tt=!0,!1;var i=r.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=r.type,a=!(a!=="form"&&a!=="button")||vp(r.type,r.memoizedProps)),a=!a),a&&Rt&&za(r),Iy(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(a=r.data,a==="/$"){if(i===0){Rt=Vr(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;r=r.nextSibling}Rt=null}}else i===27?(i=Rt,zi(r.type)?(r=Ep,Ep=null,Rt=r):Rt=i):Rt=In?Vr(r.stateNode.nextSibling):null;return!0}function uc(){Rt=In=null,tt=!1}function ky(){var r=Ba;return r!==null&&(Bn===null?Bn=r:Bn.push.apply(Bn,r),Ba=null),r}function dc(r){Ba===null?Ba=[r]:Ba.push(r)}var sm=ue(null),Fa=null,$s=null;function Ni(r,i,a){ee(sm,i._currentValue),i._currentValue=a}function Gs(r){r._currentValue=sm.current,ye(sm)}function im(r,i,a){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===a)break;r=r.return}}function am(r,i,a,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var D=0;D<i.length;D++)if(E.context===i[D]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),im(m.return,a,r),u||(b=null);break e}m=E.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(s(341));b.lanes|=a,m=b.alternate,m!==null&&(m.lanes|=a),im(b,a,r),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===r){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function hc(r,i,a,u){r=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var E=f.type;Qn(f.pendingProps.value,b.value)||(r!==null?r.push(E):r=[E])}}else if(f===Ue.current){if(b=f.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(zc):r=[zc])}f=f.return}r!==null&&am(i,r,a,u),i.flags|=262144}function ad(r){for(r=r.firstContext;r!==null;){if(!Qn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function qa(r){Fa=r,$s=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function yn(r){return Dy(Fa,r)}function od(r,i){return Fa===null&&qa(r),Dy(r,i)}function Dy(r,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},$s===null){if(r===null)throw Error(s(308));$s=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else $s=$s.next=i;return a}var iA=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(a,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(a){return a()})}},aA=t.unstable_scheduleCallback,oA=t.unstable_NormalPriority,Yt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function om(){return{controller:new iA,data:new Map,refCount:0}}function fc(r){r.refCount--,r.refCount===0&&aA(oA,function(){r.controller.abort()})}var mc=null,lm=0,qo=0,Ho=null;function lA(r,i){if(mc===null){var a=mc=[];lm=0,qo=up(),Ho={status:"pending",value:void 0,then:function(u){a.push(u)}}}return lm++,i.then(Oy,Oy),i}function Oy(){if(--lm===0&&mc!==null){Ho!==null&&(Ho.status="fulfilled");var r=mc;mc=null,qo=0,Ho=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function cA(r,i){var a=[],u={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),u}var Py=G.S;G.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&lA(r,i),Py!==null&&Py(r,i)};var Ha=ue(null);function cm(){var r=Ha.current;return r!==null?r:mt.pooledCache}function ld(r,i){i===null?ee(Ha,Ha.current):ee(Ha,i.pool)}function My(){var r=cm();return r===null?null:{parent:Yt._currentValue,pool:r}}var pc=Error(s(460)),Ly=Error(s(474)),cd=Error(s(542)),um={then:function(){}};function Vy(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ud(){}function Uy(r,i,a){switch(a=r[a],a===void 0?r.push(i):a!==i&&(i.then(ud,ud),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,zy(r),r;default:if(typeof i.status=="string")i.then(ud,ud);else{if(r=mt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,zy(r),r}throw gc=i,pc}}var gc=null;function By(){if(gc===null)throw Error(s(459));var r=gc;return gc=null,r}function zy(r){if(r===pc||r===cd)throw Error(s(483))}var Si=!1;function dm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ci(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ri(r,i,a){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(it&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=nd(r),Sy(r,null,a),i}return td(r,u,i,a),nd(r)}function yc(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,a|=u,i.lanes=a,jr(r,a)}}function fm(r,i){var a=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,a=a.next}while(a!==null);m===null?f=m=i:m=m.next=i}else f=m=i;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}var mm=!1;function xc(){if(mm){var r=Ho;if(r!==null)throw r}}function vc(r,i,a,u){mm=!1;var f=r.updateQueue;Si=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var D=E,Q=D.next;D.next=null,b===null?m=Q:b.next=Q,b=D;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,E=ne.lastBaseUpdate,E!==b&&(E===null?ne.firstBaseUpdate=Q:E.next=Q,ne.lastBaseUpdate=D))}if(m!==null){var ae=f.baseState;b=0,ne=Q=D=null,E=m;do{var X=E.lane&-536870913,W=X!==E.lane;if(W?(Qe&X)===X:(u&X)===X){X!==0&&X===qo&&(mm=!0),ne!==null&&(ne=ne.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var De=r,Se=E;X=i;var dt=a;switch(Se.tag){case 1:if(De=Se.payload,typeof De=="function"){ae=De.call(dt,ae,X);break e}ae=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Se.payload,X=typeof De=="function"?De.call(dt,ae,X):De,X==null)break e;ae=v({},ae,X);break e;case 2:Si=!0}}X=E.callback,X!==null&&(r.flags|=64,W&&(r.flags|=8192),W=f.callbacks,W===null?f.callbacks=[X]:W.push(X))}else W={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ne===null?(Q=ne=W,D=ae):ne=ne.next=W,b|=X;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;W=E,E=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);ne===null&&(D=ae),f.baseState=D,f.firstBaseUpdate=Q,f.lastBaseUpdate=ne,m===null&&(f.shared.lanes=0),Li|=b,r.lanes=b,r.memoizedState=ae}}function Fy(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function qy(r,i){var a=r.callbacks;if(a!==null)for(r.callbacks=null,r=0;r<a.length;r++)Fy(a[r],i)}var $o=ue(null),dd=ue(0);function Hy(r,i){r=Js,ee(dd,r),ee($o,i),Js=r|i.baseLanes}function pm(){ee(dd,Js),ee($o,$o.current)}function gm(){Js=dd.current,ye($o),ye(dd)}var ji=0,Be=null,ct=null,zt=null,hd=!1,Go=!1,$a=!1,fd=0,wc=0,Ko=null,uA=0;function Dt(){throw Error(s(321))}function ym(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!Qn(r[a],i[a]))return!1;return!0}function xm(r,i,a,u,f,m){return ji=m,Be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=r===null||r.memoizedState===null?Sx:Cx,$a=!1,m=a(u,f),$a=!1,Go&&(m=Gy(i,a,u,f)),$y(r),m}function $y(r){G.H=vd;var i=ct!==null&&ct.next!==null;if(ji=0,zt=ct=Be=null,hd=!1,wc=0,Ko=null,i)throw Error(s(300));r===null||tn||(r=r.dependencies,r!==null&&ad(r)&&(tn=!0))}function Gy(r,i,a,u){Be=r;var f=0;do{if(Go&&(Ko=null),wc=0,Go=!1,25<=f)throw Error(s(301));if(f+=1,zt=ct=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}G.H=yA,m=i(a,u)}while(Go);return m}function dA(){var r=G.H,i=r.useState()[0];return i=typeof i.then=="function"?bc(i):i,r=r.useState()[0],(ct!==null?ct.memoizedState:null)!==r&&(Be.flags|=1024),i}function vm(){var r=fd!==0;return fd=0,r}function wm(r,i,a){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~a}function bm(r){if(hd){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hd=!1}ji=0,zt=ct=Be=null,Go=!1,wc=fd=0,Ko=null}function Vn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Be.memoizedState=zt=r:zt=zt.next=r,zt}function Ft(){if(ct===null){var r=Be.alternate;r=r!==null?r.memoizedState:null}else r=ct.next;var i=zt===null?Be.memoizedState:zt.next;if(i!==null)zt=i,ct=r;else{if(r===null)throw Be.alternate===null?Error(s(467)):Error(s(310));ct=r,r={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},zt===null?Be.memoizedState=zt=r:zt=zt.next=r}return zt}function _m(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bc(r){var i=wc;return wc+=1,Ko===null&&(Ko=[]),r=Uy(Ko,r,i),i=Be,(zt===null?i.memoizedState:zt.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?Sx:Cx),r}function md(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return bc(r);if(r.$$typeof===q)return yn(r)}throw Error(s(438,String(r)))}function Em(r){var i=null,a=Be.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var u=Be.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=_m(),Be.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(r),u=0;u<r;u++)a[u]=L;return i.index++,a}function Ks(r,i){return typeof i=="function"?i(r):i}function pd(r){var i=Ft();return Tm(i,ct,r)}function Tm(r,i,a){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var f=r.baseQueue,m=u.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}i.baseQueue=f=m,u.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{i=f.next;var E=b=null,D=null,Q=i,ne=!1;do{var ae=Q.lane&-536870913;if(ae!==Q.lane?(Qe&ae)===ae:(ji&ae)===ae){var X=Q.revertLane;if(X===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ae===qo&&(ne=!0);else if((ji&X)===X){Q=Q.next,X===qo&&(ne=!0);continue}else ae={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},D===null?(E=D=ae,b=m):D=D.next=ae,Be.lanes|=X,Li|=X;ae=Q.action,$a&&a(m,ae),m=Q.hasEagerState?Q.eagerState:a(m,ae)}else X={lane:ae,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},D===null?(E=D=X,b=m):D=D.next=X,Be.lanes|=ae,Li|=ae;Q=Q.next}while(Q!==null&&Q!==i);if(D===null?b=m:D.next=E,!Qn(m,r.memoizedState)&&(tn=!0,ne&&(a=Ho,a!==null)))throw a;r.memoizedState=m,r.baseState=b,r.baseQueue=D,u.lastRenderedState=m}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Am(r){var i=Ft(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var u=a.dispatch,f=a.pending,m=i.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do m=r(m,b.action),b=b.next;while(b!==f);Qn(m,i.memoizedState)||(tn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,u]}function Ky(r,i,a){var u=Be,f=Ft(),m=tt;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=i();var b=!Qn((ct||f).memoizedState,a);b&&(f.memoizedState=a,tn=!0),f=f.queue;var E=Xy.bind(null,u,f,r);if(_c(2048,8,E,[r]),f.getSnapshot!==i||b||zt!==null&&zt.memoizedState.tag&1){if(u.flags|=2048,Yo(9,gd(),Qy.bind(null,u,f,a,i),null),mt===null)throw Error(s(349));m||(ji&124)!==0||Yy(u,i,a)}return a}function Yy(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=Be.updateQueue,i===null?(i=_m(),Be.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function Qy(r,i,a,u){i.value=a,i.getSnapshot=u,Wy(i)&&Zy(r)}function Xy(r,i,a){return a(function(){Wy(i)&&Zy(r)})}function Wy(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!Qn(r,a)}catch{return!0}}function Zy(r){var i=Uo(r,2);i!==null&&tr(i,r,2)}function Nm(r){var i=Vn();if(typeof r=="function"){var a=r;if(r=a(),$a){Pn(!0);try{a()}finally{Pn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:r},i}function Jy(r,i,a,u){return r.baseState=a,Tm(r,ct,typeof u=="function"?u:Ks)}function hA(r,i,a,u,f){if(xd(r))throw Error(s(485));if(r=i.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};G.T!==null?a(!0):m.isTransition=!1,u(m),a=i.pending,a===null?(m.next=i.pending=m,ex(i,m)):(m.next=a.next,i.pending=a.next=m)}}function ex(r,i){var a=i.action,u=i.payload,f=r.state;if(i.isTransition){var m=G.T,b={};G.T=b;try{var E=a(f,u),D=G.S;D!==null&&D(b,E),tx(r,i,E)}catch(Q){Sm(r,i,Q)}finally{G.T=m}}else try{m=a(f,u),tx(r,i,m)}catch(Q){Sm(r,i,Q)}}function tx(r,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){nx(r,i,u)},function(u){return Sm(r,i,u)}):nx(r,i,a)}function nx(r,i,a){i.status="fulfilled",i.value=a,rx(i),r.state=a,i=r.pending,i!==null&&(a=i.next,a===i?r.pending=null:(a=a.next,i.next=a,ex(r,a)))}function Sm(r,i,a){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=a,rx(i),i=i.next;while(i!==u)}r.action=null}function rx(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function sx(r,i){return i}function ix(r,i){if(tt){var a=mt.formState;if(a!==null){e:{var u=Be;if(tt){if(Rt){t:{for(var f=Rt,m=cs;f.nodeType!==8;){if(!m){f=null;break t}if(f=Vr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Rt=Vr(f.nextSibling),u=f.data==="F!";break e}}za(u)}u=!1}u&&(i=a[0])}}return a=Vn(),a.memoizedState=a.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sx,lastRenderedState:i},a.queue=u,a=Tx.bind(null,Be,u),u.dispatch=a,u=Nm(!1),m=km.bind(null,Be,!1,u.queue),u=Vn(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,a=hA.bind(null,Be,f,m,a),f.dispatch=a,u.memoizedState=r,[i,a,!1]}function ax(r){var i=Ft();return ox(i,ct,r)}function ox(r,i,a){if(i=Tm(r,i,sx)[0],r=pd(Ks)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=bc(i)}catch(b){throw b===pc?cd:b}else u=i;i=Ft();var f=i.queue,m=f.dispatch;return a!==i.memoizedState&&(Be.flags|=2048,Yo(9,gd(),fA.bind(null,f,a),null)),[u,m,r]}function fA(r,i){r.action=i}function lx(r){var i=Ft(),a=ct;if(a!==null)return ox(i,a,r);Ft(),i=i.memoizedState,a=Ft();var u=a.queue.dispatch;return a.memoizedState=r,[i,u,!1]}function Yo(r,i,a,u){return r={tag:r,create:a,deps:u,inst:i,next:null},i=Be.updateQueue,i===null&&(i=_m(),Be.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=r.next=r:(u=a.next,a.next=r,r.next=u,i.lastEffect=r),r}function gd(){return{destroy:void 0,resource:void 0}}function cx(){return Ft().memoizedState}function yd(r,i,a,u){var f=Vn();u=u===void 0?null:u,Be.flags|=r,f.memoizedState=Yo(1|i,gd(),a,u)}function _c(r,i,a,u){var f=Ft();u=u===void 0?null:u;var m=f.memoizedState.inst;ct!==null&&u!==null&&ym(u,ct.memoizedState.deps)?f.memoizedState=Yo(i,m,a,u):(Be.flags|=r,f.memoizedState=Yo(1|i,m,a,u))}function ux(r,i){yd(8390656,8,r,i)}function dx(r,i){_c(2048,8,r,i)}function hx(r,i){return _c(4,2,r,i)}function fx(r,i){return _c(4,4,r,i)}function mx(r,i){if(typeof i=="function"){r=r();var a=i(r);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function px(r,i,a){a=a!=null?a.concat([r]):null,_c(4,4,mx.bind(null,i,r),a)}function Cm(){}function gx(r,i){var a=Ft();i=i===void 0?null:i;var u=a.memoizedState;return i!==null&&ym(i,u[1])?u[0]:(a.memoizedState=[r,i],r)}function yx(r,i){var a=Ft();i=i===void 0?null:i;var u=a.memoizedState;if(i!==null&&ym(i,u[1]))return u[0];if(u=r(),$a){Pn(!0);try{r()}finally{Pn(!1)}}return a.memoizedState=[u,i],u}function Rm(r,i,a){return a===void 0||(ji&1073741824)!==0?r.memoizedState=i:(r.memoizedState=a,r=wv(),Be.lanes|=r,Li|=r,a)}function xx(r,i,a,u){return Qn(a,i)?a:$o.current!==null?(r=Rm(r,a,u),Qn(r,i)||(tn=!0),r):(ji&42)===0?(tn=!0,r.memoizedState=a):(r=wv(),Be.lanes|=r,Li|=r,i)}function vx(r,i,a,u,f){var m=oe.p;oe.p=m!==0&&8>m?m:8;var b=G.T,E={};G.T=E,km(r,!1,i,a);try{var D=f(),Q=G.S;if(Q!==null&&Q(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ne=cA(D,u);Ec(r,i,ne,er(r))}else Ec(r,i,u,er(r))}catch(ae){Ec(r,i,{then:function(){},status:"rejected",reason:ae},er())}finally{oe.p=m,G.T=b}}function mA(){}function jm(r,i,a,u){if(r.tag!==5)throw Error(s(476));var f=wx(r).queue;vx(r,f,i,ge,a===null?mA:function(){return bx(r),a(u)})}function wx(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:ge},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:a},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function bx(r){var i=wx(r).next.queue;Ec(r,i,{},er())}function Im(){return yn(zc)}function _x(){return Ft().memoizedState}function Ex(){return Ft().memoizedState}function pA(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var a=er();r=Ci(a);var u=Ri(i,r,a);u!==null&&(tr(u,i,a),yc(u,i,a)),i={cache:om()},r.payload=i;return}i=i.return}}function gA(r,i,a){var u=er();a={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},xd(r)?Ax(i,a):(a=Wf(r,i,a,u),a!==null&&(tr(a,r,u),Nx(a,i,u)))}function Tx(r,i,a){var u=er();Ec(r,i,a,u)}function Ec(r,i,a,u){var f={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(xd(r))Ax(i,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var b=i.lastRenderedState,E=m(b,a);if(f.hasEagerState=!0,f.eagerState=E,Qn(E,b))return td(r,i,f,0),mt===null&&ed(),!1}catch{}finally{}if(a=Wf(r,i,f,u),a!==null)return tr(a,r,u),Nx(a,i,u),!0}return!1}function km(r,i,a,u){if(u={lane:2,revertLane:up(),action:u,hasEagerState:!1,eagerState:null,next:null},xd(r)){if(i)throw Error(s(479))}else i=Wf(r,a,u,2),i!==null&&tr(i,r,2)}function xd(r){var i=r.alternate;return r===Be||i!==null&&i===Be}function Ax(r,i){Go=hd=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function Nx(r,i,a){if((a&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,a|=u,i.lanes=a,jr(r,a)}}var vd={readContext:yn,use:md,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt},Sx={readContext:yn,use:md,useCallback:function(r,i){return Vn().memoizedState=[r,i===void 0?null:i],r},useContext:yn,useEffect:ux,useImperativeHandle:function(r,i,a){a=a!=null?a.concat([r]):null,yd(4194308,4,mx.bind(null,i,r),a)},useLayoutEffect:function(r,i){return yd(4194308,4,r,i)},useInsertionEffect:function(r,i){yd(4,2,r,i)},useMemo:function(r,i){var a=Vn();i=i===void 0?null:i;var u=r();if($a){Pn(!0);try{r()}finally{Pn(!1)}}return a.memoizedState=[u,i],u},useReducer:function(r,i,a){var u=Vn();if(a!==void 0){var f=a(i);if($a){Pn(!0);try{a(i)}finally{Pn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=gA.bind(null,Be,r),[u.memoizedState,r]},useRef:function(r){var i=Vn();return r={current:r},i.memoizedState=r},useState:function(r){r=Nm(r);var i=r.queue,a=Tx.bind(null,Be,i);return i.dispatch=a,[r.memoizedState,a]},useDebugValue:Cm,useDeferredValue:function(r,i){var a=Vn();return Rm(a,r,i)},useTransition:function(){var r=Nm(!1);return r=vx.bind(null,Be,r.queue,!0,!1),Vn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,a){var u=Be,f=Vn();if(tt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),mt===null)throw Error(s(349));(Qe&124)!==0||Yy(u,i,a)}f.memoizedState=a;var m={value:a,getSnapshot:i};return f.queue=m,ux(Xy.bind(null,u,m,r),[r]),u.flags|=2048,Yo(9,gd(),Qy.bind(null,u,m,a,i),null),a},useId:function(){var r=Vn(),i=mt.identifierPrefix;if(tt){var a=Hs,u=qs;a=(u&~(1<<32-ln(u)-1)).toString(32)+a,i="«"+i+"R"+a,a=fd++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=uA++,i="«"+i+"r"+a.toString(32)+"»";return r.memoizedState=i},useHostTransitionStatus:Im,useFormState:ix,useActionState:ix,useOptimistic:function(r){var i=Vn();i.memoizedState=i.baseState=r;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=km.bind(null,Be,!0,a),a.dispatch=i,[r,i]},useMemoCache:Em,useCacheRefresh:function(){return Vn().memoizedState=pA.bind(null,Be)}},Cx={readContext:yn,use:md,useCallback:gx,useContext:yn,useEffect:dx,useImperativeHandle:px,useInsertionEffect:hx,useLayoutEffect:fx,useMemo:yx,useReducer:pd,useRef:cx,useState:function(){return pd(Ks)},useDebugValue:Cm,useDeferredValue:function(r,i){var a=Ft();return xx(a,ct.memoizedState,r,i)},useTransition:function(){var r=pd(Ks)[0],i=Ft().memoizedState;return[typeof r=="boolean"?r:bc(r),i]},useSyncExternalStore:Ky,useId:_x,useHostTransitionStatus:Im,useFormState:ax,useActionState:ax,useOptimistic:function(r,i){var a=Ft();return Jy(a,ct,r,i)},useMemoCache:Em,useCacheRefresh:Ex},yA={readContext:yn,use:md,useCallback:gx,useContext:yn,useEffect:dx,useImperativeHandle:px,useInsertionEffect:hx,useLayoutEffect:fx,useMemo:yx,useReducer:Am,useRef:cx,useState:function(){return Am(Ks)},useDebugValue:Cm,useDeferredValue:function(r,i){var a=Ft();return ct===null?Rm(a,r,i):xx(a,ct.memoizedState,r,i)},useTransition:function(){var r=Am(Ks)[0],i=Ft().memoizedState;return[typeof r=="boolean"?r:bc(r),i]},useSyncExternalStore:Ky,useId:_x,useHostTransitionStatus:Im,useFormState:lx,useActionState:lx,useOptimistic:function(r,i){var a=Ft();return ct!==null?Jy(a,ct,r,i):(a.baseState=r,[r,a.queue.dispatch])},useMemoCache:Em,useCacheRefresh:Ex},Qo=null,Tc=0;function wd(r){var i=Tc;return Tc+=1,Qo===null&&(Qo=[]),Uy(Qo,r,i)}function Ac(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function bd(r,i){throw i.$$typeof===_?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function Rx(r){var i=r._init;return i(r._payload)}function jx(r){function i($,z){if(r){var K=$.deletions;K===null?($.deletions=[z],$.flags|=16):K.push(z)}}function a($,z){if(!r)return null;for(;z!==null;)i($,z),z=z.sibling;return null}function u($){for(var z=new Map;$!==null;)$.key!==null?z.set($.key,$):z.set($.index,$),$=$.sibling;return z}function f($,z){return $=Fs($,z),$.index=0,$.sibling=null,$}function m($,z,K){return $.index=K,r?(K=$.alternate,K!==null?(K=K.index,K<z?($.flags|=67108866,z):K):($.flags|=67108866,z)):($.flags|=1048576,z)}function b($){return r&&$.alternate===null&&($.flags|=67108866),$}function E($,z,K,re){return z===null||z.tag!==6?(z=Jf(K,$.mode,re),z.return=$,z):(z=f(z,K),z.return=$,z)}function D($,z,K,re){var we=K.type;return we===B?ne($,z,K.props.children,re,K.key):z!==null&&(z.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===A&&Rx(we)===z.type)?(z=f(z,K.props),Ac(z,K),z.return=$,z):(z=rd(K.type,K.key,K.props,null,$.mode,re),Ac(z,K),z.return=$,z)}function Q($,z,K,re){return z===null||z.tag!==4||z.stateNode.containerInfo!==K.containerInfo||z.stateNode.implementation!==K.implementation?(z=em(K,$.mode,re),z.return=$,z):(z=f(z,K.children||[]),z.return=$,z)}function ne($,z,K,re,we){return z===null||z.tag!==7?(z=La(K,$.mode,re,we),z.return=$,z):(z=f(z,K),z.return=$,z)}function ae($,z,K){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Jf(""+z,$.mode,K),z.return=$,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case T:return K=rd(z.type,z.key,z.props,null,$.mode,K),Ac(K,z),K.return=$,K;case I:return z=em(z,$.mode,K),z.return=$,z;case A:var re=z._init;return z=re(z._payload),ae($,z,K)}if(Ee(z)||O(z))return z=La(z,$.mode,K,null),z.return=$,z;if(typeof z.then=="function")return ae($,wd(z),K);if(z.$$typeof===q)return ae($,od($,z),K);bd($,z)}return null}function X($,z,K,re){var we=z!==null?z.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return we!==null?null:E($,z,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case T:return K.key===we?D($,z,K,re):null;case I:return K.key===we?Q($,z,K,re):null;case A:return we=K._init,K=we(K._payload),X($,z,K,re)}if(Ee(K)||O(K))return we!==null?null:ne($,z,K,re,null);if(typeof K.then=="function")return X($,z,wd(K),re);if(K.$$typeof===q)return X($,z,od($,K),re);bd($,K)}return null}function W($,z,K,re,we){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return $=$.get(K)||null,E(z,$,""+re,we);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case T:return $=$.get(re.key===null?K:re.key)||null,D(z,$,re,we);case I:return $=$.get(re.key===null?K:re.key)||null,Q(z,$,re,we);case A:var ze=re._init;return re=ze(re._payload),W($,z,K,re,we)}if(Ee(re)||O(re))return $=$.get(K)||null,ne(z,$,re,we,null);if(typeof re.then=="function")return W($,z,K,wd(re),we);if(re.$$typeof===q)return W($,z,K,od(z,re),we);bd(z,re)}return null}function De($,z,K,re){for(var we=null,ze=null,_e=z,Ce=z=0,rn=null;_e!==null&&Ce<K.length;Ce++){_e.index>Ce?(rn=_e,_e=null):rn=_e.sibling;var Ze=X($,_e,K[Ce],re);if(Ze===null){_e===null&&(_e=rn);break}r&&_e&&Ze.alternate===null&&i($,_e),z=m(Ze,z,Ce),ze===null?we=Ze:ze.sibling=Ze,ze=Ze,_e=rn}if(Ce===K.length)return a($,_e),tt&&Ua($,Ce),we;if(_e===null){for(;Ce<K.length;Ce++)_e=ae($,K[Ce],re),_e!==null&&(z=m(_e,z,Ce),ze===null?we=_e:ze.sibling=_e,ze=_e);return tt&&Ua($,Ce),we}for(_e=u(_e);Ce<K.length;Ce++)rn=W(_e,$,Ce,K[Ce],re),rn!==null&&(r&&rn.alternate!==null&&_e.delete(rn.key===null?Ce:rn.key),z=m(rn,z,Ce),ze===null?we=rn:ze.sibling=rn,ze=rn);return r&&_e.forEach(function(Gi){return i($,Gi)}),tt&&Ua($,Ce),we}function Se($,z,K,re){if(K==null)throw Error(s(151));for(var we=null,ze=null,_e=z,Ce=z=0,rn=null,Ze=K.next();_e!==null&&!Ze.done;Ce++,Ze=K.next()){_e.index>Ce?(rn=_e,_e=null):rn=_e.sibling;var Gi=X($,_e,Ze.value,re);if(Gi===null){_e===null&&(_e=rn);break}r&&_e&&Gi.alternate===null&&i($,_e),z=m(Gi,z,Ce),ze===null?we=Gi:ze.sibling=Gi,ze=Gi,_e=rn}if(Ze.done)return a($,_e),tt&&Ua($,Ce),we;if(_e===null){for(;!Ze.done;Ce++,Ze=K.next())Ze=ae($,Ze.value,re),Ze!==null&&(z=m(Ze,z,Ce),ze===null?we=Ze:ze.sibling=Ze,ze=Ze);return tt&&Ua($,Ce),we}for(_e=u(_e);!Ze.done;Ce++,Ze=K.next())Ze=W(_e,$,Ce,Ze.value,re),Ze!==null&&(r&&Ze.alternate!==null&&_e.delete(Ze.key===null?Ce:Ze.key),z=m(Ze,z,Ce),ze===null?we=Ze:ze.sibling=Ze,ze=Ze);return r&&_e.forEach(function(xN){return i($,xN)}),tt&&Ua($,Ce),we}function dt($,z,K,re){if(typeof K=="object"&&K!==null&&K.type===B&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case T:e:{for(var we=K.key;z!==null;){if(z.key===we){if(we=K.type,we===B){if(z.tag===7){a($,z.sibling),re=f(z,K.props.children),re.return=$,$=re;break e}}else if(z.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===A&&Rx(we)===z.type){a($,z.sibling),re=f(z,K.props),Ac(re,K),re.return=$,$=re;break e}a($,z);break}else i($,z);z=z.sibling}K.type===B?(re=La(K.props.children,$.mode,re,K.key),re.return=$,$=re):(re=rd(K.type,K.key,K.props,null,$.mode,re),Ac(re,K),re.return=$,$=re)}return b($);case I:e:{for(we=K.key;z!==null;){if(z.key===we)if(z.tag===4&&z.stateNode.containerInfo===K.containerInfo&&z.stateNode.implementation===K.implementation){a($,z.sibling),re=f(z,K.children||[]),re.return=$,$=re;break e}else{a($,z);break}else i($,z);z=z.sibling}re=em(K,$.mode,re),re.return=$,$=re}return b($);case A:return we=K._init,K=we(K._payload),dt($,z,K,re)}if(Ee(K))return De($,z,K,re);if(O(K)){if(we=O(K),typeof we!="function")throw Error(s(150));return K=we.call(K),Se($,z,K,re)}if(typeof K.then=="function")return dt($,z,wd(K),re);if(K.$$typeof===q)return dt($,z,od($,K),re);bd($,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,z!==null&&z.tag===6?(a($,z.sibling),re=f(z,K),re.return=$,$=re):(a($,z),re=Jf(K,$.mode,re),re.return=$,$=re),b($)):a($,z)}return function($,z,K,re){try{Tc=0;var we=dt($,z,K,re);return Qo=null,we}catch(_e){if(_e===pc||_e===cd)throw _e;var ze=Xn(29,_e,null,$.mode);return ze.lanes=re,ze.return=$,ze}finally{}}}var Xo=jx(!0),Ix=jx(!1),wr=ue(null),us=null;function Ii(r){var i=r.alternate;ee(Qt,Qt.current&1),ee(wr,r),us===null&&(i===null||$o.current!==null||i.memoizedState!==null)&&(us=r)}function kx(r){if(r.tag===22){if(ee(Qt,Qt.current),ee(wr,r),us===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(us=r)}}else ki()}function ki(){ee(Qt,Qt.current),ee(wr,wr.current)}function Ys(r){ye(wr),us===r&&(us=null),ye(Qt)}var Qt=ue(0);function _d(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||_p(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Dm(r,i,a,u){i=r.memoizedState,a=a(u,i),a=a==null?i:v({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Om={enqueueSetState:function(r,i,a){r=r._reactInternals;var u=er(),f=Ci(u);f.payload=i,a!=null&&(f.callback=a),i=Ri(r,f,u),i!==null&&(tr(i,r,u),yc(i,r,u))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var u=er(),f=Ci(u);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Ri(r,f,u),i!==null&&(tr(i,r,u),yc(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=er(),u=Ci(a);u.tag=2,i!=null&&(u.callback=i),i=Ri(r,u,a),i!==null&&(tr(i,r,a),yc(i,r,a))}};function Dx(r,i,a,u,f,m,b){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,b):i.prototype&&i.prototype.isPureReactComponent?!oc(a,u)||!oc(f,m):!0}function Ox(r,i,a,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==r&&Om.enqueueReplaceState(i,i.state,null)}function Ga(r,i){var a=i;if("ref"in i){a={};for(var u in i)u!=="ref"&&(a[u]=i[u])}if(r=r.defaultProps){a===i&&(a=v({},a));for(var f in r)a[f]===void 0&&(a[f]=r[f])}return a}var Ed=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Px(r){Ed(r)}function Mx(r){console.error(r)}function Lx(r){Ed(r)}function Td(r,i){try{var a=r.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Vx(r,i,a){try{var u=r.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Pm(r,i,a){return a=Ci(a),a.tag=3,a.payload={element:null},a.callback=function(){Td(r,i)},a}function Ux(r){return r=Ci(r),r.tag=3,r}function Bx(r,i,a,u){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;r.payload=function(){return f(m)},r.callback=function(){Vx(i,a,u)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(r.callback=function(){Vx(i,a,u),typeof f!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function xA(r,i,a,u,f){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=a.alternate,i!==null&&hc(i,a,f,!0),a=wr.current,a!==null){switch(a.tag){case 13:return us===null?ip():a.alternate===null&&jt===0&&(jt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,u===um?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([u]):i.add(u),op(r,u,f)),!1;case 22:return a.flags|=65536,u===um?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([u]):a.add(u)),op(r,u,f)),!1}throw Error(s(435,a.tag))}return op(r,u,f),ip(),!1}if(tt)return i=wr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==rm&&(r=Error(s(422),{cause:u}),dc(gr(r,a)))):(u!==rm&&(i=Error(s(423),{cause:u}),dc(gr(i,a))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=gr(u,a),f=Pm(r.stateNode,u,f),fm(r,f),jt!==4&&(jt=2)),!1;var m=Error(s(520),{cause:u});if(m=gr(m,a),kc===null?kc=[m]:kc.push(m),jt!==4&&(jt=2),i===null)return!0;u=gr(u,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,r=f&-f,a.lanes|=r,r=Pm(a.stateNode,u,r),fm(a,r),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Vi===null||!Vi.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Ux(f),Bx(f,r,a,u),fm(a,f),!1}a=a.return}while(a!==null);return!1}var zx=Error(s(461)),tn=!1;function cn(r,i,a,u){i.child=r===null?Ix(i,null,a,u):Xo(i,r.child,a,u)}function Fx(r,i,a,u,f){a=a.render;var m=i.ref;if("ref"in u){var b={};for(var E in u)E!=="ref"&&(b[E]=u[E])}else b=u;return qa(i),u=xm(r,i,a,b,m,f),E=vm(),r!==null&&!tn?(wm(r,i,f),Qs(r,i,f)):(tt&&E&&tm(i),i.flags|=1,cn(r,i,u,f),i.child)}function qx(r,i,a,u,f){if(r===null){var m=a.type;return typeof m=="function"&&!Zf(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,Hx(r,i,m,u,f)):(r=rd(a.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!qm(r,f)){var b=m.memoizedProps;if(a=a.compare,a=a!==null?a:oc,a(b,u)&&r.ref===i.ref)return Qs(r,i,f)}return i.flags|=1,r=Fs(m,u),r.ref=i.ref,r.return=i,i.child=r}function Hx(r,i,a,u,f){if(r!==null){var m=r.memoizedProps;if(oc(m,u)&&r.ref===i.ref)if(tn=!1,i.pendingProps=u=m,qm(r,f))(r.flags&131072)!==0&&(tn=!0);else return i.lanes=r.lanes,Qs(r,i,f)}return Mm(r,i,a,u,f)}function $x(r,i,a){var u=i.pendingProps,f=u.children,m=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=m!==null?m.baseLanes|a:a,r!==null){for(f=i.child=r.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;i.childLanes=m&~u}else i.childLanes=0,i.child=null;return Gx(r,i,u,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&ld(i,m!==null?m.cachePool:null),m!==null?Hy(i,m):pm(),kx(i);else return i.lanes=i.childLanes=536870912,Gx(r,i,m!==null?m.baseLanes|a:a,a)}else m!==null?(ld(i,m.cachePool),Hy(i,m),ki(),i.memoizedState=null):(r!==null&&ld(i,null),pm(),ki());return cn(r,i,f,a),i.child}function Gx(r,i,a,u){var f=cm();return f=f===null?null:{parent:Yt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},r!==null&&ld(i,null),pm(),kx(i),r!==null&&hc(r,i,u,!0),null}function Ad(r,i){var a=i.ref;if(a===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(r===null||r.ref!==a)&&(i.flags|=4194816)}}function Mm(r,i,a,u,f){return qa(i),a=xm(r,i,a,u,void 0,f),u=vm(),r!==null&&!tn?(wm(r,i,f),Qs(r,i,f)):(tt&&u&&tm(i),i.flags|=1,cn(r,i,a,f),i.child)}function Kx(r,i,a,u,f,m){return qa(i),i.updateQueue=null,a=Gy(i,u,a,f),$y(r),u=vm(),r!==null&&!tn?(wm(r,i,m),Qs(r,i,m)):(tt&&u&&tm(i),i.flags|=1,cn(r,i,a,m),i.child)}function Yx(r,i,a,u,f){if(qa(i),i.stateNode===null){var m=Bo,b=a.contextType;typeof b=="object"&&b!==null&&(m=yn(b)),m=new a(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Om,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},dm(i),b=a.contextType,m.context=typeof b=="object"&&b!==null?yn(b):Bo,m.state=i.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Dm(i,a,b,u),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&Om.enqueueReplaceState(m,m.state,null),vc(i,u,m,f),xc(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var E=i.memoizedProps,D=Ga(a,E);m.props=D;var Q=m.context,ne=a.contextType;b=Bo,typeof ne=="object"&&ne!==null&&(b=yn(ne));var ae=a.getDerivedStateFromProps;ne=typeof ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,ne||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||Q!==b)&&Ox(i,m,u,b),Si=!1;var X=i.memoizedState;m.state=X,vc(i,u,m,f),xc(),Q=i.memoizedState,E||X!==Q||Si?(typeof ae=="function"&&(Dm(i,a,ae,u),Q=i.memoizedState),(D=Si||Dx(i,a,D,u,X,Q,b))?(ne||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Q),m.props=u,m.state=Q,m.context=b,u=D):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,hm(r,i),b=i.memoizedProps,ne=Ga(a,b),m.props=ne,ae=i.pendingProps,X=m.context,Q=a.contextType,D=Bo,typeof Q=="object"&&Q!==null&&(D=yn(Q)),E=a.getDerivedStateFromProps,(Q=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==ae||X!==D)&&Ox(i,m,u,D),Si=!1,X=i.memoizedState,m.state=X,vc(i,u,m,f),xc();var W=i.memoizedState;b!==ae||X!==W||Si||r!==null&&r.dependencies!==null&&ad(r.dependencies)?(typeof E=="function"&&(Dm(i,a,E,u),W=i.memoizedState),(ne=Si||Dx(i,a,ne,u,X,W,D)||r!==null&&r.dependencies!==null&&ad(r.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,W,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,W,D)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===r.memoizedProps&&X===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&X===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=W),m.props=u,m.state=W,m.context=D,u=ne):(typeof m.componentDidUpdate!="function"||b===r.memoizedProps&&X===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&X===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,Ad(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=Xo(i,r.child,null,f),i.child=Xo(i,null,a,f)):cn(r,i,a,f),i.memoizedState=m.state,r=i.child):r=Qs(r,i,f),r}function Qx(r,i,a,u){return uc(),i.flags|=256,cn(r,i,a,u),i.child}var Lm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vm(r){return{baseLanes:r,cachePool:My()}}function Um(r,i,a){return r=r!==null?r.childLanes&~a:0,i&&(r|=br),r}function Xx(r,i,a){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,b;if((b=m)||(b=r!==null&&r.memoizedState===null?!1:(Qt.current&2)!==0),b&&(f=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,r===null){if(tt){if(f?Ii(i):ki(),tt){var E=Rt,D;if(D=E){e:{for(D=E,E=cs;D.nodeType!==8;){if(!E){E=null;break e}if(D=Vr(D.nextSibling),D===null){E=null;break e}}E=D}E!==null?(i.memoizedState={dehydrated:E,treeContext:Va!==null?{id:qs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},D=Xn(18,null,null,0),D.stateNode=E,D.return=i,i.child=D,In=i,Rt=null,D=!0):D=!1}D||za(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return _p(E)?i.lanes=32:i.lanes=536870912,null;Ys(i)}return E=u.children,u=u.fallback,f?(ki(),f=i.mode,E=Nd({mode:"hidden",children:E},f),u=La(u,f,a,null),E.return=i,u.return=i,E.sibling=u,i.child=E,f=i.child,f.memoizedState=Vm(a),f.childLanes=Um(r,b,a),i.memoizedState=Lm,u):(Ii(i),Bm(i,E))}if(D=r.memoizedState,D!==null&&(E=D.dehydrated,E!==null)){if(m)i.flags&256?(Ii(i),i.flags&=-257,i=zm(r,i,a)):i.memoizedState!==null?(ki(),i.child=r.child,i.flags|=128,i=null):(ki(),f=u.fallback,E=i.mode,u=Nd({mode:"visible",children:u.children},E),f=La(f,E,a,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,Xo(i,r.child,null,a),u=i.child,u.memoizedState=Vm(a),u.childLanes=Um(r,b,a),i.memoizedState=Lm,i=f);else if(Ii(i),_p(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var Q=b.dgst;b=Q,u=Error(s(419)),u.stack="",u.digest=b,dc({value:u,source:null,stack:null}),i=zm(r,i,a)}else if(tn||hc(r,i,a,!1),b=(a&r.childLanes)!==0,tn||b){if(b=mt,b!==null&&(u=a&-a,u=(u&42)!==0?1:yi(u),u=(u&(b.suspendedLanes|a))!==0?0:u,u!==0&&u!==D.retryLane))throw D.retryLane=u,Uo(r,u),tr(b,r,u),zx;E.data==="$?"||ip(),i=zm(r,i,a)}else E.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=D.treeContext,Rt=Vr(E.nextSibling),In=i,tt=!0,Ba=null,cs=!1,r!==null&&(xr[vr++]=qs,xr[vr++]=Hs,xr[vr++]=Va,qs=r.id,Hs=r.overflow,Va=i),i=Bm(i,u.children),i.flags|=4096);return i}return f?(ki(),f=u.fallback,E=i.mode,D=r.child,Q=D.sibling,u=Fs(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,Q!==null?f=Fs(Q,f):(f=La(f,E,a,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,E=r.child.memoizedState,E===null?E=Vm(a):(D=E.cachePool,D!==null?(Q=Yt._currentValue,D=D.parent!==Q?{parent:Q,pool:Q}:D):D=My(),E={baseLanes:E.baseLanes|a,cachePool:D}),f.memoizedState=E,f.childLanes=Um(r,b,a),i.memoizedState=Lm,u):(Ii(i),a=r.child,r=a.sibling,a=Fs(a,{mode:"visible",children:u.children}),a.return=i,a.sibling=null,r!==null&&(b=i.deletions,b===null?(i.deletions=[r],i.flags|=16):b.push(r)),i.child=a,i.memoizedState=null,a)}function Bm(r,i){return i=Nd({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Nd(r,i){return r=Xn(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function zm(r,i,a){return Xo(i,r.child,null,a),r=Bm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Wx(r,i,a){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),im(r.return,i,a)}function Fm(r,i,a,u,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=a,m.tailMode=f)}function Zx(r,i,a){var u=i.pendingProps,f=u.revealOrder,m=u.tail;if(cn(r,i,u.children,a),u=Qt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Wx(r,a,i);else if(r.tag===19)Wx(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(ee(Qt,u),f){case"forwards":for(a=i.child,f=null;a!==null;)r=a.alternate,r!==null&&_d(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Fm(i,!1,f,a,m);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&_d(r)===null){i.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}Fm(i,!0,a,null,m);break;case"together":Fm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Qs(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),Li|=i.lanes,(a&i.childLanes)===0)if(r!==null){if(hc(r,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,a=Fs(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=Fs(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function qm(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&ad(r)))}function vA(r,i,a){switch(i.tag){case 3:et(i,i.stateNode.containerInfo),Ni(i,Yt,r.memoizedState.cache),uc();break;case 27:case 5:Rs(i);break;case 4:et(i,i.stateNode.containerInfo);break;case 10:Ni(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ii(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Xx(r,i,a):(Ii(i),r=Qs(r,i,a),r!==null?r.sibling:null);Ii(i);break;case 19:var f=(r.flags&128)!==0;if(u=(a&i.childLanes)!==0,u||(hc(r,i,a,!1),u=(a&i.childLanes)!==0),f){if(u)return Zx(r,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ee(Qt,Qt.current),u)break;return null;case 22:case 23:return i.lanes=0,$x(r,i,a);case 24:Ni(i,Yt,r.memoizedState.cache)}return Qs(r,i,a)}function Jx(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps)tn=!0;else{if(!qm(r,a)&&(i.flags&128)===0)return tn=!1,vA(r,i,a);tn=(r.flags&131072)!==0}else tn=!1,tt&&(i.flags&1048576)!==0&&Ry(i,id,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")Zf(u)?(r=Ga(u,r),i.tag=1,i=Yx(null,i,u,r,a)):(i.tag=0,i=Mm(null,i,u,r,a));else{if(u!=null){if(f=u.$$typeof,f===ie){i.tag=11,i=Fx(null,i,u,r,a);break e}else if(f===k){i.tag=14,i=qx(null,i,u,r,a);break e}}throw i=ke(u)||u,Error(s(306,i,""))}}return i;case 0:return Mm(r,i,i.type,i.pendingProps,a);case 1:return u=i.type,f=Ga(u,i.pendingProps),Yx(r,i,u,f,a);case 3:e:{if(et(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,hm(r,i),vc(i,u,null,a);var b=i.memoizedState;if(u=b.cache,Ni(i,Yt,u),u!==m.cache&&am(i,[Yt],a,!0),xc(),u=b.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Qx(r,i,u,a);break e}else if(u!==f){f=gr(Error(s(424)),i),dc(f),i=Qx(r,i,u,a);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Rt=Vr(r.firstChild),In=i,tt=!0,Ba=null,cs=!0,a=Ix(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(uc(),u===f){i=Qs(r,i,a);break e}cn(r,i,u,a)}i=i.child}return i;case 26:return Ad(r,i),r===null?(a=rw(i.type,null,i.pendingProps,null))?i.memoizedState=a:tt||(a=i.type,r=i.pendingProps,u=Bd(he.current).createElement(a),u[Tt]=i,u[P]=r,dn(u,a,r),At(u),i.stateNode=u):i.memoizedState=rw(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Rs(i),r===null&&tt&&(u=i.stateNode=ew(i.type,i.pendingProps,he.current),In=i,cs=!0,f=Rt,zi(i.type)?(Ep=f,Rt=Vr(u.firstChild)):Rt=f),cn(r,i,i.pendingProps.children,a),Ad(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&tt&&((f=u=Rt)&&(u=KA(u,i.type,i.pendingProps,cs),u!==null?(i.stateNode=u,In=i,Rt=Vr(u.firstChild),cs=!1,f=!0):f=!1),f||za(i)),Rs(i),f=i.type,m=i.pendingProps,b=r!==null?r.memoizedProps:null,u=m.children,vp(f,m)?u=null:b!==null&&vp(f,b)&&(i.flags|=32),i.memoizedState!==null&&(f=xm(r,i,dA,null,null,a),zc._currentValue=f),Ad(r,i),cn(r,i,u,a),i.child;case 6:return r===null&&tt&&((r=a=Rt)&&(a=YA(a,i.pendingProps,cs),a!==null?(i.stateNode=a,In=i,Rt=null,r=!0):r=!1),r||za(i)),null;case 13:return Xx(r,i,a);case 4:return et(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Xo(i,null,u,a):cn(r,i,u,a),i.child;case 11:return Fx(r,i,i.type,i.pendingProps,a);case 7:return cn(r,i,i.pendingProps,a),i.child;case 8:return cn(r,i,i.pendingProps.children,a),i.child;case 12:return cn(r,i,i.pendingProps.children,a),i.child;case 10:return u=i.pendingProps,Ni(i,i.type,u.value),cn(r,i,u.children,a),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,qa(i),f=yn(f),u=u(f),i.flags|=1,cn(r,i,u,a),i.child;case 14:return qx(r,i,i.type,i.pendingProps,a);case 15:return Hx(r,i,i.type,i.pendingProps,a);case 19:return Zx(r,i,a);case 31:return u=i.pendingProps,a=i.mode,u={mode:u.mode,children:u.children},r===null?(a=Nd(u,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Fs(r.child,u),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return $x(r,i,a);case 24:return qa(i),u=yn(Yt),r===null?(f=cm(),f===null&&(f=mt,m=om(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),i.memoizedState={parent:u,cache:f},dm(i),Ni(i,Yt,f)):((r.lanes&a)!==0&&(hm(r,i),vc(i,null,null,a),xc()),f=r.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ni(i,Yt,u)):(u=m.cache,Ni(i,Yt,u),u!==f.cache&&am(i,[Yt],a,!0))),cn(r,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Xs(r){r.flags|=4}function ev(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!lw(i)){if(i=wr.current,i!==null&&((Qe&4194048)===Qe?us!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||i!==us))throw gc=um,Ly;r.flags|=8192}}function Sd(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?es():536870912,r.lanes|=i,el|=i)}function Nc(r,i){if(!tt)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function St(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,u=0;if(i)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=a,i}function wA(r,i,a){var u=i.pendingProps;switch(nm(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(i),null;case 1:return St(i),null;case 3:return a=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Gs(Yt),On(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(cc(i)?Xs(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ky())),St(i),null;case 26:return a=i.memoizedState,r===null?(Xs(i),a!==null?(St(i),ev(i,a)):(St(i),i.flags&=-16777217)):a?a!==r.memoizedState?(Xs(i),St(i),ev(i,a)):(St(i),i.flags&=-16777217):(r.memoizedProps!==u&&Xs(i),St(i),i.flags&=-16777217),null;case 27:Xr(i),a=he.current;var f=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Xs(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return St(i),null}r=le.current,cc(i)?jy(i):(r=ew(f,u,a),i.stateNode=r,Xs(i))}return St(i),null;case 5:if(Xr(i),a=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Xs(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return St(i),null}if(r=le.current,cc(i))jy(i);else{switch(f=Bd(he.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(a,{is:u.is}):f.createElement(a)}}r[Tt]=i,r[P]=u;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=r;e:switch(dn(r,a,u),a){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Xs(i)}}return St(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Xs(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=he.current,cc(i)){if(r=i.stateNode,a=i.memoizedProps,u=null,f=In,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Tt]=i,r=!!(r.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Kv(r.nodeValue,a)),r||za(i)}else r=Bd(r).createTextNode(u),r[Tt]=i,i.stateNode=r}return St(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=cc(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Tt]=i}else uc(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;St(i),f=!1}else f=ky(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Ys(i),i):(Ys(i),null)}if(Ys(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=u!==null,r=r!==null&&r.memoizedState!==null,a){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return a!==r&&a&&(i.child.flags|=8192),Sd(i,i.updateQueue),St(i),null;case 4:return On(),r===null&&mp(i.stateNode.containerInfo),St(i),null;case 10:return Gs(i.type),St(i),null;case 19:if(ye(Qt),f=i.memoizedState,f===null)return St(i),null;if(u=(i.flags&128)!==0,m=f.rendering,m===null)if(u)Nc(f,!1);else{if(jt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=_d(r),m!==null){for(i.flags|=128,Nc(f,!1),r=m.updateQueue,i.updateQueue=r,Sd(i,r),i.subtreeFlags=0,r=a,a=i.child;a!==null;)Cy(a,r),a=a.sibling;return ee(Qt,Qt.current&1|2),i.child}r=r.sibling}f.tail!==null&&on()>jd&&(i.flags|=128,u=!0,Nc(f,!1),i.lanes=4194304)}else{if(!u)if(r=_d(m),r!==null){if(i.flags|=128,u=!0,r=r.updateQueue,i.updateQueue=r,Sd(i,r),Nc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!tt)return St(i),null}else 2*on()-f.renderingStartTime>jd&&a!==536870912&&(i.flags|=128,u=!0,Nc(f,!1),i.lanes=4194304);f.isBackwards?(m.sibling=i.child,i.child=m):(r=f.last,r!==null?r.sibling=m:i.child=m,f.last=m)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=on(),i.sibling=null,r=Qt.current,ee(Qt,u?r&1|2:r&1),i):(St(i),null);case 22:case 23:return Ys(i),gm(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(a&536870912)!==0&&(i.flags&128)===0&&(St(i),i.subtreeFlags&6&&(i.flags|=8192)):St(i),a=i.updateQueue,a!==null&&Sd(i,a.retryQueue),a=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==a&&(i.flags|=2048),r!==null&&ye(Ha),null;case 24:return a=null,r!==null&&(a=r.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Gs(Yt),St(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function bA(r,i){switch(nm(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Gs(Yt),On(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Xr(i),null;case 13:if(Ys(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));uc()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ye(Qt),null;case 4:return On(),null;case 10:return Gs(i.type),null;case 22:case 23:return Ys(i),gm(),r!==null&&ye(Ha),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Gs(Yt),null;case 25:return null;default:return null}}function tv(r,i){switch(nm(i),i.tag){case 3:Gs(Yt),On();break;case 26:case 27:case 5:Xr(i);break;case 4:On();break;case 13:Ys(i);break;case 19:ye(Qt);break;case 10:Gs(i.type);break;case 22:case 23:Ys(i),gm(),r!==null&&ye(Ha);break;case 24:Gs(Yt)}}function Sc(r,i){try{var a=i.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var f=u.next;a=f;do{if((a.tag&r)===r){u=void 0;var m=a.create,b=a.inst;u=m(),b.destroy=u}a=a.next}while(a!==f)}}catch(E){ht(i,i.return,E)}}function Di(r,i,a){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&r)===r){var b=u.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,f=i;var D=a,Q=E;try{Q()}catch(ne){ht(f,D,ne)}}}u=u.next}while(u!==m)}}catch(ne){ht(i,i.return,ne)}}function nv(r){var i=r.updateQueue;if(i!==null){var a=r.stateNode;try{qy(i,a)}catch(u){ht(r,r.return,u)}}}function rv(r,i,a){a.props=Ga(r.type,r.memoizedProps),a.state=r.memoizedState;try{a.componentWillUnmount()}catch(u){ht(r,i,u)}}function Cc(r,i){try{var a=r.ref;if(a!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof a=="function"?r.refCleanup=a(u):a.current=u}}catch(f){ht(r,i,f)}}function ds(r,i){var a=r.ref,u=r.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(f){ht(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ht(r,i,f)}else a.current=null}function sv(r){var i=r.type,a=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(f){ht(r,r.return,f)}}function Hm(r,i,a){try{var u=r.stateNode;FA(u,r.type,a,i),u[P]=i}catch(f){ht(r,r.return,f)}}function iv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&zi(r.type)||r.tag===4}function $m(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||iv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&zi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Gm(r,i,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(r,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(r),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ud));else if(u!==4&&(u===27&&zi(r.type)&&(a=r.stateNode,i=null),r=r.child,r!==null))for(Gm(r,i,a),r=r.sibling;r!==null;)Gm(r,i,a),r=r.sibling}function Cd(r,i,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(u!==4&&(u===27&&zi(r.type)&&(a=r.stateNode),r=r.child,r!==null))for(Cd(r,i,a),r=r.sibling;r!==null;)Cd(r,i,a),r=r.sibling}function av(r){var i=r.stateNode,a=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);dn(i,u,a),i[Tt]=r,i[P]=a}catch(m){ht(r,r.return,m)}}var Ws=!1,Ot=!1,Km=!1,ov=typeof WeakSet=="function"?WeakSet:Set,nn=null;function _A(r,i){if(r=r.containerInfo,yp=Gd,r=xy(r),$f(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var b=0,E=-1,D=-1,Q=0,ne=0,ae=r,X=null;t:for(;;){for(var W;ae!==a||f!==0&&ae.nodeType!==3||(E=b+f),ae!==m||u!==0&&ae.nodeType!==3||(D=b+u),ae.nodeType===3&&(b+=ae.nodeValue.length),(W=ae.firstChild)!==null;)X=ae,ae=W;for(;;){if(ae===r)break t;if(X===a&&++Q===f&&(E=b),X===m&&++ne===u&&(D=b),(W=ae.nextSibling)!==null)break;ae=X,X=ae.parentNode}ae=W}a=E===-1||D===-1?null:{start:E,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(xp={focusedElem:r,selectionRange:a},Gd=!1,nn=i;nn!==null;)if(i=nn,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,nn=r;else for(;nn!==null;){switch(i=nn,m=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,a=i,f=m.memoizedProps,m=m.memoizedState,u=a.stateNode;try{var De=Ga(a.type,f,a.elementType===a.type);r=u.getSnapshotBeforeUpdate(De,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Se){ht(a,a.return,Se)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,a=r.nodeType,a===9)bp(r);else if(a===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":bp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,nn=r;break}nn=i.return}}function lv(r,i,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Oi(r,a),u&4&&Sc(5,a);break;case 1:if(Oi(r,a),u&4)if(r=a.stateNode,i===null)try{r.componentDidMount()}catch(b){ht(a,a.return,b)}else{var f=Ga(a.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(b){ht(a,a.return,b)}}u&64&&nv(a),u&512&&Cc(a,a.return);break;case 3:if(Oi(r,a),u&64&&(r=a.updateQueue,r!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{qy(r,i)}catch(b){ht(a,a.return,b)}}break;case 27:i===null&&u&4&&av(a);case 26:case 5:Oi(r,a),i===null&&u&4&&sv(a),u&512&&Cc(a,a.return);break;case 12:Oi(r,a);break;case 13:Oi(r,a),u&4&&dv(r,a),u&64&&(r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(a=IA.bind(null,a),QA(r,a))));break;case 22:if(u=a.memoizedState!==null||Ws,!u){i=i!==null&&i.memoizedState!==null||Ot,f=Ws;var m=Ot;Ws=u,(Ot=i)&&!m?Pi(r,a,(a.subtreeFlags&8772)!==0):Oi(r,a),Ws=f,Ot=m}break;case 30:break;default:Oi(r,a)}}function cv(r){var i=r.alternate;i!==null&&(r.alternate=null,cv(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&ns(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var bt=null,Un=!1;function Zs(r,i,a){for(a=a.child;a!==null;)uv(r,i,a),a=a.sibling}function uv(r,i,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(ar,a)}catch{}switch(a.tag){case 26:Ot||ds(a,i),Zs(r,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ot||ds(a,i);var u=bt,f=Un;zi(a.type)&&(bt=a.stateNode,Un=!1),Zs(r,i,a),Lc(a.stateNode),bt=u,Un=f;break;case 5:Ot||ds(a,i);case 6:if(u=bt,f=Un,bt=null,Zs(r,i,a),bt=u,Un=f,bt!==null)if(Un)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(a.stateNode)}catch(m){ht(a,i,m)}else try{bt.removeChild(a.stateNode)}catch(m){ht(a,i,m)}break;case 18:bt!==null&&(Un?(r=bt,Zv(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.stateNode),$c(r)):Zv(bt,a.stateNode));break;case 4:u=bt,f=Un,bt=a.stateNode.containerInfo,Un=!0,Zs(r,i,a),bt=u,Un=f;break;case 0:case 11:case 14:case 15:Ot||Di(2,a,i),Ot||Di(4,a,i),Zs(r,i,a);break;case 1:Ot||(ds(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"&&rv(a,i,u)),Zs(r,i,a);break;case 21:Zs(r,i,a);break;case 22:Ot=(u=Ot)||a.memoizedState!==null,Zs(r,i,a),Ot=u;break;default:Zs(r,i,a)}}function dv(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{$c(r)}catch(a){ht(i,i.return,a)}}function EA(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new ov),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new ov),i;default:throw Error(s(435,r.tag))}}function Ym(r,i){var a=EA(r);i.forEach(function(u){var f=kA.bind(null,r,u);a.has(u)||(a.add(u),u.then(f,f))})}function Wn(r,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u],m=r,b=i,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(zi(E.type)){bt=E.stateNode,Un=!1;break e}break;case 5:bt=E.stateNode,Un=!1;break e;case 3:case 4:bt=E.stateNode.containerInfo,Un=!0;break e}E=E.return}if(bt===null)throw Error(s(160));uv(m,b,f),bt=null,Un=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)hv(i,r),i=i.sibling}var Lr=null;function hv(r,i){var a=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Wn(i,r),Zn(r),u&4&&(Di(3,r,r.return),Sc(3,r),Di(5,r,r.return));break;case 1:Wn(i,r),Zn(r),u&512&&(Ot||a===null||ds(a,a.return)),u&64&&Ws&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(a=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var f=Lr;if(Wn(i,r),Zn(r),u&512&&(Ot||a===null||ds(a,a.return)),u&4){var m=a!==null?a.memoizedState:null;if(u=r.memoizedState,a===null)if(u===null)if(r.stateNode===null){e:{u=r.type,a=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ur]||m[Tt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),dn(m,u,a),m[Tt]=r,At(m),u=m;break e;case"link":var b=aw("link","href",f).get(u+(a.href||""));if(b){for(var E=0;E<b.length;E++)if(m=b[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(E,1);break t}}m=f.createElement(u),dn(m,u,a),f.head.appendChild(m);break;case"meta":if(b=aw("meta","content",f).get(u+(a.content||""))){for(E=0;E<b.length;E++)if(m=b[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(E,1);break t}}m=f.createElement(u),dn(m,u,a),f.head.appendChild(m);break;default:throw Error(s(468,u))}m[Tt]=r,At(m),u=m}r.stateNode=u}else ow(f,r.type,r.stateNode);else r.stateNode=iw(f,u,r.memoizedProps);else m!==u?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,u===null?ow(f,r.type,r.stateNode):iw(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Hm(r,r.memoizedProps,a.memoizedProps)}break;case 27:Wn(i,r),Zn(r),u&512&&(Ot||a===null||ds(a,a.return)),a!==null&&u&4&&Hm(r,r.memoizedProps,a.memoizedProps);break;case 5:if(Wn(i,r),Zn(r),u&512&&(Ot||a===null||ds(a,a.return)),r.flags&32){f=r.stateNode;try{mr(f,"")}catch(W){ht(r,r.return,W)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,Hm(r,f,a!==null?a.memoizedProps:f)),u&1024&&(Km=!0);break;case 6:if(Wn(i,r),Zn(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,a=r.stateNode;try{a.nodeValue=u}catch(W){ht(r,r.return,W)}}break;case 3:if(qd=null,f=Lr,Lr=zd(i.containerInfo),Wn(i,r),Lr=f,Zn(r),u&4&&a!==null&&a.memoizedState.isDehydrated)try{$c(i.containerInfo)}catch(W){ht(r,r.return,W)}Km&&(Km=!1,fv(r));break;case 4:u=Lr,Lr=zd(r.stateNode.containerInfo),Wn(i,r),Zn(r),Lr=u;break;case 12:Wn(i,r),Zn(r);break;case 13:Wn(i,r),Zn(r),r.child.flags&8192&&r.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ep=on()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ym(r,u)));break;case 22:f=r.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,Q=Ws,ne=Ot;if(Ws=Q||f,Ot=ne||D,Wn(i,r),Ot=ne,Ws=Q,Zn(r),u&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||D||Ws||Ot||Ka(r)),a=null,i=r;;){if(i.tag===5||i.tag===26){if(a===null){D=a=i;try{if(m=D.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=D.stateNode;var ae=D.memoizedProps.style,X=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(W){ht(D,D.return,W)}}}else if(i.tag===6){if(a===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(W){ht(D,D.return,W)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Ym(r,a))));break;case 19:Wn(i,r),Zn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ym(r,u)));break;case 30:break;case 21:break;default:Wn(i,r),Zn(r)}}function Zn(r){var i=r.flags;if(i&2){try{for(var a,u=r.return;u!==null;){if(iv(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,m=$m(r);Cd(r,m,f);break;case 5:var b=a.stateNode;a.flags&32&&(mr(b,""),a.flags&=-33);var E=$m(r);Cd(r,E,b);break;case 3:case 4:var D=a.stateNode.containerInfo,Q=$m(r);Gm(r,Q,D);break;default:throw Error(s(161))}}catch(ne){ht(r,r.return,ne)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function fv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;fv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Oi(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)lv(r,i.alternate,i),i=i.sibling}function Ka(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Di(4,i,i.return),Ka(i);break;case 1:ds(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&rv(i,i.return,a),Ka(i);break;case 27:Lc(i.stateNode);case 26:case 5:ds(i,i.return),Ka(i);break;case 22:i.memoizedState===null&&Ka(i);break;case 30:Ka(i);break;default:Ka(i)}r=r.sibling}}function Pi(r,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,m=i,b=m.flags;switch(m.tag){case 0:case 11:case 15:Pi(f,m,a),Sc(4,m);break;case 1:if(Pi(f,m,a),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){ht(u,u.return,Q)}if(u=m,f=u.updateQueue,f!==null){var E=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Fy(D[f],E)}catch(Q){ht(u,u.return,Q)}}a&&b&64&&nv(m),Cc(m,m.return);break;case 27:av(m);case 26:case 5:Pi(f,m,a),a&&u===null&&b&4&&sv(m),Cc(m,m.return);break;case 12:Pi(f,m,a);break;case 13:Pi(f,m,a),a&&b&4&&dv(f,m);break;case 22:m.memoizedState===null&&Pi(f,m,a),Cc(m,m.return);break;case 30:break;default:Pi(f,m,a)}i=i.sibling}}function Qm(r,i){var a=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==a&&(r!=null&&r.refCount++,a!=null&&fc(a))}function Xm(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&fc(r))}function hs(r,i,a,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)mv(r,i,a,u),i=i.sibling}function mv(r,i,a,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:hs(r,i,a,u),f&2048&&Sc(9,i);break;case 1:hs(r,i,a,u);break;case 3:hs(r,i,a,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&fc(r)));break;case 12:if(f&2048){hs(r,i,a,u),r=i.stateNode;try{var m=i.memoizedProps,b=m.id,E=m.onPostCommit;typeof E=="function"&&E(b,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(D){ht(i,i.return,D)}}else hs(r,i,a,u);break;case 13:hs(r,i,a,u);break;case 23:break;case 22:m=i.stateNode,b=i.alternate,i.memoizedState!==null?m._visibility&2?hs(r,i,a,u):Rc(r,i):m._visibility&2?hs(r,i,a,u):(m._visibility|=2,Wo(r,i,a,u,(i.subtreeFlags&10256)!==0)),f&2048&&Qm(b,i);break;case 24:hs(r,i,a,u),f&2048&&Xm(i.alternate,i);break;default:hs(r,i,a,u)}}function Wo(r,i,a,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=r,b=i,E=a,D=u,Q=b.flags;switch(b.tag){case 0:case 11:case 15:Wo(m,b,E,D,f),Sc(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?Wo(m,b,E,D,f):Rc(m,b):(ne._visibility|=2,Wo(m,b,E,D,f)),f&&Q&2048&&Qm(b.alternate,b);break;case 24:Wo(m,b,E,D,f),f&&Q&2048&&Xm(b.alternate,b);break;default:Wo(m,b,E,D,f)}i=i.sibling}}function Rc(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=r,u=i,f=u.flags;switch(u.tag){case 22:Rc(a,u),f&2048&&Qm(u.alternate,u);break;case 24:Rc(a,u),f&2048&&Xm(u.alternate,u);break;default:Rc(a,u)}i=i.sibling}}var jc=8192;function Zo(r){if(r.subtreeFlags&jc)for(r=r.child;r!==null;)pv(r),r=r.sibling}function pv(r){switch(r.tag){case 26:Zo(r),r.flags&jc&&r.memoizedState!==null&&lN(Lr,r.memoizedState,r.memoizedProps);break;case 5:Zo(r);break;case 3:case 4:var i=Lr;Lr=zd(r.stateNode.containerInfo),Zo(r),Lr=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=jc,jc=16777216,Zo(r),jc=i):Zo(r));break;default:Zo(r)}}function gv(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Ic(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];nn=u,xv(u,r)}gv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)yv(r),r=r.sibling}function yv(r){switch(r.tag){case 0:case 11:case 15:Ic(r),r.flags&2048&&Di(9,r,r.return);break;case 3:Ic(r);break;case 12:Ic(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Rd(r)):Ic(r);break;default:Ic(r)}}function Rd(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];nn=u,xv(u,r)}gv(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Di(8,i,i.return),Rd(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Rd(i));break;default:Rd(i)}r=r.sibling}}function xv(r,i){for(;nn!==null;){var a=nn;switch(a.tag){case 0:case 11:case 15:Di(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:fc(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,nn=u;else e:for(a=r;nn!==null;){u=nn;var f=u.sibling,m=u.return;if(cv(u),u===a){nn=null;break e}if(f!==null){f.return=m,nn=f;break e}nn=m}}}var TA={getCacheForType:function(r){var i=yn(Yt),a=i.data.get(r);return a===void 0&&(a=r(),i.data.set(r,a)),a}},AA=typeof WeakMap=="function"?WeakMap:Map,it=0,mt=null,Fe=null,Qe=0,at=0,Jn=null,Mi=!1,Jo=!1,Wm=!1,Js=0,jt=0,Li=0,Ya=0,Zm=0,br=0,el=0,kc=null,Bn=null,Jm=!1,ep=0,jd=1/0,Id=null,Vi=null,un=0,Ui=null,tl=null,nl=0,tp=0,np=null,vv=null,Dc=0,rp=null;function er(){if((it&2)!==0&&Qe!==0)return Qe&-Qe;if(G.T!==null){var r=qo;return r!==0?r:up()}return lr()}function wv(){br===0&&(br=(Qe&536870912)===0||tt?ya():536870912);var r=wr.current;return r!==null&&(r.flags|=32),br}function tr(r,i,a){(r===mt&&(at===2||at===9)||r.cancelPendingCommit!==null)&&(rl(r,0),Bi(r,Qe,br,!1)),wt(r,a),((it&2)===0||r!==mt)&&(r===mt&&((it&2)===0&&(Ya|=a),jt===4&&Bi(r,Qe,br,!1)),fs(r))}function bv(r,i,a){if((it&6)!==0)throw Error(s(327));var u=!a&&(i&124)===0&&(i&r.expiredLanes)===0||Rr(r,i),f=u?CA(r,i):ap(r,i,!0),m=u;do{if(f===0){Jo&&!u&&Bi(r,i,0,!1);break}else{if(a=r.current.alternate,m&&!NA(a)){f=ap(r,i,!1),m=!1;continue}if(f===2){if(m=i,r.errorRecoveryDisabledLanes&m)var b=0;else b=r.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var E=r;f=kc;var D=E.current.memoizedState.isDehydrated;if(D&&(rl(E,b).flags|=256),b=ap(E,b,!1),b!==2){if(Wm&&!D){E.errorRecoveryDisabledLanes|=m,Ya|=m,f=4;break e}m=Bn,Bn=f,m!==null&&(Bn===null?Bn=m:Bn.push.apply(Bn,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){rl(r,0),Bi(r,i,0,!0);break}e:{switch(u=r,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Bi(u,i,br,!Mi);break e;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=ep+300-on(),10<f)){if(Bi(u,i,br,!Mi),Nn(u,0,!0)!==0)break e;u.timeoutHandle=Xv(_v.bind(null,u,a,Bn,Id,Jm,i,br,Ya,el,Mi,m,2,-0,0),f);break e}_v(u,a,Bn,Id,Jm,i,br,Ya,el,Mi,m,0,-0,0)}}break}while(!0);fs(r)}function _v(r,i,a,u,f,m,b,E,D,Q,ne,ae,X,W){if(r.timeoutHandle=-1,ae=i.subtreeFlags,(ae&8192||(ae&16785408)===16785408)&&(Bc={stylesheets:null,count:0,unsuspend:oN},pv(i),ae=cN(),ae!==null)){r.cancelPendingCommit=ae(Rv.bind(null,r,i,m,a,u,f,b,E,D,ne,1,X,W)),Bi(r,m,b,!Q);return}Rv(r,i,m,a,u,f,b,E,D)}function NA(r){for(var i=r;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var f=a[u],m=f.getSnapshot;f=f.value;try{if(!Qn(m(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Bi(r,i,a,u){i&=~Zm,i&=~Ya,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var m=31-ln(f),b=1<<m;u[m]=-1,f&=~b}a!==0&&ts(r,a,i)}function kd(){return(it&6)===0?(Oc(0),!1):!0}function sp(){if(Fe!==null){if(at===0)var r=Fe.return;else r=Fe,$s=Fa=null,bm(r),Qo=null,Tc=0,r=Fe;for(;r!==null;)tv(r.alternate,r),r=r.return;Fe=null}}function rl(r,i){var a=r.timeoutHandle;a!==-1&&(r.timeoutHandle=-1,HA(a)),a=r.cancelPendingCommit,a!==null&&(r.cancelPendingCommit=null,a()),sp(),mt=r,Fe=a=Fs(r.current,null),Qe=i,at=0,Jn=null,Mi=!1,Jo=Rr(r,i),Wm=!1,el=br=Zm=Ya=Li=jt=0,Bn=kc=null,Jm=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-ln(u),m=1<<f;i|=r[f],u&=~m}return Js=i,ed(),a}function Ev(r,i){Be=null,G.H=vd,i===pc||i===cd?(i=By(),at=3):i===Ly?(i=By(),at=4):at=i===zx?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Jn=i,Fe===null&&(jt=1,Td(r,gr(i,r.current)))}function Tv(){var r=G.H;return G.H=vd,r===null?vd:r}function Av(){var r=G.A;return G.A=TA,r}function ip(){jt=4,Mi||(Qe&4194048)!==Qe&&wr.current!==null||(Jo=!0),(Li&134217727)===0&&(Ya&134217727)===0||mt===null||Bi(mt,Qe,br,!1)}function ap(r,i,a){var u=it;it|=2;var f=Tv(),m=Av();(mt!==r||Qe!==i)&&(Id=null,rl(r,i)),i=!1;var b=jt;e:do try{if(at!==0&&Fe!==null){var E=Fe,D=Jn;switch(at){case 8:sp(),b=6;break e;case 3:case 2:case 9:case 6:wr.current===null&&(i=!0);var Q=at;if(at=0,Jn=null,sl(r,E,D,Q),a&&Jo){b=0;break e}break;default:Q=at,at=0,Jn=null,sl(r,E,D,Q)}}SA(),b=jt;break}catch(ne){Ev(r,ne)}while(!0);return i&&r.shellSuspendCounter++,$s=Fa=null,it=u,G.H=f,G.A=m,Fe===null&&(mt=null,Qe=0,ed()),b}function SA(){for(;Fe!==null;)Nv(Fe)}function CA(r,i){var a=it;it|=2;var u=Tv(),f=Av();mt!==r||Qe!==i?(Id=null,jd=on()+500,rl(r,i)):Jo=Rr(r,i);e:do try{if(at!==0&&Fe!==null){i=Fe;var m=Jn;t:switch(at){case 1:at=0,Jn=null,sl(r,i,m,1);break;case 2:case 9:if(Vy(m)){at=0,Jn=null,Sv(i);break}i=function(){at!==2&&at!==9||mt!==r||(at=7),fs(r)},m.then(i,i);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:Vy(m)?(at=0,Jn=null,Sv(i)):(at=0,Jn=null,sl(r,i,m,7));break;case 5:var b=null;switch(Fe.tag){case 26:b=Fe.memoizedState;case 5:case 27:var E=Fe;if(!b||lw(b)){at=0,Jn=null;var D=E.sibling;if(D!==null)Fe=D;else{var Q=E.return;Q!==null?(Fe=Q,Dd(Q)):Fe=null}break t}}at=0,Jn=null,sl(r,i,m,5);break;case 6:at=0,Jn=null,sl(r,i,m,6);break;case 8:sp(),jt=6;break e;default:throw Error(s(462))}}RA();break}catch(ne){Ev(r,ne)}while(!0);return $s=Fa=null,G.H=u,G.A=f,it=a,Fe!==null?0:(mt=null,Qe=0,ed(),jt)}function RA(){for(;Fe!==null&&!wo();)Nv(Fe)}function Nv(r){var i=Jx(r.alternate,r,Js);r.memoizedProps=r.pendingProps,i===null?Dd(r):Fe=i}function Sv(r){var i=r,a=i.alternate;switch(i.tag){case 15:case 0:i=Kx(a,i,i.pendingProps,i.type,void 0,Qe);break;case 11:i=Kx(a,i,i.pendingProps,i.type.render,i.ref,Qe);break;case 5:bm(i);default:tv(a,i),i=Fe=Cy(i,Js),i=Jx(a,i,Js)}r.memoizedProps=r.pendingProps,i===null?Dd(r):Fe=i}function sl(r,i,a,u){$s=Fa=null,bm(i),Qo=null,Tc=0;var f=i.return;try{if(xA(r,f,i,a,Qe)){jt=1,Td(r,gr(a,r.current)),Fe=null;return}}catch(m){if(f!==null)throw Fe=f,m;jt=1,Td(r,gr(a,r.current)),Fe=null;return}i.flags&32768?(tt||u===1?r=!0:Jo||(Qe&536870912)!==0?r=!1:(Mi=r=!0,(u===2||u===9||u===3||u===6)&&(u=wr.current,u!==null&&u.tag===13&&(u.flags|=16384))),Cv(i,r)):Dd(i)}function Dd(r){var i=r;do{if((i.flags&32768)!==0){Cv(i,Mi);return}r=i.return;var a=wA(i.alternate,i,Js);if(a!==null){Fe=a;return}if(i=i.sibling,i!==null){Fe=i;return}Fe=i=r}while(i!==null);jt===0&&(jt=5)}function Cv(r,i){do{var a=bA(r.alternate,r);if(a!==null){a.flags&=32767,Fe=a;return}if(a=r.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(r=r.sibling,r!==null)){Fe=r;return}Fe=r=a}while(r!==null);jt=6,Fe=null}function Rv(r,i,a,u,f,m,b,E,D){r.cancelPendingCommit=null;do Od();while(un!==0);if((it&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Xf,To(r,a,m,b,E,D),r===mt&&(Fe=mt=null,Qe=0),tl=i,Ui=r,nl=a,tp=m,np=f,vv=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,DA(Zt,function(){return Ov(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,f=oe.p,oe.p=2,b=it,it|=4;try{_A(r,i,a)}finally{it=b,oe.p=f,G.T=u}}un=1,jv(),Iv(),kv()}}function jv(){if(un===1){un=0;var r=Ui,i=tl,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var u=oe.p;oe.p=2;var f=it;it|=4;try{hv(i,r);var m=xp,b=xy(r.containerInfo),E=m.focusedElem,D=m.selectionRange;if(b!==E&&E&&E.ownerDocument&&yy(E.ownerDocument.documentElement,E)){if(D!==null&&$f(E)){var Q=D.start,ne=D.end;if(ne===void 0&&(ne=Q),"selectionStart"in E)E.selectionStart=Q,E.selectionEnd=Math.min(ne,E.value.length);else{var ae=E.ownerDocument||document,X=ae&&ae.defaultView||window;if(X.getSelection){var W=X.getSelection(),De=E.textContent.length,Se=Math.min(D.start,De),dt=D.end===void 0?Se:Math.min(D.end,De);!W.extend&&Se>dt&&(b=dt,dt=Se,Se=b);var $=gy(E,Se),z=gy(E,dt);if($&&z&&(W.rangeCount!==1||W.anchorNode!==$.node||W.anchorOffset!==$.offset||W.focusNode!==z.node||W.focusOffset!==z.offset)){var K=ae.createRange();K.setStart($.node,$.offset),W.removeAllRanges(),Se>dt?(W.addRange(K),W.extend(z.node,z.offset)):(K.setEnd(z.node,z.offset),W.addRange(K))}}}}for(ae=[],W=E;W=W.parentNode;)W.nodeType===1&&ae.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ae.length;E++){var re=ae[E];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Gd=!!yp,xp=yp=null}finally{it=f,oe.p=u,G.T=a}}r.current=i,un=2}}function Iv(){if(un===2){un=0;var r=Ui,i=tl,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var u=oe.p;oe.p=2;var f=it;it|=4;try{lv(r,i.alternate,i)}finally{it=f,oe.p=u,G.T=a}}un=3}}function kv(){if(un===4||un===3){un=0,ks();var r=Ui,i=tl,a=nl,u=vv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?un=5:(un=0,tl=Ui=null,Dv(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Vi=null),xi(a),i=i.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(ar,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=G.T,f=oe.p,oe.p=2,G.T=null;try{for(var m=r.onRecoverableError,b=0;b<u.length;b++){var E=u[b];m(E.value,{componentStack:E.stack})}}finally{G.T=i,oe.p=f}}(nl&3)!==0&&Od(),fs(r),f=r.pendingLanes,(a&4194090)!==0&&(f&42)!==0?r===rp?Dc++:(Dc=0,rp=r):Dc=0,Oc(0)}}function Dv(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,fc(i)))}function Od(r){return jv(),Iv(),kv(),Ov()}function Ov(){if(un!==5)return!1;var r=Ui,i=tp;tp=0;var a=xi(nl),u=G.T,f=oe.p;try{oe.p=32>a?32:a,G.T=null,a=np,np=null;var m=Ui,b=nl;if(un=0,tl=Ui=null,nl=0,(it&6)!==0)throw Error(s(331));var E=it;if(it|=4,yv(m.current),mv(m,m.current,b,a),it=E,Oc(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(ar,m)}catch{}return!0}finally{oe.p=f,G.T=u,Dv(r,i)}}function Pv(r,i,a){i=gr(a,i),i=Pm(r.stateNode,i,2),r=Ri(r,i,2),r!==null&&(wt(r,2),fs(r))}function ht(r,i,a){if(r.tag===3)Pv(r,r,a);else for(;i!==null;){if(i.tag===3){Pv(i,r,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Vi===null||!Vi.has(u))){r=gr(a,r),a=Ux(2),u=Ri(i,a,2),u!==null&&(Bx(a,u,i,r),wt(u,2),fs(u));break}}i=i.return}}function op(r,i,a){var u=r.pingCache;if(u===null){u=r.pingCache=new AA;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(a)||(Wm=!0,f.add(a),r=jA.bind(null,r,i,a),i.then(r,r))}function jA(r,i,a){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&a,r.warmLanes&=~a,mt===r&&(Qe&a)===a&&(jt===4||jt===3&&(Qe&62914560)===Qe&&300>on()-ep?(it&2)===0&&rl(r,0):Zm|=a,el===Qe&&(el=0)),fs(r)}function Mv(r,i){i===0&&(i=es()),r=Uo(r,i),r!==null&&(wt(r,i),fs(r))}function IA(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),Mv(r,a)}function kA(r,i){var a=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),Mv(r,a)}function DA(r,i){return Ye(r,i)}var Pd=null,il=null,lp=!1,Md=!1,cp=!1,Qa=0;function fs(r){r!==il&&r.next===null&&(il===null?Pd=il=r:il=il.next=r),Md=!0,lp||(lp=!0,PA())}function Oc(r,i){if(!cp&&Md){cp=!0;do for(var a=!1,u=Pd;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var b=u.suspendedLanes,E=u.pingedLanes;m=(1<<31-ln(42|r)+1)-1,m&=f&~(b&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Bv(u,m))}else m=Qe,m=Nn(u,u===mt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Rr(u,m)||(a=!0,Bv(u,m));u=u.next}while(a);cp=!1}}function OA(){Lv()}function Lv(){Md=lp=!1;var r=0;Qa!==0&&(qA()&&(r=Qa),Qa=0);for(var i=on(),a=null,u=Pd;u!==null;){var f=u.next,m=Vv(u,i);m===0?(u.next=null,a===null?Pd=f:a.next=f,f===null&&(il=a)):(a=u,(r!==0||(m&3)!==0)&&(Md=!0)),u=f}Oc(r)}function Vv(r,i){for(var a=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var b=31-ln(m),E=1<<b,D=f[b];D===-1?((E&a)===0||(E&u)!==0)&&(f[b]=Ds(E,i)):D<=i&&(r.expiredLanes|=E),m&=~E}if(i=mt,a=Qe,a=Nn(r,r===i?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,a===0||r===i&&(at===2||at===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Is(u),r.callbackNode=null,r.callbackPriority=0;if((a&3)===0||Rr(r,a)){if(i=a&-a,i===r.callbackPriority)return i;switch(u!==null&&Is(u),xi(a)){case 2:case 8:a=Ut;break;case 32:a=Zt;break;case 268435456:a=Kn;break;default:a=Zt}return u=Uv.bind(null,r),a=Ye(a,u),r.callbackPriority=i,r.callbackNode=a,i}return u!==null&&u!==null&&Is(u),r.callbackPriority=2,r.callbackNode=null,2}function Uv(r,i){if(un!==0&&un!==5)return r.callbackNode=null,r.callbackPriority=0,null;var a=r.callbackNode;if(Od()&&r.callbackNode!==a)return null;var u=Qe;return u=Nn(r,r===mt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(bv(r,u,i),Vv(r,on()),r.callbackNode!=null&&r.callbackNode===a?Uv.bind(null,r):null)}function Bv(r,i){if(Od())return null;bv(r,i,!0)}function PA(){$A(function(){(it&6)!==0?Ye(Et,OA):Lv()})}function up(){return Qa===0&&(Qa=ya()),Qa}function zv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:kr(""+r)}function Fv(r,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,r.id&&a.setAttribute("form",r.id),i.parentNode.insertBefore(a,i),r=new FormData(r),a.parentNode.removeChild(a),r}function MA(r,i,a,u,f){if(i==="submit"&&a&&a.stateNode===f){var m=zv((f[P]||null).action),b=u.submitter;b&&(i=(i=b[P]||null)?zv(i.formAction):b.getAttribute("formAction"),i!==null&&(m=i,b=null));var E=new Ca("action","action",null,u,f);r.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qa!==0){var D=b?Fv(f,b):new FormData(f);jm(a,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(E.preventDefault(),D=b?Fv(f,b):new FormData(f),jm(a,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var dp=0;dp<Qf.length;dp++){var hp=Qf[dp],LA=hp.toLowerCase(),VA=hp[0].toUpperCase()+hp.slice(1);Mr(LA,"on"+VA)}Mr(by,"onAnimationEnd"),Mr(_y,"onAnimationIteration"),Mr(Ey,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(tA,"onTransitionRun"),Mr(nA,"onTransitionStart"),Mr(rA,"onTransitionCancel"),Mr(Ty,"onTransitionEnd"),is("onMouseEnter",["mouseout","mouseover"]),is("onMouseLeave",["mouseout","mouseover"]),is("onPointerEnter",["pointerout","pointerover"]),is("onPointerLeave",["pointerout","pointerover"]),ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pc));function qv(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var u=r[a],f=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var b=u.length-1;0<=b;b--){var E=u[b],D=E.instance,Q=E.currentTarget;if(E=E.listener,D!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=Q;try{m(f)}catch(ne){Ed(ne)}f.currentTarget=null,m=D}else for(b=0;b<u.length;b++){if(E=u[b],D=E.instance,Q=E.currentTarget,E=E.listener,D!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=Q;try{m(f)}catch(ne){Ed(ne)}f.currentTarget=null,m=D}}}}function qe(r,i){var a=i[be];a===void 0&&(a=i[be]=new Set);var u=r+"__bubble";a.has(u)||(Hv(i,r,2,!1),a.add(u))}function fp(r,i,a){var u=0;i&&(u|=4),Hv(a,r,u,i)}var Ld="_reactListening"+Math.random().toString(36).slice(2);function mp(r){if(!r[Ld]){r[Ld]=!0,Ps.forEach(function(a){a!=="selectionchange"&&(UA.has(a)||fp(a,!1,r),fp(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Ld]||(i[Ld]=!0,fp("selectionchange",!1,i))}}function Hv(r,i,a,u){switch(mw(i)){case 2:var f=hN;break;case 8:f=fN;break;default:f=Cp}a=f.bind(null,i,a,r),f=void 0,!Bs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,a,{capture:!0,passive:f}):r.addEventListener(i,a,!0):f!==void 0?r.addEventListener(i,a,{passive:f}):r.addEventListener(i,a,!1)}function pp(r,i,a,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var E=u.stateNode.containerInfo;if(E===f)break;if(b===4)for(b=u.return;b!==null;){var D=b.tag;if((D===3||D===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;E!==null;){if(b=dr(E),b===null)return;if(D=b.tag,D===5||D===6||D===26||D===27){u=m=b;continue e}E=E.parentNode}}u=u.return}Aa(function(){var Q=m,ne=Zl(a),ae=[];e:{var X=Ay.get(r);if(X!==void 0){var W=Ca,De=r;switch(r){case"keypress":if(Na(a)===0)break e;case"keydown":case"keyup":W=Po;break;case"focusin":De="focus",W=ko;break;case"focusout":De="blur",W=ko;break;case"beforeblur":case"afterblur":W=ko;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=$u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Ai;break;case by:case _y:case Ey:W=ec;break;case Ty:W=x;break;case"scroll":case"scrollend":W=ja;break;case"wheel":W=N;break;case"copy":case"cut":case"paste":W=Ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=rc;break;case"toggle":case"beforetoggle":W=Z}var Se=(i&4)!==0,dt=!Se&&(r==="scroll"||r==="scrollend"),$=Se?X!==null?X+"Capture":null:X;Se=[];for(var z=Q,K;z!==null;){var re=z;if(K=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||K===null||$===null||(re=Ei(z,$),re!=null&&Se.push(Mc(z,re,K))),dt)break;z=z.return}0<Se.length&&(X=new W(X,De,null,a,ne),ae.push({event:X,listeners:Se}))}}if((i&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",W=r==="mouseout"||r==="pointerout",X&&a!==Wl&&(De=a.relatedTarget||a.fromElement)&&(dr(De)||De[me]))break e;if((W||X)&&(X=ne.window===ne?ne:(X=ne.ownerDocument)?X.defaultView||X.parentWindow:window,W?(De=a.relatedTarget||a.toElement,W=Q,De=De?dr(De):null,De!==null&&(dt=c(De),Se=De.tag,De!==dt||Se!==5&&Se!==27&&Se!==6)&&(De=null)):(W=null,De=Q),W!==De)){if(Se=Da,re="onMouseLeave",$="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(Se=rc,re="onPointerLeave",$="onPointerEnter",z="pointer"),dt=W==null?X:Os(W),K=De==null?X:Os(De),X=new Se(re,z+"leave",W,a,ne),X.target=dt,X.relatedTarget=K,re=null,dr(ne)===Q&&(Se=new Se($,z+"enter",De,a,ne),Se.target=K,Se.relatedTarget=dt,re=Se),dt=re,W&&De)t:{for(Se=W,$=De,z=0,K=Se;K;K=al(K))z++;for(K=0,re=$;re;re=al(re))K++;for(;0<z-K;)Se=al(Se),z--;for(;0<K-z;)$=al($),K--;for(;z--;){if(Se===$||$!==null&&Se===$.alternate)break t;Se=al(Se),$=al($)}Se=null}else Se=null;W!==null&&$v(ae,X,W,Se,!1),De!==null&&dt!==null&&$v(ae,dt,De,Se,!0)}}e:{if(X=Q?Os(Q):window,W=X.nodeName&&X.nodeName.toLowerCase(),W==="select"||W==="input"&&X.type==="file")var we=uy;else if(ly(X))if(dy)we=ZT;else{we=XT;var ze=QT}else W=X.nodeName,!W||W.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Ro(Q.elementType)&&(we=uy):we=WT;if(we&&(we=we(r,Q))){cy(ae,we,a,ne);break e}ze&&ze(r,X,Q),r==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&Yl(X,"number",X.value)}switch(ze=Q?Os(Q):window,r){case"focusin":(ly(ze)||ze.contentEditable==="true")&&(Mo=ze,Gf=Q,lc=null);break;case"focusout":lc=Gf=Mo=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,vy(ae,a,ne);break;case"selectionchange":if(eA)break;case"keydown":case"keyup":vy(ae,a,ne)}var _e;if(Pe)e:{switch(r){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Pr?Dr(r,a)&&(Ce="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ce="onCompositionStart");Ce&&(kt&&a.locale!=="ko"&&(Pr||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Pr&&(_e=Hu()):(pr=ne,ft="value"in pr?pr.value:pr.textContent,Pr=!0)),ze=Vd(Q,Ce),0<ze.length&&(Ce=new nc(Ce,r,null,a,ne),ae.push({event:Ce,listeners:ze}),_e?Ce.data=_e:(_e=Or(a),_e!==null&&(Ce.data=_e)))),(_e=st?sc(r,a):GT(r,a))&&(Ce=Vd(Q,"onBeforeInput"),0<Ce.length&&(ze=new nc("onBeforeInput","beforeinput",null,a,ne),ae.push({event:ze,listeners:Ce}),ze.data=_e)),MA(ae,r,Q,a,ne)}qv(ae,i)})}function Mc(r,i,a){return{instance:r,listener:i,currentTarget:a}}function Vd(r,i){for(var a=i+"Capture",u=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Ei(r,a),f!=null&&u.unshift(Mc(r,f,m)),f=Ei(r,i),f!=null&&u.push(Mc(r,f,m))),r.tag===3)return u;r=r.return}return[]}function al(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function $v(r,i,a,u,f){for(var m=i._reactName,b=[];a!==null&&a!==u;){var E=a,D=E.alternate,Q=E.stateNode;if(E=E.tag,D!==null&&D===u)break;E!==5&&E!==26&&E!==27||Q===null||(D=Q,f?(Q=Ei(a,m),Q!=null&&b.unshift(Mc(a,Q,D))):f||(Q=Ei(a,m),Q!=null&&b.push(Mc(a,Q,D)))),a=a.return}b.length!==0&&r.push({event:i,listeners:b})}var BA=/\r\n?/g,zA=/\u0000|\uFFFD/g;function Gv(r){return(typeof r=="string"?r:""+r).replace(BA,`
`).replace(zA,"")}function Kv(r,i){return i=Gv(i),Gv(r)===i}function Ud(){}function ut(r,i,a,u,f,m){switch(a){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||mr(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&mr(r,""+u);break;case"className":wa(r,"class",u);break;case"tabIndex":wa(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":wa(r,a,u);break;case"style":Xl(r,u,m);break;case"data":if(i!=="object"){wa(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||a!=="href")){r.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=kr(""+u),r.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&ut(r,i,"name",f.name,f,null),ut(r,i,"formEncType",f.formEncType,f,null),ut(r,i,"formMethod",f.formMethod,f,null),ut(r,i,"formTarget",f.formTarget,f,null)):(ut(r,i,"encType",f.encType,f,null),ut(r,i,"method",f.method,f,null),ut(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=kr(""+u),r.setAttribute(a,u);break;case"onClick":u!=null&&(r.onclick=Ud);break;case"onScroll":u!=null&&qe("scroll",r);break;case"onScrollEnd":u!=null&&qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}a=kr(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""+u):r.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""):r.removeAttribute(a);break;case"capture":case"download":u===!0?r.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,u):r.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(a,u):r.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(a):r.setAttribute(a,u);break;case"popover":qe("beforetoggle",r),qe("toggle",r),va(r,"popover",u);break;case"xlinkActuate":fr(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":fr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":fr(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":fr(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":fr(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":fr(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":fr(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":fr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":fr(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":va(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=zu.get(a)||a,va(r,a,u))}}function gp(r,i,a,u,f,m){switch(a){case"style":Xl(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"children":typeof u=="string"?mr(r,u):(typeof u=="number"||typeof u=="bigint")&&mr(r,""+u);break;case"onScroll":u!=null&&qe("scroll",r);break;case"onScrollEnd":u!=null&&qe("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Ud);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ms.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),m=r[P]||null,m=m!=null?m[a]:null,typeof m=="function"&&r.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(a in r?r[a]=null:r.hasAttribute(a)&&r.removeAttribute(a)),r.addEventListener(i,u,f);break e}a in r?r[a]=u:u===!0?r.setAttribute(a,""):va(r,a,u)}}}function dn(r,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",r),qe("load",r);var u=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var b=a[m];if(b!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ut(r,i,m,b,a,null)}}f&&ut(r,i,"srcSet",a.srcSet,a,null),u&&ut(r,i,"src",a.src,a,null);return;case"input":qe("invalid",r);var E=m=b=f=null,D=null,Q=null;for(u in a)if(a.hasOwnProperty(u)){var ne=a[u];if(ne!=null)switch(u){case"name":f=ne;break;case"type":b=ne;break;case"checked":D=ne;break;case"defaultChecked":Q=ne;break;case"value":m=ne;break;case"defaultValue":E=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,i));break;default:ut(r,i,u,ne,a,null)}}Kl(r,m,E,D,Q,b,f,!1),wi(r);return;case"select":qe("invalid",r),u=b=m=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":b=E;break;case"multiple":u=E;default:ut(r,i,f,E,a,null)}i=m,a=b,r.multiple=!!u,i!=null?bi(r,!!u,i,!1):a!=null&&bi(r,!!u,a,!0);return;case"textarea":qe("invalid",r),m=f=u=null;for(b in a)if(a.hasOwnProperty(b)&&(E=a[b],E!=null))switch(b){case"value":u=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:ut(r,i,b,E,a,null)}Bu(r,u,f,m),wi(r);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(u=a[D],u!=null))switch(D){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ut(r,i,D,u,a,null)}return;case"dialog":qe("beforetoggle",r),qe("toggle",r),qe("cancel",r),qe("close",r);break;case"iframe":case"object":qe("load",r);break;case"video":case"audio":for(u=0;u<Pc.length;u++)qe(Pc[u],r);break;case"image":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"embed":case"source":case"link":qe("error",r),qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(u=a[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ut(r,i,Q,u,a,null)}return;default:if(Ro(i)){for(ne in a)a.hasOwnProperty(ne)&&(u=a[ne],u!==void 0&&gp(r,i,ne,u,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(u=a[E],u!=null&&ut(r,i,E,u,a,null))}function FA(r,i,a,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,E=null,D=null,Q=null,ne=null;for(W in a){var ae=a[W];if(a.hasOwnProperty(W)&&ae!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":D=ae;default:u.hasOwnProperty(W)||ut(r,i,W,null,u,ae)}}for(var X in u){var W=u[X];if(ae=a[X],u.hasOwnProperty(X)&&(W!=null||ae!=null))switch(X){case"type":m=W;break;case"name":f=W;break;case"checked":Q=W;break;case"defaultChecked":ne=W;break;case"value":b=W;break;case"defaultValue":E=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:W!==ae&&ut(r,i,X,W,u,ae)}}Gl(r,b,E,D,Q,ne,m,f);return;case"select":W=b=E=X=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":W=D;default:u.hasOwnProperty(m)||ut(r,i,m,null,u,D)}for(f in u)if(m=u[f],D=a[f],u.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":X=m;break;case"defaultValue":E=m;break;case"multiple":b=m;default:m!==D&&ut(r,i,f,m,u,D)}i=E,a=b,u=W,X!=null?bi(r,!!a,X,!1):!!u!=!!a&&(i!=null?bi(r,!!a,i,!0):bi(r,!!a,a?[]:"",!1));return;case"textarea":W=X=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ut(r,i,E,null,u,f)}for(b in u)if(f=u[b],m=a[b],u.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":X=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&ut(r,i,b,f,u,m)}Uu(r,X,W);return;case"option":for(var De in a)if(X=a[De],a.hasOwnProperty(De)&&X!=null&&!u.hasOwnProperty(De))switch(De){case"selected":r.selected=!1;break;default:ut(r,i,De,null,u,X)}for(D in u)if(X=u[D],W=a[D],u.hasOwnProperty(D)&&X!==W&&(X!=null||W!=null))switch(D){case"selected":r.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ut(r,i,D,X,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)X=a[Se],a.hasOwnProperty(Se)&&X!=null&&!u.hasOwnProperty(Se)&&ut(r,i,Se,null,u,X);for(Q in u)if(X=u[Q],W=a[Q],u.hasOwnProperty(Q)&&X!==W&&(X!=null||W!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:ut(r,i,Q,X,u,W)}return;default:if(Ro(i)){for(var dt in a)X=a[dt],a.hasOwnProperty(dt)&&X!==void 0&&!u.hasOwnProperty(dt)&&gp(r,i,dt,void 0,u,X);for(ne in u)X=u[ne],W=a[ne],!u.hasOwnProperty(ne)||X===W||X===void 0&&W===void 0||gp(r,i,ne,X,u,W);return}}for(var $ in a)X=a[$],a.hasOwnProperty($)&&X!=null&&!u.hasOwnProperty($)&&ut(r,i,$,null,u,X);for(ae in u)X=u[ae],W=a[ae],!u.hasOwnProperty(ae)||X===W||X==null&&W==null||ut(r,i,ae,X,u,W)}var yp=null,xp=null;function Bd(r){return r.nodeType===9?r:r.ownerDocument}function Yv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qv(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function vp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var wp=null;function qA(){var r=window.event;return r&&r.type==="popstate"?r===wp?!1:(wp=r,!0):(wp=null,!1)}var Xv=typeof setTimeout=="function"?setTimeout:void 0,HA=typeof clearTimeout=="function"?clearTimeout:void 0,Wv=typeof Promise=="function"?Promise:void 0,$A=typeof queueMicrotask=="function"?queueMicrotask:typeof Wv<"u"?function(r){return Wv.resolve(null).then(r).catch(GA)}:Xv;function GA(r){setTimeout(function(){throw r})}function zi(r){return r==="head"}function Zv(r,i){var a=i,u=0,f=0;do{var m=a.nextSibling;if(r.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<u&&8>u){a=u;var b=r.ownerDocument;if(a&1&&Lc(b.documentElement),a&2&&Lc(b.body),a&4)for(a=b.head,Lc(a),b=a.firstChild;b;){var E=b.nextSibling,D=b.nodeName;b[ur]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=E}}if(f===0){r.removeChild(m),$c(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:u=a.charCodeAt(0)-48;else u=0;a=m}while(a);$c(i)}function bp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":bp(a),ns(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}r.removeChild(a)}}function KA(r,i,a,u){for(;r.nodeType===1;){var f=a;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[ur])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Vr(r.nextSibling),r===null)break}return null}function YA(r,i,a){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Vr(r.nextSibling),r===null))return null;return r}function _p(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function QA(r,i){var a=r.ownerDocument;if(r.data!=="$?"||a.readyState==="complete")i();else{var u=function(){i(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Vr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var Ep=null;function Jv(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}function ew(r,i,a){switch(i=Bd(a),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Lc(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);ns(r)}var _r=new Map,tw=new Set;function zd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ei=oe.d;oe.d={f:XA,r:WA,D:ZA,C:JA,L:eN,m:tN,X:rN,S:nN,M:sN};function XA(){var r=ei.f(),i=kd();return r||i}function WA(r){var i=hr(r);i!==null&&i.tag===5&&i.type==="form"?bx(i):ei.r(r)}var ol=typeof document>"u"?null:document;function nw(r,i,a){var u=ol;if(u&&typeof i=="string"&&i){var f=en(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),tw.has(f)||(tw.add(f),r={rel:r,crossOrigin:a,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),dn(i,"link",r),At(i),u.head.appendChild(i)))}}function ZA(r){ei.D(r),nw("dns-prefetch",r,null)}function JA(r,i){ei.C(r,i),nw("preconnect",r,i)}function eN(r,i,a){ei.L(r,i,a);var u=ol;if(u&&r&&i){var f='link[rel="preload"][as="'+en(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+en(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+en(a.imageSizes)+'"]')):f+='[href="'+en(r)+'"]';var m=f;switch(i){case"style":m=ll(r);break;case"script":m=cl(r)}_r.has(m)||(r=v({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:r,as:i},a),_r.set(m,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(Vc(m))||i==="script"&&u.querySelector(Uc(m))||(i=u.createElement("link"),dn(i,"link",r),At(i),u.head.appendChild(i)))}}function tN(r,i){ei.m(r,i);var a=ol;if(a&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+en(u)+'"][href="'+en(r)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=cl(r)}if(!_r.has(m)&&(r=v({rel:"modulepreload",href:r},i),_r.set(m,r),a.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Uc(m)))return}u=a.createElement("link"),dn(u,"link",r),At(u),a.head.appendChild(u)}}}function nN(r,i,a){ei.S(r,i,a);var u=ol;if(u&&r){var f=rs(u).hoistableStyles,m=ll(r);i=i||"default";var b=f.get(m);if(!b){var E={loading:0,preload:null};if(b=u.querySelector(Vc(m)))E.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":i},a),(a=_r.get(m))&&Tp(r,a);var D=b=u.createElement("link");At(D),dn(D,"link",r),D._p=new Promise(function(Q,ne){D.onload=Q,D.onerror=ne}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Fd(b,i,u)}b={type:"stylesheet",instance:b,count:1,state:E},f.set(m,b)}}}function rN(r,i){ei.X(r,i);var a=ol;if(a&&r){var u=rs(a).hoistableScripts,f=cl(r),m=u.get(f);m||(m=a.querySelector(Uc(f)),m||(r=v({src:r,async:!0},i),(i=_r.get(f))&&Ap(r,i),m=a.createElement("script"),At(m),dn(m,"link",r),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function sN(r,i){ei.M(r,i);var a=ol;if(a&&r){var u=rs(a).hoistableScripts,f=cl(r),m=u.get(f);m||(m=a.querySelector(Uc(f)),m||(r=v({src:r,async:!0,type:"module"},i),(i=_r.get(f))&&Ap(r,i),m=a.createElement("script"),At(m),dn(m,"link",r),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function rw(r,i,a,u){var f=(f=he.current)?zd(f):null;if(!f)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ll(a.href),a=rs(f).hoistableStyles,u=a.get(i),u||(u={type:"style",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){r=ll(a.href);var m=rs(f).hoistableStyles,b=m.get(r);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,b),(m=f.querySelector(Vc(r)))&&!m._p&&(b.instance=m,b.state.loading=5),_r.has(r)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},_r.set(r,a),m||iN(f,r,a,b.state))),i&&u===null)throw Error(s(528,""));return b}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=cl(a),a=rs(f).hoistableScripts,u=a.get(i),u||(u={type:"script",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function ll(r){return'href="'+en(r)+'"'}function Vc(r){return'link[rel="stylesheet"]['+r+"]"}function sw(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function iN(r,i,a,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),dn(i,"link",a),At(i),r.head.appendChild(i))}function cl(r){return'[src="'+en(r)+'"]'}function Uc(r){return"script[async]"+r}function iw(r,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+en(a.href)+'"]');if(u)return i.instance=u,At(u),u;var f=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),At(u),dn(u,"style",f),Fd(u,a.precedence,r),i.instance=u;case"stylesheet":f=ll(a.href);var m=r.querySelector(Vc(f));if(m)return i.state.loading|=4,i.instance=m,At(m),m;u=sw(a),(f=_r.get(f))&&Tp(u,f),m=(r.ownerDocument||r).createElement("link"),At(m);var b=m;return b._p=new Promise(function(E,D){b.onload=E,b.onerror=D}),dn(m,"link",u),i.state.loading|=4,Fd(m,a.precedence,r),i.instance=m;case"script":return m=cl(a.src),(f=r.querySelector(Uc(m)))?(i.instance=f,At(f),f):(u=a,(f=_r.get(m))&&(u=v({},a),Ap(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),At(f),dn(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Fd(u,a.precedence,r));return i.instance}function Fd(r,i,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,b=0;b<u.length;b++){var E=u[b];if(E.dataset.precedence===i)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(r,i.firstChild))}function Tp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Ap(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var qd=null;function aw(r,i,a){if(qd===null){var u=new Map,f=qd=new Map;f.set(a,u)}else f=qd,u=f.get(a),u||(u=new Map,f.set(a,u));if(u.has(r))return u;for(u.set(r,null),a=a.getElementsByTagName(r),f=0;f<a.length;f++){var m=a[f];if(!(m[ur]||m[Tt]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(i)||"";b=r+b;var E=u.get(b);E?E.push(m):u.set(b,[m])}}return u}function ow(r,i,a){r=r.ownerDocument||r,r.head.insertBefore(a,i==="title"?r.querySelector("head > title"):null)}function aN(r,i,a){if(a===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function lw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Bc=null;function oN(){}function lN(r,i,a){if(Bc===null)throw Error(s(475));var u=Bc;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=ll(a.href),m=r.querySelector(Vc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=Hd.bind(u),r.then(u,u)),i.state.loading|=4,i.instance=m,At(m);return}m=r.ownerDocument||r,a=sw(a),(f=_r.get(f))&&Tp(a,f),m=m.createElement("link"),At(m);var b=m;b._p=new Promise(function(E,D){b.onload=E,b.onerror=D}),dn(m,"link",a),i.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Hd.bind(u),r.addEventListener("load",i),r.addEventListener("error",i))}}function cN(){if(Bc===null)throw Error(s(475));var r=Bc;return r.stylesheets&&r.count===0&&Np(r,r.stylesheets),0<r.count?function(i){var a=setTimeout(function(){if(r.stylesheets&&Np(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(a)}}:null}function Hd(){if(this.count--,this.count===0){if(this.stylesheets)Np(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var $d=null;function Np(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,$d=new Map,i.forEach(uN,r),$d=null,Hd.call(r))}function uN(r,i){if(!(i.state.loading&4)){var a=$d.get(r);if(a)var u=a.get(null);else{a=new Map,$d.set(r,a);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),u=b)}u&&a.set(null,u)}f=i.instance,b=f.getAttribute("data-precedence"),m=a.get(b)||u,m===u&&a.set(null,f),a.set(b,f),this.count++,u=Hd.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var zc={$$typeof:q,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function dN(r,i,a,u,f,m,b,E){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function cw(r,i,a,u,f,m,b,E,D,Q,ne,ae){return r=new dN(r,i,a,b,E,D,Q,ae),i=1,m===!0&&(i|=24),m=Xn(3,null,null,i),r.current=m,m.stateNode=r,i=om(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:a,cache:i},dm(m),r}function uw(r){return r?(r=Bo,r):Bo}function dw(r,i,a,u,f,m){f=uw(f),u.context===null?u.context=f:u.pendingContext=f,u=Ci(i),u.payload={element:a},m=m===void 0?null:m,m!==null&&(u.callback=m),a=Ri(r,u,i),a!==null&&(tr(a,r,i),yc(a,r,i))}function hw(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function Sp(r,i){hw(r,i),(r=r.alternate)&&hw(r,i)}function fw(r){if(r.tag===13){var i=Uo(r,67108864);i!==null&&tr(i,r,67108864),Sp(r,67108864)}}var Gd=!0;function hN(r,i,a,u){var f=G.T;G.T=null;var m=oe.p;try{oe.p=2,Cp(r,i,a,u)}finally{oe.p=m,G.T=f}}function fN(r,i,a,u){var f=G.T;G.T=null;var m=oe.p;try{oe.p=8,Cp(r,i,a,u)}finally{oe.p=m,G.T=f}}function Cp(r,i,a,u){if(Gd){var f=Rp(u);if(f===null)pp(r,i,u,Kd,a),pw(r,u);else if(pN(f,r,i,a,u))u.stopPropagation();else if(pw(r,u),i&4&&-1<mN.indexOf(r)){for(;f!==null;){var m=hr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Ln(m.pendingLanes);if(b!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var D=1<<31-ln(b);E.entanglements[1]|=D,b&=~D}fs(m),(it&6)===0&&(jd=on()+500,Oc(0))}}break;case 13:E=Uo(m,2),E!==null&&tr(E,m,2),kd(),Sp(m,2)}if(m=Rp(u),m===null&&pp(r,i,u,Kd,a),m===f)break;f=m}f!==null&&u.stopPropagation()}else pp(r,i,u,null,a)}}function Rp(r){return r=Zl(r),jp(r)}var Kd=null;function jp(r){if(Kd=null,r=dr(r),r!==null){var i=c(r);if(i===null)r=null;else{var a=i.tag;if(a===13){if(r=d(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Kd=r,null}function mw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bo()){case Et:return 2;case Ut:return 8;case Zt:case Wr:return 32;case Kn:return 268435456;default:return 32}default:return 32}}var Ip=!1,Fi=null,qi=null,Hi=null,Fc=new Map,qc=new Map,$i=[],mN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pw(r,i){switch(r){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":qi=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":Fc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(i.pointerId)}}function Hc(r,i,a,u,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=hr(i),i!==null&&fw(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function pN(r,i,a,u,f){switch(i){case"focusin":return Fi=Hc(Fi,r,i,a,u,f),!0;case"dragenter":return qi=Hc(qi,r,i,a,u,f),!0;case"mouseover":return Hi=Hc(Hi,r,i,a,u,f),!0;case"pointerover":var m=f.pointerId;return Fc.set(m,Hc(Fc.get(m)||null,r,i,a,u,f)),!0;case"gotpointercapture":return m=f.pointerId,qc.set(m,Hc(qc.get(m)||null,r,i,a,u,f)),!0}return!1}function gw(r){var i=dr(r.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){r.blockedOn=i,$l(r.priority,function(){if(a.tag===13){var u=er();u=yi(u);var f=Uo(a,u);f!==null&&tr(f,a,u),Sp(a,u)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Yd(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=Rp(r.nativeEvent);if(a===null){a=r.nativeEvent;var u=new a.constructor(a.type,a);Wl=u,a.target.dispatchEvent(u),Wl=null}else return i=hr(a),i!==null&&fw(i),r.blockedOn=a,!1;i.shift()}return!0}function yw(r,i,a){Yd(r)&&a.delete(i)}function gN(){Ip=!1,Fi!==null&&Yd(Fi)&&(Fi=null),qi!==null&&Yd(qi)&&(qi=null),Hi!==null&&Yd(Hi)&&(Hi=null),Fc.forEach(yw),qc.forEach(yw)}function Qd(r,i){r.blockedOn===i&&(r.blockedOn=null,Ip||(Ip=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,gN)))}var Xd=null;function xw(r){Xd!==r&&(Xd=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Xd===r&&(Xd=null);for(var i=0;i<r.length;i+=3){var a=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if(jp(u||a)===null)continue;break}var m=hr(a);m!==null&&(r.splice(i,3),i-=3,jm(m,{pending:!0,data:f,method:a.method,action:u},u,f))}}))}function $c(r){function i(D){return Qd(D,r)}Fi!==null&&Qd(Fi,r),qi!==null&&Qd(qi,r),Hi!==null&&Qd(Hi,r),Fc.forEach(i),qc.forEach(i);for(var a=0;a<$i.length;a++){var u=$i[a];u.blockedOn===r&&(u.blockedOn=null)}for(;0<$i.length&&(a=$i[0],a.blockedOn===null);)gw(a),a.blockedOn===null&&$i.shift();if(a=(r.ownerDocument||r).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var f=a[u],m=a[u+1],b=f[P]||null;if(typeof m=="function")b||xw(a);else if(b){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[P]||null)E=b.formAction;else if(jp(f)!==null)continue}else E=b.action;typeof E=="function"?a[u+1]=E:(a.splice(u,3),u-=3),xw(a)}}}function kp(r){this._internalRoot=r}Wd.prototype.render=kp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,u=er();dw(a,u,r,i,null,null)},Wd.prototype.unmount=kp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;dw(r.current,2,null,r,null,null),kd(),i[me]=null}};function Wd(r){this._internalRoot=r}Wd.prototype.unstable_scheduleHydration=function(r){if(r){var i=lr();r={blockedOn:null,target:r,priority:i};for(var a=0;a<$i.length&&i!==0&&i<$i[a].priority;a++);$i.splice(a,0,r),a===0&&gw(r)}};var vw=e.version;if(vw!=="19.1.1")throw Error(s(527,vw,"19.1.1"));oe.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=g(i),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var yN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zd.isDisabled&&Zd.supportsFiber)try{ar=Zd.inject(yN),Jt=Zd}catch{}}return Kc.createRoot=function(r,i){if(!o(r))throw Error(s(299));var a=!1,u="",f=Px,m=Mx,b=Lx,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=cw(r,1,!1,null,null,a,u,f,m,b,E,null),r[me]=i.current,mp(r),new kp(i)},Kc.hydrateRoot=function(r,i,a){if(!o(r))throw Error(s(299));var u=!1,f="",m=Px,b=Mx,E=Lx,D=null,Q=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(Q=a.formState)),i=cw(r,1,!0,i,a??null,u,f,m,b,E,D,Q),i.context=uw(null),a=i.current,u=er(),u=yi(u),f=Ci(u),f.callback=null,Ri(a,f,u),a=u,i.current.lanes=a,wt(i,a),fs(i),r[me]=i.current,mp(r),new Wd(i)},Kc.version="19.1.1",Kc}var Rw;function CN(){if(Rw)return Pp.exports;Rw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Pp.exports=SN(),Pp.exports}var RN=CN();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var jw="popstate";function jN(t={}){function e(o,c){let{pathname:d="/",search:p="",hash:g=""}=co(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),cg("",{pathname:d,search:p,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let d=o.document.querySelector("base"),p="";if(d&&d.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof c=="string"?c:lu(c))}function s(o,c){Ar(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return kN(e,n,s,t)}function _t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ar(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IN(){return Math.random().toString(36).substring(2,10)}function Iw(t,e){return{usr:t.state,key:t.key,idx:e}}function cg(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?co(e):e,state:n,key:e&&e.key||s||IN()}}function lu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function kN(t,e,n,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,d=o.history,p="POP",g=null,y=v();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function v(){return(d.state||{idx:null}).idx}function _(){p="POP";let j=v(),H=j==null?null:j-y;y=j,g&&g({action:p,location:U.location,delta:H})}function T(j,H){p="PUSH";let F=cg(U.location,j,H);n&&n(F,j),y=v()+1;let q=Iw(F,y),ie=U.createHref(F);try{d.pushState(q,"",ie)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;o.location.assign(ie)}c&&g&&g({action:p,location:U.location,delta:1})}function I(j,H){p="REPLACE";let F=cg(U.location,j,H);n&&n(F,j),y=v();let q=Iw(F,y),ie=U.createHref(F);d.replaceState(q,"",ie),c&&g&&g({action:p,location:U.location,delta:0})}function B(j){return DN(j)}let U={get action(){return p},get location(){return t(o,d)},listen(j){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(jw,_),g=j,()=>{o.removeEventListener(jw,_),g=null}},createHref(j){return e(o,j)},createURL:B,encodeLocation(j){let H=B(j);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:T,replace:I,go(j){return d.go(j)}};return U}function DN(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_t(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:lu(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function H2(t,e,n="/"){return ON(t,e,n,!1)}function ON(t,e,n,s){let o=typeof e=="string"?co(e):e,c=oi(o.pathname||"/",n);if(c==null)return null;let d=$2(t);PN(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=GN(c);p=HN(d[g],y,s)}return p}function $2(t,e=[],n=[],s="",o=!1){let c=(d,p,g=o,y)=>{let v={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&g)return;_t(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let _=ri([s,v.relativePath]),T=n.concat(v);d.children&&d.children.length>0&&(_t(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),$2(d.children,e,T,_,g)),!(d.path==null&&!d.index)&&e.push({path:_,score:FN(_,d.index),routesMeta:T})};return t.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))c(d,p);else for(let g of G2(d.path))c(d,p,!0,g)}),e}function G2(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let d=G2(s.join("/")),p=[];return p.push(...d.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...d),p.map(g=>t.startsWith("/")&&g===""?"/":g)}function PN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:qN(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var MN=/^:[\w-]+$/,LN=3,VN=2,UN=1,BN=10,zN=-2,kw=t=>t==="*";function FN(t,e){let n=t.split("/"),s=n.length;return n.some(kw)&&(s+=zN),e&&(s+=VN),n.filter(o=>!kw(o)).reduce((o,c)=>o+(MN.test(c)?LN:c===""?UN:BN),s)}function qN(t,e){return t.length===e.length&&t.slice(0,-1).every((s,o)=>s===e[o])?t[t.length-1]-e[e.length-1]:0}function HN(t,e,n=!1){let{routesMeta:s}=t,o={},c="/",d=[];for(let p=0;p<s.length;++p){let g=s[p],y=p===s.length-1,v=c==="/"?e:e.slice(c.length)||"/",_=Eh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},v),T=g.route;if(!_&&y&&n&&!s[s.length-1].route.index&&(_=Eh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!_)return null;Object.assign(o,_.params),d.push({params:o,pathname:ri([c,_.pathname]),pathnameBase:XN(ri([c,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(c=ri([c,_.pathnameBase]))}return d}function Eh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=$N(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((y,{paramName:v,isOptional:_},T)=>{if(v==="*"){let B=p[T]||"";d=c.slice(0,c.length-B.length).replace(/(.)\/+$/,"$1")}const I=p[T];return _&&!I?y[v]=void 0:y[v]=(I||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:t}}function $N(t,e=!1,n=!0){Ar(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(s.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function GN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ar(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function oi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function KN(t,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof t=="string"?co(t):t;return{pathname:n?n.startsWith("/")?n:YN(n,e):e,search:WN(s),hash:ZN(o)}}function YN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Up(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zg(t){let e=QN(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Fg(t,e,n,s=!1){let o;typeof t=="string"?o=co(t):(o={...t},_t(!o.pathname||!o.pathname.includes("?"),Up("?","pathname","search",o)),_t(!o.pathname||!o.pathname.includes("#"),Up("#","pathname","hash",o)),_t(!o.search||!o.search.includes("#"),Up("#","search","hash",o)));let c=t===""||o.pathname==="",d=c?"/":o.pathname,p;if(d==null)p=n;else{let _=e.length-1;if(!s&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),_-=1;o.pathname=T.join("/")}p=_>=0?e[_]:"/"}let g=KN(o,p),y=d&&d!=="/"&&d.endsWith("/"),v=(c||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||v)&&(g.pathname+="/"),g}var ri=t=>t.join("/").replace(/\/\/+/g,"/"),XN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),WN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ZN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var K2=["POST","PUT","PATCH","DELETE"];new Set(K2);var eS=["GET",...K2];new Set(eS);var kl=R.createContext(null);kl.displayName="DataRouter";var af=R.createContext(null);af.displayName="DataRouterState";R.createContext(!1);var Y2=R.createContext({isTransitioning:!1});Y2.displayName="ViewTransition";var tS=R.createContext(new Map);tS.displayName="Fetchers";var nS=R.createContext(null);nS.displayName="Await";var Kr=R.createContext(null);Kr.displayName="Navigation";var vu=R.createContext(null);vu.displayName="Location";var Yr=R.createContext({outlet:null,matches:[],isDataRoute:!1});Yr.displayName="Route";var qg=R.createContext(null);qg.displayName="RouteError";function rS(t,{relative:e}={}){_t(Dl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=R.useContext(Kr),{hash:o,pathname:c,search:d}=wu(t,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:ri([n,c])),s.createHref({pathname:p,search:d,hash:o})}function Dl(){return R.useContext(vu)!=null}function fa(){return _t(Dl(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(vu).location}var Q2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function X2(t){R.useContext(Kr).static||R.useLayoutEffect(t)}function Cr(){let{isDataRoute:t}=R.useContext(Yr);return t?yS():sS()}function sS(){_t(Dl(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(kl),{basename:e,navigator:n}=R.useContext(Kr),{matches:s}=R.useContext(Yr),{pathname:o}=fa(),c=JSON.stringify(zg(s)),d=R.useRef(!1);return X2(()=>{d.current=!0}),R.useCallback((g,y={})=>{if(Ar(d.current,Q2),!d.current)return;if(typeof g=="number"){n.go(g);return}let v=Fg(g,JSON.parse(c),o,y.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ri([e,v.pathname])),(y.replace?n.replace:n.push)(v,y.state,y)},[e,n,c,o,t])}R.createContext(null);function iS(){let{matches:t}=R.useContext(Yr),e=t[t.length-1];return e?e.params:{}}function wu(t,{relative:e}={}){let{matches:n}=R.useContext(Yr),{pathname:s}=fa(),o=JSON.stringify(zg(n));return R.useMemo(()=>Fg(t,JSON.parse(o),s,e==="path"),[t,o,s,e])}function aS(t,e){return W2(t,e)}function W2(t,e,n,s,o){_t(Dl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=R.useContext(Kr),{matches:d}=R.useContext(Yr),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",v=p?p.pathnameBase:"/",_=p&&p.route;{let F=_&&_.path||"";Z2(y,!_||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let T=fa(),I;if(e){let F=typeof e=="string"?co(e):e;_t(v==="/"||F.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${F.pathname}" was given in the \`location\` prop.`),I=F}else I=T;let B=I.pathname||"/",U=B;if(v!=="/"){let F=v.replace(/^\//,"").split("/");U="/"+B.replace(/^\//,"").split("/").slice(F.length).join("/")}let j=H2(t,{pathname:U});Ar(_||j!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Ar(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=dS(j&&j.map(F=>Object.assign({},F,{params:Object.assign({},g,F.params),pathname:ri([v,c.encodeLocation?c.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?v:ri([v,c.encodeLocation?c.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),d,n,s,o);return e&&H?R.createElement(vu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},H):H}function oS(){let t=gS(),e=JN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",t),d=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:c},"ErrorBoundary")," or"," ",R.createElement("code",{style:c},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:o},n):null,d)}var lS=R.createElement(oS,null),cS=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?R.createElement(Yr.Provider,{value:this.props.routeContext},R.createElement(qg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uS({routeContext:t,match:e,children:n}){let s=R.useContext(kl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Yr.Provider,{value:t},n)}function dS(t,e=[],n=null,s=null,o=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,d=n?.errors;if(d!=null){let y=c.findIndex(v=>v.route.id&&d?.[v.route.id]!==void 0);_t(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let p=!1,g=-1;if(n)for(let y=0;y<c.length;y++){let v=c[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=y),v.route.id){let{loaderData:_,errors:T}=n,I=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!T||T[v.route.id]===void 0);if(v.route.lazy||I){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((y,v,_)=>{let T,I=!1,B=null,U=null;n&&(T=d&&v.route.id?d[v.route.id]:void 0,B=v.route.errorElement||lS,p&&(g<0&&_===0?(Z2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,U=null):g===_&&(I=!0,U=v.route.hydrateFallbackElement||null)));let j=e.concat(c.slice(0,_+1)),H=()=>{let F;return T?F=B:I?F=U:v.route.Component?F=R.createElement(v.route.Component,null):v.route.element?F=v.route.element:F=y,R.createElement(uS,{match:v,routeContext:{outlet:y,matches:j,isDataRoute:n!=null},children:F})};return n&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?R.createElement(cS,{location:n.location,revalidation:n.revalidation,component:B,error:T,children:H(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:s}):H()},null)}function Hg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hS(t){let e=R.useContext(kl);return _t(e,Hg(t)),e}function fS(t){let e=R.useContext(af);return _t(e,Hg(t)),e}function mS(t){let e=R.useContext(Yr);return _t(e,Hg(t)),e}function $g(t){let e=mS(t),n=e.matches[e.matches.length-1];return _t(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function pS(){return $g("useRouteId")}function gS(){let t=R.useContext(qg),e=fS("useRouteError"),n=$g("useRouteError");return t!==void 0?t:e.errors?.[n]}function yS(){let{router:t}=hS("useNavigate"),e=$g("useNavigate"),n=R.useRef(!1);return X2(()=>{n.current=!0}),R.useCallback(async(o,c={})=>{Ar(n.current,Q2),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...c}))},[t,e])}var Dw={};function Z2(t,e,n){!e&&!Dw[t]&&(Dw[t]=!0,Ar(!1,n))}R.memo(xS);function xS({routes:t,future:e,state:n,unstable_onError:s}){return W2(t,void 0,n,s,e)}function Bp({to:t,replace:e,state:n,relative:s}){_t(Dl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=R.useContext(Kr);Ar(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=R.useContext(Yr),{pathname:d}=fa(),p=Cr(),g=Fg(t,zg(c),d,s==="path"),y=JSON.stringify(g);return R.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:s})},[p,y,s,e,n]),null}function hn(t){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vS({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:c=!1}){_t(!Dl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),p=R.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof n=="string"&&(n=co(n));let{pathname:g="/",search:y="",hash:v="",state:_=null,key:T="default"}=n,I=R.useMemo(()=>{let B=oi(g,d);return B==null?null:{location:{pathname:B,search:y,hash:v,state:_,key:T},navigationType:s}},[d,g,y,v,_,T,s]);return Ar(I!=null,`<Router basename="${d}"> is not able to match the URL "${g}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:R.createElement(Kr.Provider,{value:p},R.createElement(vu.Provider,{children:e,value:I}))}function Ow({children:t,location:e}){return aS(ug(t),e)}function ug(t,e=[]){let n=[];return R.Children.forEach(t,(s,o)=>{if(!R.isValidElement(s))return;let c=[...e,o];if(s.type===R.Fragment){n.push.apply(n,ug(s.props.children,c));return}_t(s.type===hn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=ug(s.props.children,c)),n.push(d)}),n}var dh="get",hh="application/x-www-form-urlencoded";function of(t){return t!=null&&typeof t.tagName=="string"}function wS(t){return of(t)&&t.tagName.toLowerCase()==="button"}function bS(t){return of(t)&&t.tagName.toLowerCase()==="form"}function _S(t){return of(t)&&t.tagName.toLowerCase()==="input"}function ES(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function TS(t,e){return t.button===0&&(!e||e==="_self")&&!ES(t)}var Jd=null;function AS(){if(Jd===null)try{new FormData(document.createElement("form"),0),Jd=!1}catch{Jd=!0}return Jd}var NS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zp(t){return t!=null&&!NS.has(t)?(Ar(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hh}"`),null):t}function SS(t,e){let n,s,o,c,d;if(bS(t)){let p=t.getAttribute("action");s=p?oi(p,e):null,n=t.getAttribute("method")||dh,o=zp(t.getAttribute("enctype"))||hh,c=new FormData(t)}else if(wS(t)||_S(t)&&(t.type==="submit"||t.type==="image")){let p=t.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=t.getAttribute("formaction")||p.getAttribute("action");if(s=g?oi(g,e):null,n=t.getAttribute("formmethod")||p.getAttribute("method")||dh,o=zp(t.getAttribute("formenctype"))||zp(p.getAttribute("enctype"))||hh,c=new FormData(p,t),!AS()){let{name:y,type:v,value:_}=t;if(v==="image"){let T=y?`${y}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else y&&c.append(y,_)}}else{if(of(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=dh,s=null,o=hh,d=t}return c&&o==="text/plain"&&(d=c,c=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Gg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function CS(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&oi(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function RS(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function IS(t,e,n){let s=await Promise.all(t.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await RS(c,n);return d.links?d.links():[]}return[]}));return PS(s.flat(1).filter(jS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Pw(t,e,n,s,o,c){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{let v=s.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let _=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function kS(t,e,{includeHydrateFallback:n}={}){return DS(t.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function DS(t){return[...new Set(t)]}function OS(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function PS(t,e){let n=new Set;return new Set(e),t.reduce((s,o)=>{let c=JSON.stringify(OS(o));return n.has(c)||(n.add(c),s.push({key:c,link:o})),s},[])}function J2(){let t=R.useContext(kl);return Gg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function MS(){let t=R.useContext(af);return Gg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Kg=R.createContext(void 0);Kg.displayName="FrameworkContext";function e1(){let t=R.useContext(Kg);return Gg(t,"You must render this element inside a <HydratedRouter> element"),t}function LS(t,e){let n=R.useContext(Kg),[s,o]=R.useState(!1),[c,d]=R.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:v,onTouchStart:_}=e,T=R.useRef(null);R.useEffect(()=>{if(t==="render"&&d(!0),t==="viewport"){let U=H=>{H.forEach(F=>{d(F.isIntersecting)})},j=new IntersectionObserver(U,{threshold:.5});return T.current&&j.observe(T.current),()=>{j.disconnect()}}},[t]),R.useEffect(()=>{if(s){let U=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(U)}}},[s]);let I=()=>{o(!0)},B=()=>{o(!1),d(!1)};return n?t!=="intent"?[c,T,{}]:[c,T,{onFocus:Yc(p,I),onBlur:Yc(g,B),onMouseEnter:Yc(y,I),onMouseLeave:Yc(v,B),onTouchStart:Yc(_,I)}]:[!1,T,{}]}function Yc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function VS({page:t,...e}){let{router:n}=J2(),s=R.useMemo(()=>H2(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?R.createElement(BS,{page:t,matches:s,...e}):null}function US(t){let{manifest:e,routeModules:n}=e1(),[s,o]=R.useState([]);return R.useEffect(()=>{let c=!1;return IS(t,e,n).then(d=>{c||o(d)}),()=>{c=!0}},[t,e,n]),s}function BS({page:t,matches:e,...n}){let s=fa(),{manifest:o,routeModules:c}=e1(),{basename:d}=J2(),{loaderData:p,matches:g}=MS(),y=R.useMemo(()=>Pw(t,e,g,o,s,"data"),[t,e,g,o,s]),v=R.useMemo(()=>Pw(t,e,g,o,s,"assets"),[t,e,g,o,s]),_=R.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let B=new Set,U=!1;if(e.forEach(H=>{let F=o.routes[H.route.id];!F||!F.hasLoader||(!y.some(q=>q.route.id===H.route.id)&&H.route.id in p&&c[H.route.id]?.shouldRevalidate||F.hasClientLoader?U=!0:B.add(H.route.id))}),B.size===0)return[];let j=CS(t,d,"data");return U&&B.size>0&&j.searchParams.set("_routes",e.filter(H=>B.has(H.route.id)).map(H=>H.route.id).join(",")),[j.pathname+j.search]},[d,p,s,o,y,e,t,c]),T=R.useMemo(()=>kS(v,o),[v,o]),I=US(v);return R.createElement(R.Fragment,null,_.map(B=>R.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),T.map(B=>R.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),I.map(({key:B,link:U})=>R.createElement("link",{key:B,nonce:n.nonce,...U})))}function zS(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var t1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{t1&&(window.__reactRouterVersion="7.9.1")}catch{}function FS({basename:t,children:e,window:n}){let s=R.useRef();s.current==null&&(s.current=jN({window:n,v5Compat:!0}));let o=s.current,[c,d]=R.useState({action:o.action,location:o.location}),p=R.useCallback(g=>{R.startTransition(()=>d(g))},[d]);return R.useLayoutEffect(()=>o.listen(p),[o,p]),R.createElement(vS,{basename:t,children:e,location:c.location,navigationType:c.action,navigator:o})}var n1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,He=R.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:c,replace:d,state:p,target:g,to:y,preventScrollReset:v,viewTransition:_,...T},I){let{basename:B}=R.useContext(Kr),U=typeof y=="string"&&n1.test(y),j,H=!1;if(typeof y=="string"&&U&&(j=y,t1))try{let S=new URL(window.location.href),L=y.startsWith("//")?new URL(S.protocol+y):new URL(y),M=oi(L.pathname,B);L.origin===S.origin&&M!=null?y=M+L.search+L.hash:H=!0}catch{Ar(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=rS(y,{relative:o}),[q,ie,te]=LS(s,T),de=GS(y,{replace:d,state:p,target:g,preventScrollReset:v,relative:o,viewTransition:_});function k(S){e&&e(S),S.defaultPrevented||de(S)}let A=R.createElement("a",{...T,...te,href:j||F,onClick:H||c?e:k,ref:zS(I,ie),target:g,"data-discover":!U&&n==="render"?"true":void 0});return q&&!U?R.createElement(R.Fragment,null,A,R.createElement(VS,{page:F})):A});He.displayName="Link";var qS=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:c,to:d,viewTransition:p,children:g,...y},v){let _=wu(d,{relative:y.relative}),T=fa(),I=R.useContext(af),{navigator:B,basename:U}=R.useContext(Kr),j=I!=null&&WS(_)&&p===!0,H=B.encodeLocation?B.encodeLocation(_).pathname:_.pathname,F=T.pathname,q=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(F=F.toLowerCase(),q=q?q.toLowerCase():null,H=H.toLowerCase()),q&&U&&(q=oi(q,U)||q);const ie=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let te=F===H||!o&&F.startsWith(H)&&F.charAt(ie)==="/",de=q!=null&&(q===H||!o&&q.startsWith(H)&&q.charAt(H.length)==="/"),k={isActive:te,isPending:de,isTransitioning:j},A=te?e:void 0,S;typeof s=="function"?S=s(k):S=[s,te?"active":null,de?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let L=typeof c=="function"?c(k):c;return R.createElement(He,{...y,"aria-current":A,className:S,ref:v,style:L,to:d,viewTransition:p},typeof g=="function"?g(k):g)});qS.displayName="NavLink";var HS=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:c,method:d=dh,action:p,onSubmit:g,relative:y,preventScrollReset:v,viewTransition:_,...T},I)=>{let B=QS(),U=XS(p,{relative:y}),j=d.toLowerCase()==="get"?"get":"post",H=typeof p=="string"&&n1.test(p),F=q=>{if(g&&g(q),q.defaultPrevented)return;q.preventDefault();let ie=q.nativeEvent.submitter,te=ie?.getAttribute("formmethod")||d;B(ie||q.currentTarget,{fetcherKey:e,method:te,navigate:n,replace:o,state:c,relative:y,preventScrollReset:v,viewTransition:_})};return R.createElement("form",{ref:I,method:j,action:U,onSubmit:s?g:F,...T,"data-discover":!H&&t==="render"?"true":void 0})});HS.displayName="Form";function $S(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function r1(t){let e=R.useContext(kl);return _t(e,$S(t)),e}function GS(t,{target:e,replace:n,state:s,preventScrollReset:o,relative:c,viewTransition:d}={}){let p=Cr(),g=fa(),y=wu(t,{relative:c});return R.useCallback(v=>{if(TS(v,e)){v.preventDefault();let _=n!==void 0?n:lu(g)===lu(y);p(t,{replace:_,state:s,preventScrollReset:o,relative:c,viewTransition:d})}},[g,p,y,n,s,e,t,o,c,d])}var KS=0,YS=()=>`__${String(++KS)}__`;function QS(){let{router:t}=r1("useSubmit"),{basename:e}=R.useContext(Kr),n=pS();return R.useCallback(async(s,o={})=>{let{action:c,method:d,encType:p,formData:g,body:y}=SS(s,e);if(o.navigate===!1){let v=o.fetcherKey||YS();await t.fetch(v,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||p,flushSync:o.flushSync})}else await t.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function XS(t,{relative:e}={}){let{basename:n}=R.useContext(Kr),s=R.useContext(Yr);_t(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...wu(t||".",{relative:e})},d=fa();if(t==null){c.search=d.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(v=>v==="")){p.delete("index"),g.filter(_=>_).forEach(_=>p.append("index",_));let v=p.toString();c.search=v?`?${v}`:""}}return(!t||t===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:ri([n,c.pathname])),lu(c)}function WS(t,{relative:e}={}){let n=R.useContext(Y2);_t(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=r1("useViewTransitionState"),o=wu(t,{relative:e});if(!n.isTransitioning)return!1;let c=oi(n.currentLocation.pathname,s)||n.currentLocation.pathname,d=oi(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Eh(o.pathname,d)!=null||Eh(o.pathname,c)!=null}const ZS=()=>{};var Mw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let o=t.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},JS=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const o=t[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=t[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=t[n++],d=t[n++],p=t[n++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=t[n++],d=t[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},i1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<t.length;o+=3){const c=t[o],d=o+1<t.length,p=d?t[o+1]:0,g=o+2<t.length,y=g?t[o+2]:0,v=c>>2,_=(c&3)<<4|p>>4;let T=(p&15)<<2|y>>6,I=y&63;g||(I=64,d||(T=64)),s.push(n[v],n[_],n[T],n[I])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<t.length;){const c=n[t.charAt(o++)],p=o<t.length?n[t.charAt(o)]:0;++o;const y=o<t.length?n[t.charAt(o)]:64;++o;const _=o<t.length?n[t.charAt(o)]:64;if(++o,c==null||p==null||y==null||_==null)throw new eC;const T=c<<2|p>>4;if(s.push(T),y!==64){const I=p<<4&240|y>>2;if(s.push(I),_!==64){const B=y<<6&192|_;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tC=function(t){const e=s1(t);return i1.encodeByteArray(e,!0)},Th=function(t){return tC(t).replace(/\./g,"")},a1=function(t){try{return i1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=()=>nC().__FIREBASE_DEFAULTS__,sC=()=>{if(typeof process>"u"||typeof Mw>"u")return;const t=Mw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&a1(t[1]);return e&&JSON.parse(e)},lf=()=>{try{return ZS()||rC()||sC()||iC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},o1=t=>lf()?.emulatorHosts?.[t],l1=t=>{const e=o1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},c1=()=>lf()?.config,u1=t=>lf()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=t.iat||0,c=t.sub||t.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Th(JSON.stringify(n)),Th(JSON.stringify(d)),""].join(".")}const nu={};function oC(){const t={prod:[],emulator:[]};for(const e of Object.keys(nu))nu[e]?t.emulator.push(e):t.prod.push(e);return t}function lC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Lw=!1;function Qg(t,e){if(typeof window>"u"||typeof document>"u"||!uo(window.location.host)||nu[t]===e||nu[t]||Lw)return;nu[t]=e;function n(T){return`__firebase__banner__${T}`}const s="__firebase__banner",c=oC().prod.length>0;function d(){const T=document.getElementById(s);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Lw=!0,d()},T}function v(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=lC(s),I=n("text"),B=document.getElementById(I)||document.createElement("span"),U=n("learnmore"),j=document.getElementById(U)||document.createElement("a"),H=n("preprendIcon"),F=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const q=T.element;p(q),v(j,U);const ie=y();g(F,H),q.append(F,B,j,ie),document.body.appendChild(q)}c?(B.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function uC(){const t=lf()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mC(){const t=En();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function pC(){return!uC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gC(){try{return typeof indexedDB=="object"}catch{return!1}}function yC(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="FirebaseError";class Ns extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=xC,Object.setPrototypeOf(this,Ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?vC(c,s):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new Ns(o,p,s)}}function vC(t,e){return t.replace(wC,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const wC=/\{\$([^}]+)}/g;function bC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function li(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=t[o],d=e[o];if(Vw(c)&&Vw(d)){if(!li(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Vw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Xc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Wc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function _C(t,e){const n=new EC(t,e);return n.subscribe.bind(n)}class EC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");TC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Fp),o.error===void 0&&(o.error=Fp),o.complete===void 0&&(o.complete=Fp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Fp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){return t&&t._delegate?t._delegate:t}class ia{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new aC;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SC(e))try{this.getOrInitializeService({instanceIdentifier:Wa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=Wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wa){return this.instances.has(e)}getOptions(e=Wa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:NC(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Wa){return this.component?this.component.multipleInstances?e:Wa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NC(t){return t===Wa?void 0:t}function SC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($e||($e={}));const RC={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},jC=$e.INFO,IC={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},kC=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),o=IC[e];if(o)console[o](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xg{constructor(e){this.name=e,this._logLevel=jC,this._logHandler=kC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const DC=(t,e)=>e.some(n=>t instanceof n);let Uw,Bw;function OC(){return Uw||(Uw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PC(){return Bw||(Bw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h1=new WeakMap,dg=new WeakMap,f1=new WeakMap,qp=new WeakMap,Wg=new WeakMap;function MC(t){const e=new Promise((n,s)=>{const o=()=>{t.removeEventListener("success",c),t.removeEventListener("error",d)},c=()=>{n(ea(t.result)),o()},d=()=>{s(t.error),o()};t.addEventListener("success",c),t.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&h1.set(n,t)}).catch(()=>{}),Wg.set(e,t),e}function LC(t){if(dg.has(t))return;const e=new Promise((n,s)=>{const o=()=>{t.removeEventListener("complete",c),t.removeEventListener("error",d),t.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",c),t.addEventListener("error",d),t.addEventListener("abort",d)});dg.set(t,e)}let hg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||f1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ea(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VC(t){hg=t(hg)}function UC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Hp(this),e,...n);return f1.set(s,e.sort?e.sort():[e]),ea(s)}:PC().includes(t)?function(...e){return t.apply(Hp(this),e),ea(h1.get(this))}:function(...e){return ea(t.apply(Hp(this),e))}}function BC(t){return typeof t=="function"?UC(t):(t instanceof IDBTransaction&&LC(t),DC(t,OC())?new Proxy(t,hg):t)}function ea(t){if(t instanceof IDBRequest)return MC(t);if(qp.has(t))return qp.get(t);const e=BC(t);return e!==t&&(qp.set(t,e),Wg.set(e,t)),e}const Hp=t=>Wg.get(t);function zC(t,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(t,e),p=ea(d);return s&&d.addEventListener("upgradeneeded",g=>{s(ea(d.result),g.oldVersion,g.newVersion,ea(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const FC=["get","getKey","getAll","getAllKeys","count"],qC=["put","add","delete","clear"],$p=new Map;function zw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($p.get(e))return $p.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=qC.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||FC.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return $p.set(e,c),c}VC(t=>({...t,get:(e,n,s)=>zw(e,n)||t.get(e,n,s),has:(e,n)=>!!zw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($C(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function $C(t){return t.getComponent()?.type==="VERSION"}const fg="@firebase/app",Fw="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new Xg("@firebase/app"),GC="@firebase/app-compat",KC="@firebase/analytics-compat",YC="@firebase/analytics",QC="@firebase/app-check-compat",XC="@firebase/app-check",WC="@firebase/auth",ZC="@firebase/auth-compat",JC="@firebase/database",e4="@firebase/data-connect",t4="@firebase/database-compat",n4="@firebase/functions",r4="@firebase/functions-compat",s4="@firebase/installations",i4="@firebase/installations-compat",a4="@firebase/messaging",o4="@firebase/messaging-compat",l4="@firebase/performance",c4="@firebase/performance-compat",u4="@firebase/remote-config",d4="@firebase/remote-config-compat",h4="@firebase/storage",f4="@firebase/storage-compat",m4="@firebase/firestore",p4="@firebase/ai",g4="@firebase/firestore-compat",y4="firebase",x4="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="[DEFAULT]",v4={[fg]:"fire-core",[GC]:"fire-core-compat",[YC]:"fire-analytics",[KC]:"fire-analytics-compat",[XC]:"fire-app-check",[QC]:"fire-app-check-compat",[WC]:"fire-auth",[ZC]:"fire-auth-compat",[JC]:"fire-rtdb",[e4]:"fire-data-connect",[t4]:"fire-rtdb-compat",[n4]:"fire-fn",[r4]:"fire-fn-compat",[s4]:"fire-iid",[i4]:"fire-iid-compat",[a4]:"fire-fcm",[o4]:"fire-fcm-compat",[l4]:"fire-perf",[c4]:"fire-perf-compat",[u4]:"fire-rc",[d4]:"fire-rc-compat",[h4]:"fire-gcs",[f4]:"fire-gcs-compat",[m4]:"fire-fst",[g4]:"fire-fst-compat",[p4]:"fire-vertex","fire-js":"fire-js",[y4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new Map,w4=new Map,pg=new Map;function qw(t,e){try{t.container.addComponent(e)}catch(n){ci.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ro(t){const e=t.name;if(pg.has(e))return ci.debug(`There were multiple attempts to register component ${e}.`),!1;pg.set(e,t);for(const n of Ah.values())qw(n,t);for(const n of w4.values())qw(n,t);return!0}function cf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ta=new bu("app","Firebase",b4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ta.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=x4;function m1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:mg,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ta.create("bad-app-name",{appName:String(o)});if(n||(n=c1()),!n)throw ta.create("no-options");const c=Ah.get(o);if(c){if(li(n,c.options)&&li(s,c.config))return c;throw ta.create("duplicate-app",{appName:o})}const d=new CC(o);for(const g of pg.values())d.addComponent(g);const p=new _4(n,s,d);return Ah.set(o,p),p}function Zg(t=mg){const e=Ah.get(t);if(!e&&t===mg&&c1())return m1();if(!e)throw ta.create("no-app",{appName:t});return e}function ys(t,e,n){let s=v4[t]??t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ci.warn(d.join(" "));return}ro(new ia(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4="firebase-heartbeat-database",T4=1,cu="firebase-heartbeat-store";let Gp=null;function p1(){return Gp||(Gp=zC(E4,T4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cu)}catch(n){console.warn(n)}}}}).catch(t=>{throw ta.create("idb-open",{originalErrorMessage:t.message})})),Gp}async function A4(t){try{const n=(await p1()).transaction(cu),s=await n.objectStore(cu).get(g1(t));return await n.done,s}catch(e){if(e instanceof Ns)ci.warn(e.message);else{const n=ta.create("idb-get",{originalErrorMessage:e?.message});ci.warn(n.message)}}}async function Hw(t,e){try{const s=(await p1()).transaction(cu,"readwrite");await s.objectStore(cu).put(e,g1(t)),await s.done}catch(n){if(n instanceof Ns)ci.warn(n.message);else{const s=ta.create("idb-set",{originalErrorMessage:n?.message});ci.warn(s.message)}}}function g1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=1024,S4=30;class C4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new j4(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$w();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>S4){const o=I4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ci.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=$w(),{heartbeatsToSend:n,unsentEntries:s}=R4(this._heartbeatsCache.heartbeats),o=Th(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ci.warn(e),""}}}function $w(){return new Date().toISOString().substring(0,10)}function R4(t,e=N4){const n=[];let s=t.slice();for(const o of t){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),Gw(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Gw(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class j4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gC()?yC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await A4(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Hw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Hw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Gw(t){return Th(JSON.stringify({version:2,heartbeats:t})).length}function I4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){ro(new ia("platform-logger",e=>new HC(e),"PRIVATE")),ro(new ia("heartbeat",e=>new C4(e),"PRIVATE")),ys(fg,Fw,t),ys(fg,Fw,"esm2020"),ys("fire-js","")}k4("");function y1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const D4=y1,x1=new bu("auth","Firebase",y1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Xg("@firebase/auth");function O4(t,...e){Nh.logLevel<=$e.WARN&&Nh.warn(`Auth (${ho}): ${t}`,...e)}function fh(t,...e){Nh.logLevel<=$e.ERROR&&Nh.error(`Auth (${ho}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t,...e){throw e0(t,...e)}function Fr(t,...e){return e0(t,...e)}function Jg(t,e,n){const s={...D4(),[e]:n};return new bu("auth","Firebase",s).create(e,{appName:t.name})}function si(t){return Jg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function P4(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Nr(t,"argument-error"),Jg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function e0(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return x1.create(t,...e)}function Re(t,e,...n){if(!t)throw e0(e,...n)}function ti(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fh(e),new Error(e)}function ui(t,e){t||ti(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(){return typeof self<"u"&&self.location?.href||""}function M4(){return Kw()==="http:"||Kw()==="https:"}function Kw(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(M4()||hC()||"connection"in navigator)?navigator.onLine:!0}function V4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ui(n>e,"Short delay should be less than long delay!"),this.isMobile=cC()||fC()}get(){return L4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t,e){ui(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],z4=new Eu(3e4,6e4);function mi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ss(t,e,n,s,o={}){return w1(t,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const p=_u({key:t.config.apiKey,...d}).slice(1),g=await t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);const y={method:e,headers:g,...c};return dC()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&uo(t.emulatorConfig.host)&&(y.credentials="include"),v1.fetch()(await b1(t,t.config.apiHost,n,p),y)})}async function w1(t,e,n){t._canInitEmulator=!1;const s={...U4,...e};try{const o=new q4(t),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw eh(t,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw eh(t,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw eh(t,"email-already-in-use",d);if(g==="USER_DISABLED")throw eh(t,"user-disabled",d);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Jg(t,v,y);Nr(t,v)}}catch(o){if(o instanceof Ns)throw o;Nr(t,"network-request-failed",{message:String(o)})}}async function Tu(t,e,n,s,o={}){const c=await Ss(t,e,n,s,o);return"mfaPendingCredential"in c&&Nr(t,"multi-factor-auth-required",{_serverResponse:c}),c}async function b1(t,e,n,s){const o=`${e}${n}?${s}`,c=t,d=c.config.emulator?t0(t.config,o):`${t.config.apiScheme}://${o}`;return B4.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function F4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class q4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Fr(this.auth,"network-request-failed")),z4.get())})}}function eh(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Fr(t,e,s);return o.customData._tokenResponse=n,o}function Yw(t){return t!==void 0&&t.enterprise!==void 0}class H4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return F4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $4(t,e){return Ss(t,"GET","/v2/recaptchaConfig",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G4(t,e){return Ss(t,"POST","/v1/accounts:delete",e)}async function Sh(t,e){return Ss(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K4(t,e=!1){const n=It(t),s=await n.getIdToken(e),o=n0(s);Re(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:s,authTime:ru(Kp(o.auth_time)),issuedAtTime:ru(Kp(o.iat)),expirationTime:ru(Kp(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Kp(t){return Number(t)*1e3}function n0(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return fh("JWT malformed, contained fewer than 3 sections"),null;try{const o=a1(n);return o?JSON.parse(o):(fh("Failed to decode base64 JWT payload"),null)}catch(o){return fh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Qw(t){const e=n0(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ns&&Y4(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Y4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ru(this.lastLoginAt),this.creationTime=ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(t){const e=t.auth,n=await t.getIdToken(),s=await bl(t,Sh(e,{idToken:n}));Re(s?.users.length,e,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const c=o.providerUserInfo?.length?_1(o.providerUserInfo):[],d=W4(t.providerData,c),p=t.isAnonymous,g=!(t.email&&o.passwordHash)&&!d?.length,y=p?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new yg(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(t,v)}async function X4(t){const e=It(t);await Ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function W4(t,e){return[...t.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function _1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z4(t,e){const n=await w1(t,{},async()=>{const s=_u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=t.config,d=await b1(t,o,"/v1/token",`key=${c}`),p=await t._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return t.emulatorConfig&&uo(t.emulatorConfig.host)&&(g.credentials="include"),v1.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J4(t,e){return Ss(t,"POST","/v2/accounts:revokeToken",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=Qw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await Z4(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new ml;return s&&(Re(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Re(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Re(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ml,this.toJSON())}_performRefresh(){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Br{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Q4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new yg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await bl(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return K4(this,e)}reload(){return X4(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Br({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ch(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(si(this.auth));const e=await this.getIdToken();return await bl(this,G4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:I,providerData:B,stsTokenManager:U}=n;Re(_&&U,e,"internal-error");const j=ml.fromJSON(this.name,U);Re(typeof _=="string",e,"internal-error"),Ki(s,e.name),Ki(o,e.name),Re(typeof T=="boolean",e,"internal-error"),Re(typeof I=="boolean",e,"internal-error"),Ki(c,e.name),Ki(d,e.name),Ki(p,e.name),Ki(g,e.name),Ki(y,e.name),Ki(v,e.name);const H=new Br({uid:_,auth:e,email:o,emailVerified:T,displayName:s,isAnonymous:I,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:j,createdAt:y,lastLoginAt:v});return B&&Array.isArray(B)&&(H.providerData=B.map(F=>({...F}))),g&&(H._redirectEventId=g),H}static async _fromIdTokenResponse(e,n,s=!1){const o=new ml;o.updateFromServerResponse(n);const c=new Br({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Ch(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Re(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?_1(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,p=new ml;p.updateFromIdToken(s);const g=new Br({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new yg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=new Map;function ni(t){ui(t instanceof Function,"Expected a class definition");let e=Xw.get(t);return e?(ui(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}E1.type="NONE";const Ww=E1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t,e,n){return`firebase:${t}:${e}:${n}`}class pl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=mh(this.userKey,o.apiKey,c),this.fullPersistenceKey=mh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sh(this.auth,{idToken:e}).catch(()=>{});return n?Br._fromGetAccountInfoResponse(this.auth,n,e):null}return Br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new pl(ni(Ww),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||ni(Ww);const d=mh(s,e.config.apiKey,e.name);let p=null;for(const y of n)try{const v=await y._get(d);if(v){let _;if(typeof v=="string"){const T=await Sh(e,{idToken:v}).catch(()=>{});if(!T)break;_=await Br._fromGetAccountInfoResponse(e,T,v)}else _=Br._fromJSON(e,v);y!==c&&(p=_),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new pl(c,e,s):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new pl(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(T1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R1(e))return"Blackberry";if(j1(e))return"Webos";if(A1(e))return"Safari";if((e.includes("chrome/")||N1(e))&&!e.includes("edge/"))return"Chrome";if(C1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function T1(t=En()){return/firefox\//i.test(t)}function A1(t=En()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N1(t=En()){return/crios\//i.test(t)}function S1(t=En()){return/iemobile/i.test(t)}function C1(t=En()){return/android/i.test(t)}function R1(t=En()){return/blackberry/i.test(t)}function j1(t=En()){return/webos/i.test(t)}function r0(t=En()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eR(t=En()){return r0(t)&&!!window.navigator?.standalone}function tR(){return mC()&&document.documentMode===10}function I1(t=En()){return r0(t)||C1(t)||j1(t)||R1(t)||/windows phone/i.test(t)||S1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t,e=[]){let n;switch(t){case"Browser":n=Zw(En());break;case"Worker":n=`${Zw(En())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ho}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,p)=>{try{const g=e(c);d(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(t,e={}){return Ss(t,"GET","/v2/passwordPolicy",mi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=6;class iR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??sR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jw(this),this.idTokenSubscription=new Jw(this),this.beforeStateQueue=new nR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await pl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sh(this,{idToken:e}),s=await Br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(qn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ch(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=V4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qn(this.app))return Promise.reject(si(this));const n=e?It(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qn(this.app)?Promise.reject(si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qn(this.app)?Promise.reject(si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rR(this),n=new iR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await J4(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ni(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await pl.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=k1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&O4(`Error while retrieving App Check token: ${e.error}`),e?.token}}function pi(t){return It(t)}class Jw{constructor(e){this.auth=e,this.observer=null,this.addObserver=_C(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oR(t){uf=t}function D1(t){return uf.loadJS(t)}function lR(){return uf.recaptchaEnterpriseScript}function cR(){return uf.gapiScript}function uR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class dR{constructor(){this.enterprise=new hR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class hR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const fR="recaptcha-enterprise",O1="NO_RECAPTCHA";class mR{constructor(e){this.type=fR,this.auth=pi(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{$4(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new H4(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function o(c,d,p){const g=window.grecaptcha;Yw(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(O1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dR().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(p=>{if(!n&&Yw(window.grecaptcha))o(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=lR();g.length!==0&&(g+=p),D1(g).then(()=>{o(p,c,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function eb(t,e,n,s=!1,o=!1){const c=new mR(t);let d;if(o)d=O1;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Rh(t,e,n,s,o){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await eb(t,e,n,n==="getOobCode");return s(t,c)}else return s(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await eb(t,e,n,n==="getOobCode");return s(t,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t,e){const n=cf(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(li(c,e??{}))return o;Nr(o,"already-initialized")}return n.initialize({options:e})}function gR(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ni);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function yR(t,e,n){const s=pi(t);Re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=P1(e),{host:d,port:p}=xR(e),g=p===null?"":`:${p}`,y={url:`${c}//${d}${g}/`},v=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Re(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Re(li(y,s.config.emulator)&&li(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,uo(d)?(Yg(`${c}//${d}${g}`),Qg("Auth",!0)):vR()}function P1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xR(t){const e=P1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:tb(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:tb(d)}}}function tb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ti("not implemented")}_getIdTokenResponse(e){return ti("not implemented")}_linkToIdToken(e,n){return ti("not implemented")}_getReauthenticationResolver(e){return ti("not implemented")}}async function wR(t,e){return Ss(t,"POST","/v1/accounts:update",e)}async function bR(t,e){return Ss(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(t,e){return Tu(t,"POST","/v1/accounts:signInWithPassword",mi(t,e))}async function ER(t,e){return Ss(t,"POST","/v1/accounts:sendOobCode",mi(t,e))}async function TR(t,e){return ER(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(t,e){return Tu(t,"POST","/v1/accounts:signInWithEmailLink",mi(t,e))}async function NR(t,e){return Tu(t,"POST","/v1/accounts:signInWithEmailLink",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends s0{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new uu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new uu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rh(e,n,"signInWithPassword",_R);case"emailLink":return AR(e,{email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rh(e,s,"signUpPassword",bR);case"emailLink":return NR(e,{idToken:n,email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(t,e){return Tu(t,"POST","/v1/accounts:signInWithIdp",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="http://localhost";class so extends s0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Nr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const d=new so(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return gl(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,gl(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gl(e,n)}buildRequest(){const e={requestUri:SR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_u(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RR(t){const e=Xc(Wc(t)).link,n=e?Xc(Wc(e)).deep_link_id:null,s=Xc(Wc(t)).deep_link_id;return(s?Xc(Wc(s)).link:null)||s||n||e||t}class i0{constructor(e){const n=Xc(Wc(e)),s=n.apiKey??null,o=n.oobCode??null,c=CR(n.mode??null);Re(s&&o&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=RR(e);try{return new i0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.providerId=fo.PROVIDER_ID}static credential(e,n){return uu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=i0.parseLink(n);return Re(s,"argument-error"),uu._fromEmailAndCode(e,s.code,s.tenantId)}}fo.PROVIDER_ID="password";fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends a0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Au{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends Au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return so._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return gs.credential(n,s)}catch{return null}}}gs.GOOGLE_SIGN_IN_METHOD="google.com";gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Au{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.GITHUB_SIGN_IN_METHOD="github.com";Qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Au{constructor(){super("twitter.com")}static credential(e,n){return so._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Xi.credential(n,s)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e){return Tu(t,"POST","/v1/accounts:signUp",mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await Br._fromIdTokenResponse(e,s,o),d=nb(s);return new io({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=nb(s);return new io({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function nb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh extends Ns{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,jh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new jh(e,n,s,o)}}function M1(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?jh._fromErrorAndOperation(t,c,e,s):c})}async function IR(t,e,n=!1){const s=await bl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return io._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(t,e,n=!1){const{auth:s}=t;if(qn(s.app))return Promise.reject(si(s));const o="reauthenticate";try{const c=await bl(t,M1(s,o,e,t),n);Re(c.idToken,s,"internal-error");const d=n0(c.idToken);Re(d,s,"internal-error");const{sub:p}=d;return Re(t.uid===p,s,"user-mismatch"),io._forOperation(t,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Nr(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(t,e,n=!1){if(qn(t.app))return Promise.reject(si(t));const s="signIn",o=await M1(t,s,e),c=await io._fromIdTokenResponse(t,s,o);return n||await t._updateCurrentUser(c.user),c}async function kR(t,e){return V1(pi(t),e)}async function DR(t,e){return L1(It(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U1(t){const e=pi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OR(t,e,n){const s=pi(t);await Rh(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",TR)}async function PR(t,e,n){if(qn(t.app))return Promise.reject(si(t));const s=pi(t),d=await Rh(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&U1(t),g}),p=await io._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(p.user),p}function MR(t,e,n){return qn(t.app)?Promise.reject(si(t)):kR(It(t),fo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&U1(t),s})}function LR(t,e){return VR(It(t),null,e)}async function VR(t,e,n){const{auth:s}=t,c={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(c.password=n);const d=await bl(t,wR(s,c));await t._updateTokensIfNecessary(d,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t,e){return It(t).setPersistence(e)}function BR(t,e,n,s){return It(t).onIdTokenChanged(e,n,s)}function zR(t,e,n){return It(t).beforeAuthStateChanged(e,n)}function FR(t,e,n,s){return It(t).onAuthStateChanged(e,n,s)}function B1(t){return It(t).signOut()}const Ih="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ih,"1"),this.storage.removeItem(Ih),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=1e3,HR=10;class F1 extends z1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);tR()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,HR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},qR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}F1.type="LOCAL";const q1=F1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1 extends z1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}H1.type="SESSION";const $1=H1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new df(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(d).map(async y=>y(n.origin,c)),g=await $R(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const y=o0("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(_){const T=_;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(T.data.response);break;default:clearTimeout(v),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(){return window}function KR(t){xs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(){return typeof xs().WorkerGlobalScope<"u"&&typeof xs().importScripts=="function"}async function YR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QR(){return navigator?.serviceWorker?.controller||null}function XR(){return G1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="firebaseLocalStorageDb",WR=1,kh="firebaseLocalStorage",Y1="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hf(t,e){return t.transaction([kh],e?"readwrite":"readonly").objectStore(kh)}function ZR(){const t=indexedDB.deleteDatabase(K1);return new Nu(t).toPromise()}function xg(){const t=indexedDB.open(K1,WR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(kh,{keyPath:Y1})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(kh)?e(s):(s.close(),await ZR(),e(await xg()))})})}async function rb(t,e,n){const s=hf(t,!0).put({[Y1]:e,value:n});return new Nu(s).toPromise()}async function JR(t,e){const n=hf(t,!1).get(e),s=await new Nu(n).toPromise();return s===void 0?null:s.value}function sb(t,e){const n=hf(t,!0).delete(e);return new Nu(n).toPromise()}const ej=800,tj=3;class Q1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>tj)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=df._getInstance(XR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await YR(),!this.activeServiceWorker)return;this.sender=new GR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xg();return await rb(e,Ih,"1"),await sb(e,Ih),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>rb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>JR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=hf(o,!1).getAll();return new Nu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ej)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Q1.type="LOCAL";const nj=Q1;new Eu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t,e){return e?ni(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0 extends s0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rj(t){return V1(t.auth,new l0(t),t.bypassAuthState)}function sj(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),L1(n,new l0(t),t.bypassAuthState)}async function ij(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),IR(n,new l0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rj;case"linkViaPopup":case"linkViaRedirect":return ij;case"reauthViaPopup":case"reauthViaRedirect":return sj;default:Nr(this.auth,"internal-error")}}resolve(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=new Eu(2e3,1e4);async function Z1(t,e,n){if(qn(t.app))return Promise.reject(Fr(t,"operation-not-supported-in-this-environment"));const s=pi(t);P4(t,e,a0);const o=X1(s,n);return new Za(s,"signInViaPopup",e,o).executeNotNull()}class Za extends W1{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,Za.currentPopupAction&&Za.currentPopupAction.cancel(),Za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){ui(this.filter.length===1,"Popup operations only handle one event");const e=o0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Za.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aj.get())};e()}}Za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj="pendingRedirect",ph=new Map;class lj extends W1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ph.get(this.auth._key());if(!e){try{const s=await cj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ph.set(this.auth._key(),e)}return this.bypassAuthState||ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cj(t,e){const n=hj(e),s=dj(t);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function uj(t,e){ph.set(t._key(),e)}function dj(t){return ni(t._redirectPersistence)}function hj(t){return mh(oj,t.config.apiKey,t.name)}async function fj(t,e,n=!1){if(qn(t.app))return Promise.reject(si(t));const s=pi(t),o=X1(s,e),d=await new lj(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=600*1e3;class pj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!J1(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Fr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mj&&this.cachedEventUids.clear(),this.cachedEventUids.has(ib(e))}saveEventToCache(e){this.cachedEventUids.add(ib(e)),this.lastProcessedEventTime=Date.now()}}function ib(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function J1({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function gj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return J1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(t,e={}){return Ss(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vj=/^https?/;async function wj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yj(t);for(const n of e)try{if(bj(n))return}catch{}Nr(t,"unauthorized-domain")}function bj(t){const e=gg(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const d=new URL(t);return d.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!vj.test(n))return!1;if(xj.test(t))return s===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=new Eu(3e4,6e4);function ab(){const t=xs().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ej(t){return new Promise((e,n)=>{function s(){ab(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ab(),n(Fr(t,"network-request-failed"))},timeout:_j.get()})}if(xs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(xs().gapi?.load)s();else{const o=uR("iframefcb");return xs()[o]=()=>{gapi.load?s():n(Fr(t,"network-request-failed"))},D1(`${cR()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw gh=null,e})}let gh=null;function Tj(t){return gh=gh||Ej(t),gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=new Eu(5e3,15e3),Nj="__/auth/iframe",Sj="emulator/auth/iframe",Cj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jj(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?t0(e,Sj):`https://${t.config.authDomain}/${Nj}`,s={apiKey:e.apiKey,appName:t.name,v:ho},o=Rj.get(t.config.apiHost);o&&(s.eid=o);const c=t._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${_u(s).slice(1)}`}async function Ij(t){const e=await Tj(t),n=xs().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:jj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cj,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=Fr(t,"network-request-failed"),p=xs().setTimeout(()=>{c(d)},Aj.get());function g(){xs().clearTimeout(p),o(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Dj=500,Oj=600,Pj="_blank",Mj="http://localhost";class ob{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lj(t,e,n,s=Dj,o=Oj){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...kj,width:s.toString(),height:o.toString(),top:c,left:d},y=En().toLowerCase();n&&(p=N1(y)?Pj:n),T1(y)&&(e=e||Mj,g.scrollbars="yes");const v=Object.entries(g).reduce((T,[I,B])=>`${T}${I}=${B},`,"");if(eR(y)&&p!=="_self")return Vj(e||"",p),new ob(null);const _=window.open(e||"",p,v);Re(_,t,"popup-blocked");try{_.focus()}catch{}return new ob(_)}function Vj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="__/auth/handler",Bj="emulator/auth/handler",zj=encodeURIComponent("fac");async function lb(t,e,n,s,o,c){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const d={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:ho,eventId:o};if(e instanceof a0){e.setDefaultLanguage(t.languageCode),d.providerId=e.providerId||"",bC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))d[v]=_}if(e instanceof Au){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(d.scopes=v.join(","))}t.tenantId&&(d.tid=t.tenantId);const p=d;for(const v of Object.keys(p))p[v]===void 0&&delete p[v];const g=await t._getAppCheckToken(),y=g?`#${zj}=${encodeURIComponent(g)}`:"";return`${Fj(t)}?${_u(p).slice(1)}${y}`}function Fj({config:t}){return t.emulator?t0(t,Bj):`https://${t.authDomain}/${Uj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="webStorageSupport";class qj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$1,this._completeRedirectFn=fj,this._overrideRedirectResult=uj}async _openPopup(e,n,s,o){ui(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await lb(e,n,s,gg(),o);return Lj(e,c,o0())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await lb(e,n,s,gg(),o);return KR(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(ui(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Ij(e),s=new pj(e);return n.register("authEvent",o=>(Re(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Yp,{type:Yp},o=>{const c=o?.[0]?.[Yp];c!==void 0&&n(!!c),Nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return I1()||A1()||r0()}}const Hj=qj;var cb="@firebase/auth",ub="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kj(t){ro(new ia("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;Re(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:p,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k1(t)},y=new aR(s,o,c,g);return gR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ro(new ia("auth-internal",e=>{const n=pi(e.getProvider("auth").getImmediate());return(s=>new $j(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(cb,ub,Gj(t)),ys(cb,ub,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=300,Qj=u1("authIdTokenMaxAge")||Yj;let db=null;const Xj=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Qj)return;const o=n?.token;db!==o&&(db=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Wj(t=Zg()){const e=cf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pR(t,{popupRedirectResolver:Hj,persistence:[nj,q1,$1]}),s=u1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=Xj(c.toString());zR(n,d,()=>d(n.currentUser)),BR(n,p=>d(p))}}const o=o1("auth");return o&&yR(n,`http://${o}`),n}function Zj(){return document.getElementsByTagName("head")?.[0]??document}oR({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=o=>{const c=Fr("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",Zj().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kj("Browser");var Jj="firebase",e6="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys(Jj,e6,"app");var hb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var na,e_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function S(){}S.prototype=A.prototype,k.F=A.prototype,k.prototype=new S,k.prototype.constructor=k,k.D=function(L,M,O){for(var C=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)C[ke-2]=arguments[ke];return A.prototype[M].apply(L,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,A,S){S||(S=0);const L=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)L[M]=A.charCodeAt(S++)|A.charCodeAt(S++)<<8|A.charCodeAt(S++)<<16|A.charCodeAt(S++)<<24;else for(M=0;M<16;++M)L[M]=A[S++]|A[S++]<<8|A[S++]<<16|A[S++]<<24;A=k.g[0],S=k.g[1],M=k.g[2];let O=k.g[3],C;C=A+(O^S&(M^O))+L[0]+3614090360&4294967295,A=S+(C<<7&4294967295|C>>>25),C=O+(M^A&(S^M))+L[1]+3905402710&4294967295,O=A+(C<<12&4294967295|C>>>20),C=M+(S^O&(A^S))+L[2]+606105819&4294967295,M=O+(C<<17&4294967295|C>>>15),C=S+(A^M&(O^A))+L[3]+3250441966&4294967295,S=M+(C<<22&4294967295|C>>>10),C=A+(O^S&(M^O))+L[4]+4118548399&4294967295,A=S+(C<<7&4294967295|C>>>25),C=O+(M^A&(S^M))+L[5]+1200080426&4294967295,O=A+(C<<12&4294967295|C>>>20),C=M+(S^O&(A^S))+L[6]+2821735955&4294967295,M=O+(C<<17&4294967295|C>>>15),C=S+(A^M&(O^A))+L[7]+4249261313&4294967295,S=M+(C<<22&4294967295|C>>>10),C=A+(O^S&(M^O))+L[8]+1770035416&4294967295,A=S+(C<<7&4294967295|C>>>25),C=O+(M^A&(S^M))+L[9]+2336552879&4294967295,O=A+(C<<12&4294967295|C>>>20),C=M+(S^O&(A^S))+L[10]+4294925233&4294967295,M=O+(C<<17&4294967295|C>>>15),C=S+(A^M&(O^A))+L[11]+2304563134&4294967295,S=M+(C<<22&4294967295|C>>>10),C=A+(O^S&(M^O))+L[12]+1804603682&4294967295,A=S+(C<<7&4294967295|C>>>25),C=O+(M^A&(S^M))+L[13]+4254626195&4294967295,O=A+(C<<12&4294967295|C>>>20),C=M+(S^O&(A^S))+L[14]+2792965006&4294967295,M=O+(C<<17&4294967295|C>>>15),C=S+(A^M&(O^A))+L[15]+1236535329&4294967295,S=M+(C<<22&4294967295|C>>>10),C=A+(M^O&(S^M))+L[1]+4129170786&4294967295,A=S+(C<<5&4294967295|C>>>27),C=O+(S^M&(A^S))+L[6]+3225465664&4294967295,O=A+(C<<9&4294967295|C>>>23),C=M+(A^S&(O^A))+L[11]+643717713&4294967295,M=O+(C<<14&4294967295|C>>>18),C=S+(O^A&(M^O))+L[0]+3921069994&4294967295,S=M+(C<<20&4294967295|C>>>12),C=A+(M^O&(S^M))+L[5]+3593408605&4294967295,A=S+(C<<5&4294967295|C>>>27),C=O+(S^M&(A^S))+L[10]+38016083&4294967295,O=A+(C<<9&4294967295|C>>>23),C=M+(A^S&(O^A))+L[15]+3634488961&4294967295,M=O+(C<<14&4294967295|C>>>18),C=S+(O^A&(M^O))+L[4]+3889429448&4294967295,S=M+(C<<20&4294967295|C>>>12),C=A+(M^O&(S^M))+L[9]+568446438&4294967295,A=S+(C<<5&4294967295|C>>>27),C=O+(S^M&(A^S))+L[14]+3275163606&4294967295,O=A+(C<<9&4294967295|C>>>23),C=M+(A^S&(O^A))+L[3]+4107603335&4294967295,M=O+(C<<14&4294967295|C>>>18),C=S+(O^A&(M^O))+L[8]+1163531501&4294967295,S=M+(C<<20&4294967295|C>>>12),C=A+(M^O&(S^M))+L[13]+2850285829&4294967295,A=S+(C<<5&4294967295|C>>>27),C=O+(S^M&(A^S))+L[2]+4243563512&4294967295,O=A+(C<<9&4294967295|C>>>23),C=M+(A^S&(O^A))+L[7]+1735328473&4294967295,M=O+(C<<14&4294967295|C>>>18),C=S+(O^A&(M^O))+L[12]+2368359562&4294967295,S=M+(C<<20&4294967295|C>>>12),C=A+(S^M^O)+L[5]+4294588738&4294967295,A=S+(C<<4&4294967295|C>>>28),C=O+(A^S^M)+L[8]+2272392833&4294967295,O=A+(C<<11&4294967295|C>>>21),C=M+(O^A^S)+L[11]+1839030562&4294967295,M=O+(C<<16&4294967295|C>>>16),C=S+(M^O^A)+L[14]+4259657740&4294967295,S=M+(C<<23&4294967295|C>>>9),C=A+(S^M^O)+L[1]+2763975236&4294967295,A=S+(C<<4&4294967295|C>>>28),C=O+(A^S^M)+L[4]+1272893353&4294967295,O=A+(C<<11&4294967295|C>>>21),C=M+(O^A^S)+L[7]+4139469664&4294967295,M=O+(C<<16&4294967295|C>>>16),C=S+(M^O^A)+L[10]+3200236656&4294967295,S=M+(C<<23&4294967295|C>>>9),C=A+(S^M^O)+L[13]+681279174&4294967295,A=S+(C<<4&4294967295|C>>>28),C=O+(A^S^M)+L[0]+3936430074&4294967295,O=A+(C<<11&4294967295|C>>>21),C=M+(O^A^S)+L[3]+3572445317&4294967295,M=O+(C<<16&4294967295|C>>>16),C=S+(M^O^A)+L[6]+76029189&4294967295,S=M+(C<<23&4294967295|C>>>9),C=A+(S^M^O)+L[9]+3654602809&4294967295,A=S+(C<<4&4294967295|C>>>28),C=O+(A^S^M)+L[12]+3873151461&4294967295,O=A+(C<<11&4294967295|C>>>21),C=M+(O^A^S)+L[15]+530742520&4294967295,M=O+(C<<16&4294967295|C>>>16),C=S+(M^O^A)+L[2]+3299628645&4294967295,S=M+(C<<23&4294967295|C>>>9),C=A+(M^(S|~O))+L[0]+4096336452&4294967295,A=S+(C<<6&4294967295|C>>>26),C=O+(S^(A|~M))+L[7]+1126891415&4294967295,O=A+(C<<10&4294967295|C>>>22),C=M+(A^(O|~S))+L[14]+2878612391&4294967295,M=O+(C<<15&4294967295|C>>>17),C=S+(O^(M|~A))+L[5]+4237533241&4294967295,S=M+(C<<21&4294967295|C>>>11),C=A+(M^(S|~O))+L[12]+1700485571&4294967295,A=S+(C<<6&4294967295|C>>>26),C=O+(S^(A|~M))+L[3]+2399980690&4294967295,O=A+(C<<10&4294967295|C>>>22),C=M+(A^(O|~S))+L[10]+4293915773&4294967295,M=O+(C<<15&4294967295|C>>>17),C=S+(O^(M|~A))+L[1]+2240044497&4294967295,S=M+(C<<21&4294967295|C>>>11),C=A+(M^(S|~O))+L[8]+1873313359&4294967295,A=S+(C<<6&4294967295|C>>>26),C=O+(S^(A|~M))+L[15]+4264355552&4294967295,O=A+(C<<10&4294967295|C>>>22),C=M+(A^(O|~S))+L[6]+2734768916&4294967295,M=O+(C<<15&4294967295|C>>>17),C=S+(O^(M|~A))+L[13]+1309151649&4294967295,S=M+(C<<21&4294967295|C>>>11),C=A+(M^(S|~O))+L[4]+4149444226&4294967295,A=S+(C<<6&4294967295|C>>>26),C=O+(S^(A|~M))+L[11]+3174756917&4294967295,O=A+(C<<10&4294967295|C>>>22),C=M+(A^(O|~S))+L[2]+718787259&4294967295,M=O+(C<<15&4294967295|C>>>17),C=S+(O^(M|~A))+L[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+M&4294967295,k.g[3]=k.g[3]+O&4294967295}s.prototype.v=function(k,A){A===void 0&&(A=k.length);const S=A-this.blockSize,L=this.C;let M=this.h,O=0;for(;O<A;){if(M==0)for(;O<=S;)o(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<A;)if(L[M++]=k.charCodeAt(O++),M==this.blockSize){o(this,L),M=0;break}}else for(;O<A;)if(L[M++]=k[O++],M==this.blockSize){o(this,L),M=0;break}}this.h=M,this.o+=A},s.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;A=this.o*8;for(var S=k.length-8;S<k.length;++S)k[S]=A&255,A/=256;for(this.v(k),k=Array(16),A=0,S=0;S<4;++S)for(let L=0;L<32;L+=8)k[A++]=this.g[S]>>>L&255;return k};function c(k,A){var S=p;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=A(k)}function d(k,A){this.h=A;const S=[];let L=!0;for(let M=k.length-1;M>=0;M--){const O=k[M]|0;L&&O==A||(S[M]=O,L=!1)}this.g=S}var p={};function g(k){return-128<=k&&k<128?c(k,function(A){return new d([A|0],A<0?-1:0)}):new d([k|0],k<0?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return _;if(k<0)return j(y(-k));const A=[];let S=1;for(let L=0;k>=S;L++)A[L]=k/S|0,S*=4294967296;return new d(A,0)}function v(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return j(v(k.substring(1),A));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=y(Math.pow(A,8));let L=_;for(let O=0;O<k.length;O+=8){var M=Math.min(8,k.length-O);const C=parseInt(k.substring(O,O+M),A);M<8?(M=y(Math.pow(A,M)),L=L.j(M).add(y(C))):(L=L.j(S),L=L.add(y(C)))}return L}var _=g(0),T=g(1),I=g(16777216);t=d.prototype,t.m=function(){if(U(this))return-j(this).m();let k=0,A=1;for(let S=0;S<this.g.length;S++){const L=this.i(S);k+=(L>=0?L:4294967296+L)*A,A*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(B(this))return"0";if(U(this))return"-"+j(this).toString(k);const A=y(Math.pow(k,6));var S=this;let L="";for(;;){const M=ie(S,A).g;S=H(S,M.j(A));let O=((S.g.length>0?S.g[0]:S.h)>>>0).toString(k);if(S=M,B(S))return O+L;for(;O.length<6;)O="0"+O;L=O+L}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function B(k){if(k.h!=0)return!1;for(let A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function U(k){return k.h==-1}t.l=function(k){return k=H(this,k),U(k)?-1:B(k)?0:1};function j(k){const A=k.g.length,S=[];for(let L=0;L<A;L++)S[L]=~k.g[L];return new d(S,~k.h).add(T)}t.abs=function(){return U(this)?j(this):this},t.add=function(k){const A=Math.max(this.g.length,k.g.length),S=[];let L=0;for(let M=0;M<=A;M++){let O=L+(this.i(M)&65535)+(k.i(M)&65535),C=(O>>>16)+(this.i(M)>>>16)+(k.i(M)>>>16);L=C>>>16,O&=65535,C&=65535,S[M]=C<<16|O}return new d(S,S[S.length-1]&-2147483648?-1:0)};function H(k,A){return k.add(j(A))}t.j=function(k){if(B(this)||B(k))return _;if(U(this))return U(k)?j(this).j(j(k)):j(j(this).j(k));if(U(k))return j(this.j(j(k)));if(this.l(I)<0&&k.l(I)<0)return y(this.m()*k.m());const A=this.g.length+k.g.length,S=[];for(var L=0;L<2*A;L++)S[L]=0;for(L=0;L<this.g.length;L++)for(let M=0;M<k.g.length;M++){const O=this.i(L)>>>16,C=this.i(L)&65535,ke=k.i(M)>>>16,Ee=k.i(M)&65535;S[2*L+2*M]+=C*Ee,F(S,2*L+2*M),S[2*L+2*M+1]+=O*Ee,F(S,2*L+2*M+1),S[2*L+2*M+1]+=C*ke,F(S,2*L+2*M+1),S[2*L+2*M+2]+=O*ke,F(S,2*L+2*M+2)}for(k=0;k<A;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=A;k<2*A;k++)S[k]=0;return new d(S,0)};function F(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function q(k,A){this.g=k,this.h=A}function ie(k,A){if(B(A))throw Error("division by zero");if(B(k))return new q(_,_);if(U(k))return A=ie(j(k),A),new q(j(A.g),j(A.h));if(U(A))return A=ie(k,j(A)),new q(j(A.g),A.h);if(k.g.length>30){if(U(k)||U(A))throw Error("slowDivide_ only works with positive integers.");for(var S=T,L=A;L.l(k)<=0;)S=te(S),L=te(L);var M=de(S,1),O=de(L,1);for(L=de(L,2),S=de(S,2);!B(L);){var C=O.add(L);C.l(k)<=0&&(M=M.add(S),O=C),L=de(L,1),S=de(S,1)}return A=H(k,M.j(A)),new q(M,A)}for(M=_;k.l(A)>=0;){for(S=Math.max(1,Math.floor(k.m()/A.m())),L=Math.ceil(Math.log(S)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),O=y(S),C=O.j(A);U(C)||C.l(k)>0;)S-=L,O=y(S),C=O.j(A);B(O)&&(O=T),M=M.add(O),k=H(k,C)}return new q(M,k)}t.B=function(k){return ie(this,k).h},t.and=function(k){const A=Math.max(this.g.length,k.g.length),S=[];for(let L=0;L<A;L++)S[L]=this.i(L)&k.i(L);return new d(S,this.h&k.h)},t.or=function(k){const A=Math.max(this.g.length,k.g.length),S=[];for(let L=0;L<A;L++)S[L]=this.i(L)|k.i(L);return new d(S,this.h|k.h)},t.xor=function(k){const A=Math.max(this.g.length,k.g.length),S=[];for(let L=0;L<A;L++)S[L]=this.i(L)^k.i(L);return new d(S,this.h^k.h)};function te(k){const A=k.g.length+1,S=[];for(let L=0;L<A;L++)S[L]=k.i(L)<<1|k.i(L-1)>>>31;return new d(S,k.h)}function de(k,A){const S=A>>5;A%=32;const L=k.g.length-S,M=[];for(let O=0;O<L;O++)M[O]=A>0?k.i(O+S)>>>A|k.i(O+S+1)<<32-A:k.i(O+S);return new d(M,k.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,e_=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=v,na=d}).apply(typeof hb<"u"?hb:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var t_,Zc,n_,yh,vg,r_,s_,i_;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var x=0;x<h.length;++x){var w=h[x];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=n(this);function o(h,x){if(x)e:{var w=s;h=h.split(".");for(var N=0;N<h.length-1;N++){var Y=h[N];if(!(Y in w))break e;w=w[Y]}h=h[h.length-1],N=w[h],x=x(N),x!=N&&x!=null&&e(w,h,{configurable:!0,writable:!0,value:x})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(x){var w=[],N;for(N in x)Object.prototype.hasOwnProperty.call(x,N)&&w.push([N,x[N]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(h){var x=typeof h;return x=="object"&&h!=null||x=="function"}function g(h,x,w){return h.call.apply(h.bind,arguments)}function y(h,x,w){return y=g,y.apply(null,arguments)}function v(h,x){var w=Array.prototype.slice.call(arguments,1);return function(){var N=w.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function _(h,x){function w(){}w.prototype=x.prototype,h.Z=x.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(N,Y,Z){for(var fe=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)fe[Pe-2]=arguments[Pe];return x.prototype[Y].apply(N,fe)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const x=h.length;if(x>0){const w=Array(x);for(let N=0;N<x;N++)w[N]=h[N];return w}return[]}function B(h,x){for(let N=1;N<arguments.length;N++){const Y=arguments[N];var w=typeof Y;if(w=w!="object"?w:Y?Array.isArray(Y)?"array":w:"null",w=="array"||w=="object"&&typeof Y.length=="number"){w=h.length||0;const Z=Y.length||0;h.length=w+Z;for(let fe=0;fe<Z;fe++)h[w+fe]=Y[fe]}else h.push(Y)}}class U{constructor(x,w){this.i=x,this.j=w,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function j(h){d.setTimeout(()=>{throw h},0)}function H(){var h=k;let x=null;return h.g&&(x=h.g,h.g=h.g.next,h.g||(h.h=null),x.next=null),x}class F{constructor(){this.h=this.g=null}add(x,w){const N=q.get();N.set(x,w),this.h?this.h.next=N:this.g=N,this.h=N}}var q=new U(()=>new ie,h=>h.reset());class ie{constructor(){this.next=this.g=this.h=null}set(x,w){this.h=x,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let te,de=!1,k=new F,A=()=>{const h=Promise.resolve(void 0);te=()=>{h.then(S)}};function S(){for(var h;h=H();){try{h.h.call(h.g)}catch(w){j(w)}var x=q;x.j(h),x.h<100&&(x.h++,h.next=x.g,x.g=h)}de=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,x){this.type=h,this.g=this.target=x,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,x=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};d.addEventListener("test",w,x),d.removeEventListener("test",w,x)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function ke(h,x){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,x)}_(ke,M),ke.prototype.init=function(h,x){const w=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=x,x=h.relatedTarget,x||(w=="mouseover"?x=h.fromElement:w=="mouseout"&&(x=h.toElement)),this.relatedTarget=x,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),G=0;function oe(h,x,w,N,Y){this.listener=h,this.proxy=null,this.src=x,this.type=w,this.capture=!!N,this.ha=Y,this.key=++G,this.da=this.fa=!1}function ge(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ve(h,x,w){for(const N in h)x.call(w,h[N],N,h)}function V(h,x){for(const w in h)x.call(void 0,h[w],w,h)}function ue(h){const x={};for(const w in h)x[w]=h[w];return x}const ye="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(h,x){let w,N;for(let Y=1;Y<arguments.length;Y++){N=arguments[Y];for(w in N)h[w]=N[w];for(let Z=0;Z<ye.length;Z++)w=ye[Z],Object.prototype.hasOwnProperty.call(N,w)&&(h[w]=N[w])}}function le(h){this.src=h,this.g={},this.h=0}le.prototype.add=function(h,x,w,N,Y){const Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);const fe=he(h,x,N,Y);return fe>-1?(x=h[fe],w||(x.fa=!1)):(x=new oe(x,this.src,Z,!!N,Y),x.fa=w,h.push(x)),x};function pe(h,x){const w=x.type;if(w in h.g){var N=h.g[w],Y=Array.prototype.indexOf.call(N,x,void 0),Z;(Z=Y>=0)&&Array.prototype.splice.call(N,Y,1),Z&&(ge(x),h.g[w].length==0&&(delete h.g[w],h.h--))}}function he(h,x,w,N){for(let Y=0;Y<h.length;++Y){const Z=h[Y];if(!Z.da&&Z.listener==x&&Z.capture==!!w&&Z.ha==N)return Y}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),et={};function On(h,x,w,N,Y){if(Array.isArray(x)){for(let Z=0;Z<x.length;Z++)On(h,x[Z],w,N,Y);return null}return w=bo(w),h&&h[Ee]?h.J(x,w,p(N)?!!N.capture:!1,Y):Rs(h,x,w,!1,N,Y)}function Rs(h,x,w,N,Y,Z){if(!x)throw Error("Invalid event type");const fe=p(Y)?!!Y.capture:!!Y;let Pe=ks(h);if(Pe||(h[Ue]=Pe=new le(h)),w=Pe.add(x,w,N,fe,Z),w.proxy)return w;if(N=Xr(),w.proxy=N,N.src=h,N.listener=w,h.addEventListener)O||(Y=fe),Y===void 0&&(Y=!1),h.addEventListener(x.toString(),N,Y);else if(h.attachEvent)h.attachEvent(Is(x.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Xr(){function h(w){return x.call(h.src,h.listener,w)}const x=wo;return h}function js(h,x,w,N,Y){if(Array.isArray(x))for(var Z=0;Z<x.length;Z++)js(h,x[Z],w,N,Y);else N=p(N)?!!N.capture:!!N,w=bo(w),h&&h[Ee]?(h=h.i,Z=String(x).toString(),Z in h.g&&(x=h.g[Z],w=he(x,w,N,Y),w>-1&&(ge(x[w]),Array.prototype.splice.call(x,w,1),x.length==0&&(delete h.g[Z],h.h--)))):h&&(h=ks(h))&&(x=h.g[x.toString()],h=-1,x&&(h=he(x,w,N,Y)),(w=h>-1?x[h]:null)&&Ye(w))}function Ye(h){if(typeof h!="number"&&h&&!h.da){var x=h.src;if(x&&x[Ee])pe(x.i,h);else{var w=h.type,N=h.proxy;x.removeEventListener?x.removeEventListener(w,N,h.capture):x.detachEvent?x.detachEvent(Is(w),N):x.addListener&&x.removeListener&&x.removeListener(N),(w=ks(x))?(pe(w,h),w.h==0&&(w.src=null,x[Ue]=null)):ge(h)}}}function Is(h){return h in et?et[h]:et[h]="on"+h}function wo(h,x){if(h.da)h=!0;else{x=new ke(x,this);const w=h.listener,N=h.ha||h.src;h.fa&&Ye(h),h=w.call(N,x)}return h}function ks(h){return h=h[Ue],h instanceof le?h:null}var on="__closure_events_fn_"+(Math.random()*1e9>>>0);function bo(h){return typeof h=="function"?h:(h[on]||(h[on]=function(x){return h.handleEvent(x)}),h[on])}function Et(){L.call(this),this.i=new le(this),this.M=this,this.G=null}_(Et,L),Et.prototype[Ee]=!0,Et.prototype.removeEventListener=function(h,x,w,N){js(this,h,x,w,N)};function Ut(h,x){var w,N=h.G;if(N)for(w=[];N;N=N.G)w.push(N);if(h=h.M,N=x.type||x,typeof x=="string")x=new M(x,h);else if(x instanceof M)x.target=x.target||h;else{var Y=x;x=new M(N,h),ee(x,Y)}Y=!0;let Z,fe;if(w)for(fe=w.length-1;fe>=0;fe--)Z=x.g=w[fe],Y=Zt(Z,N,!0,x)&&Y;if(Z=x.g=h,Y=Zt(Z,N,!0,x)&&Y,Y=Zt(Z,N,!1,x)&&Y,w)for(fe=0;fe<w.length;fe++)Z=x.g=w[fe],Y=Zt(Z,N,!1,x)&&Y}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var h=this.i;for(const x in h.g){const w=h.g[x];for(let N=0;N<w.length;N++)ge(w[N]);delete h.g[x],h.h--}}this.G=null},Et.prototype.J=function(h,x,w,N){return this.i.add(String(h),x,!1,w,N)},Et.prototype.K=function(h,x,w,N){return this.i.add(String(h),x,!0,w,N)};function Zt(h,x,w,N){if(x=h.i.g[String(x)],!x)return!0;x=x.concat();let Y=!0;for(let Z=0;Z<x.length;++Z){const fe=x[Z];if(fe&&!fe.da&&fe.capture==w){const Pe=fe.listener,xt=fe.ha||fe.src;fe.fa&&pe(h.i,fe),Y=Pe.call(xt,N)!==!1&&Y}}return Y&&!N.defaultPrevented}function Wr(h,x){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:d.setTimeout(h,x||0)}function Kn(h){h.g=Wr(()=>{h.g=null,h.i&&(h.i=!1,Kn(h))},h.l);const x=h.h;h.h=null,h.m.apply(null,x)}class _o extends L{constructor(x,w){super(),this.m=x,this.l=w,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Kn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(h){L.call(this),this.h=h,this.g={}}_(Zr,L);var ar=[];function Jt(h){Ve(h.g,function(x,w){this.g.hasOwnProperty(w)&&Ye(x)},h),h.g={}}Zr.prototype.N=function(){Zr.Z.N.call(this),Jt(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pn=d.JSON.stringify,ln=d.JSON.parse,Mn=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function An(){}function Eo(){}var or={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jr(){M.call(this,"d")}_(Jr,M);function Ln(){M.call(this,"c")}_(Ln,M);var Nn={},Rr=null;function Ds(){return Rr=Rr||new Et}Nn.Ia="serverreachability";function ya(h){M.call(this,Nn.Ia,h)}_(ya,M);function es(h){const x=Ds();Ut(x,new ya(x))}Nn.STAT_EVENT="statevent";function gi(h,x){M.call(this,Nn.STAT_EVENT,h),this.stat=x}_(gi,M);function wt(h){const x=Ds();Ut(x,new gi(x,h))}Nn.Ja="timingevent";function To(h,x){M.call(this,Nn.Ja,h),this.size=x}_(To,M);function ts(h,x){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},x)}function jr(){this.g=!0}jr.prototype.ua=function(){this.g=!1};function yi(h,x,w,N,Y,Z){h.info(function(){if(h.g)if(Z){var fe="",Pe=Z.split("&");for(let st=0;st<Pe.length;st++){var xt=Pe[st].split("=");if(xt.length>1){const kt=xt[0];xt=xt[1];const Yn=kt.split("_");fe=Yn.length>=2&&Yn[1]=="type"?fe+(kt+"="+xt+"&"):fe+(kt+"=redacted&")}}}else fe=null;else fe=Z;return"XMLHTTP REQ ("+N+") [attempt "+Y+"]: "+x+`
`+w+`
`+fe})}function xi(h,x,w,N,Y,Z,fe){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+Y+"]: "+x+`
`+w+`
`+Z+" "+fe})}function lr(h,x,w,N){h.info(function(){return"XMLHTTP TEXT ("+x+"): "+cr(h,w)+(N?" "+N:"")})}function $l(h,x){h.info(function(){return"TIMEOUT: "+x})}jr.prototype.info=function(){};function cr(h,x){if(!h.g)return x;if(!x)return null;try{const Z=JSON.parse(x);if(Z){for(h=0;h<Z.length;h++)if(Array.isArray(Z[h])){var w=Z[h];if(!(w.length<2)){var N=w[1];if(Array.isArray(N)&&!(N.length<1)){var Y=N[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let fe=1;fe<N.length;fe++)N[fe]=""}}}}return Pn(Z)}catch{return x}}var Tt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},P={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},me;function be(){}_(be,An),be.prototype.g=function(){return new XMLHttpRequest},me=new be;function We(h){return encodeURIComponent(String(h))}function Sn(h){var x=1;h=h.split(":");const w=[];for(;x>0&&h.length;)w.push(h.shift()),x--;return h.length&&w.push(h.join(":")),w}function Bt(h,x,w,N){this.j=h,this.i=x,this.l=w,this.S=N||1,this.V=new Zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ur}function ur(){this.i=null,this.g="",this.h=!1}var ns={},dr={};function hr(h,x,w){h.M=1,h.A=Vs(Nt(x)),h.u=w,h.R=!0,Os(h,null)}function Os(h,x){h.F=Date.now(),Ms(h),h.B=Nt(h.A);var w=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),zu(w.i,"t",N),h.C=0,w=h.j.L,h.h=new ur,h.g=Oo(h.j,w?x:null,!h.u),h.P>0&&(h.O=new _o(y(h.Y,h,h.g),h.P)),x=h.V,w=h.g,N=h.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(ar[0]=Y.toString()),Y=ar);for(let Z=0;Z<Y.length;Z++){const fe=On(w,Y[Z],N||x.handleEvent,!1,x.h||x);if(!fe)break;x.g[fe.key]=fe}x=h.J?ue(h.J):{},h.u?(h.v||(h.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,x)):(h.v="GET",h.g.ea(h.B,h.v,null,x)),es(),yi(h.i,h.v,h.B,h.l,h.S,h.u)}Bt.prototype.ba=function(h){h=h.target;const x=this.O;x&&gn(h)==3?x.j():this.Y(h)},Bt.prototype.Y=function(h){try{if(h==this.g)e:{const Pe=gn(this.g),xt=this.g.ya(),st=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Ca(this.g)))){this.K||Pe!=4||xt==7||(xt==8||st<=0?es(3):es(2)),is(this);var x=this.g.ca();this.X=x;var w=rs(this);if(this.o=x==200,xi(this.i,this.v,this.B,this.l,this.S,Pe,x),this.o){if(this.U&&!this.L){t:{if(this.g){var N,Y=this.g;if((N=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(N)){var Z=N;break t}}Z=null}if(h=Z)lr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ao(this,h);else{this.o=!1,this.m=3,wt(12),as(this),xa(this);break e}}if(this.R){h=!0;let kt;for(;!this.K&&this.C<w.length;)if(kt=Ps(this,w),kt==dr){Pe==4&&(this.m=4,wt(14),h=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==ns){this.m=4,wt(15),lr(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else lr(this.i,this.l,kt,null),Ao(this,kt);if(At(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||w.length!=0||this.h.h||(this.m=1,wt(16),h=!1),this.o=this.o&&h,!h)lr(this.i,this.l,w,"[Invalid Chunked Response]"),as(this),xa(this);else if(w.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),tc(fe),fe.P=!0,wt(11))}}else lr(this.i,this.l,w,null),Ao(this,w);Pe==4&&as(this),this.o&&!this.K&&(Pe==4?nc(this.j,this):(this.o=!1,Ms(this)))}else Ra(this.g),x==400&&w.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),as(this),xa(this)}}}catch{}finally{}};function rs(h){if(!At(h))return h.g.la();const x=Ca(h.g);if(x==="")return"";let w="";const N=x.length,Y=gn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return as(h),xa(h),"";h.h.i=new d.TextDecoder}for(let Z=0;Z<N;Z++)h.h.h=!0,w+=h.h.i.decode(x[Z],{stream:!(Y&&Z==N-1)});return x.length=0,h.h.g+=w,h.C=0,h.h.g}function At(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ps(h,x){var w=h.C,N=x.indexOf(`
`,w);return N==-1?dr:(w=Number(x.substring(w,N)),isNaN(w)?ns:(N+=1,N+w>x.length?dr:(x=x.slice(N,N+w),h.C=N+w,x)))}Bt.prototype.cancel=function(){this.K=!0,as(this)};function Ms(h){h.T=Date.now()+h.H,ss(h,h.H)}function ss(h,x){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ts(y(h.aa,h),x)}function is(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Bt.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?($l(this.i,this.B),this.M!=2&&(es(),wt(17)),as(this),this.m=2,xa(this)):ss(this,this.T-h)};function xa(h){h.j.I==0||h.K||nc(h.j,h)}function as(h){is(h);var x=h.O;x&&typeof x.dispose=="function"&&x.dispose(),h.O=null,Jt(h.V),h.g&&(x=h.g,h.g=null,x.abort(),x.dispose())}function Ao(h,x){try{var w=h.j;if(w.I!=0&&(w.g==h||ba(w.h,h))){if(!h.L&&ba(w.h,h)&&w.I==3){try{var N=w.Ba.g.parse(x)}catch{N=null}if(Array.isArray(N)&&N.length==3){var Y=N;if(Y[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Do(w),os(w);else break e;ec(w),wt(18)}}else w.xa=Y[1],0<w.xa-w.K&&Y[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=ts(y(w.Va,w),6e3));fr(w.h)<=1&&w.ta&&(w.ta=void 0)}else zs(w,11)}else if((h.L||w.g==h)&&Do(w),!C(x))for(Y=w.Ba.g.parse(x),x=0;x<Y.length;x++){let st=Y[x];const kt=st[0];if(!(kt<=w.K))if(w.K=kt,st=st[1],w.I==2)if(st[0]=="c"){w.M=st[1],w.ba=st[2];const Yn=st[3];Yn!=null&&(w.ka=Yn,w.j.info("VER="+w.ka));const ls=st[4];ls!=null&&(w.za=ls,w.j.info("SVER="+w.za));const Dr=st[5];Dr!=null&&typeof Dr=="number"&&Dr>0&&(N=1.5*Dr,w.O=N,w.j.info("backChannelRequestTimeoutMs_="+N)),N=w;const Or=h.g;if(Or){const Pr=Or.g?Or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pr){var Z=N.h;Z.g||Pr.indexOf("spdy")==-1&&Pr.indexOf("quic")==-1&&Pr.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(No(Z,Z.h),Z.h=null))}if(N.G){const sc=Or.g?Or.g.getResponseHeader("X-HTTP-Session-Id"):null;sc&&(N.wa=sc,lt(N.J,N.G,sc))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),N=w;var fe=h;if(N.na=Xu(N,N.L?N.ba:null,N.W),fe.L){Ls(N.h,fe);var Pe=fe,xt=N.O;xt&&(Pe.H=xt),Pe.D&&(is(Pe),Ms(Pe)),N.g=fe}else Gu(N);w.i.length>0&&Da(w)}else st[0]!="stop"&&st[0]!="close"||zs(w,7);else w.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?zs(w,7):Ia(w):st[0]!="noop"&&w.l&&w.l.qa(st),w.A=0)}}es(4)}catch{}}var Bf=class{constructor(h,x){this.g=h,this.map=x}};function va(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function fr(h){return h.h?1:h.g?h.g.size:0}function ba(h,x){return h.h?h.h==x:h.g?h.g.has(x):!1}function No(h,x){h.g?h.g.add(x):h.h=x}function Ls(h,x){h.h&&h.h==x?h.h=null:h.g&&h.g.has(x)&&h.g.delete(x)}va.prototype.cancel=function(){if(this.i=So(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function So(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let x=h.i;for(const w of h.g.values())x=x.concat(w.G);return x}return I(h.i)}var Co=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zf(h,x){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const N=h[w].indexOf("=");let Y,Z=null;N>=0?(Y=h[w].substring(0,N),Z=h[w].substring(N+1)):Y=h[w],x(Y,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Ir(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;h instanceof Ir?(this.l=h.l,vi(this,h.j),this.o=h.o,this.g=h.g,_a(this,h.u),this.h=h.h,wi(this,Fu(h.i)),this.m=h.m):h&&(x=String(h).match(Co))?(this.l=!1,vi(this,x[1]||"",!0),this.o=Ea(x[2]||""),this.g=Ea(x[3]||"",!0),_a(this,x[4]),this.h=Ea(x[5]||"",!0),wi(this,x[6]||"",!0),this.m=Ea(x[7]||"")):(this.l=!1,this.i=new mr(null,this.l))}Ir.prototype.toString=function(){const h=[];var x=this.j;x&&h.push(en(x,Kl,!0),":");var w=this.g;return(w||x=="file")&&(h.push("//"),(x=this.o)&&h.push(en(x,Kl,!0),"@"),h.push(We(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(en(w,w.charAt(0)=="/"?bi:Yl,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",en(w,Bu)),h.join("")},Ir.prototype.resolve=function(h){const x=Nt(this);let w=!!h.j;w?vi(x,h.j):w=!!h.o,w?x.o=h.o:w=!!h.g,w?x.g=h.g:w=h.u!=null;var N=h.h;if(w)_a(x,h.u);else if(w=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var Y=x.h.lastIndexOf("/");Y!=-1&&(N=x.h.slice(0,Y+1)+N)}if(Y=N,Y==".."||Y==".")N="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){N=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const Z=[];for(let fe=0;fe<Y.length;){const Pe=Y[fe++];Pe=="."?N&&fe==Y.length&&Z.push(""):Pe==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),N&&fe==Y.length&&Z.push("")):(Z.push(Pe),N=!0)}N=Z.join("/")}else N=Y}return w?x.h=N:w=h.i.toString()!=="",w?wi(x,Fu(h.i)):w=!!h.m,w&&(x.m=h.m),x};function Nt(h){return new Ir(h)}function vi(h,x,w){h.j=w?Ea(x,!0):x,h.j&&(h.j=h.j.replace(/:$/,""))}function _a(h,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);h.u=x}else h.u=null}function wi(h,x,w){x instanceof mr?(h.i=x,Wl(h.i,h.l)):(w||(x=en(x,Uu)),h.i=new mr(x,h.l))}function lt(h,x,w){h.i.set(x,w)}function Vs(h){return lt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ea(h,x){return h?x?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function en(h,x,w){return typeof h=="string"?(h=encodeURI(h).replace(x,Gl),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Gl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Kl=/[#\/\?@]/g,Yl=/[#\?:]/g,bi=/[#\?]/g,Uu=/[#\?@]/g,Bu=/#/g;function mr(h,x){this.h=this.g=null,this.i=h||null,this.j=!!x}function Us(h){h.g||(h.g=new Map,h.h=0,h.i&&zf(h.i,function(x,w){h.add(decodeURIComponent(x.replace(/\+/g," ")),w)}))}t=mr.prototype,t.add=function(h,x){Us(this),this.i=null,h=kr(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(x),this.h+=1,this};function Ql(h,x){Us(h),x=kr(h,x),h.g.has(x)&&(h.i=null,h.h-=h.g.get(x).length,h.g.delete(x))}function Xl(h,x){return Us(h),x=kr(h,x),h.g.has(x)}t.forEach=function(h,x){Us(this),this.g.forEach(function(w,N){w.forEach(function(Y){h.call(x,Y,N,this)},this)},this)};function Ro(h,x){Us(h);let w=[];if(typeof x=="string")Xl(h,x)&&(w=w.concat(h.g.get(kr(h,x))));else for(h=Array.from(h.g.values()),x=0;x<h.length;x++)w=w.concat(h[x]);return w}t.set=function(h,x){return Us(this),this.i=null,h=kr(this,h),Xl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[x]),this.h+=1,this},t.get=function(h,x){return h?(h=Ro(this,h),h.length>0?String(h[0]):x):x};function zu(h,x,w){Ql(h,x),w.length>0&&(h.i=null,h.g.set(kr(h,x),I(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],x=Array.from(this.g.keys());for(let N=0;N<x.length;N++){var w=x[N];const Y=We(w);w=Ro(this,w);for(let Z=0;Z<w.length;Z++){let fe=Y;w[Z]!==""&&(fe+="="+We(w[Z])),h.push(fe)}}return this.i=h.join("&")};function Fu(h){const x=new mr;return x.i=h.i,h.g&&(x.g=new Map(h.g),x.h=h.h),x}function kr(h,x){return x=String(x),h.j&&(x=x.toLowerCase()),x}function Wl(h,x){x&&!h.j&&(Us(h),h.i=null,h.g.forEach(function(w,N){const Y=N.toLowerCase();N!=Y&&(Ql(this,N),zu(this,Y,w))},h)),h.j=x}function Zl(h,x){const w=new jr;if(d.Image){const N=new Image;N.onload=v(Cn,w,"TestLoadImage: loaded",!0,x,N),N.onerror=v(Cn,w,"TestLoadImage: error",!1,x,N),N.onabort=v(Cn,w,"TestLoadImage: abort",!1,x,N),N.ontimeout=v(Cn,w,"TestLoadImage: timeout",!1,x,N),d.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else x(!1)}function _i(h,x){const w=new jr,N=new AbortController,Y=setTimeout(()=>{N.abort(),Cn(w,"TestPingServer: timeout",!1,x)},1e4);fetch(h,{signal:N.signal}).then(Z=>{clearTimeout(Y),Z.ok?Cn(w,"TestPingServer: ok",!0,x):Cn(w,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(Y),Cn(w,"TestPingServer: error",!1,x)})}function Cn(h,x,w,N,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),N(w)}catch{}}function qu(){this.g=new Mn}function Ta(h){this.i=h.Sb||null,this.h=h.ab||!1}_(Ta,An),Ta.prototype.g=function(){return new Aa(this.i,this.h)};function Aa(h,x){Et.call(this),this.H=h,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Aa,Et),t=Aa.prototype,t.open=function(h,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=x,this.readyState=1,Bs(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(x.body=h),(this.H||d).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rn(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Bs(this)),this.g&&(this.readyState=3,Bs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ei(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ei(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var x=h.value?h.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!h.done}))&&(this.response=this.responseText+=x)}h.done?Rn(this):Bs(this),this.readyState==3&&Ei(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,Rn(this))},t.Na=function(h){this.g&&(this.response=h,Rn(this))},t.ga=function(){this.g&&Rn(this)};function Rn(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Bs(h)}t.setRequestHeader=function(h,x){this.A.append(h,x)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],x=this.h.entries();for(var w=x.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=x.next();return h.join(`\r
`)};function Bs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ti(h){let x="";return Ve(h,function(w,N){x+=N,x+=":",x+=w,x+=`\r
`}),x}function pr(h,x,w){e:{for(N in w){var N=!1;break e}N=!0}N||(w=Ti(w),typeof h=="string"?w!=null&&We(w):lt(h,x,w))}function ft(h){Et.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(ft,Et);var jo=/^https?$/i,Hu=["POST","PUT"];t=ft.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,x,w,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);x=x?x.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():me.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(x,String(h),!0),this.B=!1}catch(Z){Na(this,Z);return}if(h=w||"",w=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var Y in N)w.set(Y,N[Y]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Z of N.keys())w.set(Z,N.get(Z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(w.keys()).find(Z=>Z.toLowerCase()=="content-type"),Y=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Hu,x,void 0)>=0)||N||Y||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,fe]of w)this.g.setRequestHeader(Z,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Z){Na(this,Z)}};function Na(h,x){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=x,h.o=5,Sa(h),Kt(h)}function Sa(h){h.A||(h.A=!0,Ut(h,"complete"),Ut(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ut(this,"complete"),Ut(this,"abort"),Kt(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kt(this,!0)),ft.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Jl(this):this.Xa())},t.Xa=function(){Jl(this)};function Jl(h){if(h.h&&typeof c<"u"){if(h.v&&gn(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ut(h,"readystatechange"),gn(h)==4){h.h=!1;try{const Z=h.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var w;if(!(w=x)){var N;if(N=Z===0){let fe=String(h.D).match(Co)[1]||null;!fe&&d.self&&d.self.location&&(fe=d.self.location.protocol.slice(0,-1)),N=!jo.test(fe?fe.toLowerCase():"")}w=N}if(w)Ut(h,"complete"),Ut(h,"success");else{h.o=6;try{var Y=gn(h)>2?h.g.statusText:""}catch{Y=""}h.l=Y+" ["+h.ca()+"]",Sa(h)}}finally{Kt(h)}}}}function Kt(h,x){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,x||Ut(h,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function gn(h){return h.g?h.g.readyState:0}t.ca=function(){try{return gn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var x=this.g.responseText;return h&&x.indexOf(h)==0&&(x=x.substring(h.length)),ln(x)}};function Ca(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ra(h){const x={};h=(h.g&&gn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(C(h[N]))continue;var w=Sn(h[N]);const Y=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Z=x[Y]||[];x[Y]=Z,Z.push(w)}V(x,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ja(h,x,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||x}function Io(h){this.za=0,this.i=[],this.j=new jr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ja("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ja("baseRetryDelayMs",5e3,h),this.Za=ja("retryDelaySeedMs",1e4,h),this.Ta=ja("forwardChannelMaxRetries",2,h),this.va=ja("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new va(h&&h.concurrentRequestLimit),this.Ba=new qu,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Io.prototype,t.ka=8,t.I=1,t.connect=function(h,x,w,N){wt(0),this.W=h,this.H=x||{},w&&N!==void 0&&(this.H.OSID=w,this.H.OAID=N),this.F=this.X,this.J=Xu(this,null,this.W),Da(this)};function Ia(h){if(ka(h),h.I==3){var x=h.V++,w=Nt(h.J);if(lt(w,"SID",h.M),lt(w,"RID",x),lt(w,"TYPE","terminate"),Oa(h,w),x=new Bt(h,h.j,x),x.M=2,x.A=Vs(Nt(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(x.A.toString(),"")}catch{}!w&&d.Image&&(new Image().src=x.A,w=!0),w||(x.g=Oo(x.j,null),x.g.ea(x.A)),x.F=Date.now(),Ms(x)}Qu(h)}function os(h){h.g&&(tc(h),h.g.cancel(),h.g=null)}function ka(h){os(h),h.v&&(d.clearTimeout(h.v),h.v=null),Do(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Da(h){if(!wa(h.h)&&!h.m){h.m=!0;var x=h.Ea;te||A(),de||(te(),de=!0),k.add(x,h),h.D=0}}function Ff(h,x){return fr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=x.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ts(y(h.Ea,h,x),Yu(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Y=new Bt(this,this.j,h);let Z=this.o;if(this.U&&(Z?(Z=ue(Z),ee(Z,this.U)):Z=this.U),this.u!==null||this.R||(Y.J=Z,Z=null),this.S)e:{for(var x=0,w=0;w<this.i.length;w++){t:{var N=this.i[w];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(x+=N,x>4096){x=w;break e}if(x===4096||w===this.i.length-1){x=w+1;break e}}x=1e3}else x=1e3;x=ko(this,Y,x),w=Nt(this.J),lt(w,"RID",h),lt(w,"CVER",22),this.G&&lt(w,"X-HTTP-Session-Id",this.G),Oa(this,w),Z&&(this.R?x="headers="+We(Ti(Z))+"&"+x:this.u&&pr(w,this.u,Z)),No(this.h,Y),this.Ra&&lt(w,"TYPE","init"),this.S?(lt(w,"$req",x),lt(w,"SID","null"),Y.U=!0,hr(Y,w,null)):hr(Y,w,x),this.I=2}}else this.I==3&&(h?$u(this,h):this.i.length==0||wa(this.h)||$u(this))};function $u(h,x){var w;x?w=x.l:w=h.V++;const N=Nt(h.J);lt(N,"SID",h.M),lt(N,"RID",w),lt(N,"AID",h.K),Oa(h,N),h.u&&h.o&&pr(N,h.u,h.o),w=new Bt(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),x&&(h.i=x.G.concat(h.i)),x=ko(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),No(h.h,w),hr(w,N,x)}function Oa(h,x){h.H&&Ve(h.H,function(w,N){lt(x,N,w)}),h.l&&Ve({},function(w,N){lt(x,N,w)})}function ko(h,x,w){w=Math.min(h.i.length,w);const N=h.l?y(h.l.Ka,h.l,h):null;e:{var Y=h.i;let Pe=-1;for(;;){const xt=["count="+w];Pe==-1?w>0?(Pe=Y[0].g,xt.push("ofs="+Pe)):Pe=0:xt.push("ofs="+Pe);let st=!0;for(let kt=0;kt<w;kt++){var Z=Y[kt].g;const Yn=Y[kt].map;if(Z-=Pe,Z<0)Pe=Math.max(0,Y[kt].g-100),st=!1;else try{Z="req"+Z+"_"||"";try{var fe=Yn instanceof Map?Yn:Object.entries(Yn);for(const[ls,Dr]of fe){let Or=Dr;p(Dr)&&(Or=Pn(Dr)),xt.push(Z+ls+"="+encodeURIComponent(Or))}}catch(ls){throw xt.push(Z+"type="+encodeURIComponent("_badmap")),ls}}catch{N&&N(Yn)}}if(st){fe=xt.join("&");break e}}fe=void 0}return h=h.i.splice(0,w),x.G=h,fe}function Gu(h){if(!h.g&&!h.v){h.Y=1;var x=h.Da;te||A(),de||(te(),de=!0),k.add(x,h),h.A=0}}function ec(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ts(y(h.Da,h),Yu(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,Ku(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ts(y(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),os(this),Ku(this))};function tc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Ku(h){h.g=new Bt(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var x=Nt(h.na);lt(x,"RID","rpc"),lt(x,"SID",h.M),lt(x,"AID",h.K),lt(x,"CI",h.F?"0":"1"),!h.F&&h.ia&&lt(x,"TO",h.ia),lt(x,"TYPE","xmlhttp"),Oa(h,x),h.u&&h.o&&pr(x,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Vs(Nt(x)),w.u=null,w.R=!0,Os(w,h)}t.Va=function(){this.C!=null&&(this.C=null,os(this),ec(this),wt(19))};function Do(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function nc(h,x){var w=null;if(h.g==x){Do(h),tc(h),h.g=null;var N=2}else if(ba(h.h,x))w=x.G,Ls(h.h,x),N=1;else return;if(h.I!=0){if(x.o)if(N==1){w=x.u?x.u.length:0,x=Date.now()-x.F;var Y=h.D;N=Ds(),Ut(N,new To(N,w)),Da(h)}else Gu(h);else if(Y=x.m,Y==3||Y==0&&x.X>0||!(N==1&&Ff(h,x)||N==2&&ec(h)))switch(w&&w.length>0&&(x=h.h,x.i=x.i.concat(w)),Y){case 1:zs(h,5);break;case 4:zs(h,10);break;case 3:zs(h,6);break;default:zs(h,2)}}}function Yu(h,x){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*x}function zs(h,x){if(h.j.info("Error code "+x),x==2){var w=y(h.bb,h),N=h.Ua;const Y=!N;N=new Ir(N||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||vi(N,"https"),Vs(N),Y?Zl(N.toString(),w):_i(N.toString(),w)}else wt(2);h.I=0,h.l&&h.l.pa(x),Qu(h),ka(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Qu(h){if(h.I=0,h.ja=[],h.l){const x=So(h.h);(x.length!=0||h.i.length!=0)&&(B(h.ja,x),B(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Xu(h,x,w){var N=w instanceof Ir?Nt(w):new Ir(w);if(N.g!="")x&&(N.g=x+"."+N.g),_a(N,N.u);else{var Y=d.location;N=Y.protocol,x=x?x+"."+Y.hostname:Y.hostname,Y=+Y.port;const Z=new Ir(null);N&&vi(Z,N),x&&(Z.g=x),Y&&_a(Z,Y),w&&(Z.h=w),N=Z}return w=h.G,x=h.wa,w&&x&&lt(N,w,x),lt(N,"VER",h.ka),Oa(h,N),N}function Oo(h,x,w){if(x&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=h.Aa&&!h.ma?new ft(new Ta({ab:w})):new ft(h.ma),x.Fa(h.L),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wu(){}t=Wu.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Po(){}Po.prototype.g=function(h,x){return new jn(h,x)};function jn(h,x){Et.call(this),this.g=new Io(x),this.l=h,this.h=x&&x.messageUrlParams||null,h=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(h?h["X-WebChannel-Content-Type"]=x.messageContentType:h={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(h?h["X-WebChannel-Client-Profile"]=x.sa:h={"X-WebChannel-Client-Profile":x.sa}),this.g.U=h,(h=x&&x.Qb)&&!C(h)&&(this.g.u=h),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!C(x)&&(this.g.G=x,h=this.h,h!==null&&x in h&&(h=this.h,x in h&&delete h[x])),this.j=new Ai(this)}_(jn,Et),jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){Ia(this.g)},jn.prototype.o=function(h){var x=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=Pn(h),h=w);x.i.push(new Bf(x.Ya++,h)),x.I==3&&Da(x)},jn.prototype.N=function(){this.g.l=null,delete this.j,Ia(this.g),delete this.g,jn.Z.N.call(this)};function rc(h){Jr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var x=h.__sm__;if(x){e:{for(const w in x){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,x=x!==null&&h in x?x[h]:void 0),this.data=x}else this.data=h}_(rc,Jr);function Zu(){Ln.call(this),this.status=1}_(Zu,Ln);function Ai(h){this.g=h}_(Ai,Wu),Ai.prototype.ra=function(){Ut(this.g,"a")},Ai.prototype.qa=function(h){Ut(this.g,new rc(h))},Ai.prototype.pa=function(h){Ut(this.g,new Zu)},Ai.prototype.oa=function(){Ut(this.g,"b")},Po.prototype.createWebChannel=Po.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,i_=function(){return new Po},s_=function(){return Ds()},r_=Nn,vg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tt.NO_ERROR=0,Tt.TIMEOUT=8,Tt.HTTP_ERROR=6,yh=Tt,P.COMPLETE="complete",n_=P,Eo.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",Et.prototype.listen=Et.prototype.J,Zc=Eo,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,t_=ft}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});const fb="@firebase/firestore",mb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new Xg("@firebase/firestore");function ul(){return ao.logLevel}function ve(t,...e){if(ao.logLevel<=$e.DEBUG){const n=e.map(c0);ao.debug(`Firestore (${Ol}): ${t}`,...n)}}function di(t,...e){if(ao.logLevel<=$e.ERROR){const n=e.map(c0);ao.error(`Firestore (${Ol}): ${t}`,...n)}}function _l(t,...e){if(ao.logLevel<=$e.WARN){const n=e.map(c0);ao.warn(`Firestore (${Ol}): ${t}`,...n)}}function c0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,a_(t,s,n)}function a_(t,e,n){let s=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw di(s),new Error(s)}function rt(t,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,t||a_(e,o,s)}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Ns{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(wn.UNAUTHENTICATED)))}shutdown(){}}class n6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class r6{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rt(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ii,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ii)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(rt(typeof s.accessToken=="string",31837,{l:s}),new o_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new wn(e)}}class s6{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class i6{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new s6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rt(this.o===void 0,3512);const s=c=>{c.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new pb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=o6(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function Ge(t,e){return t<e?-1:t>e?1:0}function wg(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const o=t.charAt(s),c=e.charAt(s);if(o!==c)return Qp(o)===Qp(c)?Ge(o,c):Qp(o)?1:-1}return Ge(t.length,e.length)}const l6=55296,c6=57343;function Qp(t){const e=t.charCodeAt(0);return e>=l6&&e<=c6}function El(t,e,n){return t.length===e.length&&t.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="__name__";class ms{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ie(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ie(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ms.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ms?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=ms.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ge(e.length,n.length)}static compareSegments(e,n){const s=ms.isNumericId(e),o=ms.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?ms.extractNumericId(e).compare(ms.extractNumericId(n)):wg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return na.fromString(e.substring(4,e.length-2))}}class pt extends ms{construct(e,n,s){return new pt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new xe(se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new pt(n)}static emptyPath(){return new pt([])}}const u6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends ms{construct(e,n,s){return new mn(e,n,s)}static isValidIdentifier(e){return u6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gb}static keyField(){return new mn([gb])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new xe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new xe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new xe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(s+=p,o++):(c(),o++)}if(c(),d)throw new xe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(pt.fromString(e))}static fromName(e){return new Te(pt.fromString(e).popFirst(5))}static empty(){return new Te(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t,e,n){if(!n)throw new xe(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function d6(t,e,n,s){if(e===!0&&s===!0)throw new xe(se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yb(t){if(!Te.isDocumentKey(t))throw new xe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xb(t){if(Te.isDocumentKey(t))throw new xe(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function c_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ff(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie(12329,{type:typeof t})}function Hr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ff(t);throw new xe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Su(t,e){if(!c_(t))throw new xe(se.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const d=t[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new xe(se.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=-62135596800,wb=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*wb);return new vt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<vb)throw new xe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wb}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Su(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:Gt("string",vt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new vt(0,0))}static max(){return new Oe(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;function h6(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(s===1e9?new vt(n+1,0):new vt(n,s));return new aa(o,Te.empty(),e)}function f6(t){return new aa(t.readTime,t.key,du)}class aa{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new aa(Oe.min(),Te.empty(),du)}static max(){return new aa(Oe.max(),Te.empty(),du)}}function m6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(t.documentKey,e.documentKey),n!==0?n:Ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==p6)throw t;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ce(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ce?n:ce.resolve(n)}catch(n){return ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.reject(n)}static resolve(e){return new ce(((n,s)=>{n(e)}))}static reject(e){return new ce(((n,s)=>{s(e)}))}static waitFor(e){return new ce(((n,s)=>{let o=0,c=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++c,d&&c===o&&n()}),(g=>s(g)))})),d=!0,c===o&&n()}))}static or(e){let n=ce.resolve(!1);for(const s of e)n=n.next((o=>o?ce.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new ce(((s,o)=>{const c=e.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((v=>{d[y]=v,++p,p===c&&s(d)}),(v=>o(v)))}}))}static doWhile(e,n){return new ce(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function y6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ml(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=-1;function pf(t){return t==null}function Dh(t){return t===0&&1/t==-1/0}function x6(t){return typeof t=="number"&&Number.isInteger(t)&&!Dh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="";function v6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=bb(e)),e=w6(t.get(n),e);return bb(e)}function w6(t,e){let n=e;const s=t.length;for(let o=0;o<s;o++){const c=t.charAt(o);switch(c){case"\0":n+="";break;case u_:n+="";break;default:n+=c}}return n}function bb(t){return t+u_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ma(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function d_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.comparator=e,this.root=n||fn.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nh(this.root,e,this.comparator,!0)}}class nh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fn{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??fn.RED,this.left=o??fn.EMPTY,this.right=c??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new fn(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return fn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Eb(this.data.getIterator())}getIteratorFrom(e){return new Eb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Wt(this.comparator);return n.data=e,n}}class Eb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new nr([])}unionWith(e){let n=new Wt(mn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new nr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new h_("Invalid base64 string: "+c):c}})(e);return new pn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const b6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oa(t){if(rt(!!t,39018),typeof t=="string"){let e=0;const n=b6.exec(t);if(rt(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Mt(t.seconds),nanos:Mt(t.nanos)}}function Mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function la(t){return typeof t=="string"?pn.fromBase64String(t):pn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="server_timestamp",m_="__type__",p_="__previous_value__",g_="__local_write_time__";function h0(t){return(t?.mapValue?.fields||{})[m_]?.stringValue===f_}function gf(t){const e=t.mapValue.fields[p_];return h0(e)?gf(e):e}function hu(t){const e=oa(t.mapValue.fields[g_].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,n,s,o,c,d,p,g,y,v){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const Oh="(default)";class fu{constructor(e,n){this.projectId=e,this.database=n||Oh}static empty(){return new fu("","")}get isDefaultDatabase(){return this.database===Oh}isEqual(e){return e instanceof fu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="__type__",E6="__max__",rh={mapValue:{}},x_="__vector__",Ph="value";function ca(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?h0(t)?4:A6(t)?9007199254740991:T6(t)?10:11:Ie(28295,{value:t})}function Es(t,e){if(t===e)return!0;const n=ca(t);if(n!==ca(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hu(t).isEqual(hu(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=oa(o.timestampValue),p=oa(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(o,c){return la(o.bytesValue).isEqual(la(c.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(o,c){return Mt(o.geoPointValue.latitude)===Mt(c.geoPointValue.latitude)&&Mt(o.geoPointValue.longitude)===Mt(c.geoPointValue.longitude)})(t,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Mt(o.integerValue)===Mt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Mt(o.doubleValue),p=Mt(c.doubleValue);return d===p?Dh(d)===Dh(p):isNaN(d)&&isNaN(p)}return!1})(t,e);case 9:return El(t.arrayValue.values||[],e.arrayValue.values||[],Es);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},p=c.mapValue.fields||{};if(_b(d)!==_b(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Es(d[g],p[g])))return!1;return!0})(t,e);default:return Ie(52216,{left:t})}}function mu(t,e){return(t.values||[]).find((n=>Es(n,e)))!==void 0}function Tl(t,e){if(t===e)return 0;const n=ca(t),s=ca(e);if(n!==s)return Ge(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(t.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=Mt(c.integerValue||c.doubleValue),g=Mt(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(t,e);case 3:return Tb(t.timestampValue,e.timestampValue);case 4:return Tb(hu(t),hu(e));case 5:return wg(t.stringValue,e.stringValue);case 6:return(function(c,d){const p=la(c),g=la(d);return p.compareTo(g)})(t.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const v=Ge(p[y],g[y]);if(v!==0)return v}return Ge(p.length,g.length)})(t.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=Ge(Mt(c.latitude),Mt(d.latitude));return p!==0?p:Ge(Mt(c.longitude),Mt(d.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Ab(t.arrayValue,e.arrayValue);case 10:return(function(c,d){const p=c.fields||{},g=d.fields||{},y=p[Ph]?.arrayValue,v=g[Ph]?.arrayValue,_=Ge(y?.values?.length||0,v?.values?.length||0);return _!==0?_:Ab(y,v)})(t.mapValue,e.mapValue);case 11:return(function(c,d){if(c===rh.mapValue&&d===rh.mapValue)return 0;if(c===rh.mapValue)return 1;if(d===rh.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=d.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let _=0;_<g.length&&_<v.length;++_){const T=wg(g[_],v[_]);if(T!==0)return T;const I=Tl(p[g[_]],y[v[_]]);if(I!==0)return I}return Ge(g.length,v.length)})(t.mapValue,e.mapValue);default:throw Ie(23264,{he:n})}}function Tb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ge(t,e);const n=oa(t),s=oa(e),o=Ge(n.seconds,s.seconds);return o!==0?o:Ge(n.nanos,s.nanos)}function Ab(t,e){const n=t.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=Tl(n[o],s[o]);if(c)return c}return Ge(n.length,s.length)}function Al(t){return bg(t)}function bg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=oa(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return la(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Te.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=bg(c);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${bg(n.fields[d])}`;return o+"}"})(t.mapValue):Ie(61005,{value:t})}function xh(t){switch(ca(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gf(t);return e?16+xh(e):16;case 5:return 2*t.stringValue.length;case 6:return la(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+xh(c)),0)})(t.arrayValue);case 10:case 11:return(function(s){let o=0;return ma(s.fields,((c,d)=>{o+=c.length+xh(d)})),o})(t.mapValue);default:throw Ie(13486,{value:t})}}function Nb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _g(t){return!!t&&"integerValue"in t}function f0(t){return!!t&&"arrayValue"in t}function Sb(t){return!!t&&"nullValue"in t}function Cb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vh(t){return!!t&&"mapValue"in t}function T6(t){return(t?.mapValue?.fields||{})[y_]?.stringValue===x_}function su(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ma(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=su(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=su(t.arrayValue.values[n]);return e}return{...t}}function A6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===E6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!vh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=su(n)}setAll(e){let n=mn.emptyPath(),s={},o=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=p.popLast()}d?s[p.lastSegment()]=su(d):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());vh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Es(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];vh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){ma(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new Hn(su(this.value))}}function v_(t){const e=[];return ma(t.fields,((n,s)=>{const o=new mn([n]);if(vh(s)){const c=v_(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new nr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,s,o,c,d,p){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new bn(e,0,Oe.min(),Oe.min(),Oe.min(),Hn.empty(),0)}static newFoundDocument(e,n,s,o){return new bn(e,1,n,Oe.min(),s,o,0)}static newNoDocument(e,n){return new bn(e,2,n,Oe.min(),Oe.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new bn(e,3,n,Oe.min(),Oe.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n){this.position=e,this.inclusive=n}}function Rb(t,e,n){let s=0;for(let o=0;o<t.position.length;o++){const c=e[o],d=t.position[o];if(c.field.isKeyField()?s=Te.comparator(Te.fromName(d.referenceValue),n.key):s=Tl(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function jb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Es(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n="asc"){this.field=e,this.dir=n}}function N6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{}class $t extends w_{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new C6(e,n,s):n==="array-contains"?new I6(e,s):n==="in"?new k6(e,s):n==="not-in"?new D6(e,s):n==="array-contains-any"?new O6(e,s):new $t(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new R6(e,s):new j6(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Tl(n,this.value)):n!==null&&ca(this.value)===ca(n)&&this.matchesComparison(Tl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $r extends w_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new $r(e,n)}matches(e){return b_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function b_(t){return t.op==="and"}function __(t){return S6(t)&&b_(t)}function S6(t){for(const e of t.filters)if(e instanceof $r)return!1;return!0}function Eg(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+Al(t.value);if(__(t))return t.filters.map((e=>Eg(e))).join(",");{const e=t.filters.map((n=>Eg(n))).join(",");return`${t.op}(${e})`}}function E_(t,e){return t instanceof $t?(function(s,o){return o instanceof $t&&s.op===o.op&&s.field.isEqual(o.field)&&Es(s.value,o.value)})(t,e):t instanceof $r?(function(s,o){return o instanceof $r&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,d,p)=>c&&E_(d,o.filters[p])),!0):!1})(t,e):void Ie(19439)}function T_(t){return t instanceof $t?(function(n){return`${n.field.canonicalString()} ${n.op} ${Al(n.value)}`})(t):t instanceof $r?(function(n){return n.op.toString()+" {"+n.getFilters().map(T_).join(" ,")+"}"})(t):"Filter"}class C6 extends $t{constructor(e,n,s){super(e,n,s),this.key=Te.fromName(s.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class R6 extends $t{constructor(e,n){super(e,"in",n),this.keys=A_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class j6 extends $t{constructor(e,n){super(e,"not-in",n),this.keys=A_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function A_(t,e){return(e.arrayValue?.values||[]).map((n=>Te.fromName(n.referenceValue)))}class I6 extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return f0(n)&&mu(n.arrayValue,this.value)}}class k6 extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mu(this.value.arrayValue,n)}}class D6 extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mu(this.value.arrayValue,n)}}class O6 extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!f0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>mu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e,n=null,s=[],o=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function Ib(t,e=null,n=[],s=[],o=null,c=null,d=null){return new P6(t,e,n,s,o,c,d)}function m0(t){const e=Me(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Eg(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),pf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Al(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Al(s))).join(",")),e.Te=n}return e.Te}function p0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!N6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!E_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jb(t.startAt,e.startAt)&&jb(t.endAt,e.endAt)}function Tg(t){return Te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n=null,s=[],o=[],c=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function M6(t,e,n,s,o,c,d,p){return new Ll(t,e,n,s,o,c,d,p)}function g0(t){return new Ll(t)}function kb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function N_(t){return t.collectionGroup!==null}function iu(t){const e=Me(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Wt(mn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new pu(c,s))})),n.has(mn.keyField().canonicalString())||e.Ie.push(new pu(mn.keyField(),s))}return e.Ie}function vs(t){const e=Me(t);return e.Ee||(e.Ee=L6(e,iu(t))),e.Ee}function L6(t,e){if(t.limitType==="F")return Ib(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new pu(o.field,c)}));const n=t.endAt?new Mh(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Mh(t.startAt.position,t.startAt.inclusive):null;return Ib(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Ag(t,e){const n=t.filters.concat([e]);return new Ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lh(t,e,n){return new Ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yf(t,e){return p0(vs(t),vs(e))&&t.limitType===e.limitType}function S_(t){return`${m0(vs(t))}|lt:${t.limitType}`}function dl(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>T_(o))).join(", ")}]`),pf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Al(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Al(o))).join(",")),`Target(${s})`})(vs(t))}; limitType=${t.limitType})`}function xf(t,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Te.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(t,e)&&(function(s,o){for(const c of iu(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(t,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(t,e)&&(function(s,o){return!(s.startAt&&!(function(d,p,g){const y=Rb(d,p,g);return d.inclusive?y<=0:y<0})(s.startAt,iu(s),o)||s.endAt&&!(function(d,p,g){const y=Rb(d,p,g);return d.inclusive?y>=0:y>0})(s.endAt,iu(s),o))})(t,e)}function V6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function C_(t){return(e,n)=>{let s=!1;for(const o of iu(t)){const c=U6(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function U6(t,e,n){const s=t.field.isKeyField()?Te.comparator(e.key,n.key):(function(c,d,p){const g=d.data.field(c),y=p.data.field(c);return g!==null&&y!==null?Tl(g,y):Ie(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ma(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return d_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=new Ct(Te.comparator);function hi(){return B6}const R_=new Ct(Te.comparator);function Jc(...t){let e=R_;for(const n of t)e=e.insert(n.key,n);return e}function j_(t){let e=R_;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Ja(){return au()}function I_(){return au()}function au(){return new mo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const z6=new Ct(Te.comparator),F6=new Wt(Te.comparator);function Ke(...t){let e=F6;for(const n of t)e=e.add(n);return e}const q6=new Wt(Ge);function H6(){return q6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dh(e)?"-0":e}}function k_(t){return{integerValue:""+t}}function $6(t,e){return x6(e)?k_(e):y0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this._=void 0}}function G6(t,e,n){return t instanceof Vh?(function(o,c){const d={fields:{[m_]:{stringValue:f_},[g_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&h0(c)&&(c=gf(c)),c&&(d.fields[p_]=c),{mapValue:d}})(n,e):t instanceof Nl?O_(t,e):t instanceof Sl?P_(t,e):(function(o,c){const d=D_(o,c),p=Db(d)+Db(o.Ae);return _g(d)&&_g(o.Ae)?k_(p):y0(o.serializer,p)})(t,e)}function K6(t,e,n){return t instanceof Nl?O_(t,e):t instanceof Sl?P_(t,e):n}function D_(t,e){return t instanceof Uh?(function(s){return _g(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Vh extends vf{}class Nl extends vf{constructor(e){super(),this.elements=e}}function O_(t,e){const n=M_(e);for(const s of t.elements)n.some((o=>Es(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Sl extends vf{constructor(e){super(),this.elements=e}}function P_(t,e){let n=M_(e);for(const s of t.elements)n=n.filter((o=>!Es(o,s)));return{arrayValue:{values:n}}}class Uh extends vf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Db(t){return Mt(t.integerValue||t.doubleValue)}function M_(t){return f0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n){this.field=e,this.transform=n}}function Y6(t,e){return t.field.isEqual(e.field)&&(function(s,o){return s instanceof Nl&&o instanceof Nl||s instanceof Sl&&o instanceof Sl?El(s.elements,o.elements,Es):s instanceof Uh&&o instanceof Uh?Es(s.Ae,o.Ae):s instanceof Vh&&o instanceof Vh})(t.transform,e.transform)}class Q6{constructor(e,n){this.version=e,this.transformResults=n}}class Tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tr}static exists(e){return new Tr(void 0,e)}static updateTime(e){return new Tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wf{}function V_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new x0(t.key,Tr.none()):new Cu(t.key,t.data,Tr.none());{const n=t.data,s=Hn.empty();let o=new Wt(mn.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new pa(t.key,s,new nr(o.toArray()),Tr.none())}}function X6(t,e,n){t instanceof Cu?(function(o,c,d){const p=o.value.clone(),g=Pb(o.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(t,e,n):t instanceof pa?(function(o,c,d){if(!wh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const p=Pb(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(U_(o)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(t,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function ou(t,e,n,s){return t instanceof Cu?(function(c,d,p,g){if(!wh(c.precondition,d))return p;const y=c.value.clone(),v=Mb(c.fieldTransforms,g,d);return y.setAll(v),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(t,e,n,s):t instanceof pa?(function(c,d,p,g){if(!wh(c.precondition,d))return p;const y=Mb(c.fieldTransforms,g,d),v=d.data;return v.setAll(U_(c)),v.setAll(y),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((_=>_.field)))})(t,e,n,s):(function(c,d,p){return wh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(t,e,n)}function W6(t,e){let n=null;for(const s of t.fieldTransforms){const o=e.data.field(s.field),c=D_(s.transform,o||null);c!=null&&(n===null&&(n=Hn.empty()),n.set(s.field,c))}return n||null}function Ob(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&El(s,o,((c,d)=>Y6(c,d)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cu extends wf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class pa extends wf{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function U_(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function Pb(t,e,n){const s=new Map;rt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let o=0;o<n.length;o++){const c=t[o],d=c.transform,p=e.data.field(c.field);s.set(c.field,K6(d,p,n[o]))}return s}function Mb(t,e,n){const s=new Map;for(const o of t){const c=o.transform,d=n.data.field(o.field);s.set(o.field,G6(c,d,e))}return s}class x0 extends wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z6 extends wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&X6(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ou(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ou(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=I_();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(o.key)?null:p;const g=V_(d,p);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Oe.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,((n,s)=>Ob(n,s)))&&El(this.baseMutations,e.baseMutations,((n,s)=>Ob(n,s)))}}class v0{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){rt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return z6})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new v0(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Xe;function n3(t){switch(t){case se.OK:return Ie(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ie(15467,{code:t})}}function B_(t){if(t===void 0)return di("GRPC error has no .code"),se.UNKNOWN;switch(t){case qt.OK:return se.OK;case qt.CANCELLED:return se.CANCELLED;case qt.UNKNOWN:return se.UNKNOWN;case qt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case qt.INTERNAL:return se.INTERNAL;case qt.UNAVAILABLE:return se.UNAVAILABLE;case qt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case qt.NOT_FOUND:return se.NOT_FOUND;case qt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case qt.ABORTED:return se.ABORTED;case qt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case qt.DATA_LOSS:return se.DATA_LOSS;default:return Ie(39323,{code:t})}}(Xe=qt||(qt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=new na([4294967295,4294967295],0);function Lb(t){const e=r3().encode(t),n=new e_;return n.update(e),new Uint8Array(n.digest())}function Vb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new na([n,s],0),new na([o,c],0)]}class w0{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new eu(`Invalid padding: ${n}`);if(s<0)throw new eu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new eu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=na.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(na.fromNumber(s)));return o.compare(s3)===1&&(o=new na([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Lb(e),[s,o]=Vb(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new w0(c,o,n);return s.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=Lb(e),[s,o]=Vb(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new bf(Oe.min(),o,new Ct(Ge),hi(),Ke())}}class Ru{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ru(s,n,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class z_{constructor(e,n){this.targetId=e,this.Ce=n}}class F_{constructor(e,n,s=pn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Ub{constructor(){this.ve=0,this.Fe=Bb(),this.Me=pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),n=Ke(),s=Ke();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ie(38017,{changeType:c})}})),new Ru(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Bb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class i3{constructor(e){this.Ge=e,this.ze=new Map,this.je=hi(),this.Je=sh(),this.He=sh(),this.Ye=new Ct(Ge)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Tg(c))if(s===0){const d=new Te(c.path);this.et(n,d,bn.newNoDocument(d,Oe.min()))}else rt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let d,p;try{d=la(s).toUint8Array()}catch(g){if(g instanceof h_)return _l("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new w0(d,o,c)}catch(g){return _l(g instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&Tg(p.target)){const g=new Te(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,bn.newNoDocument(g,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=Ke();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new bf(e,n,this.Ye,this.je,s);return this.je=hi(),this.Je=sh(),this.He=sh(),this.Ye=new Ct(Ge),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ub,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Wt(Ge),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Wt(Ge),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ub),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function sh(){return new Ct(Te.comparator)}function Bb(){return new Ct(Te.comparator)}const a3={asc:"ASCENDING",desc:"DESCENDING"},o3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l3={and:"AND",or:"OR"};class c3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ng(t,e){return t.useProto3Json||pf(e)?e:{value:e}}function Bh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function q_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function u3(t,e){return Bh(t,e.toTimestamp())}function ws(t){return rt(!!t,49232),Oe.fromTimestamp((function(n){const s=oa(n);return new vt(s.seconds,s.nanos)})(t))}function b0(t,e){return Sg(t,e).canonicalString()}function Sg(t,e){const n=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(t).child("documents");return e===void 0?n:n.child(e)}function H_(t){const e=pt.fromString(t);return rt(Q_(e),10190,{key:e.toString()}),e}function Cg(t,e){return b0(t.databaseId,e.path)}function Xp(t,e){const n=H_(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Te(G_(n))}function $_(t,e){return b0(t.databaseId,e)}function d3(t){const e=H_(t);return e.length===4?pt.emptyPath():G_(e)}function Rg(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G_(t){return rt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function zb(t,e,n){return{name:Cg(t,e),fields:n.value.mapValue.fields}}function h3(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ie(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,v){return y.useProto3Json?(rt(v===void 0||typeof v=="string",58123),pn.fromBase64String(v||"")):(rt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),pn.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const v=y.code===void 0?se.UNKNOWN:B_(y.code);return new xe(v,y.message||"")})(d);n=new F_(s,o,c,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Xp(t,s.document.name),c=ws(s.document.updateTime),d=s.document.createTime?ws(s.document.createTime):Oe.min(),p=new Hn({mapValue:{fields:s.document.fields}}),g=bn.newFoundDocument(o,c,d,p),y=s.targetIds||[],v=s.removedTargetIds||[];n=new bh(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Xp(t,s.document),c=s.readTime?ws(s.readTime):Oe.min(),d=bn.newNoDocument(o,c),p=s.removedTargetIds||[];n=new bh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Xp(t,s.document),c=s.removedTargetIds||[];n=new bh([],c,o,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new t3(o,c),p=s.targetId;n=new z_(p,d)}}return n}function f3(t,e){let n;if(e instanceof Cu)n={update:zb(t,e.key,e.value)};else if(e instanceof x0)n={delete:Cg(t,e.key)};else if(e instanceof pa)n={update:zb(t,e.key,e.data),updateMask:_3(e.fieldMask)};else{if(!(e instanceof Z6))return Ie(16599,{Vt:e.type});n={verify:Cg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const p=d.transform;if(p instanceof Vh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Nl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Sl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Uh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Ie(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:u3(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ie(27497)})(t,e.precondition)),n}function m3(t,e){return t&&t.length>0?(rt(e!==void 0,14353),t.map((n=>(function(o,c){let d=o.updateTime?ws(o.updateTime):ws(c);return d.isEqual(Oe.min())&&(d=ws(c)),new Q6(d,o.transformResults||[])})(n,e)))):[]}function p3(t,e){return{documents:[$_(t,e.path)]}}function g3(t,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=$_(t,o);const c=(function(y){if(y.length!==0)return Y_($r.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((v=>(function(T){return{field:hl(T.field),direction:v3(T.dir)}})(v)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Ng(t,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function y3(t){let e=d3(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){rt(s===1,65062);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let c=[];n.where&&(c=(function(_){const T=K_(_);return T instanceof $r&&__(T)?T.getFilters():[T]})(n.where));let d=[];n.orderBy&&(d=(function(_){return _.map((T=>(function(B){return new pu(fl(B.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(T)))})(n.orderBy));let p=null;n.limit&&(p=(function(_){let T;return T=typeof _=="object"?_.value:_,pf(T)?null:T})(n.limit));let g=null;n.startAt&&(g=(function(_){const T=!!_.before,I=_.values||[];return new Mh(I,T)})(n.startAt));let y=null;return n.endAt&&(y=(function(_){const T=!_.before,I=_.values||[];return new Mh(I,T)})(n.endAt)),M6(e,o,d,c,p,"F",g,y)}function x3(t,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function K_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=fl(n.unaryFilter.field);return $t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=fl(n.unaryFilter.field);return $t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=fl(n.unaryFilter.field);return $t.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=fl(n.unaryFilter.field);return $t.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(t):t.fieldFilter!==void 0?(function(n){return $t.create(fl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return $r.create(n.compositeFilter.filters.map((s=>K_(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(n.compositeFilter.op))})(t):Ie(30097,{filter:t})}function v3(t){return a3[t]}function w3(t){return o3[t]}function b3(t){return l3[t]}function hl(t){return{fieldPath:t.canonicalString()}}function fl(t){return mn.fromServerFormat(t.fieldPath)}function Y_(t){return t instanceof $t?(function(n){if(n.op==="=="){if(Cb(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NAN"}};if(Sb(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cb(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NAN"}};if(Sb(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(n.field),op:w3(n.op),value:n.value}}})(t):t instanceof $r?(function(n){const s=n.getFilters().map((o=>Y_(o)));return s.length===1?s[0]:{compositeFilter:{op:b3(n.op),filters:s}}})(t):Ie(54877,{filter:t})}function _3(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Q_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,s,o,c=Oe.min(),d=Oe.min(),p=pn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.yt=e}}function T3(t){const e=y3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(){this.Cn=new N3}addToCollectionParentIndex(e,n){return this.Cn.add(n),ce.resolve()}getCollectionParents(e,n){return ce.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ce.resolve()}deleteFieldIndex(e,n){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,n){return ce.resolve()}getDocumentsMatchingTarget(e,n){return ce.resolve(null)}getIndexType(e,n){return ce.resolve(0)}getFieldIndexes(e,n){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,n){return ce.resolve(aa.min())}getMinOffsetFromCollectionGroup(e,n){return ce.resolve(aa.min())}updateCollectionGroup(e,n,s){return ce.resolve()}updateIndexEntries(e,n){return ce.resolve()}}class N3{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Wt(pt.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Wt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},X_=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(X_,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Cl(0)}static cr(){return new Cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="LruGarbageCollector",S3=1048576;function Hb([t,e],[n,s]){const o=Ge(t,n);return o===0?Ge(e,s):o}class C3{constructor(e){this.Ir=e,this.buffer=new Wt(Hb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Hb(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class R3{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(qb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ml(n)?ve(qb,"Ignoring IndexedDB error during garbage collection: ",n):await Pl(n)}await this.Vr(3e5)}))}}class j3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ce.resolve(mf.ce);const s=new C3(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(Fb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,c,d,p,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),o=this.params.maximumSequenceNumbersToCollect):o=_,d=Date.now(),this.nthSequenceNumber(e,o)))).next((_=>(s=_,p=Date.now(),this.removeTargets(e,s,n)))).next((_=>(c=_,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(y=Date.now(),ul()<=$e.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-v}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${_} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:_}))))}}function I3(t,e){return new j3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this.changes=new mo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ce.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&ou(s.mutation,o,nr.empty(),vt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ke()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ke()){const o=Ja();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let d=Jc();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Ja();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ke())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,s,o){let c=hi();const d=au(),p=(function(){return au()})();return n.forEach(((g,y)=>{const v=s.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof pa)?c=c.insert(y.key,y):v!==void 0?(d.set(y.key,v.mutation.getFieldMask()),ou(v.mutation,y,v.mutation.getFieldMask(),vt.now())):d.set(y.key,nr.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,v)=>d.set(y,v))),n.forEach(((y,v)=>p.set(y,new D3(v,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const s=au();let o=new Ct(((d,p)=>d-p)),c=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let v=s.get(g)||nr.empty();v=p.applyToLocalView(y,v),s.set(g,v);const _=(o.get(p.batchId)||Ke()).add(g);o=o.insert(p.batchId,_)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,v=g.value,_=I_();v.forEach((T=>{if(!c.has(T)){const I=V_(n.get(T),s.get(T));I!==null&&_.set(T,I),c=c.add(T)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,_))}return ce.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return Te.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):N_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):ce.resolve(Ja());let p=du,g=c;return d.next((y=>ce.forEach(y,((v,_)=>(p<_.largestBatchId&&(p=_.largestBatchId),c.get(v)?ce.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{g=g.insert(v,T)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Ke()))).next((v=>({batchId:p,changes:j_(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((s=>{let o=Jc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let d=Jc();return this.indexManager.getCollectionParents(e,c).next((p=>ce.forEach(p,(g=>{const y=(function(_,T){return new Ll(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((v=>{v.forEach(((_,T)=>{d=d.insert(_,T)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((d=>{c.forEach(((g,y)=>{const v=y.getKey();d.get(v)===null&&(d=d.insert(v,bn.newInvalidDocument(v)))}));let p=Jc();return d.forEach(((g,y)=>{const v=c.get(g);v!==void 0&&ou(v.mutation,y,nr.empty(),vt.now()),xf(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ce.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ws(o.createTime)}})(n)),ce.resolve()}getNamedQuery(e,n){return ce.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:T3(o.bundledQuery),readTime:ws(o.readTime)}})(n)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.overlays=new Ct(Te.comparator),this.qr=new Map}getOverlay(e,n){return ce.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ja();return ce.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.St(e,n,c)})),ce.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),ce.resolve()}getOverlaysForCollection(e,n,s){const o=Ja(),c=n.length+1,d=new Te(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new Ct(((y,v)=>y-v));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let v=c.get(y.largestBatchId);v===null&&(v=Ja(),c=c.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const p=Ja(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>p.set(y,v))),!(p.size()>=o)););return ce.resolve(p)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new e3(n,s));let c=this.qr.get(n);c===void 0&&(c=Ke(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.Qr=new Wt(sn.$r),this.Ur=new Wt(sn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new sn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new sn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Te(new pt([])),s=new sn(n,e),o=new sn(n,e+1),c=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new pt([])),s=new sn(n,e),o=new sn(n,e+1);let c=Ke();return this.Ur.forEachInRange([s,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new sn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class sn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||Ge(e.Yr,n.Yr)}static Kr(e,n){return Ge(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Wt(sn.$r)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new J6(c,n,s,o);this.mutationQueue.push(d);for(const p of o)this.Zr=this.Zr.add(new sn(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ce.resolve(d)}lookupMutationBatch(e,n){return ce.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),c=o<0?0:o;return ce.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?d0:this.tr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new sn(n,0),o=new sn(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(d=>{const p=this.Xr(d.Yr);c.push(p)})),ce.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Wt(Ge);return n.forEach((o=>{const c=new sn(o,0),d=new sn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{s=s.add(p.Yr)}))})),ce.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;Te.isDocumentKey(c)||(c=c.child(""));const d=new sn(new Te(c),0);let p=new Wt(Ge);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Yr)),!0)}),d),ce.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){rt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ce.forEach(n.mutations,(o=>{const c=new sn(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new sn(n,0),o=this.Zr.firstAfterOrEqual(s);return ce.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.ri=e,this.docs=(function(){return new Ct(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ce.resolve(s?s.document.mutableCopy():bn.newInvalidDocument(n))}getEntries(e,n){let s=hi();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():bn.newInvalidDocument(o))})),ce.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=hi();const d=n.path,p=new Te(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||m6(f6(v),s)<=0||(o.has(v.key)||xf(n,v))&&(c=c.insert(v.key,v.mutableCopy()))}return ce.resolve(c)}getAllFromCollectionGroup(e,n,s,o){Ie(9500)}ii(e,n){return ce.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new B3(this)}getSize(e){return ce.resolve(this.size)}}class B3 extends k3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ce.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.persistence=e,this.si=new mo((n=>m0(n)),p0),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new _0,this.targetCount=0,this.ai=Cl.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ce.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Cl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ce.resolve()}updateTargetData(e,n){return this.Pr(n),ce.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ce.waitFor(c).next((()=>o))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ce.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ce.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),ce.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ce.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ce.resolve(s)}containsKey(e,n){return ce.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n){this.ui={},this.overlays={},this.ci=new mf(0),this.li=!1,this.li=!0,this.hi=new L3,this.referenceDelegate=e(this),this.Pi=new z3(this),this.indexManager=new A3,this.remoteDocumentCache=(function(o){return new U3(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new E3(n),this.Ii=new P3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new M3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new V3(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ve("MemoryPersistence","Starting transaction:",e);const o=new F3(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ce.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class F3 extends g6{constructor(e){super(),this.currentSequenceNumber=e}}class E0{constructor(e){this.persistence=e,this.Ri=new _0,this.Vi=null}static mi(e){return new E0(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ce.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ce.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ce.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.fi,(s=>{const o=Te.fromPath(s);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Oe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ce.or([()=>ce.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class zh{constructor(e,n){this.persistence=e,this.pi=new mo((s=>v6(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=I3(this,n)}static mi(e,n){return new zh(e,n)}Ei(){}di(e){return ce.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ce.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?ce.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((p=>{p||(s++,c.removeEntry(d,Oe.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ce.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=xh(e.data.value)),n}br(e,n,s){return ce.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ce.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Ke(),o=Ke();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new T0(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return pC()?8:y6(En())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,o,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new q3;return this.Ss(e,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,d,p.size)}))})).next((()=>c.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(ul()<=$e.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",dl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ce.resolve()):(ul()<=$e.DEBUG&&ve("QueryEngine","Query:",dl(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ul()<=$e.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",dl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vs(n))):ce.resolve())}ys(e,n){if(kb(n))return ce.resolve(null);let s=vs(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Lh(n,null,"F"),s=vs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=Ke(...c);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,d,g.readTime)?this.ys(e,Lh(n,null,"F")):this.vs(e,y,n,g)}))))})))))}ws(e,n,s,o){return kb(n)||o.isEqual(Oe.min())?ce.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,o)?ce.resolve(null):(ul()<=$e.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),dl(n)),this.vs(e,d,n,h6(o,du)).next((p=>p)))}))}Ds(e,n){let s=new Wt(C_(e));return n.forEach(((o,c)=>{xf(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,s){return ul()<=$e.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",dl(n)),this.ps.getDocumentsMatchingQuery(e,n,aa.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="LocalStore",$3=3e8;class G3{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Ct(Ge),this.xs=new mo((c=>m0(c)),p0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function K3(t,e,n,s){return new G3(t,e,n,s)}async function Z_(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],p=[];let g=Ke();for(const y of o){d.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of c){p.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function Y3(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,v){const _=y.batch,T=_.keys();let I=ce.resolve();return T.forEach((B=>{I=I.next((()=>v.getEntry(g,B))).next((U=>{const j=y.docVersions.get(B);rt(j!==null,48541),U.version.compareTo(j)<0&&(_.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),v.addEntry(U)))}))})),I.next((()=>p.mutationQueue.removeMutationBatch(g,_)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=Ke();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function J_(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Q3(t,e){const n=Me(t),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((v,_)=>{const T=o.get(_);if(!T)return;p.push(n.Pi.removeMatchingKeys(c,v.removedDocuments,_).next((()=>n.Pi.addMatchingKeys(c,v.addedDocuments,_))));let I=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(pn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,s)),o=o.insert(_,I),(function(U,j,H){return U.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=$3?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(T,I,v)&&p.push(n.Pi.updateTargetData(c,I))}));let g=hi(),y=Ke();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,v))})),p.push(X3(c,d,e.documentUpdates).next((v=>{g=v.ks,y=v.qs}))),!s.isEqual(Oe.min())){const v=n.Pi.getLastRemoteSnapshotVersion(c).next((_=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(v)}return ce.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=o,c)))}function X3(t,e,n){let s=Ke(),o=Ke();return n.forEach((c=>s=s.add(c))),e.getEntries(t,s).next((c=>{let d=hi();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):ve(A0,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function W3(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=d0),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Z3(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((c=>c?(o=c,ce.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new Wi(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function jg(t,e,n){const s=Me(t),o=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ml(d))throw d;ve(A0,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function $b(t,e,n){const s=Me(t);let o=Oe.min(),c=Ke();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,v){const _=Me(g),T=_.xs.get(v);return T!==void 0?ce.resolve(_.Ms.get(T)):_.Pi.getTargetData(y,v)})(s,d,vs(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:Oe.min(),n?c:Ke()))).next((p=>(J3(s,V6(e),p),{documents:p,Qs:c})))))}function J3(t,e,n){let s=t.Os.get(e)||Oe.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),t.Os.set(e,s)}class Gb{constructor(){this.activeTargetIds=H6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eI{constructor(){this.Mo=new Gb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Gb,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="ConnectivityMonitor";class Yb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(Kb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(Kb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih=null;function Ig(){return ih===null?ih=(function(){return 268435456+Math.round(2147483648*Math.random())})():ih++,"0x"+ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="RestConnection",nI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Oh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,c){const d=Ig(),p=this.zo(e,n.toUriEncodedString());ve(Wp,`Sending RPC '${e}' ${d}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:y}=new URL(p),v=uo(y);return this.Jo(e,p,g,s,v).then((_=>(ve(Wp,`Received RPC '${e}' ${d}: `,_),_)),(_=>{throw _l(Wp,`RPC '${e}' ${d} failed with error: `,_,"url: ",p,"request:",s),_}))}Ho(e,n,s,o,c,d){return this.Go(e,n,s,o,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const s=nI[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class iI extends rI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,c){const d=Ig();return new Promise(((p,g)=>{const y=new t_;y.setWithCredentials(!0),y.listenOnce(n_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case yh.NO_ERROR:const _=y.getResponseJson();ve(vn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(_)),p(_);break;case yh.TIMEOUT:ve(vn,`RPC '${e}' ${d} timed out`),g(new xe(se.DEADLINE_EXCEEDED,"Request time out"));break;case yh.HTTP_ERROR:const T=y.getStatus();if(ve(vn,`RPC '${e}' ${d} failed with status:`,T,"response text:",y.getResponseText()),T>0){let I=y.getResponseJson();Array.isArray(I)&&(I=I[0]);const B=I?.error;if(B&&B.status&&B.message){const U=(function(H){const F=H.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(F)>=0?F:se.UNKNOWN})(B.status);g(new xe(U,B.message))}else g(new xe(se.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new xe(se.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ve(vn,`RPC '${e}' ${d} completed.`)}}));const v=JSON.stringify(o);ve(vn,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",v,s,15)}))}T_(e,n,s){const o=Ig(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=i_(),p=s_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const v=c.join("");ve(vn,`Creating RPC '${e}' stream ${o}: ${v}`,g);const _=d.createWebChannel(v,g);this.I_(_);let T=!1,I=!1;const B=new sI({Yo:j=>{I?ve(vn,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(T||(ve(vn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),T=!0),ve(vn,`RPC '${e}' stream ${o} sending:`,j),_.send(j))},Zo:()=>_.close()}),U=(j,H,F)=>{j.listen(H,(q=>{try{F(q)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return U(_,Zc.EventType.OPEN,(()=>{I||(ve(vn,`RPC '${e}' stream ${o} transport opened.`),B.o_())})),U(_,Zc.EventType.CLOSE,(()=>{I||(I=!0,ve(vn,`RPC '${e}' stream ${o} transport closed`),B.a_(),this.E_(_))})),U(_,Zc.EventType.ERROR,(j=>{I||(I=!0,_l(vn,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),B.a_(new xe(se.UNAVAILABLE,"The operation could not be completed")))})),U(_,Zc.EventType.MESSAGE,(j=>{if(!I){const H=j.data[0];rt(!!H,16349);const F=H,q=F?.error||F[0]?.error;if(q){ve(vn,`RPC '${e}' stream ${o} received error:`,q);const ie=q.status;let te=(function(A){const S=qt[A];if(S!==void 0)return B_(S)})(ie),de=q.message;te===void 0&&(te=se.INTERNAL,de="Unknown error status: "+ie+" with message "+q.message),I=!0,B.a_(new xe(te,de)),_.close()}else ve(vn,`RPC '${e}' stream ${o} received:`,H),B.u_(H)}})),U(p,r_.STAT_EVENT,(j=>{j.stat===vg.PROXY?ve(vn,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===vg.NOPROXY&&ve(vn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Zp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t){return new c3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="PersistentStream";class tE{constructor(e,n,s,o,c,d,p,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new eE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(di(n.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new xe(se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(Qb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ve(Qb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class aI extends tE{constructor(e,n,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=h3(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Oe.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Oe.min():d.readTime?ws(d.readTime):Oe.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Rg(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=Tg(g)?{documents:p3(c,g)}:{query:g3(c,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=q_(c,d.resumeToken);const y=Ng(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Oe.min())>0){p.readTime=Bh(c,d.snapshotVersion.toTimestamp());const y=Ng(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const s=x3(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Rg(this.serializer),n.removeTarget=e,this.q_(n)}}class oI extends tE{constructor(e,n,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=m3(e.writeResults,e.commitTime),s=ws(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Rg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>f3(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{}class cI extends lI{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new xe(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Sg(n,s),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(se.UNKNOWN,c.toString())}))}Ho(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,Sg(n,s),o,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new xe(se.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class uI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(di(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="RemoteStore";class dI{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{po(this)&&(ve(oo,"Restarting streams for network reachability change."),await(async function(g){const y=Me(g);y.Ea.add(4),await ju(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ef(y)})(this))}))})),this.Ra=new uI(s,o)}}async function Ef(t){if(po(t))for(const e of t.da)await e(!0)}async function ju(t){for(const e of t.da)await e(!1)}function nE(t,e){const n=Me(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),R0(n)?C0(n):Vl(n).O_()&&S0(n,e))}function N0(t,e){const n=Me(t),s=Vl(n);n.Ia.delete(e),s.O_()&&rE(n,e),n.Ia.size===0&&(s.O_()?s.L_():po(n)&&n.Ra.set("Unknown"))}function S0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vl(t).Y_(e)}function rE(t,e){t.Va.Ue(e),Vl(t).Z_(e)}function C0(t){t.Va=new i3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Vl(t).start(),t.Ra.ua()}function R0(t){return po(t)&&!Vl(t).x_()&&t.Ia.size>0}function po(t){return Me(t).Ea.size===0}function sE(t){t.Va=void 0}async function hI(t){t.Ra.set("Online")}async function fI(t){t.Ia.forEach(((e,n)=>{S0(t,e)}))}async function mI(t,e){sE(t),R0(t)?(t.Ra.ha(e),C0(t)):t.Ra.set("Unknown")}async function pI(t,e,n){if(t.Ra.set("Online"),e instanceof F_&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.Va.removeTarget(p))})(t,e)}catch(s){ve(oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fh(t,s)}else if(e instanceof bh?t.Va.Ze(e):e instanceof z_?t.Va.st(e):t.Va.tt(e),!n.isEqual(Oe.min()))try{const s=await J_(t.localStore);n.compareTo(s)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=c.Ia.get(y);v&&c.Ia.set(y,v.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const v=c.Ia.get(g);if(!v)return;c.Ia.set(g,v.withResumeToken(pn.EMPTY_BYTE_STRING,v.snapshotVersion)),rE(c,g);const _=new Wi(v.target,g,y,v.sequenceNumber);S0(c,_)})),c.remoteSyncer.applyRemoteEvent(p)})(t,n)}catch(s){ve(oo,"Failed to raise snapshot:",s),await Fh(t,s)}}async function Fh(t,e,n){if(!Ml(e))throw e;t.Ea.add(1),await ju(t),t.Ra.set("Offline"),n||(n=()=>J_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ve(oo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ef(t)}))}function iE(t,e){return e().catch((n=>Fh(t,n,e)))}async function Tf(t){const e=Me(t),n=ua(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:d0;for(;gI(e);)try{const o=await W3(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,yI(e,o)}catch(o){await Fh(e,o)}aE(e)&&oE(e)}function gI(t){return po(t)&&t.Ta.length<10}function yI(t,e){t.Ta.push(e);const n=ua(t);n.O_()&&n.X_&&n.ea(e.mutations)}function aE(t){return po(t)&&!ua(t).x_()&&t.Ta.length>0}function oE(t){ua(t).start()}async function xI(t){ua(t).ra()}async function vI(t){const e=ua(t);for(const n of t.Ta)e.ea(n.mutations)}async function wI(t,e,n){const s=t.Ta.shift(),o=v0.from(s,e,n);await iE(t,(()=>t.remoteSyncer.applySuccessfulWrite(o))),await Tf(t)}async function bI(t,e){e&&ua(t).X_&&await(async function(s,o){if((function(d){return n3(d)&&d!==se.ABORTED})(o.code)){const c=s.Ta.shift();ua(s).B_(),await iE(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Tf(s)}})(t,e),aE(t)&&oE(t)}async function Xb(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),ve(oo,"RemoteStore received new credentials");const s=po(n);n.Ea.add(3),await ju(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ef(n)}async function _I(t,e){const n=Me(t);e?(n.Ea.delete(2),await Ef(n)):e||(n.Ea.add(2),await ju(n),n.Ra.set("Unknown"))}function Vl(t){return t.ma||(t.ma=(function(n,s,o){const c=Me(n);return c.sa(),new aI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(t.datastore,t.asyncQueue,{Xo:hI.bind(null,t),t_:fI.bind(null,t),r_:mI.bind(null,t),H_:pI.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),R0(t)?C0(t):t.Ra.set("Unknown")):(await t.ma.stop(),sE(t))}))),t.ma}function ua(t){return t.fa||(t.fa=(function(n,s,o){const c=Me(n);return c.sa(),new oI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:xI.bind(null,t),r_:bI.bind(null,t),ta:vI.bind(null,t),na:wI.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Tf(t)):(await t.fa.stop(),t.Ta.length>0&&(ve(oo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const d=Date.now()+s,p=new j0(e,n,d,o,c);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function I0(t,e){if(di("AsyncQueue",`${e}: ${t}`),Ml(t))return new xe(se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{static emptySet(e){return new yl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Te.comparator(n.key,s.key):(n,s)=>Te.comparator(n.key,s.key),this.keyedMap=Jc(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new yl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(){this.ga=new Ct(Te.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Rl{constructor(e,n,s,o,c,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Rl(e,n,yl.emptySet(n),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class TI{constructor(){this.queries=Zb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Me(n),c=o.queries;o.queries=Zb(),c.forEach(((d,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new xe(se.ABORTED,"Firestore shutting down"))}}function Zb(){return new mo((t=>S_(t)),yf)}async function lE(t,e){const n=Me(t);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new EI,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=I0(d,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&k0(n)}async function cE(t,e){const n=Me(t),s=e.query;let o=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function AI(t,e){const n=Me(t);let s=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(o)&&(s=!0);d.wa=o}}s&&k0(n)}function NI(t,e,n){const s=Me(t),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);s.queries.delete(e)}function k0(t){t.Ca.forEach((e=>{e.next()}))}var kg,Jb;(Jb=kg||(kg={})).Ma="default",Jb.Cache="cache";class uE{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Rl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.key=e}}class hE{constructor(e){this.key=e}}class SI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=C_(e),this.tu=new yl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Wb,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,_)=>{const T=o.get(v),I=xf(this.query,_)?_:null,B=!!T&&this.mutatedKeys.has(T.key),U=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let j=!1;T&&I?T.data.isEqual(I.data)?B!==U&&(s.track({type:3,doc:I}),j=!0):this.su(T,I)||(s.track({type:2,doc:I}),j=!0,(g&&this.eu(I,g)>0||y&&this.eu(I,y)<0)&&(p=!0)):!T&&I?(s.track({type:0,doc:I}),j=!0):T&&!I&&(s.track({type:1,doc:T}),j=!0,(g||y)&&(p=!0)),j&&(I?(d=d.add(I),c=U?c.add(v):c.delete(v)):(d=d.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const v=this.query.limitType==="F"?d.last():d.first();d=d.delete(v.key),c=c.delete(v.key),s.track({type:1,doc:v})}return{tu:d,iu:s,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((v,_)=>(function(I,B){const U=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:j})}};return U(I)-U(B)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(s),o=o??!1;const p=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new Rl(this.query,e.tu,c,d,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Wb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ke(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new hE(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new dE(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const D0="SyncEngine";class CI{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class RI{constructor(e){this.key=e,this.hu=!1}}class jI{constructor(e,n,s,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new mo((p=>S_(p)),yf),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(Te.comparator),this.Au=new Map,this.Ru=new _0,this.Vu={},this.mu=new Map,this.fu=Cl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function II(t,e,n=!0){const s=xE(t);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await fE(s,e,n,!0),o}async function kI(t,e){const n=xE(t);await fE(n,e,!0,!1)}async function fE(t,e,n,s){const o=await Z3(t.localStore,vs(e)),c=o.targetId,d=t.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await DI(t,e,c,d==="current",o.resumeToken)),t.isPrimaryClient&&n&&nE(t.remoteStore,o),p}async function DI(t,e,n,s,o){t.pu=(_,T,I)=>(async function(U,j,H,F){let q=j.view.ru(H);q.Cs&&(q=await $b(U.localStore,j.query,!1).then((({documents:k})=>j.view.ru(k,q))));const ie=F&&F.targetChanges.get(j.targetId),te=F&&F.targetMismatches.get(j.targetId)!=null,de=j.view.applyChanges(q,U.isPrimaryClient,ie,te);return t2(U,j.targetId,de.au),de.snapshot})(t,_,T,I);const c=await $b(t.localStore,e,!0),d=new SI(e,c.Qs),p=d.ru(c.documents),g=Ru.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",o),y=d.applyChanges(p,t.isPrimaryClient,g);t2(t,n,y.au);const v=new CI(e,n,d);return t.Tu.set(e,v),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),y.snapshot}async function OI(t,e,n){const s=Me(t),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((d=>!yf(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await jg(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&N0(s.remoteStore,o.targetId),Dg(s,o.targetId)})).catch(Pl)):(Dg(s,o.targetId),await jg(s.localStore,o.targetId,!0))}async function PI(t,e){const n=Me(t),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),N0(n.remoteStore,s.targetId))}async function MI(t,e,n){const s=qI(t);try{const o=await(function(d,p){const g=Me(d),y=vt.now(),v=p.reduce(((I,B)=>I.add(B.key)),Ke());let _,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let B=hi(),U=Ke();return g.Ns.getEntries(I,v).next((j=>{B=j,B.forEach(((H,F)=>{F.isValidDocument()||(U=U.add(H))}))})).next((()=>g.localDocuments.getOverlayedDocuments(I,B))).next((j=>{_=j;const H=[];for(const F of p){const q=W6(F,_.get(F.key).overlayedDocument);q!=null&&H.push(new pa(F.key,q,v_(q.value.mapValue),Tr.exists(!0)))}return g.mutationQueue.addMutationBatch(I,y,H,p)})).next((j=>{T=j;const H=j.applyToLocalDocumentSet(_,U);return g.documentOverlayCache.saveOverlays(I,j.batchId,H)}))})).then((()=>({batchId:T.batchId,changes:j_(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new Ct(Ge)),y=y.insert(p,g),d.Vu[d.currentUser.toKey()]=y})(s,o.batchId,n),await Iu(s,o.changes),await Tf(s.remoteStore)}catch(o){const c=I0(o,"Failed to persist write");n.reject(c)}}async function mE(t,e){const n=Me(t);try{const s=await Q3(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?rt(d.hu,14607):o.removedDocuments.size>0&&(rt(d.hu,42227),d.hu=!1))})),await Iu(n,s,e)}catch(s){await Pl(s)}}function e2(t,e,n){const s=Me(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=Me(d);g.onlineState=p;let y=!1;g.queries.forEach(((v,_)=>{for(const T of _.Sa)T.va(p)&&(y=!0)})),y&&k0(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function LI(t,e,n){const s=Me(t);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let d=new Ct(Te.comparator);d=d.insert(c,bn.newNoDocument(c,Oe.min()));const p=Ke().add(c),g=new bf(Oe.min(),new Map,new Ct(Ge),d,p);await mE(s,g),s.du=s.du.remove(c),s.Au.delete(e),O0(s)}else await jg(s.localStore,e,!1).then((()=>Dg(s,e,n))).catch(Pl)}async function VI(t,e){const n=Me(t),s=e.batch.batchId;try{const o=await Y3(n.localStore,e);gE(n,s,null),pE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Iu(n,o)}catch(o){await Pl(o)}}async function UI(t,e,n){const s=Me(t);try{const o=await(function(d,p){const g=Me(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,p).next((_=>(rt(_!==null,37113),v=_.keys(),g.mutationQueue.removeMutationBatch(y,_)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(s.localStore,e);gE(s,e,n),pE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Iu(s,o)}catch(o){await Pl(o)}}function pE(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function gE(t,e,n){const s=Me(t);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Dg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||yE(t,s)}))}function yE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(N0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),O0(t))}function t2(t,e,n){for(const s of n)s instanceof dE?(t.Ru.addReference(s.key,e),BI(t,s)):s instanceof hE?(ve(D0,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||yE(t,s.key)):Ie(19791,{wu:s})}function BI(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(ve(D0,"New document in limbo: "+n),t.Eu.add(s),O0(t))}function O0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Te(pt.fromString(e)),s=t.fu.next();t.Au.set(s,new RI(n)),t.du=t.du.insert(n,s),nE(t.remoteStore,new Wi(vs(g0(n.path)),s,"TargetPurposeLimboResolution",mf.ce))}}async function Iu(t,e,n){const s=Me(t),o=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{d.push(s.pu(g,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const v=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(y){o.push(y);const v=T0.As(g.targetId,y);c.push(v)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(g,y){const v=Me(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>ce.forEach(y,(T=>ce.forEach(T.Es,(I=>v.persistence.referenceDelegate.addReference(_,T.targetId,I))).next((()=>ce.forEach(T.ds,(I=>v.persistence.referenceDelegate.removeReference(_,T.targetId,I)))))))))}catch(_){if(!Ml(_))throw _;ve(A0,"Failed to update sequence numbers: "+_)}for(const _ of y){const T=_.targetId;if(!_.fromCache){const I=v.Ms.get(T),B=I.snapshotVersion,U=I.withLastLimboFreeSnapshotVersion(B);v.Ms=v.Ms.insert(T,U)}}})(s.localStore,c))}async function zI(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){ve(D0,"User change. New user:",e.toKey());const s=await Z_(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new xe(se.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Iu(n,s.Ls)}}function FI(t,e){const n=Me(t),s=n.Au.get(e);if(s&&s.hu)return Ke().add(s.key);{let o=Ke();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const p=n.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function xE(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LI.bind(null,e),e.Pu.H_=AI.bind(null,e.eventManager),e.Pu.yu=NI.bind(null,e.eventManager),e}function qI(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UI.bind(null,e),e}class qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_f(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return K3(this.persistence,new H3,e.initialUser,this.serializer)}Cu(e){return new W_(E0.mi,this.serializer)}Du(e){return new eI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qh.provider={build:()=>new qh};class HI extends qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){rt(this.persistence.referenceDelegate instanceof zh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new R3(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new W_((s=>zh.mi(s,n)),this.serializer)}}class Og{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>e2(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=zI.bind(null,this.syncEngine),await _I(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new TI})()}createDatastore(e){const n=_f(e.databaseInfo.databaseId),s=(function(c){return new iI(c)})(e.databaseInfo);return(function(c,d,p,g){return new cI(c,d,p,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,d,p){return new dI(s,o,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>e2(this.syncEngine,n,0)),(function(){return Yb.v()?new Yb:new tI})())}createSyncEngine(e,n){return(function(o,c,d,p,g,y,v){const _=new jI(o,c,d,p,g,y);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Me(n);ve(oo,"RemoteStore shutting down."),s.Ea.add(5),await ju(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Og.provider={build:()=>new Og};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):di("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="FirestoreClient";class $I{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=wn.UNAUTHENTICATED,this.clientId=u0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{ve(da,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(ve(da,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=I0(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Jp(t,e){t.asyncQueue.verifyOperationInProgress(),ve(da,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Z_(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function n2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GI(t);ve(da,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>Xb(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,o)=>Xb(e.remoteStore,o))),t._onlineComponents=e}async function GI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve(da,"Using user provided OfflineComponentProvider");try{await Jp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===se.FAILED_PRECONDITION||o.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;_l("Error using user provided cache. Falling back to memory cache: "+n),await Jp(t,new qh)}}else ve(da,"Using default OfflineComponentProvider"),await Jp(t,new HI(void 0));return t._offlineComponents}async function wE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve(da,"Using user provided OnlineComponentProvider"),await n2(t,t._uninitializedComponentsProvider._online)):(ve(da,"Using default OnlineComponentProvider"),await n2(t,new Og))),t._onlineComponents}function KI(t){return wE(t).then((e=>e.syncEngine))}async function bE(t){const e=await wE(t),n=e.eventManager;return n.onListen=II.bind(null,e.syncEngine),n.onUnlisten=OI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PI.bind(null,e.syncEngine),n}function YI(t,e,n={}){const s=new ii;return t.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const v=new vE({next:T=>{v.Nu(),d.enqueueAndForget((()=>cE(c,_)));const I=T.docs.has(p);!I&&T.fromCache?y.reject(new xe(se.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&T.fromCache&&g&&g.source==="server"?y.reject(new xe(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new uE(g0(p.path),v,{includeMetadataChanges:!0,qa:!0});return lE(c,_)})(await bE(t),t.asyncQueue,e,n,s))),s.promise}function QI(t,e,n={}){const s=new ii;return t.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const v=new vE({next:T=>{v.Nu(),d.enqueueAndForget((()=>cE(c,_))),T.fromCache&&g.source==="server"?y.reject(new xe(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new uE(p,v,{includeMetadataChanges:!0,qa:!0});return lE(c,_)})(await bE(t),t.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="firestore.googleapis.com",s2=!0;class i2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EE,this.ssl=s2}else this.host=e.host,this.ssl=e.ssl??s2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=X_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<S3)throw new xe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_E(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new xe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new xe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new xe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new t6;switch(s.type){case"firstParty":return new i6(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new xe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=r2.get(n);s&&(ve("ComponentProvider","Removing Datastore"),r2.delete(n),s.terminate())})(this),Promise.resolve()}}function XI(t,e,n,s={}){t=Hr(t,Af);const o=uo(e),c=t._getSettings(),d={...c,emulatorOptions:t._getEmulatorOptions()},p=`${e}:${n}`;o&&(Yg(`https://${p}`),Qg("Firestore",!0)),c.host!==EE&&c.host!==p&&_l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:o,emulatorOptions:s};if(!li(g,d)&&(t._setSettings(g),s.mockUserToken)){let y,v;if(typeof s.mockUserToken=="string")y=s.mockUserToken,v=wn.MOCK_USER;else{y=d1(s.mockUserToken,t._app?.options.projectId);const _=s.mockUserToken.sub||s.mockUserToken.user_id;if(!_)throw new xe(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new wn(_)}t._authCredentials=new n6(new o_(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ga(this.firestore,e,this._query)}}class Lt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ra(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Su(n,Lt._jsonSchema))return new Lt(e,s||null,new Te(pt.fromString(n.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:Gt("string",Lt._jsonSchemaVersion),referencePath:Gt("string")};class ra extends ga{constructor(e,n,s){super(e,n,g0(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new Te(e))}withConverter(e){return new ra(this.firestore,e,this._path)}}function Xt(t,e,...n){if(t=It(t),l_("collection","path",e),t instanceof Af){const s=pt.fromString(e,...n);return xb(s),new ra(t,null,s)}{if(!(t instanceof Lt||t instanceof ra))throw new xe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(pt.fromString(e,...n));return xb(s),new ra(t.firestore,null,s)}}function ot(t,e,...n){if(t=It(t),arguments.length===1&&(e=u0.newId()),l_("doc","path",e),t instanceof Af){const s=pt.fromString(e,...n);return yb(s),new Lt(t,null,new Te(s))}{if(!(t instanceof Lt||t instanceof ra))throw new xe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(pt.fromString(e,...n));return yb(s),new Lt(t.firestore,t instanceof ra?t.converter:null,new Te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="AsyncQueue";class o2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new eE(this,"async_queue_retry"),this._c=()=>{const s=Zp();s&&ve(a2,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Zp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Zp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ii;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ml(e))throw e;ve(a2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,di("INTERNAL UNHANDLED ERROR: ",l2(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=j0.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ie(47125,{Pc:l2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function l2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class go extends Af{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new o2,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o2(e),this._firestoreClient=void 0,await e}}}function WI(t,e){const n=typeof t=="object"?t:Zg(),s=typeof t=="string"?t:Oh,o=cf(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=l1("firestore");c&&XI(o,...c)}return o}function P0(t){if(t._terminated)throw new xe(se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZI(t),t._firestoreClient}function ZI(t){const e=t._freezeSettings(),n=(function(o,c,d,p){return new _6(o,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,_E(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new $I(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Er(pn.fromBase64String(e))}catch(n){throw new xe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Er(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Su(e,Er._jsonSchema))return Er.fromBase64String(e.bytes)}}Er._jsonSchemaVersion="firestore/bytes/1.0",Er._jsonSchema={type:Gt("string",Er._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bs._jsonSchemaVersion}}static fromJSON(e){if(Su(e,bs._jsonSchema))return new bs(e.latitude,e.longitude)}}bs._jsonSchemaVersion="firestore/geoPoint/1.0",bs._jsonSchema={type:Gt("string",bs._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Su(e,_s._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new _s(e.vectorValues);throw new xe(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_s._jsonSchemaVersion="firestore/vectorValue/1.0",_s._jsonSchema={type:Gt("string",_s._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=/^__.*__$/;class e5{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new pa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cu(e,this.data,n,this.fieldTransforms)}}class TE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new pa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function AE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:t})}}class Sf{constructor(e,n,s,o,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(AE(this.Ac)&&JI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class t5{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||_f(e)}Cc(e,n,s,o=!1){return new Sf({Ac:e,methodName:n,Dc:s,path:mn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cf(t){const e=t._freezeSettings(),n=_f(t._databaseId);return new t5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function NE(t,e,n,s,o,c={}){const d=t.Cc(c.merge||c.mergeFields?2:0,e,n,o);V0("Data must be an object, but it was:",d,s);const p=CE(s,d);let g,y;if(c.merge)g=new nr(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const v=[];for(const _ of c.mergeFields){const T=Pg(e,_,n);if(!d.contains(T))throw new xe(se.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);jE(v,T)||v.push(T)}g=new nr(v),y=d.fieldTransforms.filter((_=>g.covers(_.field)))}else g=null,y=d.fieldTransforms;return new e5(new Hn(p),g,y)}class Rf extends ku{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rf}}function SE(t,e,n){return new Sf({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class M0 extends ku{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=SE(this,e,!0),s=this.vc.map((c=>yo(c,n))),o=new Nl(s);return new L_(e.path,o)}isEqual(e){return e instanceof M0&&li(this.vc,e.vc)}}class L0 extends ku{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=SE(this,e,!0),s=this.vc.map((c=>yo(c,n))),o=new Sl(s);return new L_(e.path,o)}isEqual(e){return e instanceof L0&&li(this.vc,e.vc)}}function n5(t,e,n,s){const o=t.Cc(1,e,n);V0("Data must be an object, but it was:",o,s);const c=[],d=Hn.empty();ma(s,((g,y)=>{const v=U0(e,g,n);y=It(y);const _=o.yc(v);if(y instanceof Rf)c.push(v);else{const T=yo(y,_);T!=null&&(c.push(v),d.set(v,T))}}));const p=new nr(c);return new TE(d,p,o.fieldTransforms)}function r5(t,e,n,s,o,c){const d=t.Cc(1,e,n),p=[Pg(e,s,n)],g=[o];if(c.length%2!=0)throw new xe(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)p.push(Pg(e,c[T])),g.push(c[T+1]);const y=[],v=Hn.empty();for(let T=p.length-1;T>=0;--T)if(!jE(y,p[T])){const I=p[T];let B=g[T];B=It(B);const U=d.yc(I);if(B instanceof Rf)y.push(I);else{const j=yo(B,U);j!=null&&(y.push(I),v.set(I,j))}}const _=new nr(y);return new TE(v,_,d.fieldTransforms)}function s5(t,e,n,s=!1){return yo(n,t.Cc(s?4:3,e))}function yo(t,e){if(RE(t=It(t)))return V0("Unsupported field value:",e,t),CE(t,e);if(t instanceof ku)return(function(s,o){if(!AE(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let d=0;for(const p of s){let g=yo(p,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(t,e)}return(function(s,o){if((s=It(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return $6(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=vt.fromDate(s);return{timestampValue:Bh(o.serializer,c)}}if(s instanceof vt){const c=new vt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Bh(o.serializer,c)}}if(s instanceof bs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Er)return{bytesValue:q_(o.serializer,s._byteString)};if(s instanceof Lt){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:b0(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof _s)return(function(d,p){return{mapValue:{fields:{[y_]:{stringValue:x_},[Ph]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return y0(p.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${ff(s)}`)})(t,e)}function CE(t,e){const n={};return d_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ma(t,((s,o)=>{const c=yo(o,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function RE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vt||t instanceof bs||t instanceof Er||t instanceof Lt||t instanceof ku||t instanceof _s)}function V0(t,e,n){if(!RE(n)||!c_(n)){const s=ff(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Pg(t,e,n){if((e=It(e))instanceof Nf)return e._internalPath;if(typeof e=="string")return U0(t,e);throw Hh("Field path arguments must be of type string or ",t,!1,void 0,n)}const i5=new RegExp("[~\\*/\\[\\]]");function U0(t,e,n){if(e.search(i5)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Nf(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hh(t,e,n,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new xe(se.INVALID_ARGUMENT,p+t+g)}function jE(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class a5 extends IE{data(){return super.data()}}function jf(t,e){return typeof e=="string"?U0(t,e):e instanceof Nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class B0{}class z0 extends B0{}function fi(t,e,...n){let s=[];e instanceof B0&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof F0)).length,p=c.filter((g=>g instanceof If)).length;if(d>1||d>0&&p>0)throw new xe(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)t=o._apply(t);return t}class If extends z0{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new If(e,n,s)}_apply(e){const n=this._parse(e);return kE(e._query,n),new ga(e.firestore,e.converter,Ag(e._query,n))}_parse(e){const n=Cf(e.firestore);return(function(c,d,p,g,y,v,_){let T;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new xe(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){u2(_,v);const B=[];for(const U of _)B.push(c2(g,c,U));T={arrayValue:{values:B}}}else T=c2(g,c,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||u2(_,v),T=s5(p,d,_,v==="in"||v==="not-in");return $t.create(y,v,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function gu(t,e,n){const s=e,o=jf("where",t);return If._create(o,s,n)}class F0 extends B0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new F0(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:$r.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const p=c.getFlattenedFilters();for(const g of p)kE(d,g),d=Ag(d,g)})(e._query,n),new ga(e.firestore,e.converter,Ag(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class q0 extends z0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new q0(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new xe(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new xe(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pu(c,d)})(e._query,this._field,this._direction);return new ga(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new Ll(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Ul(t,e="asc"){const n=e,s=jf("orderBy",t);return q0._create(s,n)}class H0 extends z0{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new H0(e,n,s)}_apply(e){return new ga(e.firestore,e.converter,Lh(e._query,this._limit,this._limitType))}}function l5(t){return H0._create("limit",t,"F")}function c2(t,e,n){if(typeof(n=It(n))=="string"){if(n==="")throw new xe(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!N_(e)&&n.indexOf("/")!==-1)throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(pt.fromString(n));if(!Te.isDocumentKey(s))throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Nb(t,new Te(s))}if(n instanceof Lt)return Nb(t,n._key);throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(n)}.`)}function u2(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kE(t,e){const n=(function(o,c){for(const d of o)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(t.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new xe(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class c5{convertValue(e,n="none"){switch(ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(la(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ma(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[Ph].arrayValue?.values?.map((s=>Mt(s.doubleValue)));return new _s(n)}convertGeoPoint(e){return new bs(Mt(e.latitude),Mt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=gf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(hu(e));default:return null}}convertTimestamp(e){const n=oa(e);return new vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=pt.fromString(e);rt(Q_(s),9688,{name:e});const o=new fu(s.get(1),s.get(3)),c=new Te(s.popFirst(5));return o.isEqual(n)||di(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class tu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class to extends IE{constructor(e,n,s,o,c,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(jf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=to._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}to._jsonSchemaVersion="firestore/documentSnapshot/1.0",to._jsonSchema={type:Gt("string",to._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class _h extends to{data(e={}){return super.data(e)}}class xl{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new tu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new _h(this._firestore,this._userDataWriter,s.key,s,new tu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new _h(o._firestore,o._userDataWriter,p.doc.key,p.doc,new tu(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new _h(o._firestore,o._userDataWriter,p.doc.key,p.doc,new tu(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),v=d.indexOf(p.doc.key)),{type:u5(p.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=u0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function u5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t){t=Hr(t,Lt);const e=Hr(t.firestore,go);return YI(P0(e),t._key).then((n=>d5(e,t,n)))}xl._jsonSchemaVersion="firestore/querySnapshot/1.0",xl._jsonSchema={type:Gt("string",xl._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class OE extends c5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}function _n(t){t=Hr(t,ga);const e=Hr(t.firestore,go),n=P0(e),s=new OE(e);return o5(t._query),QI(n,t._query).then((o=>new xl(e,s,t,o)))}function ha(t,e,n){t=Hr(t,Lt);const s=Hr(t.firestore,go),o=DE(t.converter,e,n);return Df(s,[NE(Cf(s),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,Tr.none())])}function Ur(t,e,n,...s){t=Hr(t,Lt);const o=Hr(t.firestore,go),c=Cf(o);let d;return d=typeof(e=It(e))=="string"||e instanceof Nf?r5(c,"updateDoc",t._key,e,n,s):n5(c,"updateDoc",t._key,e),Df(o,[d.toMutation(t._key,Tr.exists(!0))])}function $0(t){return Df(Hr(t.firestore,go),[new x0(t._key,Tr.none())])}function kf(t,e){const n=Hr(t.firestore,go),s=ot(t),o=DE(t.converter,e);return Df(n,[NE(Cf(t.firestore),"addDoc",s._key,o,t.converter!==null,{}).toMutation(s._key,Tr.exists(!1))]).then((()=>s))}function Df(t,e){return(function(s,o){const c=new ii;return s.asyncQueue.enqueueAndForget((async()=>MI(await KI(s),o,c))),c.promise})(P0(t),e)}function d5(t,e,n){const s=n.docs.get(e._key),o=new OE(t);return new to(t,o,e._key,s,new tu(n.hasPendingWrites,n.fromCache),e.converter)}function d2(...t){return new M0("arrayUnion",t)}function h2(...t){return new L0("arrayRemove",t)}(function(e,n=!0){(function(o){Ol=o})(ho),ro(new ia("firestore",((s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),p=new go(new r6(s.getProvider("auth-internal")),new a6(d,s.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new xe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fu(y.options.projectId,v)})(d,o),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),ys(fb,mb,e),ys(fb,mb,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="firebasestorage.googleapis.com",h5="storageBucket",f5=120*1e3,m5=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Ns{constructor(e,n,s=0){super(eg(e),`Firebase Storage: ${n} (${eg(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return eg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ts;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ts||(Ts={}));function eg(t){return"storage/"+t}function p5(){const t="An unknown error occurred, please check the error payload for server response.";return new Cs(Ts.UNKNOWN,t)}function g5(){return new Cs(Ts.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function y5(){return new Cs(Ts.CANCELED,"User canceled the upload/download.")}function x5(t){return new Cs(Ts.INVALID_URL,"Invalid URL '"+t+"'.")}function v5(t){return new Cs(Ts.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function f2(t){return new Cs(Ts.INVALID_ARGUMENT,t)}function ME(){return new Cs(Ts.APP_DELETED,"The Firebase app was deleted.")}function w5(t){return new Cs(Ts.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=zr.makeFromUrl(e,n)}catch{return new zr(e,"")}if(s.path==="")return s;throw v5(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function c(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(ie){ie.path_=decodeURIComponent(ie.path)}const v="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",I=new RegExp(`^https?://${_}/${v}/b/${o}/o${T}`,"i"),B={bucket:1,path:3},U=n===PE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",H=new RegExp(`^https?://${U}/${o}/${j}`,"i"),q=[{regex:p,indices:g,postModify:c},{regex:I,indices:B,postModify:y},{regex:H,indices:{bucket:1,path:2},postModify:y}];for(let ie=0;ie<q.length;ie++){const te=q[ie],de=te.regex.exec(e);if(de){const k=de[te.indices.bucket];let A=de[te.indices.path];A||(A=""),s=new zr(k,A),te.postModify(s);break}}if(s==null)throw x5(e);return s}}class b5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t,e,n){let s=1,o=null,c=null,d=!1,p=0;function g(){return p===2}let y=!1;function v(...j){y||(y=!0,e.apply(null,j))}function _(j){o=setTimeout(()=>{o=null,t(I,g())},j)}function T(){c&&clearTimeout(c)}function I(j,...H){if(y){T();return}if(j){T(),v.call(null,j,...H);return}if(g()||d){T(),v.call(null,j,...H);return}s<64&&(s*=2);let q;p===1?(p=2,q=0):q=(s+Math.random())*1e3,_(q)}let B=!1;function U(j){B||(B=!0,T(),!y&&(o!==null?(j||(p=2),clearTimeout(o),_(0)):j||(p=1)))}return _(0),c=setTimeout(()=>{d=!0,U(!0)},n),U}function E5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(t){return t!==void 0}function m2(t,e,n,s){if(s<e)throw f2(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw f2(`Invalid value for '${t}'. Expected ${n} or less.`)}function A5(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const o=e(s)+"="+e(t[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var $h;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($h||($h={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(t,e){const n=t>=500&&t<600,o=[408,429].indexOf(t)!==-1,c=e.indexOf(t)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,n,s,o,c,d,p,g,y,v,_,T=!0,I=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=_,this.retry=T,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,U)=>{this.resolve_=B,this.reject_=U,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new ah(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const p=c.getErrorCode()===$h.NO_ERROR,g=c.getStatus();if(!p||N5(g,this.additionalRetryCodes_)&&this.retry){const v=c.getErrorCode()===$h.ABORT;s(!1,new ah(!1,null,v));return}const y=this.successCodes_.indexOf(g)!==-1;s(!0,new ah(y,c))})},n=(s,o)=>{const c=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());T5(g)?c(g):c()}catch(g){d(g)}else if(p!==null){const g=p5();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(o.canceled){const g=this.appDelete_?ME():y5();d(g)}else{const g=g5();d(g)}};this.canceled_?n(!1,new ah(!1,null,!0)):this.backoffId_=_5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&E5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ah{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function C5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function R5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function j5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function I5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function k5(t,e,n,s,o,c,d=!0,p=!1){const g=A5(t.urlParams),y=t.url+g,v=Object.assign({},t.headers);return j5(v,e),C5(v,n),R5(v,c),I5(v,s),new S5(y,t.method,v,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,o,d,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function O5(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this._service=e,n instanceof zr?this._location=n:this._location=zr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Gh(e,n)}get root(){const e=new zr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return O5(this._location.path)}get storage(){return this._service}get parent(){const e=D5(this._location.path);if(e===null)return null;const n=new zr(this._location.bucket,e);return new Gh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw w5(e)}}function p2(t,e){const n=e?.[h5];return n==null?null:zr.makeFromBucketSpec(n,t)}function P5(t,e,n,s={}){t.host=`${e}:${n}`;const o=uo(e);o&&(Yg(`https://${t.host}/b`),Qg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=o?"https":"http";const{mockUserToken:c}=s;c&&(t._overrideAuthToken=typeof c=="string"?c:d1(c,t.app.options.projectId))}class M5{constructor(e,n,s,o,c,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=PE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=f5,this._maxUploadRetryTime=m5,this._requests=new Set,o!=null?this._bucket=zr.makeFromBucketSpec(o,this._host):this._bucket=p2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=zr.makeFromBucketSpec(this._url,e):this._bucket=p2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){m2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){m2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gh(this,e)}_makeRequest(e,n,s,o,c=!0){if(this._deleted)return new b5(ME());{const d=k5(e,this._appId,s,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const g2="@firebase/storage",y2="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="storage";function L5(t=Zg(),e){t=It(t);const s=cf(t,LE).getImmediate({identifier:e}),o=l1("storage");return o&&V5(s,...o),s}function V5(t,e,n,s={}){P5(t,e,n,s)}function U5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new M5(n,s,o,e,ho)}function B5(){ro(new ia(LE,U5,"PUBLIC").setMultipleInstances(!0)),ys(g2,y2,""),ys(g2,y2,"esm2020")}B5();const Mg={apiKey:"AIzaSyDzEL20_gjVbq1gmskOJ2H2mFUocpamJzU",authDomain:"psgshop-62518.firebaseapp.com",projectId:"psgshop-62518",storageBucket:"psgshop-62518.firebasestorage.app",messagingSenderId:"951270215395",appId:"1:951270215395:web:d6c1ec0787e43351c17fd6"};console.log("Firebase config values:",{apiKey:"***",authDomain:"psgshop-62518.firebaseapp.com",projectId:"psgshop-62518",storageBucket:"psgshop-62518.firebasestorage.app",messagingSenderId:"951270215395",appId:"1:951270215395:web:d6c1ec0787e43351c17fd6"});const VE=Object.values(Mg).every(t=>t&&t!=="");console.log("Is Firebase config valid:",VE);let oh,je,qr,z5;if(VE)try{console.log("Initializing Firebase app..."),oh=m1(Mg),console.log("Firebase app initialized successfully"),console.log("Initializing Firestore..."),je=WI(oh),console.log("Firestore initialized successfully"),console.log("Initializing Auth..."),qr=Wj(oh),UR(qr,q1).then(()=>{console.log("Auth persistence set to browser local storage")}).catch(t=>{console.error("Error setting auth persistence:",t)}),console.log("Auth initialized successfully"),console.log("Initializing Storage..."),z5=L5(oh),console.log("Storage initialized successfully")}catch(t){console.error("Firebase initialization error:",t),console.error("Error code:",t.code),console.error("Error message:",t.message)}else{const t=Object.entries(Mg).filter(([e,n])=>!n||n==="").map(([e])=>e);console.warn("Firebase configuration is missing or incomplete. Missing keys:",t),console.warn("Please check your .env file and ensure all Firebase config variables are set.")}const UE=R.createContext(),F5=(t,e)=>{switch(e.type){case"SET_CART":return{...t,items:e.payload.items||[],coupon:e.payload.coupon||null};case"ADD_TO_CART":const n=t.items.find(g=>g.id===e.payload.id);if(n){const g=n.quantity+(e.payload.quantity||1),y=e.payload.stock!==void 0?e.payload.stock:1/0;return g>y?t:{...t,items:t.items.map(v=>v.id===e.payload.id?{...v,quantity:g}:v)}}const s=e.payload.quantity||1,o=e.payload.stock!==void 0?e.payload.stock:1/0;return s>o?t:{...t,items:[...t.items,{...e.payload,quantity:s}]};case"REMOVE_FROM_CART":return{...t,items:t.items.filter(g=>g.id!==e.payload)};case"UPDATE_QUANTITY":const c=t.items.find(g=>g.id===e.payload.id);if(!c)return t;const d=c.stock!==void 0?c.stock:1/0,p=Math.min(e.payload.quantity,d);return p<=0?{...t,items:t.items.filter(g=>g.id!==e.payload.id)}:{...t,items:t.items.map(g=>g.id===e.payload.id?{...g,quantity:p}:g)};case"CLEAR_CART":return{...t,items:[],coupon:null};case"APPLY_COUPON":return{...t,coupon:e.payload};case"REMOVE_COUPON":return{...t,coupon:null};default:return t}},q5=({children:t})=>{const[e,n]=R.useReducer(F5,{items:[],coupon:null}),[s,o]=R.useState(!0),{currentUser:c}=Qr(),d=R.useRef(!0);console.log("CartProvider initialized with currentUser:",c);const p=R.useCallback(async()=>{if(o(!0),!c){console.log("No user logged in, clearing cart"),n({type:"SET_CART",payload:{items:[],coupon:null}}),o(!1);return}try{console.log("Attempting to load cart from Firestore for user:",c.uid);const j=ot(je,"carts",c.uid),H=await Gr(j);if(H.exists()){const F=H.data();console.log("Cart data loaded from Firestore:",F),n({type:"SET_CART",payload:{items:F.items||[],coupon:F.coupon||null}})}else console.log("No cart found for user, initializing empty cart"),n({type:"SET_CART",payload:{items:[],coupon:null}})}catch(j){console.error("Error loading cart from Firestore:",j),console.error("Error details:",j.code,j.message),n({type:"SET_CART",payload:{items:[],coupon:null}})}finally{o(!1)}},[c]);R.useEffect(()=>{console.log("CartProvider useEffect triggered with currentUser:",c),p()},[c,p]),R.useEffect(()=>{if(!c||s||d.current){d.current&&(console.log("Skipping save during initial cart load"),d.current=!1);return}const j=async()=>{console.log("Saving cart to Firestore:",{userId:c.uid,itemsCount:e.items.length,items:e.items,coupon:e.coupon});try{const F=ot(je,"carts",c.uid),q={userId:c.uid,items:e.items.map(te=>({...te,lastUpdated:Date.now()})),coupon:e.coupon,updatedAt:new Date().toISOString(),timestamp:Date.now()};await ha(F,q,{merge:!0}),console.log("Successfully saved cart to Firestore with data:",q),(await Gr(F)).exists()?console.log("Verification: Cart successfully saved and can be read back"):console.error("Verification: Failed to verify cart save")}catch(F){console.error("Error saving cart to Firestore:",F),console.error("Error details:",F.code,F.message)}},H=setTimeout(()=>{j()},500);return()=>clearTimeout(H)},[e.items,e.coupon,c,s]);const g=j=>{console.log("Adding to cart:",j),n({type:"ADD_TO_CART",payload:j})},y=async j=>{if(console.log("Removing from cart:",j),n({type:"REMOVE_FROM_CART",payload:j}),c)try{const H=ot(je,"carts",c.uid)}catch(H){console.error("Error removing item from Firestore cart:",H)}},v=(j,H)=>{if(console.log("Updating quantity:",j,H),H<=0){y(j);return}n({type:"UPDATE_QUANTITY",payload:{id:j,quantity:H}})},_=async()=>{if(n({type:"CLEAR_CART"}),c)try{const j=ot(je,"carts",c.uid);await ha(j,{userId:c.uid,items:[],coupon:null,updatedAt:new Date})}catch(j){console.error("Error clearing cart in Firestore:",j)}},T=()=>e.items.reduce((j,H)=>j+H.quantity,0),I=()=>{const j=e.items.reduce((H,F)=>H+F.price*F.quantity,0);if(e.coupon){if(e.coupon.discountType==="percentage")return j*(1-e.coupon.discountValue/100);if(e.coupon.discountType==="fixed")return Math.max(0,j-e.coupon.discountValue)}return j},B=async j=>{try{const H=Xt(je,"coupons"),F=fi(H,gu("code","==",j)),q=await _n(F);if(q.empty)throw new Error("Cupón no válido");const ie=q.docs[0],te={id:ie.id,...ie.data()};if(!te.isActive)throw new Error("Este cupón no está activo");const de=new Date;if(te.expiryDate&&de>te.expiryDate.toDate())throw new Error("Este cupón ha expirado");return n({type:"APPLY_COUPON",payload:te}),te}catch(H){throw console.error("Error applying coupon:",H),H}},U=()=>{n({type:"REMOVE_COUPON"})};return l.jsx(UE.Provider,{value:{items:e.items,coupon:e.coupon,loading:s,addToCart:g,removeFromCart:y,updateQuantity:v,clearCart:_,getTotalItems:T,getTotalPrice:I,applyCoupon:B,removeCoupon:U},children:t})},Bl=()=>{const t=R.useContext(UE);if(!t)throw new Error("useCart must be used within a CartProvider");return t},BE=R.createContext(),Of=()=>R.useContext(BE),H5=({children:t})=>{const[e,n]=R.useState([]),[s,o]=R.useState(!0),{currentUser:c}=Qr(),d=R.useRef(!0),p=R.useCallback(async()=>{if(o(!0),!c){n([]),o(!1),d.current=!1;return}try{const B=ot(je,"wishlists",c.uid),U=await Gr(B);if(U.exists()){const j=U.data();n(j.items||[])}else n([])}catch(B){console.error("Error loading wishlist from Firestore:",B),n([])}finally{o(!1),d.current=!1}},[c]);R.useEffect(()=>{p()},[c,p]),R.useEffect(()=>{if(!c||s||d.current)return;const B=async()=>{try{const j=ot(je,"wishlists",c.uid),H={userId:c.uid,items:e.map(q=>({...q,lastUpdated:Date.now()})),updatedAt:new Date().toISOString(),timestamp:Date.now()};await ha(j,H,{merge:!0}),(await Gr(j)).exists()||console.error("Verification: Failed to verify wishlist save")}catch(j){console.error("Error saving wishlist to Firestore:",j)}},U=setTimeout(()=>{B()},500);return()=>clearTimeout(U)},[e,c,s]);const g=B=>{n(U=>U.find(H=>H.id===B.id)?U:[...U,{...B}])},y=B=>{n(U=>U.filter(j=>j.id!==B))},v=B=>e.some(U=>U.id===B),_=async()=>{if(n([]),c)try{const B=ot(je,"wishlists",c.uid);await ha(B,{userId:c.uid,items:[],updatedAt:new Date})}catch(B){console.error("Error clearing wishlist in Firestore:",B)}},T=()=>e.length,I=()=>{p()};return l.jsx(BE.Provider,{value:{items:e,loading:s,addToWishlist:g,removeFromWishlist:y,isInWishlist:v,clearWishlist:_,getTotalItems:T,refreshWishlist:I},children:t})},$5=async()=>{try{const t=Xt(je,"products");return(await _n(t)).docs.map(s=>({id:s.id,...s.data()}))}catch(t){throw console.error("Error fetching products:",t),t}},G5=async t=>{try{const e=ot(je,"products",t),n=await Gr(e);if(n.exists())return{id:n.id,...n.data()};throw new Error("Product not found")}catch(e){throw console.error("Error fetching product:",e),e}},yu=({rating:t,size:e="md"})=>{const n=Math.max(0,Math.min(5,t||0)),s=Math.floor(n),o=n-s,c={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},d=c[e]||c.md,p=[];for(let y=0;y<s;y++)p.push(l.jsx("svg",{className:`${d} text-yellow-400`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},`full-${y}`));if(o>0){const y=o*100;p.push(l.jsxs("div",{className:"relative",children:[l.jsx("svg",{className:`${d} text-gray-300`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),l.jsx("div",{className:"absolute top-0 left-0 overflow-hidden",style:{width:`${y}%`},children:l.jsx("svg",{className:`${d} text-yellow-400`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})]},"fractional"))}const g=p.length;for(let y=g;y<5;y++)p.push(l.jsx("svg",{className:`${d} text-gray-300`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},`empty-${y}`));return l.jsxs("div",{className:"flex items-center",children:[p,l.jsx("span",{className:"ml-1 text-gray-600 text-sm",children:n.toFixed(1)})]})};/*!
* sweetalert2 v11.23.0
* Released under the MIT License.
*/function zE(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function K5(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function x2(t,e){return t.get(zE(t,e))}function Y5(t,e,n){K5(t,e),e.set(t,n)}function Q5(t,e,n){return t.set(zE(t,e),n),n}const X5=100,Ne={},W5=()=>{Ne.previousActiveElement instanceof HTMLElement?(Ne.previousActiveElement.focus(),Ne.previousActiveElement=null):document.body&&document.body.focus()},Z5=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,s=window.scrollY;Ne.restoreFocusTimeout=setTimeout(()=>{W5(),e()},X5),window.scrollTo(n,s)}),FE="swal2-",J5=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],J=J5.reduce((t,e)=>(t[e]=FE+e,t),{}),ek=["success","warning","info","question","error"],Kh=ek.reduce((t,e)=>(t[e]=FE+e,t),{}),qE="SweetAlert2:",G0=t=>t.charAt(0).toUpperCase()+t.slice(1),kn=t=>{console.warn(`${qE} ${typeof t=="object"?t.join(" "):t}`)},xo=t=>{console.error(`${qE} ${t}`)},v2=[],tk=t=>{v2.includes(t)||(v2.push(t),kn(t))},HE=(t,e=null)=>{tk(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Pf=t=>typeof t=="function"?t():t,K0=t=>t&&typeof t.toPromise=="function",Du=t=>K0(t)?t.toPromise():Promise.resolve(t),Y0=t=>t&&Promise.resolve(t)===t,Dn=()=>document.body.querySelector(`.${J.container}`),Ou=t=>{const e=Dn();return e?e.querySelector(t):null},sr=t=>Ou(`.${t}`),Je=()=>sr(J.popup),zl=()=>sr(J.icon),nk=()=>sr(J["icon-content"]),$E=()=>sr(J.title),Q0=()=>sr(J["html-container"]),GE=()=>sr(J.image),X0=()=>sr(J["progress-steps"]),Mf=()=>sr(J["validation-message"]),As=()=>Ou(`.${J.actions} .${J.confirm}`),Fl=()=>Ou(`.${J.actions} .${J.cancel}`),vo=()=>Ou(`.${J.actions} .${J.deny}`),rk=()=>sr(J["input-label"]),ql=()=>Ou(`.${J.loader}`),Pu=()=>sr(J.actions),KE=()=>sr(J.footer),Lf=()=>sr(J["timer-progress-bar"]),W0=()=>sr(J.close),sk=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Z0=()=>{const t=Je();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((c,d)=>{const p=parseInt(c.getAttribute("tabindex")||"0"),g=parseInt(d.getAttribute("tabindex")||"0");return p>g?1:p<g?-1:0}),s=t.querySelectorAll(sk),o=Array.from(s).filter(c=>c.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(o))].filter(c=>Gn(c))},J0=()=>ai(document.body,J.shown)&&!ai(document.body,J["toast-shown"])&&!ai(document.body,J["no-backdrop"]),Vf=()=>{const t=Je();return t?ai(t,J.toast):!1},ik=()=>{const t=Je();return t?t.hasAttribute("data-loading"):!1},ir=(t,e)=>{if(t.textContent="",e){const s=new DOMParser().parseFromString(e,"text/html"),o=s.querySelector("head");o&&Array.from(o.childNodes).forEach(d=>{t.appendChild(d)});const c=s.querySelector("body");c&&Array.from(c.childNodes).forEach(d=>{d instanceof HTMLVideoElement||d instanceof HTMLAudioElement?t.appendChild(d.cloneNode(!0)):t.appendChild(d)})}},ai=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let s=0;s<n.length;s++)if(!t.classList.contains(n[s]))return!1;return!0},ak=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(J).includes(n)&&!Object.values(Kh).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},rr=(t,e,n)=>{if(ak(t,e),!e.customClass)return;const s=e.customClass[n];if(s){if(typeof s!="string"&&!s.forEach){kn(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof s}"`);return}nt(t,s)}},Uf=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${J.popup} > .${J[e]}`);case"checkbox":return t.querySelector(`.${J.popup} > .${J.checkbox} input`);case"radio":return t.querySelector(`.${J.popup} > .${J.radio} input:checked`)||t.querySelector(`.${J.popup} > .${J.radio} input:first-child`);case"range":return t.querySelector(`.${J.popup} > .${J.range} input`);default:return t.querySelector(`.${J.popup} > .${J.input}`)}},YE=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},QE=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(s=>{Array.isArray(t)?t.forEach(o=>{n?o.classList.add(s):o.classList.remove(s)}):n?t.classList.add(s):t.classList.remove(s)}))},nt=(t,e)=>{QE(t,e,!0)},Sr=(t,e)=>{QE(t,e,!1)},Zi=(t,e)=>{const n=Array.from(t.children);for(let s=0;s<n.length;s++){const o=n[s];if(o instanceof HTMLElement&&ai(o,e))return o}},no=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},an=(t,e="flex")=>{t&&(t.style.display=e)},Tn=t=>{t&&(t.style.display="none")},ey=(t,e="block")=>{t&&new MutationObserver(()=>{Mu(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},w2=(t,e,n,s)=>{const o=t.querySelector(e);o&&o.style.setProperty(n,s)},Mu=(t,e,n="flex")=>{e?an(t,n):Tn(t)},Gn=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),ok=()=>!Gn(As())&&!Gn(vo())&&!Gn(Fl()),Lg=t=>t.scrollHeight>t.clientHeight,lk=(t,e)=>{let n=t;for(;n&&n!==e;){if(Lg(n))return!0;n=n.parentElement}return!1},XE=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),s=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||s>0},ty=(t,e=!1)=>{const n=Lf();n&&Gn(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},ck=()=>{const t=Lf();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),s=e/n*100;t.style.width=`${s}%`},uk=()=>typeof window>"u"||typeof document>"u",dk=`
 <div aria-labelledby="${J.title}" aria-describedby="${J["html-container"]}" class="${J.popup}" tabindex="-1">
   <button type="button" class="${J.close}"></button>
   <ul class="${J["progress-steps"]}"></ul>
   <div class="${J.icon}"></div>
   <img class="${J.image}" />
   <h2 class="${J.title}" id="${J.title}"></h2>
   <div class="${J["html-container"]}" id="${J["html-container"]}"></div>
   <input class="${J.input}" id="${J.input}" />
   <input type="file" class="${J.file}" />
   <div class="${J.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${J.select}" id="${J.select}"></select>
   <div class="${J.radio}"></div>
   <label class="${J.checkbox}">
     <input type="checkbox" id="${J.checkbox}" />
     <span class="${J.label}"></span>
   </label>
   <textarea class="${J.textarea}" id="${J.textarea}"></textarea>
   <div class="${J["validation-message"]}" id="${J["validation-message"]}"></div>
   <div class="${J.actions}">
     <div class="${J.loader}"></div>
     <button type="button" class="${J.confirm}"></button>
     <button type="button" class="${J.deny}"></button>
     <button type="button" class="${J.cancel}"></button>
   </div>
   <div class="${J.footer}"></div>
   <div class="${J["timer-progress-bar-container"]}">
     <div class="${J["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),hk=()=>{const t=Dn();return t?(t.remove(),Sr([document.documentElement,document.body],[J["no-backdrop"],J["toast-shown"],J["has-column"]]),!0):!1},Xa=()=>{Ne.currentInstance.resetValidationMessage()},fk=()=>{const t=Je(),e=Zi(t,J.input),n=Zi(t,J.file),s=t.querySelector(`.${J.range} input`),o=t.querySelector(`.${J.range} output`),c=Zi(t,J.select),d=t.querySelector(`.${J.checkbox} input`),p=Zi(t,J.textarea);e.oninput=Xa,n.onchange=Xa,c.onchange=Xa,d.onchange=Xa,p.oninput=Xa,s.oninput=()=>{Xa(),o.value=s.value},s.onchange=()=>{Xa(),o.value=s.value}},mk=t=>typeof t=="string"?document.querySelector(t):t,pk=t=>{const e=Je();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},gk=t=>{window.getComputedStyle(t).direction==="rtl"&&nt(Dn(),J.rtl)},yk=t=>{const e=hk();if(uk()){xo("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=J.container,e&&nt(n,J["no-transition"]),ir(n,dk),n.dataset.swal2Theme=t.theme;const s=mk(t.target);s.appendChild(n),t.topLayer&&(n.setAttribute("popover",""),n.showPopover()),pk(t),gk(s),fk()},ny=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?xk(t,e):t&&ir(e,t)},xk=(t,e)=>{t.jquery?vk(e,t):ir(e,t.toString())},vk=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},wk=(t,e)=>{const n=Pu(),s=ql();!n||!s||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?Tn(n):an(n),rr(n,e,"actions"),bk(n,s,e),ir(s,e.loaderHtml||""),rr(s,e,"loader"))};function bk(t,e,n){const s=As(),o=vo(),c=Fl();!s||!o||!c||(ng(s,"confirm",n),ng(o,"deny",n),ng(c,"cancel",n),_k(s,o,c,n),n.reverseButtons&&(n.toast?(t.insertBefore(c,s),t.insertBefore(o,s)):(t.insertBefore(c,e),t.insertBefore(o,e),t.insertBefore(s,e))))}function _k(t,e,n,s){if(!s.buttonsStyling){Sr([t,e,n],J.styled);return}nt([t,e,n],J.styled),s.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",s.confirmButtonColor),s.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",s.denyButtonColor),s.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",s.cancelButtonColor),tg(t),tg(e),tg(n)}function tg(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function ng(t,e,n){const s=G0(e);Mu(t,n[`show${s}Button`],"inline-block"),ir(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=J[e],rr(t,n,`${e}Button`)}const Ek=(t,e)=>{const n=W0();n&&(ir(n,e.closeButtonHtml||""),rr(n,e,"closeButton"),Mu(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},Tk=(t,e)=>{const n=Dn();n&&(Ak(n,e.backdrop),Nk(n,e.position),Sk(n,e.grow),rr(n,e,"container"))};function Ak(t,e){typeof e=="string"?t.style.background=e:e||nt([document.documentElement,document.body],J["no-backdrop"])}function Nk(t,e){e&&(e in J?nt(t,J[e]):(kn('The "position" parameter is not valid, defaulting to "center"'),nt(t,J.center)))}function Sk(t,e){e&&nt(t,J[`grow-${e}`])}var gt={innerParams:new WeakMap,domCache:new WeakMap};const Ck=["input","file","range","select","radio","checkbox","textarea"],Rk=(t,e)=>{const n=Je();if(!n)return;const s=gt.innerParams.get(t),o=!s||e.input!==s.input;Ck.forEach(c=>{const d=Zi(n,J[c]);d&&(kk(c,e.inputAttributes),d.className=J[c],o&&Tn(d))}),e.input&&(o&&jk(e),Dk(e))},jk=t=>{if(!t.input)return;if(!Pt[t.input]){xo(`Unexpected type of input! Expected ${Object.keys(Pt).join(" | ")}, got "${t.input}"`);return}const e=WE(t.input);if(!e)return;const n=Pt[t.input](e,t);an(e),t.inputAutoFocus&&setTimeout(()=>{YE(n)})},Ik=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},kk=(t,e)=>{const n=Je();if(!n)return;const s=Uf(n,t);if(s){Ik(s);for(const o in e)s.setAttribute(o,e[o])}},Dk=t=>{if(!t.input)return;const e=WE(t.input);e&&rr(e,t,"input")},ry=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},Lu=(t,e,n)=>{if(n.inputLabel){const s=document.createElement("label"),o=J["input-label"];s.setAttribute("for",t.id),s.className=o,typeof n.customClass=="object"&&nt(s,n.customClass.inputLabel),s.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",s)}},WE=t=>{const e=Je();if(e)return Zi(e,J[t]||J.input)},Yh=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:Y0(e)||kn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Pt={};Pt.text=Pt.email=Pt.password=Pt.number=Pt.tel=Pt.url=Pt.search=Pt.date=Pt["datetime-local"]=Pt.time=Pt.week=Pt.month=(t,e)=>(Yh(t,e.inputValue),Lu(t,t,e),ry(t,e),t.type=e.input,t);Pt.file=(t,e)=>(Lu(t,t,e),ry(t,e),t);Pt.range=(t,e)=>{const n=t.querySelector("input"),s=t.querySelector("output");return Yh(n,e.inputValue),n.type=e.input,Yh(s,e.inputValue),Lu(n,t,e),t};Pt.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");ir(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return Lu(t,t,e),t};Pt.radio=t=>(t.textContent="",t);Pt.checkbox=(t,e)=>{const n=Uf(Je(),"checkbox");n.value="1",n.checked=!!e.inputValue;const s=t.querySelector("span");return ir(s,e.inputPlaceholder||e.inputLabel),n};Pt.textarea=(t,e)=>{Yh(t,e.inputValue),ry(t,e),Lu(t,t,e);const n=s=>parseInt(window.getComputedStyle(s).marginLeft)+parseInt(window.getComputedStyle(s).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const s=parseInt(window.getComputedStyle(Je()).width),o=()=>{if(!document.body.contains(t))return;const c=t.offsetWidth+n(t);c>s?Je().style.width=`${c}px`:no(Je(),"width",e.width)};new MutationObserver(o).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const Ok=(t,e)=>{const n=Q0();n&&(ey(n),rr(n,e,"htmlContainer"),e.html?(ny(e.html,n),an(n,"block")):e.text?(n.textContent=e.text,an(n,"block")):Tn(n),Rk(t,e))},Pk=(t,e)=>{const n=KE();n&&(ey(n),Mu(n,e.footer,"block"),e.footer&&ny(e.footer,n),rr(n,e,"footer"))},Mk=(t,e)=>{const n=gt.innerParams.get(t),s=zl();if(!s)return;if(n&&e.icon===n.icon){_2(s,e),b2(s,e);return}if(!e.icon&&!e.iconHtml){Tn(s);return}if(e.icon&&Object.keys(Kh).indexOf(e.icon)===-1){xo(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),Tn(s);return}an(s),_2(s,e),b2(s,e),nt(s,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",ZE)},b2=(t,e)=>{for(const[n,s]of Object.entries(Kh))e.icon!==n&&Sr(t,s);nt(t,e.icon&&Kh[e.icon]),Uk(t,e),ZE(),rr(t,e,"icon")},ZE=()=>{const t=Je();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let s=0;s<n.length;s++)n[s].style.backgroundColor=e},Lk=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,Vk=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,_2=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,s="";e.iconHtml?s=E2(e.iconHtml):e.icon==="success"?(s=Lk(e),n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?s=Vk:e.icon&&(s=E2({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==s.trim()&&ir(t,s)},Uk=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])w2(t,n,"background-color",e.iconColor);w2(t,".swal2-success-ring","border-color",e.iconColor)}},E2=t=>`<div class="${J["icon-content"]}">${t}</div>`,Bk=(t,e)=>{const n=GE();if(n){if(!e.imageUrl){Tn(n);return}an(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),no(n,"width",e.imageWidth),no(n,"height",e.imageHeight),n.className=J.image,rr(n,e,"image")}};let sy=!1,JE=0,eT=0,tT=0,nT=0;const zk=t=>{t.addEventListener("mousedown",Qh),document.body.addEventListener("mousemove",Xh),t.addEventListener("mouseup",Wh),t.addEventListener("touchstart",Qh),document.body.addEventListener("touchmove",Xh),t.addEventListener("touchend",Wh)},Fk=t=>{t.removeEventListener("mousedown",Qh),document.body.removeEventListener("mousemove",Xh),t.removeEventListener("mouseup",Wh),t.removeEventListener("touchstart",Qh),document.body.removeEventListener("touchmove",Xh),t.removeEventListener("touchend",Wh)},Qh=t=>{const e=Je();if(t.target===e||zl().contains(t.target)){sy=!0;const n=rT(t);JE=n.clientX,eT=n.clientY,tT=parseInt(e.style.insetInlineStart)||0,nT=parseInt(e.style.insetBlockStart)||0,nt(e,"swal2-dragging")}},Xh=t=>{const e=Je();if(sy){let{clientX:n,clientY:s}=rT(t);e.style.insetInlineStart=`${tT+(n-JE)}px`,e.style.insetBlockStart=`${nT+(s-eT)}px`}},Wh=()=>{const t=Je();sy=!1,Sr(t,"swal2-dragging")},rT=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},qk=(t,e)=>{const n=Dn(),s=Je();if(!(!n||!s)){if(e.toast){no(n,"width",e.width),s.style.width="100%";const o=ql();o&&s.insertBefore(o,zl())}else no(s,"width",e.width);no(s,"padding",e.padding),e.color&&(s.style.color=e.color),e.background&&(s.style.background=e.background),Tn(Mf()),Hk(s,e),e.draggable&&!e.toast?(nt(s,J.draggable),zk(s)):(Sr(s,J.draggable),Fk(s))}},Hk=(t,e)=>{const n=e.showClass||{};t.className=`${J.popup} ${Gn(t)?n.popup:""}`,e.toast?(nt([document.documentElement,document.body],J["toast-shown"]),nt(t,J.toast)):nt(t,J.modal),rr(t,e,"popup"),typeof e.customClass=="string"&&nt(t,e.customClass),e.icon&&nt(t,J[`icon-${e.icon}`])},$k=(t,e)=>{const n=X0();if(!n)return;const{progressSteps:s,currentProgressStep:o}=e;if(!s||s.length===0||o===void 0){Tn(n);return}an(n),n.textContent="",o>=s.length&&kn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),s.forEach((c,d)=>{const p=Gk(c);if(n.appendChild(p),d===o&&nt(p,J["active-progress-step"]),d!==s.length-1){const g=Kk(e);n.appendChild(g)}})},Gk=t=>{const e=document.createElement("li");return nt(e,J["progress-step"]),ir(e,t),e},Kk=t=>{const e=document.createElement("li");return nt(e,J["progress-step-line"]),t.progressStepsDistance&&no(e,"width",t.progressStepsDistance),e},Yk=(t,e)=>{const n=$E();n&&(ey(n),Mu(n,e.title||e.titleText,"block"),e.title&&ny(e.title,n),e.titleText&&(n.innerText=e.titleText),rr(n,e,"title"))},sT=(t,e)=>{qk(t,e),Tk(t,e),$k(t,e),Mk(t,e),Bk(t,e),Yk(t,e),Ek(t,e),Ok(t,e),wk(t,e),Pk(t,e);const n=Je();typeof e.didRender=="function"&&n&&e.didRender(n),Ne.eventEmitter.emit("didRender",n)},Qk=()=>Gn(Je()),iT=()=>{var t;return(t=As())===null||t===void 0?void 0:t.click()},Xk=()=>{var t;return(t=vo())===null||t===void 0?void 0:t.click()},Wk=()=>{var t;return(t=Fl())===null||t===void 0?void 0:t.click()},Hl=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),aT=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},Zk=(t,e,n)=>{aT(t),e.toast||(t.keydownHandler=s=>eD(e,s,n),t.keydownTarget=e.keydownListenerCapture?window:Je(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},Vg=(t,e)=>{var n;const s=Z0();if(s.length){t=t+e,t===-2&&(t=s.length-1),t===s.length?t=0:t===-1&&(t=s.length-1),s[t].focus();return}(n=Je())===null||n===void 0||n.focus()},oT=["ArrowRight","ArrowDown"],Jk=["ArrowLeft","ArrowUp"],eD=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?tD(e,t):e.key==="Tab"?nD(e):[...oT,...Jk].includes(e.key)?rD(e.key):e.key==="Escape"&&sD(e,t,n)))},tD=(t,e)=>{if(!Pf(e.allowEnterKey))return;const n=Uf(Je(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;iT(),t.preventDefault()}},nD=t=>{const e=t.target,n=Z0();let s=-1;for(let o=0;o<n.length;o++)if(e===n[o]){s=o;break}t.shiftKey?Vg(s,-1):Vg(s,1),t.stopPropagation(),t.preventDefault()},rD=t=>{const e=Pu(),n=As(),s=vo(),o=Fl();if(!e||!n||!s||!o)return;const c=[n,s,o];if(document.activeElement instanceof HTMLElement&&!c.includes(document.activeElement))return;const d=oT.includes(t)?"nextElementSibling":"previousElementSibling";let p=document.activeElement;if(p){for(let g=0;g<e.children.length;g++){if(p=p[d],!p)return;if(p instanceof HTMLButtonElement&&Gn(p))break}p instanceof HTMLButtonElement&&p.focus()}},sD=(t,e,n)=>{t.preventDefault(),Pf(e.allowEscapeKey)&&n(Hl.esc)};var jl={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const iD=()=>{const t=Dn();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},lT=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},cT=typeof window<"u"&&!!window.GestureEvent,aD=()=>{if(cT&&!ai(document.body,J.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,nt(document.body,J.iosfix),oD()}},oD=()=>{const t=Dn();if(!t)return;let e;t.ontouchstart=n=>{e=lD(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},lD=t=>{const e=t.target,n=Dn(),s=Q0();return!n||!s||cD(t)||uD(t)?!1:e===n||!Lg(n)&&e instanceof HTMLElement&&!lk(e,s)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(Lg(s)&&s.contains(e))},cD=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",uD=t=>t.touches&&t.touches.length>1,dD=()=>{if(ai(document.body,J.iosfix)){const t=parseInt(document.body.style.top,10);Sr(document.body,J.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},hD=()=>{const t=document.createElement("div");t.className=J["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let vl=null;const fD=t=>{vl===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(vl=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${vl+hD()}px`)},mD=()=>{vl!==null&&(document.body.style.paddingRight=`${vl}px`,vl=null)};function uT(t,e,n,s){Vf()?T2(t,s):(Z5(n).then(()=>T2(t,s)),aT(Ne)),cT?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),J0()&&(mD(),dD(),lT()),pD()}function pD(){Sr([document.documentElement,document.body],[J.shown,J["height-auto"],J["no-backdrop"],J["toast-shown"]])}function Ji(t){t=yD(t);const e=jl.swalPromiseResolve.get(this),n=gD(this);this.isAwaitingPromise?t.isDismissed||(Vu(this),e(t)):n&&e(t)}const gD=t=>{const e=Je();if(!e)return!1;const n=gt.innerParams.get(t);if(!n||ai(e,n.hideClass.popup))return!1;Sr(e,n.showClass.popup),nt(e,n.hideClass.popup);const s=Dn();return Sr(s,n.showClass.backdrop),nt(s,n.hideClass.backdrop),xD(t,e,n),!0};function dT(t){const e=jl.swalPromiseReject.get(this);Vu(this),e&&e(t)}const Vu=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,gt.innerParams.get(t)||t._destroy())},yD=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),xD=(t,e,n)=>{var s;const o=Dn(),c=XE(e);typeof n.willClose=="function"&&n.willClose(e),(s=Ne.eventEmitter)===null||s===void 0||s.emit("willClose",e),c?vD(t,e,o,n.returnFocus,n.didClose):uT(t,o,n.returnFocus,n.didClose)},vD=(t,e,n,s,o)=>{Ne.swalCloseEventFinishedCallback=uT.bind(null,t,n,s,o);const c=function(d){if(d.target===e){var p;(p=Ne.swalCloseEventFinishedCallback)===null||p===void 0||p.call(Ne),delete Ne.swalCloseEventFinishedCallback,e.removeEventListener("animationend",c),e.removeEventListener("transitionend",c)}};e.addEventListener("animationend",c),e.addEventListener("transitionend",c)},T2=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=Ne.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},Il=t=>{let e=Je();if(e||new Ae,e=Je(),!e)return;const n=ql();Vf()?Tn(zl()):wD(e,t),an(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},wD=(t,e)=>{const n=Pu(),s=ql();!n||!s||(!e&&Gn(As())&&(e=As()),an(n),e&&(Tn(e),s.setAttribute("data-button-to-replace",e.className),n.insertBefore(s,e)),nt([t,n],J.loading))},bD=(t,e)=>{e.input==="select"||e.input==="radio"?ND(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(K0(e.inputValue)||Y0(e.inputValue))&&(Il(As()),SD(t,e))},_D=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return ED(n);case"radio":return TD(n);case"file":return AD(n);default:return e.inputAutoTrim?n.value.trim():n.value}},ED=t=>t.checked?1:0,TD=t=>t.checked?t.value:null,AD=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,ND=(t,e)=>{const n=Je();if(!n)return;const s=o=>{e.input==="select"?CD(n,Zh(o),e):e.input==="radio"&&RD(n,Zh(o),e)};K0(e.inputOptions)||Y0(e.inputOptions)?(Il(As()),Du(e.inputOptions).then(o=>{t.hideLoading(),s(o)})):typeof e.inputOptions=="object"?s(e.inputOptions):xo(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},SD=(t,e)=>{const n=t.getInput();n&&(Tn(n),Du(e.inputValue).then(s=>{n.value=e.input==="number"?`${parseFloat(s)||0}`:`${s}`,an(n),n.focus(),t.hideLoading()}).catch(s=>{xo(`Error in inputValue promise: ${s}`),n.value="",an(n),n.focus(),t.hideLoading()}))};function CD(t,e,n){const s=Zi(t,J.select);if(!s)return;const o=(c,d,p)=>{const g=document.createElement("option");g.value=p,ir(g,d),g.selected=hT(p,n.inputValue),c.appendChild(g)};e.forEach(c=>{const d=c[0],p=c[1];if(Array.isArray(p)){const g=document.createElement("optgroup");g.label=d,g.disabled=!1,s.appendChild(g),p.forEach(y=>o(g,y[1],y[0]))}else o(s,p,d)}),s.focus()}function RD(t,e,n){const s=Zi(t,J.radio);if(!s)return;e.forEach(c=>{const d=c[0],p=c[1],g=document.createElement("input"),y=document.createElement("label");g.type="radio",g.name=J.radio,g.value=d,hT(d,n.inputValue)&&(g.checked=!0);const v=document.createElement("span");ir(v,p),v.className=J.label,y.appendChild(g),y.appendChild(v),s.appendChild(y)});const o=s.querySelectorAll("input");o.length&&o[0].focus()}const Zh=t=>{const e=[];return t instanceof Map?t.forEach((n,s)=>{let o=n;typeof o=="object"&&(o=Zh(o)),e.push([s,o])}):Object.keys(t).forEach(n=>{let s=t[n];typeof s=="object"&&(s=Zh(s)),e.push([n,s])}),e},hT=(t,e)=>!!e&&e.toString()===t.toString(),jD=t=>{const e=gt.innerParams.get(t);t.disableButtons(),e.input?fT(t,"confirm"):ay(t,!0)},ID=t=>{const e=gt.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?fT(t,"deny"):iy(t,!1)},kD=(t,e)=>{t.disableButtons(),e(Hl.cancel)},fT=(t,e)=>{const n=gt.innerParams.get(t);if(!n.input){xo(`The "input" parameter is needed to be set when using returnInputValueOn${G0(e)}`);return}const s=t.getInput(),o=_D(t,n);n.inputValidator?DD(t,o,e):s&&!s.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||s.validationMessage)):e==="deny"?iy(t,o):ay(t,o)},DD=(t,e,n)=>{const s=gt.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Du(s.inputValidator(e,s.validationMessage))).then(c=>{t.enableButtons(),t.enableInput(),c?t.showValidationMessage(c):n==="deny"?iy(t,e):ay(t,e)})},iy=(t,e)=>{const n=gt.innerParams.get(t||void 0);n.showLoaderOnDeny&&Il(vo()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Du(n.preDeny(e,n.validationMessage))).then(o=>{o===!1?(t.hideLoading(),Vu(t)):t.close({isDenied:!0,value:typeof o>"u"?e:o})}).catch(o=>mT(t||void 0,o))):t.close({isDenied:!0,value:e})},A2=(t,e)=>{t.close({isConfirmed:!0,value:e})},mT=(t,e)=>{t.rejectPromise(e)},ay=(t,e)=>{const n=gt.innerParams.get(t||void 0);n.showLoaderOnConfirm&&Il(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Du(n.preConfirm(e,n.validationMessage))).then(o=>{Gn(Mf())||o===!1?(t.hideLoading(),Vu(t)):A2(t,typeof o>"u"?e:o)}).catch(o=>mT(t||void 0,o))):A2(t,e)};function Jh(){const t=gt.innerParams.get(this);if(!t)return;const e=gt.domCache.get(this);Tn(e.loader),Vf()?t.icon&&an(zl()):OD(e),Sr([e.popup,e.actions],J.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const OD=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?an(e[0],"inline-block"):ok()&&Tn(t.actions)};function pT(){const t=gt.innerParams.get(this),e=gt.domCache.get(this);return e?Uf(e.popup,t.input):null}function gT(t,e,n){const s=gt.domCache.get(t);e.forEach(o=>{s[o].disabled=n})}function yT(t,e){const n=Je();if(!(!n||!t))if(t.type==="radio"){const s=n.querySelectorAll(`[name="${J.radio}"]`);for(let o=0;o<s.length;o++)s[o].disabled=e}else t.disabled=e}function xT(){gT(this,["confirmButton","denyButton","cancelButton"],!1)}function vT(){gT(this,["confirmButton","denyButton","cancelButton"],!0)}function wT(){yT(this.getInput(),!1)}function bT(){yT(this.getInput(),!0)}function _T(t){const e=gt.domCache.get(this),n=gt.innerParams.get(this);ir(e.validationMessage,t),e.validationMessage.className=J["validation-message"],n.customClass&&n.customClass.validationMessage&&nt(e.validationMessage,n.customClass.validationMessage),an(e.validationMessage);const s=this.getInput();s&&(s.setAttribute("aria-invalid","true"),s.setAttribute("aria-describedby",J["validation-message"]),YE(s),nt(s,J.inputerror))}function ET(){const t=gt.domCache.get(this);t.validationMessage&&Tn(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Sr(e,J.inputerror))}const wl={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},PD=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],MD={allowEnterKey:void 0},LD=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],TT=t=>Object.prototype.hasOwnProperty.call(wl,t),AT=t=>PD.indexOf(t)!==-1,NT=t=>MD[t],VD=t=>{TT(t)||kn(`Unknown parameter "${t}"`)},UD=t=>{LD.includes(t)&&kn(`The parameter "${t}" is incompatible with toasts`)},BD=t=>{const e=NT(t);e&&HE(t,e)},ST=t=>{t.backdrop===!1&&t.allowOutsideClick&&kn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&kn(`Invalid theme "${t.theme}"`);for(const e in t)VD(e),t.toast&&UD(e),BD(e)};function CT(t){const e=Dn(),n=Je(),s=gt.innerParams.get(this);if(!n||ai(n,s.hideClass.popup)){kn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const o=zD(t),c=Object.assign({},s,o);ST(c),e.dataset.swal2Theme=c.theme,sT(this,c),gt.innerParams.set(this,c),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const zD=t=>{const e={};return Object.keys(t).forEach(n=>{AT(n)?e[n]=t[n]:kn(`Invalid parameter to update: ${n}`)}),e};function RT(){const t=gt.domCache.get(this),e=gt.innerParams.get(this);if(!e){jT(this);return}t.popup&&Ne.swalCloseEventFinishedCallback&&(Ne.swalCloseEventFinishedCallback(),delete Ne.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),Ne.eventEmitter.emit("didDestroy"),FD(this)}const FD=t=>{jT(t),delete t.params,delete Ne.keydownHandler,delete Ne.keydownTarget,delete Ne.currentInstance},jT=t=>{t.isAwaitingPromise?(rg(gt,t),t.isAwaitingPromise=!0):(rg(jl,t),rg(gt,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},rg=(t,e)=>{for(const n in t)t[n].delete(e)};var qD=Object.freeze({__proto__:null,_destroy:RT,close:Ji,closeModal:Ji,closePopup:Ji,closeToast:Ji,disableButtons:vT,disableInput:bT,disableLoading:Jh,enableButtons:xT,enableInput:wT,getInput:pT,handleAwaitingPromise:Vu,hideLoading:Jh,rejectPromise:dT,resetValidationMessage:ET,showValidationMessage:_T,update:CT});const HD=(t,e,n)=>{t.toast?$D(t,e,n):(KD(e),YD(e),QD(t,e,n))},$D=(t,e,n)=>{e.popup.onclick=()=>{t&&(GD(t)||t.timer||t.input)||n(Hl.close)}},GD=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let ef=!1;const KD=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(ef=!0)}}},YD=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(ef=!0)}}},QD=(t,e,n)=>{e.container.onclick=s=>{if(ef){ef=!1;return}s.target===e.container&&Pf(t.allowOutsideClick)&&n(Hl.backdrop)}},XD=t=>typeof t=="object"&&t.jquery,N2=t=>t instanceof Element||XD(t),WD=t=>{const e={};return typeof t[0]=="object"&&!N2(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,s)=>{const o=t[s];typeof o=="string"||N2(o)?e[n]=o:o!==void 0&&xo(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof o}`)}),e};function ZD(...t){return new this(...t)}function JD(t){class e extends this{_main(s,o){return super._main(s,Object.assign({},t,o))}}return e}const eO=()=>Ne.timeout&&Ne.timeout.getTimerLeft(),IT=()=>{if(Ne.timeout)return ck(),Ne.timeout.stop()},kT=()=>{if(Ne.timeout){const t=Ne.timeout.start();return ty(t),t}},tO=()=>{const t=Ne.timeout;return t&&(t.running?IT():kT())},nO=t=>{if(Ne.timeout){const e=Ne.timeout.increase(t);return ty(e,!0),e}},rO=()=>!!(Ne.timeout&&Ne.timeout.isRunning());let S2=!1;const Ug={};function sO(t="data-swal-template"){Ug[t]=this,S2||(document.body.addEventListener("click",iO),S2=!0)}const iO=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in Ug){const s=e.getAttribute(n);if(s){Ug[n].fire({template:s});return}}};class aO{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const s=this._getHandlersByEventName(e);s.includes(n)||s.push(n)}once(e,n){const s=(...o)=>{this.removeListener(e,s),n.apply(this,o)};this.on(e,s)}emit(e,...n){this._getHandlersByEventName(e).forEach(s=>{try{s.apply(this,n)}catch(o){console.error(o)}})}removeListener(e,n){const s=this._getHandlersByEventName(e),o=s.indexOf(n);o>-1&&s.splice(o,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}Ne.eventEmitter=new aO;const oO=(t,e)=>{Ne.eventEmitter.on(t,e)},lO=(t,e)=>{Ne.eventEmitter.once(t,e)},cO=(t,e)=>{if(!t){Ne.eventEmitter.reset();return}e?Ne.eventEmitter.removeListener(t,e):Ne.eventEmitter.removeAllListeners(t)};var uO=Object.freeze({__proto__:null,argsToParams:WD,bindClickHandler:sO,clickCancel:Wk,clickConfirm:iT,clickDeny:Xk,enableLoading:Il,fire:ZD,getActions:Pu,getCancelButton:Fl,getCloseButton:W0,getConfirmButton:As,getContainer:Dn,getDenyButton:vo,getFocusableElements:Z0,getFooter:KE,getHtmlContainer:Q0,getIcon:zl,getIconContent:nk,getImage:GE,getInputLabel:rk,getLoader:ql,getPopup:Je,getProgressSteps:X0,getTimerLeft:eO,getTimerProgressBar:Lf,getTitle:$E,getValidationMessage:Mf,increaseTimer:nO,isDeprecatedParameter:NT,isLoading:ik,isTimerRunning:rO,isUpdatableParameter:AT,isValidParameter:TT,isVisible:Qk,mixin:JD,off:cO,on:oO,once:lO,resumeTimer:kT,showLoading:Il,stopTimer:IT,toggleTimer:tO});class dO{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const DT=["swal-title","swal-html","swal-footer"],hO=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return wO(n),Object.assign(fO(n),mO(n),pO(n),gO(n),yO(n),xO(n),vO(n,DT))},fO=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(s=>{lo(s,["name","value"]);const o=s.getAttribute("name"),c=s.getAttribute("value");!o||!c||(typeof wl[o]=="boolean"?e[o]=c!=="false":typeof wl[o]=="object"?e[o]=JSON.parse(c):e[o]=c)}),e},mO=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(s=>{const o=s.getAttribute("name"),c=s.getAttribute("value");!o||!c||(e[o]=new Function(`return ${c}`)())}),e},pO=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(s=>{lo(s,["type","color","aria-label"]);const o=s.getAttribute("type");!o||!["confirm","cancel","deny"].includes(o)||(e[`${o}ButtonText`]=s.innerHTML,e[`show${G0(o)}Button`]=!0,s.hasAttribute("color")&&(e[`${o}ButtonColor`]=s.getAttribute("color")),s.hasAttribute("aria-label")&&(e[`${o}ButtonAriaLabel`]=s.getAttribute("aria-label")))}),e},gO=t=>{const e={},n=t.querySelector("swal-image");return n&&(lo(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},yO=t=>{const e={},n=t.querySelector("swal-icon");return n&&(lo(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},xO=t=>{const e={},n=t.querySelector("swal-input");n&&(lo(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const s=Array.from(t.querySelectorAll("swal-input-option"));return s.length&&(e.inputOptions={},s.forEach(o=>{lo(o,["value"]);const c=o.getAttribute("value");if(!c)return;const d=o.innerHTML;e.inputOptions[c]=d})),e},vO=(t,e)=>{const n={};for(const s in e){const o=e[s],c=t.querySelector(o);c&&(lo(c,[]),n[o.replace(/^swal-/,"")]=c.innerHTML.trim())}return n},wO=t=>{const e=DT.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const s=n.tagName.toLowerCase();e.includes(s)||kn(`Unrecognized element <${s}>`)})},lo=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&kn([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},OT=10,bO=t=>{const e=Dn(),n=Je();typeof t.willOpen=="function"&&t.willOpen(n),Ne.eventEmitter.emit("willOpen",n);const o=window.getComputedStyle(document.body).overflowY;TO(e,n,t),setTimeout(()=>{_O(e,n)},OT),J0()&&(EO(e,t.scrollbarPadding,o),iD()),!Vf()&&!Ne.previousActiveElement&&(Ne.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),Ne.eventEmitter.emit("didOpen",n),Sr(e,J["no-transition"])},tf=t=>{const e=Je();if(t.target!==e)return;const n=Dn();e.removeEventListener("animationend",tf),e.removeEventListener("transitionend",tf),n.style.overflowY="auto"},_O=(t,e)=>{XE(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",tf),e.addEventListener("transitionend",tf)):t.style.overflowY="auto"},EO=(t,e,n)=>{aD(),e&&n!=="hidden"&&fD(n),setTimeout(()=>{t.scrollTop=0})},TO=(t,e,n)=>{nt(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),an(e,"grid"),setTimeout(()=>{nt(e,n.showClass.popup),e.style.removeProperty("opacity")},OT)):an(e,"grid"),nt([document.documentElement,document.body],J.shown),n.heightAuto&&n.backdrop&&!n.toast&&nt([document.documentElement,document.body],J["height-auto"])};var C2={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function AO(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=C2.email),t.input==="url"&&(t.inputValidator=C2.url))}function NO(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(kn('Target parameter is not valid, defaulting to "body"'),t.target="body")}function SO(t){AO(t),t.showLoaderOnConfirm&&!t.preConfirm&&kn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),NO(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),yk(t)}let ps;var lh=new WeakMap;class Vt{constructor(...e){if(Y5(this,lh,void 0),typeof window>"u")return;ps=this;const n=Object.freeze(this.constructor.argsToParams(e));this.params=n,this.isAwaitingPromise=!1,Q5(lh,this,this._main(ps.params))}_main(e,n={}){if(ST(Object.assign({},n,e)),Ne.currentInstance){const c=jl.swalPromiseResolve.get(Ne.currentInstance),{isAwaitingPromise:d}=Ne.currentInstance;Ne.currentInstance._destroy(),d||c({isDismissed:!0}),J0()&&lT()}Ne.currentInstance=ps;const s=RO(e,n);SO(s),Object.freeze(s),Ne.timeout&&(Ne.timeout.stop(),delete Ne.timeout),clearTimeout(Ne.restoreFocusTimeout);const o=jO(ps);return sT(ps,s),gt.innerParams.set(ps,s),CO(ps,o,s)}then(e){return x2(lh,this).then(e)}finally(e){return x2(lh,this).finally(e)}}const CO=(t,e,n)=>new Promise((s,o)=>{const c=d=>{t.close({isDismissed:!0,dismiss:d})};jl.swalPromiseResolve.set(t,s),jl.swalPromiseReject.set(t,o),e.confirmButton.onclick=()=>{jD(t)},e.denyButton.onclick=()=>{ID(t)},e.cancelButton.onclick=()=>{kD(t,c)},e.closeButton.onclick=()=>{c(Hl.close)},HD(n,e,c),Zk(Ne,n,c),bD(t,n),bO(n),IO(Ne,n,c),kO(e,n),setTimeout(()=>{e.container.scrollTop=0})}),RO=(t,e)=>{const n=hO(t),s=Object.assign({},wl,e,n,t);return s.showClass=Object.assign({},wl.showClass,s.showClass),s.hideClass=Object.assign({},wl.hideClass,s.hideClass),s.animation===!1&&(s.showClass={backdrop:"swal2-noanimation"},s.hideClass={}),s},jO=t=>{const e={popup:Je(),container:Dn(),actions:Pu(),confirmButton:As(),denyButton:vo(),cancelButton:Fl(),loader:ql(),closeButton:W0(),validationMessage:Mf(),progressSteps:X0()};return gt.domCache.set(t,e),e},IO=(t,e,n)=>{const s=Lf();Tn(s),e.timer&&(t.timeout=new dO(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(an(s),rr(s,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&ty(e.timer)})))},kO=(t,e)=>{if(!e.toast){if(!Pf(e.allowEnterKey)){HE("allowEnterKey"),PO();return}DO(t)||OO(t,e)||Vg(-1,1)}},DO=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&Gn(n))return n.focus(),!0;return!1},OO=(t,e)=>e.focusDeny&&Gn(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&Gn(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&Gn(t.confirmButton)?(t.confirmButton.focus(),!0):!1,PO=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Vt.prototype.disableButtons=vT;Vt.prototype.enableButtons=xT;Vt.prototype.getInput=pT;Vt.prototype.disableInput=bT;Vt.prototype.enableInput=wT;Vt.prototype.hideLoading=Jh;Vt.prototype.disableLoading=Jh;Vt.prototype.showValidationMessage=_T;Vt.prototype.resetValidationMessage=ET;Vt.prototype.close=Ji;Vt.prototype.closePopup=Ji;Vt.prototype.closeModal=Ji;Vt.prototype.closeToast=Ji;Vt.prototype.rejectPromise=dT;Vt.prototype.update=CT;Vt.prototype._destroy=RT;Object.assign(Vt,uO);Object.keys(qD).forEach(t=>{Vt[t]=function(...e){return ps&&ps[t]?ps[t](...e):null}});Vt.DismissReason=Hl;Vt.version="11.23.0";const Ae=Vt;Ae.default=Ae;typeof document<"u"&&(function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const sg=()=>{const[t,e]=R.useState([]),[n,s]=R.useState(!0),[o,c]=R.useState(null),[d,p]=R.useState("all"),[g,y]=R.useState(""),{addToCart:v}=Bl(),{addToWishlist:_}=Of(),{currentUser:T}=Qr();R.useEffect(()=>{(async()=>{try{s(!0);const q=await $5();e(q)}catch(q){c("Failed to load products"),console.error("Error fetching products:",q)}finally{s(!1)}})()},[]);const I=R.useMemo(()=>{let F=d==="all"?t:t.filter(q=>q.category===d);if(g){const q=g.toLowerCase();F=F.filter(ie=>ie.name.toLowerCase().includes(q)||ie.description&&ie.description.toLowerCase().includes(q)||ie.category&&ie.category.toLowerCase().includes(q)||ie.material&&ie.material.toLowerCase().includes(q)||ie.color&&ie.color.toLowerCase().includes(q))}return F},[t,d,g]),B=["all",...new Set(t.map(F=>F.category))],U=F=>{if(F.imageUrls&&F.imageUrls.length>0){const q=F.imageUrls.filter(ie=>ie&&(typeof ie=="string"||ie.data&&typeof ie.data=="string"));if(q.length>0){const ie=F.primaryImageIndex||0,te=Math.min(ie,q.length-1),de=q[te];if(typeof de=="string")return de;if(de&&de.data)return de.data}}return F.imageUrl||"https://via.placeholder.com/300x300.png?text=Moño"},j=F=>{if(!T){Ae.fire({title:"Inicia sesión",text:"Debes iniciar sesión para agregar productos al carrito",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(ie=>{ie.isConfirmed&&(window.location.href="/login")});return}if((F.stock!==void 0?F.stock:1/0)===0){Ae.fire({title:"Producto agotado",text:"Este producto no está disponible actualmente.",icon:"error",confirmButtonText:"Aceptar"});return}v({...F,quantity:1}),Ae.fire({title:"Producto agregado",text:"Producto agregado correctamente al carrito",icon:"success",confirmButtonText:"Aceptar"})},H=F=>{if(!T){Ae.fire({title:"Inicia sesión",text:"Debes iniciar sesión para agregar productos a tu lista de deseos",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(q=>{q.isConfirmed&&(window.location.href="/login")});return}_(F),Ae.fire({title:"Producto agregado",text:"Producto agregado correctamente a tu lista de deseos",icon:"success",confirmButtonText:"Aceptar"})};return l.jsx("div",{children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nuestra Colección"}),l.jsxs("div",{className:"mt-4 md:mt-0 flex flex-col sm:flex-row gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 w-full sm:w-64",value:g,onChange:F=>y(F.target.value)}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category-filter",className:"mr-2 text-sm font-medium text-gray-700",children:"Filtrar por:"}),l.jsx("select",{id:"category-filter",className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:d,onChange:F=>p(F.target.value),children:B.map(F=>l.jsx("option",{value:F,children:F==="all"?"Todos":F},F))})]})]})]}),n?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):o?l.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[l.jsx("strong",{className:"font-bold",children:"Error! "}),l.jsx("span",{className:"block sm:inline",children:o})]}):l.jsxs(l.Fragment,{children:[g&&l.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:[I.length,' producto(s) encontrado(s) para "',g,'"']}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:I.map(F=>l.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[l.jsx(He,{to:`/product/${F.id}`,children:l.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden",children:l.jsx("img",{src:U(F),alt:F.name,className:"w-full h-64 object-cover",onError:q=>{q.target.onerror=null,q.target.src="https://via.placeholder.com/300x300.png?text=Moño"}})})}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:F.category}),F.stock!==void 0&&F.stock<=5&&l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:F.stock>0?`Solo ${F.stock} disponibles`:"Agotado"})]}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:F.name}),F.rating>0&&l.jsx("div",{className:"mt-2",children:l.jsx(yu,{rating:F.rating,size:"sm"})}),l.jsx("div",{className:"mt-2",children:l.jsxs("span",{className:"text-lg font-semibold text-indigo-600",children:["$",parseFloat(F.price).toLocaleString("es-CO")]})}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx("button",{className:"flex-1 bg-indigo-600 border border-transparent rounded-md py-2 px-4 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:q=>{q.preventDefault(),j(F)},children:"Agregar al Carrito"}),l.jsx("button",{className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:q=>{q.preventDefault(),q.stopPropagation(),H(F)},children:l.jsx("svg",{className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]})]})]},F.id))})]}),!n&&!o&&I.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No se encontraron productos"}),l.jsx("p",{className:"mt-1 text-gray-500",children:g?`No se encontraron productos que coincidan con "${g}".`:"No hay productos disponibles en esta categoría."}),g&&l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:()=>{y(""),p("all")},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Ver todos los productos"})})]})]})})},PT=async t=>{try{const e=Xt(je,"reviews");return{id:(await kf(e,{...t,createdAt:new Date,updatedAt:new Date})).id,...t,createdAt:new Date,updatedAt:new Date}}catch(e){throw console.error("Error creating review:",e),e}},R2=async t=>{try{const e=Xt(je,"reviews"),n=fi(e,gu("productId","==",t),Ul("createdAt","desc"));return(await _n(n)).docs.map(c=>({id:c.id,...c.data()}))}catch(e){if(console.error("Error fetching reviews:",e),e.code==="failed-precondition"||e.message&&e.message.includes("index"))try{const n=Xt(je,"reviews"),s=fi(n,gu("productId","==",t));return(await _n(s)).docs.map(p=>({id:p.id,...p.data()})).sort((p,g)=>{const y=p.createdAt?.toDate?p.createdAt.toDate():new Date(p.createdAt);return(g.createdAt?.toDate?g.createdAt.toDate():new Date(g.createdAt))-y})}catch(n){throw console.error("Error fetching reviews without index:",n),n}else throw e}},j2=async()=>{try{const t=Xt(je,"reviews"),e=fi(t,Ul("createdAt","desc"));return(await _n(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(t){if(console.error("Error fetching all reviews:",t),t.code==="failed-precondition"||t.message&&t.message.includes("index"))try{const e=Xt(je,"reviews");return(await _n(e)).docs.map(c=>({id:c.id,...c.data()})).sort((c,d)=>{const p=c.createdAt?.toDate?c.createdAt.toDate():new Date(c.createdAt);return(d.createdAt?.toDate?d.createdAt.toDate():new Date(d.createdAt))-p})}catch(e){throw console.error("Error fetching all reviews without index:",e),e}else throw t}},MO=async(t,e)=>{try{const n=ot(je,"reviews",t);return await Ur(n,{...e,updatedAt:new Date}),{id:t,...e,updatedAt:new Date}}catch(n){throw console.error("Error updating review:",n),n}},LO=async t=>{try{const e=ot(je,"reviews",t);return await $0(e),t}catch(e){throw console.error("Error deleting review:",e),e}},VO=()=>{const{id:t}=iS(),[e,n]=R.useState(null),[s,o]=R.useState(!0),[c,d]=R.useState(null),[p,g]=R.useState(1),[y,v]=R.useState(0),{addToCart:_}=Bl(),{addToWishlist:T}=Of(),{currentUser:I}=Qr(),B=Cr(),[U,j]=R.useState([]),[H,F]=R.useState(!0),[q,ie]=R.useState({rating:0,comment:""}),[te,de]=R.useState(!1);R.useEffect(()=>{t&&(async()=>{try{o(!0);const oe=await G5(t);n(oe),v(0)}catch(oe){d("Failed to load product"),console.error("Error fetching product:",oe)}finally{o(!1)}})()},[t]),R.useEffect(()=>{(async()=>{if(t)try{F(!0);const oe=await R2(t);j(oe)}catch(oe){console.error("Error fetching reviews:",oe)}finally{F(!1)}})()},[t]);const k=()=>{if(!I){Ae.fire({title:"Inicia sesión",text:"Debes iniciar sesión para agregar productos al carrito",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(G=>{G.isConfirmed&&B("/login")});return}if(e){if((e.stock!==void 0?e.stock:1/0)===0){Ae.fire({title:"Producto agotado",text:"Este producto no está disponible actualmente.",icon:"error",confirmButtonText:"Aceptar"});return}_({...e,quantity:1}),Ae.fire({title:"Producto agregado",text:"Producto agregado correctamente al carrito",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{})}},A=()=>{if(!I){Ae.fire({title:"Inicia sesión",text:"Debes iniciar sesión para agregar productos a tu lista de deseos",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(G=>{G.isConfirmed&&B("/login")});return}e&&(T(e),Ae.fire({title:"Producto agregado",text:"Producto agregado correctamente a tu lista de deseos",icon:"success",confirmButtonText:"Aceptar"}))},S=()=>{if(e?.imageUrls&&Array.isArray(e.imageUrls)){const G=e.imageUrls.filter(oe=>oe&&(typeof oe=="string"||oe.data&&typeof oe.data=="string"));return G.length>0?G.map(ge=>typeof ge=="string"?ge:ge&&ge.data?ge.data:"https://via.placeholder.com/600x600.png?text=Moño"):["https://via.placeholder.com/600x600.png?text=Moño"]}return e?.imageUrl?[e.imageUrl]:["https://via.placeholder.com/600x600.png?text=Moño"]},L=()=>{const G=S();return G[y]||G[0]},M=G=>{const{name:oe,value:ge}=G.target;ie(Ve=>({...Ve,[oe]:ge}))},O=G=>{ie(oe=>({...oe,rating:G}))},C=async G=>{if(G.preventDefault(),!I){Ae.fire({title:"Inicia sesión",text:"Debes iniciar sesión para dejar una reseña",icon:"warning",confirmButtonText:"Iniciar sesión",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(oe=>{oe.isConfirmed&&B("/login")});return}if(q.rating===0){Ae.fire({title:"Error",text:"Por favor selecciona una calificación",icon:"error",confirmButtonText:"Aceptar"});return}if(q.comment.trim()===""){Ae.fire({title:"Error",text:"Por favor escribe un comentario",icon:"error",confirmButtonText:"Aceptar"});return}de(!0);try{const oe={productId:t,userId:I.uid,userEmail:I.email,userName:I.displayName||I.email.split("@")[0],rating:q.rating,comment:q.comment.trim()};await PT(oe),ie({rating:0,comment:""});const ge=await R2(t);j(ge),Ae.fire({title:"Reseña enviada",text:"Tu reseña ha sido enviada correctamente",icon:"success",confirmButtonText:"Aceptar"})}catch(oe){console.error("Error submitting review:",oe),Ae.fire({title:"Error",text:"Hubo un error al enviar tu reseña. Por favor intenta nuevamente.",icon:"error",confirmButtonText:"Aceptar"})}finally{de(!1)}},ke=G=>G?G instanceof Date?G.toLocaleDateString("es-CO"):G.toDate?G.toDate().toLocaleDateString("es-CO"):"N/A":"N/A";if(s)return l.jsx("div",{children:l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"w-12 h-12 border-b-2 border-gray-900 rounded-full animate-spin"})})});if(c||!e)return l.jsx("div",{children:l.jsx("div",{className:"px-4 py-8 mx-auto max-w-7xl sm:px-6 lg:px-8",children:l.jsxs("div",{className:"relative px-4 py-3 text-red-700 bg-red-100 border border-red-400 rounded",role:"alert",children:[l.jsx("strong",{className:"font-bold",children:"Error! "}),l.jsx("span",{className:"block sm:inline",children:c||"Product not found"})]})})});const Ee=S();return l.jsx("div",{children:l.jsxs("div",{className:"px-4 py-8 mx-auto max-w-7xl sm:px-6 lg:px-8",children:[l.jsx("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:l.jsxs("ol",{className:"flex items-center space-x-2",children:[l.jsx("li",{children:l.jsx(He,{to:"/home",className:"text-gray-500 hover:text-gray-700",children:"Home"})}),l.jsx("li",{children:l.jsx("span",{className:"text-gray-500",children:"/"})}),l.jsx("li",{children:l.jsx(He,{to:"/shop",className:"text-gray-500 hover:text-gray-700",children:"Shop"})}),l.jsx("li",{children:l.jsx("span",{className:"text-gray-500",children:"/"})}),l.jsx("li",{children:l.jsx("span",{className:"text-gray-900",children:e.name})})]})}),l.jsxs("div",{className:"lg:grid lg:grid-cols-2 lg:gap-x-8 lg:items-start",children:[l.jsxs("div",{className:"flex flex-col-reverse",children:[Ee.length>1&&l.jsx("div",{className:"hidden w-full max-w-2xl mx-auto mt-6 sm:block lg:max-w-none",children:l.jsx("div",{className:"grid grid-cols-4 gap-6","aria-orientation":"horizontal",children:Ee.map((G,oe)=>l.jsxs("button",{className:`relative h-24 bg-white rounded-md flex items-center justify-center text-sm font-medium uppercase text-gray-900 cursor-pointer hover:bg-gray-50 focus:outline-none focus:ring focus:ring-offset-4 focus:ring-indigo-500 ${y===oe?"ring-2 ring-indigo-500":""}`,onClick:()=>v(oe),children:[l.jsxs("span",{className:"sr-only",children:["Imagen ",oe+1]}),l.jsx("span",{className:"absolute inset-0 overflow-hidden rounded-md",children:l.jsx("img",{src:G,alt:`Imagen ${oe+1}`,className:"object-cover w-full h-full",onError:ge=>{ge.target.onerror=null,ge.target.src="https://via.placeholder.com/100x100.png?text=Moño"}})}),y===oe&&l.jsx("span",{className:"absolute inset-0 rounded-md pointer-events-none ring-2 ring-offset-2 ring-indigo-500","aria-hidden":"true"})]},oe))})}),l.jsx("div",{className:"w-full aspect-w-1 aspect-h-1",children:l.jsx("img",{src:L(),alt:e.name,className:"object-cover object-center w-full h-full sm:rounded-lg",onError:G=>{G.target.onerror=null,G.target.src="https://via.placeholder.com/600x600.png?text=Moño"}})})]}),l.jsxs("div",{className:"px-4 mt-10 sm:px-0 sm:mt-16 lg:mt-0",children:[l.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-gray-900",children:e.name}),l.jsxs("div",{className:"mt-3",children:[l.jsx("h2",{className:"sr-only",children:"Product information"}),l.jsxs("p",{className:"text-3xl text-gray-900",children:["$",parseFloat(e.price).toLocaleString("es-CO")]})]}),e.rating>0&&l.jsx("div",{className:"mt-2",children:l.jsx(yu,{rating:e.rating,size:"lg"})}),l.jsxs("div",{className:"mt-6",children:[l.jsx("h3",{className:"sr-only",children:"Description"}),l.jsx("div",{className:"space-y-6 text-base text-gray-700",children:l.jsx("p",{children:e.description})})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"mr-2 text-gray-700",children:"Categoría:"}),l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.category})]}),e.stock!==void 0&&l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("span",{className:"mr-2 text-gray-700",children:"Stock:"}),l.jsx("span",{className:`font-medium ${e.stock>5?"text-green-600":e.stock>0?"text-yellow-600":"text-red-600"}`,children:e.stock>0?`${e.stock} disponibles`:"Agotado"})]}),e.material&&l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("span",{className:"mr-2 text-gray-700",children:"Material:"}),l.jsx("span",{className:"text-gray-900",children:e.material})]}),e.color&&l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("span",{className:"mr-2 text-gray-700",children:"Color:"}),l.jsx("span",{className:"text-gray-900",children:e.color})]}),e.size&&l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("span",{className:"mr-2 text-gray-700",children:"Tamaño:"}),l.jsx("span",{className:"text-gray-900",children:e.size})]}),e.style&&l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("span",{className:"mr-2 text-gray-700",children:"Estilo:"}),l.jsx("span",{className:"text-gray-900",children:e.style})]})]}),l.jsx("form",{className:"mt-6",children:l.jsxs("div",{className:"flex gap-3 mt-10 sm:flex-col1",children:[l.jsx("button",{type:"button",onClick:k,className:"flex items-center justify-center flex-1 max-w-xs px-8 py-3 text-base font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:w-full",disabled:e.stock===0,children:"Agregar al Carrito"}),l.jsxs("button",{type:"button",onClick:A,className:"flex items-center justify-center px-4 py-3 ml-4 text-gray-400 rounded-md hover:bg-gray-100 hover:text-gray-500",children:[l.jsx("svg",{className:"flex-shrink-0 w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),l.jsx("span",{className:"sr-only",children:"Add to favorites"})]})]})})]})]}),l.jsx("div",{className:"mt-16",children:l.jsxs("div",{className:"border-t border-gray-200 pt-10",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Reseñas de Clientes"}),I&&l.jsxs("div",{className:"mb-10",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Deja tu reseña"}),l.jsxs("form",{onSubmit:C,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calificación"}),l.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(G=>l.jsx("button",{type:"button",onClick:()=>O(G),className:"text-2xl focus:outline-none",children:G<=q.rating?l.jsx("span",{className:"text-yellow-400",children:"★"}):l.jsx("span",{className:"text-gray-300",children:"☆"})},G)),l.jsx("span",{className:"ml-2 text-sm text-gray-500",children:q.rating>0?`${q.rating} de 5 estrellas`:"Selecciona una calificación"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentario"}),l.jsx("textarea",{id:"comment",name:"comment",rows:4,value:q.comment,onChange:M,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border border-gray-300 rounded-md p-3",placeholder:"Comparte tu experiencia con este producto..."})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:te,className:`inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${te?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:te?"Enviando...":"Enviar Reseña"})})]})]}),l.jsx("div",{children:H?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-gray-900 rounded-full animate-spin"})}):U.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-gray-500",children:"No hay reseñas para este producto aún."}),!I&&l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:l.jsx(He,{to:"/login",className:"text-indigo-600 hover:text-indigo-500",children:"Inicia sesión para dejar la primera reseña"})})]}):l.jsx("div",{className:"space-y-6",children:U.map(G=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900",children:G.userName}),l.jsx("div",{className:"mt-1",children:l.jsx(yu,{rating:G.rating,size:"sm"})})]}),l.jsx("p",{className:"text-sm text-gray-500",children:ke(G.createdAt)})]}),l.jsx("div",{className:"mt-4",children:l.jsx("p",{className:"text-gray-700",children:G.comment})})]},G.id))})})]})})]})})},UO=()=>{const{items:t,updateQuantity:e,removeFromCart:n,getTotalPrice:s,loading:o,coupon:c,applyCoupon:d,removeCoupon:p}=Bl(),g=Cr(),[y,v]=R.useState(""),[_,T]=R.useState(""),[I,B]=R.useState(!1);if(o)return l.jsx("div",{children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})})});const U=()=>{g("/checkout")},j=async q=>{if(q.preventDefault(),!!y.trim()){B(!0),T("");try{await d(y.trim()),v("")}catch(ie){T(ie.message||"Error al aplicar el cupón")}finally{B(!1)}}},H=()=>{p(),v(""),T("")},F=t.reduce((q,ie)=>q+ie.price*ie.quantity,0);return l.jsx("div",{children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Tu Carrito de Compras"}),t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Tu carrito está vacío"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"Empieza a agregar productos a tu carrito"}),l.jsx("div",{className:"mt-6",children:l.jsx(He,{to:"/shop",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Continuar Comprando"})})]}):l.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-x-12",children:[l.jsx("div",{className:"lg:col-span-8",children:l.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(q=>l.jsx("li",{className:"p-4 sm:p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 w-24 h-24 border border-gray-200 rounded-md overflow-hidden",children:l.jsx("img",{src:q.imageUrl||"https://via.placeholder.com/100x100.png?text=Moño",alt:q.name,className:"w-full h-full object-center object-cover",onError:ie=>{ie.target.onerror=null,ie.target.src="https://via.placeholder.com/100x100.png?text=Moño"}})}),l.jsxs("div",{className:"ml-4 flex-1 flex flex-col",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[l.jsx("h3",{children:l.jsx(He,{to:`/product/${q.id}`,children:q.name})}),l.jsxs("p",{className:"ml-4",children:["$",parseFloat(q.price*q.quantity).toLocaleString("es-CO")]})]}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:q.category}),q.stock!==void 0&&l.jsx("p",{className:"mt-1 text-sm",children:l.jsx("span",{className:`font-medium ${q.stock>5?"text-green-600":q.stock>0?"text-yellow-600":"text-red-600"}`,children:q.stock>0?`Stock: ${q.stock} disponibles`:"Agotado"})})]}),l.jsxs("div",{className:"flex-1 flex items-end justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsxs("button",{onClick:()=>e(q.id,q.quantity-1),className:"text-gray-500 hover:text-gray-600",disabled:q.quantity<=1,children:[l.jsx("span",{className:"sr-only",children:"Remove one"}),l.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})})]}),l.jsx("span",{className:"mx-2 text-gray-500",children:q.quantity}),l.jsxs("button",{onClick:()=>{const ie=q.stock!==void 0?q.stock:1/0;q.quantity<ie&&e(q.id,q.quantity+1)},className:"text-gray-500 hover:text-gray-600",disabled:q.stock!==void 0&&q.quantity>=q.stock,children:[l.jsx("span",{className:"sr-only",children:"Add one"}),l.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]})]}),l.jsx("div",{className:"flex",children:l.jsx("button",{type:"button",onClick:()=>n(q.id),className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Eliminar"})})]})]})]})},q.id))})})}),l.jsx("div",{className:"mt-8 lg:mt-0 lg:col-span-4",children:l.jsxs("div",{className:"bg-gray-50 rounded-lg px-4 py-6 sm:p-6 lg:p-8",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Resumen del Pedido"}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-md font-medium text-gray-900 mb-2",children:"Cupón de Descuento"}),c?l.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-md",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-green-800",children:c.code}),l.jsx("span",{className:"ml-2 text-sm text-green-600",children:c.discountType==="percentage"?`-${c.discountValue}%`:`-$${c.discountValue.toLocaleString("es-CO")}`})]}),l.jsx("button",{onClick:H,className:"text-sm text-red-600 hover:text-red-800",children:"Eliminar"})]}):l.jsxs("form",{onSubmit:j,className:"flex space-x-2",children:[l.jsx("input",{type:"text",value:y,onChange:q=>v(q.target.value),placeholder:"Ingresa tu código",className:"flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",disabled:I}),l.jsx("button",{type:"submit",disabled:I||!y.trim(),className:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white ${I||!y.trim()?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}`,children:I?"Aplicando...":"Aplicar"})]}),_&&l.jsx("p",{className:"mt-2 text-sm text-red-600",children:_})]}),l.jsxs("dl",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"text-sm text-gray-600",children:"Subtotal"}),l.jsxs("dd",{className:"text-sm font-medium text-gray-900",children:["$",parseFloat(F).toLocaleString("es-CO")]})]}),c&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("dt",{className:"text-sm text-gray-600",children:["Descuento (",c.code,")"]}),l.jsxs("dd",{className:"text-sm font-medium text-green-600",children:["-$",parseFloat(F-s()).toLocaleString("es-CO")]})]}),l.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-6",children:[l.jsx("dt",{className:"text-base font-medium text-gray-900",children:"Total del Pedido"}),l.jsxs("dd",{className:"text-base font-medium text-gray-900",children:["$",parseFloat(s()).toLocaleString("es-CO")]})]})]}),t.some(q=>q.stock!==void 0&&q.stock<q.quantity)&&l.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Algunos productos tienen stock limitado"}),l.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:l.jsx("p",{children:"La cantidad en tu carrito excede el stock disponible para algunos productos. Por favor, ajusta las cantidades."})})]})]})}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{type:"button",onClick:U,className:"w-full bg-indigo-600 border border-transparent rounded-md shadow-sm py-3 px-4 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-indigo-500",disabled:t.some(q=>q.stock!==void 0&&q.stock<q.quantity),children:"Proceder al Pago"})}),l.jsx("div",{className:"mt-4 text-center",children:l.jsx(He,{to:"/shop",className:"text-indigo-600 hover:text-indigo-500",children:"← Continuar Comprando"})})]})})]})]})})};/*!
 * react-paypal-js v8.9.2 (2025-10-02T20:17:55.069Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn;(function(t){t.INITIAL="initial",t.PENDING="pending",t.REJECTED="rejected",t.RESOLVED="resolved"})(Fn||(Fn={}));var sa;(function(t){t.LOADING_STATUS="setLoadingStatus",t.RESET_OPTIONS="resetOptions",t.SET_BRAINTREE_INSTANCE="braintreeInstance"})(sa||(sa={}));var I2;(function(t){t.NUMBER="number",t.CVV="cvv",t.EXPIRATION_DATE="expirationDate",t.EXPIRATION_MONTH="expirationMonth",t.EXPIRATION_YEAR="expirationYear",t.POSTAL_CODE="postalCode"})(I2||(I2={}));var Ht=function(){return Ht=Object.assign||function(e){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},Ht.apply(this,arguments)};function MT(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n}function k2(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return t.concat(c||Array.prototype.slice.call(e))}var xu="data-react-paypal-script-id",eo={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},BO="Failed to load the PayPal JS SDK script.",LT="paypal",zO="usePayPalScriptReducer must be used within a PayPalScriptProvider";function FO(t){return t===void 0&&(t=LT),window[t]}function qO(t){for(var e="",n=0;n<t.length;n++){var s=t[n].charCodeAt(0)*n;t[n+1]&&(s+=t[n+1].charCodeAt(0)*(n-1)),e+=String.fromCharCode(97+Math.abs(s)%26)}return e}function HO(t){var e=t.reactComponentName,n=t.sdkComponentKey,s=t.sdkRequestedComponents,o=s===void 0?"":s,c=t.sdkDataNamespace,d=c===void 0?LT:c,p=n.charAt(0).toUpperCase().concat(n.substring(1)),g="Unable to render <".concat(e," /> because window.").concat(d,".").concat(p," is undefined."),y=typeof o=="string"?o:o.join(",");if(!y.includes(n)){var v=[y,n].filter(Boolean).join();g+=`
To fix the issue, add '`.concat(n,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(v,"'}}>`.")}return g}function VT(t){var e=t,n=xu;e[n];var s=MT(e,[n+""]);return"react-paypal-js-".concat(qO(JSON.stringify(s)))}function $O(t){var e=self.document.querySelector("script[".concat(xu,'="').concat(t,'"]'));e?.parentNode&&e.parentNode.removeChild(e)}function GO(t,e){var n,s;switch(e.type){case sa.LOADING_STATUS:return typeof e.value=="object"?Ht(Ht({},t),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):Ht(Ht({},t),{loadingStatus:e.value});case sa.RESET_OPTIONS:return $O(t.options[xu]),Ht(Ht({},t),{loadingStatus:Fn.PENDING,options:Ht(Ht((n={},n[eo.DATA_SDK_INTEGRATION_SOURCE]=eo.DATA_LIBRARY_VALUE,n),e.value),(s={},s[xu]="".concat(VT(e.value)),s))});case sa.SET_BRAINTREE_INSTANCE:return Ht(Ht({},t),{braintreePayPalCheckoutInstance:e.value});default:return t}}var UT=R.createContext(null);function KO(t){if(typeof t?.dispatch=="function"&&t.dispatch.length!==0)return t;throw new Error(zO)}function YO(){var t=KO(R.useContext(UT)),e=Ht(Ht({},t),{isInitial:t.loadingStatus===Fn.INITIAL,isPending:t.loadingStatus===Fn.PENDING,isResolved:t.loadingStatus===Fn.RESOLVED,isRejected:t.loadingStatus===Fn.REJECTED});return[e,t.dispatch]}R.createContext({});function QO(t){var e=R.useRef(new Proxy({},{get:function(n,s,o){return typeof n[s]=="function"?function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return n[s].apply(n,c)}:Reflect.get(n,s,o)}}));return e.current=Object.assign(e.current,t),e.current}var oy=function(t){var e,n=t.className,s=n===void 0?"":n,o=t.disabled,c=o===void 0?!1:o,d=t.children,p=t.forceReRender,g=p===void 0?[]:p,y=MT(t,["className","disabled","children","forceReRender"]),v=c?{opacity:.38}:{},_="".concat(s," ").concat(c?"paypal-buttons-disabled":"").trim(),T=R.useRef(null),I=R.useRef(null),B=QO(y),U=YO()[0],j=U.isResolved,H=U.options,F=R.useState(null),q=F[0],ie=F[1],te=R.useState(!0),de=te[0],k=te[1],A=R.useState(null),S=A[1];function L(){I.current!==null&&I.current.close().catch(function(){})}return!((e=I.current)===null||e===void 0)&&e.updateProps&&I.current.updateProps({message:y.message}),R.useEffect(function(){if(j===!1)return L;var M=FO(H.dataNamespace);if(M===void 0||M.Buttons===void 0)return S(function(){throw new Error(HO({reactComponentName:oy.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:H.components,sdkDataNamespace:H[eo.DATA_NAMESPACE]}))}),L;var O=function(C,ke){ie(ke),typeof y.onInit=="function"&&y.onInit(C,ke)};try{I.current=M.Buttons(Ht(Ht({},B),{onInit:O}))}catch(C){return S(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(C))})}return I.current.isEligible()===!1?(k(!1),L):(T.current&&I.current.render(T.current).catch(function(C){T.current===null||T.current.children.length===0||S(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(C))})}),L)},k2(k2([j],g,!0),[y.fundingSource],!1)),R.useEffect(function(){q!==null&&(c===!0?q.disable().catch(function(){}):q.enable().catch(function(){}))},[c,q]),$n.createElement($n.Fragment,null,de?$n.createElement("div",{ref:T,style:v,className:_}):d)};oy.displayName="PayPalButtons";function XO(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n}function WO(t,e){var n=document.querySelector('script[src="'.concat(t,'"]'));if(n===null)return null;var s=BT(t,e),o=n.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(s.dataset).length)return null;var c=!0;return Object.keys(o.dataset).forEach(function(d){o.dataset[d]!==s.dataset[d]&&(c=!1)}),c?n:null}function ZO(t){var e=t.url,n=t.attributes,s=t.onSuccess,o=t.onError,c=BT(e,n);c.onerror=o,c.onload=s,document.head.insertBefore(c,document.head.firstElementChild)}function JO(t){var e=t.sdkBaseUrl,n=t.environment,s=XO(t,["sdkBaseUrl","environment"]),o=e||nP(n),c=s,d=Object.keys(c).filter(function(y){return typeof c[y]<"u"&&c[y]!==null&&c[y]!==""}).reduce(function(y,v){var _=c[v].toString();return v=eP(v),v.substring(0,4)==="data"||v==="crossorigin"?y.attributes[v]=_:y.queryParams[v]=_,y},{queryParams:{},attributes:{}}),p=d.queryParams,g=d.attributes;return p["merchant-id"]&&p["merchant-id"].indexOf(",")!==-1&&(g["data-merchant-id"]=p["merchant-id"],p["merchant-id"]="*"),{url:"".concat(o,"?").concat(tP(p)),attributes:g}}function eP(t){var e=function(n,s){return(s?"-":"")+n.toLowerCase()};return t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function tP(t){var e="";return Object.keys(t).forEach(function(n){e.length!==0&&(e+="&"),e+=n+"="+t[n]}),e}function nP(t){return t==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function BT(t,e){e===void 0&&(e={});var n=document.createElement("script");return n.src=t,Object.keys(e).forEach(function(s){n.setAttribute(s,e[s]),s==="data-csp-nonce"&&n.setAttribute("nonce",e["data-csp-nonce"])}),n}function rP(t,e){if(e===void 0&&(e=Promise),zT(t,e),typeof document>"u")return e.resolve(null);var n=JO(t),s=n.url,o=n.attributes,c=o["data-namespace"]||"paypal",d=D2(c);return o["data-js-sdk-library"]||(o["data-js-sdk-library"]="paypal-js"),WO(s,o)&&d?e.resolve(d):sP({url:s,attributes:o},e).then(function(){var p=D2(c);if(p)return p;throw new Error("The window.".concat(c," global variable is not available."))})}function sP(t,e){e===void 0&&(e=Promise),zT(t,e);var n=t.url,s=t.attributes;if(typeof n!="string"||n.length===0)throw new Error("Invalid url.");if(typeof s<"u"&&typeof s!="object")throw new Error("Expected attributes to be an object.");return new e(function(o,c){if(typeof document>"u")return o();ZO({url:n,attributes:s,onSuccess:function(){return o()},onError:function(){var d=new Error('The script "'.concat(n,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return c(d)}})})}function D2(t){return window[t]}function zT(t,e){if(typeof t!="object"||t===null)throw new Error("Expected an options object.");var n=t.environment;if(n&&n!=="production"&&n!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var iP=function(t){var e,n=t.options,s=n===void 0?{clientId:"test"}:n,o=t.children,c=t.deferLoading,d=c===void 0?!1:c,p=R.useReducer(GO,{options:Ht(Ht({},s),(e={},e[eo.DATA_JS_SDK_LIBRARY]=eo.DATA_LIBRARY_VALUE,e[eo.DATA_SDK_INTEGRATION_SOURCE]=eo.DATA_LIBRARY_VALUE,e[xu]="".concat(VT(s)),e)),loadingStatus:d?Fn.INITIAL:Fn.PENDING}),g=p[0],y=p[1];return R.useEffect(function(){if(d===!1&&g.loadingStatus===Fn.INITIAL)return y({type:sa.LOADING_STATUS,value:Fn.PENDING});if(g.loadingStatus===Fn.PENDING){var v=!0;return rP(g.options).then(function(){v&&y({type:sa.LOADING_STATUS,value:Fn.RESOLVED})}).catch(function(_){console.error("".concat(BO," ").concat(_)),v&&y({type:sa.LOADING_STATUS,value:{state:Fn.REJECTED,message:String(_)}})}),function(){v=!1}}},[g.options,d,g.loadingStatus]),$n.createElement(UT.Provider,{value:Ht(Ht({},g),{dispatch:y})},o)};function O2(){}R.createContext({cardFieldsForm:null,fields:{},registerField:O2,unregisterField:O2});var FT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},P2=$n.createContext&&$n.createContext(FT),aP=["attr","size","title"];function oP(t,e){if(t==null)return{};var n=lP(t,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function lP(t,e){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function nf(){return nf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},nf.apply(this,arguments)}function M2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,s)}return n}function rf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M2(Object(n),!0).forEach(function(s){cP(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M2(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function cP(t,e,n){return e=uP(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uP(t){var e=dP(t,"string");return typeof e=="symbol"?e:e+""}function dP(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qT(t){return t&&t.map((e,n)=>$n.createElement(e.tag,rf({key:n},e.attr),qT(e.child)))}function yt(t){return e=>$n.createElement(hP,nf({attr:rf({},t.attr)},e),qT(t.child))}function hP(t){var e=n=>{var{attr:s,size:o,title:c}=t,d=oP(t,aP),p=o||n.size||"1em",g;return n.className&&(g=n.className),t.className&&(g=(g?g+" ":"")+t.className),$n.createElement("svg",nf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,d,{className:g,style:rf(rf({color:t.color||n.color},n.style),t.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),c&&$n.createElement("title",null,c),t.children)};return P2!==void 0?$n.createElement(P2.Consumer,null,n=>e(n)):e(FT)}function fP(t){return yt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(t)}function mP(t){return yt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(t)}function pP(t){return yt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function gP(t){return yt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function yP(t){return yt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function xP(t){return yt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function vP(t){return yt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function wP(t){return yt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function bP(t){return yt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function _P(t){return yt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(t)}function EP(t){return yt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function TP(t){return yt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function L2(t){return yt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}const sf=()=>{const[t,e]=R.useState(!1),[n,s]=R.useState(!1),{currentUser:o,isAdmin:c,userProfile:d}=Qr(),{items:p}=Bl(),{items:g}=Of(),y=Cr(),v=R.useRef(null);R.useEffect(()=>{console.log("Navbar isAdmin value:",c)},[c]),R.useEffect(()=>{const q=ie=>{v.current&&!v.current.contains(ie.target)&&s(!1)};return document.addEventListener("mousedown",q),()=>{document.removeEventListener("mousedown",q)}},[]);const _=()=>{e(!t)},T=()=>{console.log("Toggling profile menu, current state:",n),s(!n)},I=()=>{console.log("Closing profile menu"),s(!1)},B=async()=>{try{await B1(qr),I(),y("/home")}catch(q){console.error("Error signing out:",q)}},U="text-slate-600 hover:text-slate-900 transition-colors duration-300",j="relative text-slate-600 hover:text-slate-900 transition-colors duration-300 cursor-pointer",H=p.reduce((q,ie)=>q+ie.quantity,0),F=g.length;return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"sticky top-0 z-50 font-sans bg-white shadow-sm",children:l.jsxs("nav",{className:"flex items-center justify-between p-4 mx-auto max-w-7xl",children:[l.jsx("div",{className:"text-2xl font-bold text-slate-800",children:l.jsx(He,{to:"/home",children:"PSGSHOP"})}),l.jsxs("ul",{className:"items-center hidden space-x-8 md:flex",children:[l.jsx("li",{children:l.jsx(He,{to:"/home",className:U,children:"Inicio"})}),l.jsx("li",{children:l.jsx(He,{to:"/shop",className:U,children:"Productos"})}),l.jsx("li",{children:l.jsx(He,{to:"/blog",className:U,children:"Blog"})}),l.jsx("li",{children:l.jsx(He,{to:"/contact",className:U,children:"Contacto"})})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:`hidden md:block ${j} text-xl`,children:l.jsx(bP,{})}),l.jsxs(He,{to:"/wishlist",className:`${j} text-xl flex items-center justify-center relative`,children:[l.jsx(vP,{}),F>0&&l.jsx("span",{className:"absolute flex items-center justify-center w-5 h-5 text-xs font-semibold text-white bg-green-500 rounded-full -top-2 -right-3",children:F})]}),l.jsxs(He,{to:"/cart",className:`${j} text-xl flex items-center justify-center relative`,children:[l.jsx(_P,{}),H>0&&l.jsx("span",{className:"absolute flex items-center justify-center w-5 h-5 text-xs font-semibold text-white bg-green-500 rounded-full -top-2 -right-3",children:H})]}),l.jsxs("div",{className:"relative",ref:v,children:[o?l.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-200 border border-gray-300 rounded-full cursor-pointer",onClick:T,children:d?.profileImage?l.jsx("img",{src:d.profileImage,alt:"Profile",className:"object-cover w-full h-full rounded-full"}):l.jsx("span",{className:"text-xs font-bold text-gray-600",children:d?.displayName?.charAt(0).toUpperCase()||o.email?.charAt(0).toUpperCase()||"U"})}):l.jsx(He,{to:"/login",className:"flex items-center justify-center w-8 h-8 bg-gray-200 border border-gray-300 rounded-full cursor-pointer",children:l.jsx(L2,{className:"text-gray-600"})}),o&&n&&l.jsxs("div",{className:"absolute right-0 z-50 w-64 mt-2 bg-gray-800 rounded-lg shadow-lg",children:[l.jsx("div",{className:"p-4 border-b border-gray-700",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gray-200 border border-gray-300 rounded-full",children:d?.profileImage?l.jsx("img",{src:d.profileImage,alt:"Profile",className:"object-cover w-full h-full rounded-full"}):l.jsx("span",{className:"text-sm font-bold text-gray-600",children:d?.displayName?.charAt(0).toUpperCase()||o.email?.charAt(0).toUpperCase()||"U"})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-bold text-white",children:d?.displayName||o.email?.split("@")[0]||"Usuario"}),l.jsx("p",{className:"text-xs text-gray-400",children:o.email})]})]})}),l.jsxs("div",{className:"py-1",children:[console.log("Rendering admin link, isAdmin:",c),c&&l.jsxs(He,{to:"/admin",className:"flex items-center px-4 py-2 text-sm text-white hover:bg-gray-700",onClick:I,children:[l.jsx(xP,{className:"mr-3 text-gray-400"}),l.jsx("span",{children:"Administrar página"})]}),l.jsxs(He,{to:"/profile",className:"flex items-center px-4 py-2 text-sm text-white hover:bg-gray-700",onClick:I,children:[l.jsx(L2,{className:"mr-3 text-gray-400"}),l.jsx("span",{children:"Editar perfil"})]}),l.jsx("div",{className:"border-t border-gray-700",children:l.jsxs(He,{to:"/orders",className:"flex items-center px-4 py-2 text-sm text-white hover:bg-gray-700",onClick:I,children:[l.jsx(wP,{className:"mr-3 text-gray-400"}),l.jsx("span",{children:"Mis Pedidos"})]})}),l.jsxs("button",{onClick:B,className:"flex items-center w-full px-4 py-2 text-sm text-left text-white hover:bg-gray-700",children:[l.jsx(EP,{className:"mr-3 text-gray-400"}),l.jsx("span",{children:"Cerrar sesión"})]})]})]})]}),l.jsxs("div",{className:"ml-3 text-2xl cursor-pointer md:hidden text-slate-800",onClick:_,children:[l.jsx(yP,{}),l.jsx("span",{className:"absolute flex items-center justify-center w-5 h-5 text-xs font-semibold text-white bg-green-500 rounded-full -top-1 -right-1",children:"11"})]})]})]})}),l.jsxs(l.Fragment,{children:[t&&l.jsx("div",{className:"fixed inset-0 z-40 bg-black/40",onClick:_}),l.jsxs("aside",{className:`fixed top-0 left-0 h-full w-72 bg-white shadow-xl transform ${t?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out z-50 p-5 flex flex-col font-sans`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-10",children:[l.jsx("div",{className:"text-xl font-bold text-slate-800",children:"BOWSHOP"}),l.jsx("button",{onClick:_,className:"text-2xl cursor-pointer text-slate-600 hover:text-slate-900",children:l.jsx(TP,{})})]}),l.jsxs("ul",{className:"flex-grow space-y-4",children:[l.jsx("li",{children:l.jsx(He,{to:"/home",className:`text-lg ${U}`,onClick:_,children:"Inicio"})}),l.jsx("li",{children:l.jsx(He,{to:"/shop",className:`text-lg ${U}`,onClick:_,children:"Productos"})}),l.jsx("li",{children:l.jsx(He,{to:"/blog",className:`text-lg ${U}`,onClick:_,children:"Blog"})}),l.jsx("li",{children:l.jsx(He,{to:"/contact",className:`text-lg ${U}`,onClick:_,children:"Contacto"})}),l.jsx("li",{children:l.jsx(He,{to:"/cart",className:`text-lg ${U}`,onClick:_,children:"Carrito"})}),l.jsx("li",{children:l.jsx(He,{to:"/wishlist",className:`text-lg ${U}`,onClick:_,children:"Favoritos"})}),o&&c&&l.jsx("li",{children:l.jsx(He,{to:"/admin",className:"text-lg font-medium text-blue-600",onClick:_,children:"Panel administrativo"})})]}),l.jsx("div",{className:"mt-4",children:o?l.jsx("button",{onClick:()=>{B(),_()},className:"w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar Sesión"}):l.jsx(He,{to:"/login",className:"block w-full px-4 py-2 text-sm font-medium text-center text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:_,children:"Iniciar Sesión"})}),l.jsxs("div",{className:"flex justify-center p-5 mt-auto space-x-6",children:[l.jsx("a",{href:"#",className:`text-2xl ${j}`,children:l.jsx(gP,{})}),l.jsx("a",{href:"#",className:`text-2xl ${j}`,children:l.jsx(mP,{})}),l.jsx("a",{href:"#",className:`text-2xl ${j}`,children:l.jsx(fP,{})}),l.jsx("a",{href:"#",className:`text-2xl ${j}`,children:l.jsx(pP,{})})]})]})]})]})},AP=()=>{const{items:t,getTotalPrice:e,loading:n,clearCart:s,coupon:o}=Bl(),{currentUser:c}=Qr(),d=Cr(),[p,g]=R.useState([]),[y,v]=R.useState(null),[_,T]=R.useState({name:"",street:"",city:"",state:"",zipCode:"",country:"Colombia"}),[I,B]=R.useState(!1),[U,j]=R.useState(!0),[H,F]=R.useState(!1),q=t.reduce((O,C)=>O+C.price*C.quantity,0),ie=o?q-e():0,te=e();R.useEffect(()=>{(async()=>{if(!c){d("/login");return}try{const C=ot(je,"users",c.uid),ke=await Gr(C);if(ke.exists()){const G=ke.data().addresses||[];g(G);const oe=G.find(ge=>ge.isDefault);oe?v(oe):G.length>0&&v(G[0])}}catch(C){console.error("Error loading addresses:",C),Ae.fire({title:"Error",text:"Error al cargar las direcciones",icon:"error",confirmButtonText:"Aceptar"})}finally{j(!1)}})()},[c,d]);const de=O=>{const{name:C,value:ke}=O.target;T(Ee=>({...Ee,[C]:ke}))},k=async O=>{if(O.preventDefault(),!_.name||!_.street||!_.city||!_.state||!_.zipCode){Ae.fire({title:"Error",text:"Por favor completa todos los campos de la dirección",icon:"error",confirmButtonText:"Aceptar"});return}try{const C=ot(je,"users",c.uid),ke={..._,id:Date.now(),isDefault:p.length===0};await Ur(C,{addresses:[...p,ke]});const Ee=[...p,ke];g(Ee),v(ke),B(!1),T({name:"",street:"",city:"",state:"",zipCode:"",country:"Colombia"}),Ae.fire({title:"Dirección agregada",text:"La dirección se ha agregado correctamente",icon:"success",confirmButtonText:"Aceptar"})}catch(C){console.error("Error adding address:",C),Ae.fire({title:"Error",text:"Error al agregar la dirección: "+C.message,icon:"error",confirmButtonText:"Aceptar"})}},A=async(O,C)=>{try{const ke={userId:c.uid,userEmail:c.email,items:t,subtotal:parseFloat(q),discount:parseFloat(ie),totalAmount:parseFloat(te),address:y,paymentMethod:O,paymentStatus:C,orderStatus:"pending",coupon:o||null,createdAt:new Date,updatedAt:new Date},Ee=Xt(je,"orders"),G=await kf(Ee,ke);return console.log("Order created with ID:",G.id),G.id}catch(ke){throw console.error("Error creating order:",ke),ke}},S=(O,C)=>C.order.capture().then(async ke=>{F(!0);try{await A("PayPal","completed"),s(),Ae.fire({title:"¡Pago exitoso!",text:`Gracias por tu compra, ${ke.payer.name.given_name}!`,icon:"success",confirmButtonText:"Aceptar"}).then(()=>{d("/home")})}catch(Ee){console.error("Error processing order:",Ee),Ae.fire({title:"Error",text:"Hubo un error al procesar tu pedido. Por favor contacta al soporte.",icon:"error",confirmButtonText:"Aceptar"})}finally{F(!1)}}),L=O=>{console.error("PayPal payment error:",O),Ae.fire({title:"Error",text:"Hubo un error al procesar el pago con PayPal. Por favor intenta nuevamente.",icon:"error",confirmButtonText:"Aceptar"})},M=async()=>{if(!y){Ae.fire({title:"Error",text:"Por favor selecciona una dirección de envío",icon:"error",confirmButtonText:"Aceptar"});return}F(!0);try{await A("Cash on Delivery","pending"),s(),Ae.fire({title:"Pedido confirmado",text:"Tu pedido ha sido confirmado. Pagarás contra entrega.",icon:"success",confirmButtonText:"Aceptar"}).then(()=>{d("/home")})}catch(O){console.error("Error processing order:",O),Ae.fire({title:"Error",text:"Error al procesar el pedido: "+O.message,icon:"error",confirmButtonText:"Aceptar"})}finally{F(!1)}};return n||U?l.jsxs("div",{children:[l.jsx(sf,{}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})})]}):t.length===0?(d("/cart"),null):l.jsxs("div",{children:[l.jsx(sf,{}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Checkout"}),l.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-x-12",children:[l.jsxs("div",{className:"lg:col-span-8",children:[l.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-8",children:l.jsxs("div",{className:"px-4 py-6 sm:px-6",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dirección de Envío"}),p.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsxs("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),l.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay direcciones guardadas"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Agrega una nueva dirección para continuar."})]}):l.jsx("div",{className:"space-y-4",children:p.map(O=>l.jsx("div",{className:`border rounded-lg p-4 cursor-pointer ${y&&y.id===O.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>v(O),children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex items-center h-5",children:l.jsx("input",{type:"radio",name:"address",checked:y&&y.id===O.id,onChange:()=>v(O),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"})}),l.jsxs("div",{className:"ml-3",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[O.name,O.isDefault&&l.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:"Predeterminada"})]}),l.jsxs("div",{className:"mt-1 text-sm text-gray-500",children:[l.jsx("p",{children:O.street}),l.jsxs("p",{children:[O.city,", ",O.state," ",O.zipCode]}),l.jsx("p",{children:O.country})]})]})]})},O.id))}),l.jsx("div",{className:"mt-6",children:l.jsxs("button",{type:"button",onClick:()=>B(!I),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[l.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),p.length===0?"Agregar Dirección":"Agregar Nueva Dirección"]})}),I&&l.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[l.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:p.length===0?"Agregar Dirección":"Nueva Dirección"}),l.jsxs("form",{onSubmit:k,children:[l.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre de la Dirección"}),l.jsx("input",{type:"text",name:"name",id:"name",value:_.name,onChange:de,placeholder:"Ej: Casa, Trabajo",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700",children:"Calle y Número"}),l.jsx("input",{type:"text",name:"street",id:"street",value:_.street,onChange:de,placeholder:"Ej: Av. Principal 123",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"Ciudad"}),l.jsx("input",{type:"text",name:"city",id:"city",value:_.city,onChange:de,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700",children:"Estado/Provincia"}),l.jsx("input",{type:"text",name:"state",id:"state",value:_.state,onChange:de,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700",children:"Código Postal"}),l.jsx("input",{type:"text",name:"zipCode",id:"zipCode",value:_.zipCode,onChange:de,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:"País"}),l.jsx("input",{type:"text",name:"country",id:"country",value:_.country,onChange:de,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),l.jsxs("div",{className:"mt-6 flex space-x-3",children:[l.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Guardar Dirección"}),l.jsx("button",{type:"button",onClick:()=>B(!1),className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"})]})]})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l.jsxs("div",{className:"px-4 py-6 sm:px-6",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumen del Pedido"}),l.jsx("div",{className:"flow-root",children:l.jsx("ul",{className:"-my-6 divide-y divide-gray-200",children:t.map(O=>l.jsxs("li",{className:"py-6 flex",children:[l.jsx("div",{className:"flex-shrink-0 w-24 h-24 border border-gray-200 rounded-md overflow-hidden",children:l.jsx("img",{src:O.imageUrl||"https://via.placeholder.com/100x100.png?text=Moño",alt:O.name,className:"w-full h-full object-center object-cover",onError:C=>{C.target.onerror=null,C.target.src="https://via.placeholder.com/100x100.png?text=Moño"}})}),l.jsxs("div",{className:"ml-4 flex-1 flex flex-col",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[l.jsx("h3",{children:O.name}),l.jsxs("p",{className:"ml-4",children:["$",parseFloat(O.price*O.quantity).toLocaleString("es-CO")]})]}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:O.category})]}),l.jsx("div",{className:"flex-1 flex items-end justify-between text-sm",children:l.jsxs("p",{className:"text-gray-500",children:["Cantidad: ",O.quantity]})})]})]},O.id))})})]})})]}),l.jsx("div",{className:"mt-8 lg:mt-0 lg:col-span-4",children:l.jsxs("div",{className:"bg-gray-50 rounded-lg px-4 py-6 sm:p-6 lg:p-8",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Resumen del Pedido"}),l.jsxs("dl",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"text-sm text-gray-600",children:"Subtotal"}),l.jsxs("dd",{className:"text-sm font-medium text-gray-900",children:["$",parseFloat(q).toLocaleString("es-CO")]})]}),o&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("dt",{className:"text-sm text-gray-600",children:["Descuento (",o.code,")"]}),l.jsxs("dd",{className:"text-sm font-medium text-green-600",children:["-$",parseFloat(ie).toLocaleString("es-CO")]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("dt",{className:"text-sm text-gray-600",children:"Envío"}),l.jsx("dd",{className:"text-sm font-medium text-gray-900",children:"$0"})]}),l.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-6",children:[l.jsx("dt",{className:"text-base font-medium text-gray-900",children:"Total"}),l.jsxs("dd",{className:"text-base font-medium text-gray-900",children:["$",parseFloat(te).toLocaleString("es-CO")]})]})]}),y&&l.jsxs("div",{className:"mt-8 p-4 bg-white rounded-lg border border-gray-200",children:[l.jsx("h3",{className:"text-md font-medium text-gray-900 mb-2",children:"Dirección de Envío"}),l.jsxs("div",{className:"text-sm text-gray-500",children:[l.jsx("p",{className:"font-medium",children:y.name}),l.jsx("p",{children:y.street}),l.jsxs("p",{children:[y.city,", ",y.state," ",y.zipCode]}),l.jsx("p",{children:y.country})]})]}),l.jsxs("div",{className:"mt-8",children:[l.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Método de Pago"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"w-full",children:y?l.jsx(oy,{style:{layout:"vertical"},createOrder:(O,C)=>C.order.create({purchase_units:[{amount:{value:parseFloat(te).toFixed(2),currency_code:"COP"}}]}),onApprove:S,onError:L}):l.jsxs("button",{disabled:!0,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white opacity-50 cursor-not-allowed",children:[l.jsxs("svg",{className:"mr-2 h-5 w-5",viewBox:"0 0 38 24",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{fill:"#253b80",d:"M35.71 15.39c.27-.4.4-.87.36-1.35-.04-.48-.24-.93-.57-1.28-.33-.35-.76-.55-1.22-.56-.46 0-.89.19-1.22.53-.33.34-.52.8-.54 1.28-.02.48.12.94.4 1.33.28.39.68.67 1.14.8.46.13.95.1 1.4-.08.45-.18.84-.49 1.12-.89z"}),l.jsx("path",{fill:"#179bd7",d:"M13.34 15.96c.34-.46.52-1.02.51-1.59-.01-.57-.22-1.12-.59-1.54-.37-.42-.87-.67-1.41-.71-.54-.04-1.08.13-1.51.46-.43.33-.73.81-.85 1.35-.12.54-.07 1.11.14 1.62.21.51.57.94 1.03 1.23.46.29.99.42 1.53.37.54-.05 1.05-.27 1.47-.63z"}),l.jsx("path",{fill:"#253b80",d:"M22.72 16.11c.41-.36.67-.87.72-1.41.05-.54-.09-1.08-.39-1.51-.3-.43-.75-.73-1.26-.84-.51-.11-1.04-.06-1.52.14-.5.2-.88.54-1.15.97-.27.43-.41.94-.4 1.47.01.53.18 1.04.48 1.47.3.43.74.75 1.24.91.5.16 1.03.17 1.54.03.51-.14.96-.43 1.3-.83z"}),l.jsx("path",{fill:"#179bd7",d:"M30.21 16.26c.45-.31.75-.8.83-1.34.08-.54-.03-1.09-.31-1.55-.28-.46-.72-.81-1.23-.96-.51-.15-1.05-.13-1.55.05-.5.18-.92.51-1.19.94-.27.43-.4.93-.37 1.44.03.51.21.99.51 1.4.3.41.74.72 1.23.88.49.16 1.01.18 1.51.06.5-.12.94-.4 1.26-.78z"}),l.jsx("path",{fill:"#253b80",d:"M5.39 16.39c.47-.23.81-.66.93-1.16.12-.5.03-1.03-.25-1.45-.28-.42-.71-.71-1.2-.82-.49-.11-1-.08-1.46.09-.46.17-.85.49-1.11.89-.26.4-.37.88-.32 1.37.05.49.27.95.61 1.31.34.36.79.6 1.28.68.49.08 1-.01 1.44-.24z"})]}),"Pagar con PayPal"]})}),l.jsxs("button",{onClick:M,disabled:H||!y,className:`w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${H||!y?"opacity-50 cursor-not-allowed":""}`,children:[H?l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):l.jsx("svg",{className:"mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Pagar Contra Entrega"]})]})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("button",{onClick:()=>d("/cart"),className:"text-indigo-600 hover:text-indigo-500",children:"← Volver al Carrito"})})]})})]})]})]})},NP=()=>{const{currentUser:t,userRole:e,refreshUserData:n}=Qr(),s=Cr(),[o,c]=R.useState({displayName:"",email:"",phone:"",profileImage:""}),[d,p]=R.useState({currentPassword:"",newPassword:"",confirmNewPassword:""}),[g,y]=R.useState([]),[v,_]=R.useState({id:Date.now(),name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1}),[T,I]=R.useState(null),[B,U]=R.useState({id:null,name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1}),[j,H]=R.useState("profile"),[F,q]=R.useState(!0),[ie,te]=R.useState(!1),[de,k]=R.useState(!1),[A,S]=R.useState(!1);R.useEffect(()=>{(async()=>{if(!t){s("/login");return}try{const le=ot(je,"users",t.uid),pe=await Gr(le);if(pe.exists()){const he=pe.data();c({displayName:he.displayName||t.displayName||"",email:t.email,phone:he.phone||"",profileImage:he.profileImage||t.photoURL||""}),y(he.addresses||[])}else c({displayName:t.displayName||"",email:t.email,phone:"",profileImage:t.photoURL||""}),y([])}catch(le){console.error("Error loading profile:",le),Ae.fire({title:"Error",text:"Error al cargar el perfil",icon:"error",confirmButtonText:"Aceptar"})}finally{q(!1)}})()},[t,s]);const L=ee=>{const{name:le,value:pe}=ee.target;c(he=>({...he,[le]:pe}))},M=ee=>{const{name:le,value:pe}=ee.target;p(he=>({...he,[le]:pe}))},O=ee=>{const{name:le,value:pe}=ee.target;_(he=>({...he,[le]:pe}))},C=ee=>{const{name:le,value:pe}=ee.target;U(he=>({...he,[le]:pe}))},ke=ee=>{const le=ee.target.files[0];if(le){if(le.size>2*1024*1024){Ae.fire({title:"Archivo muy grande",text:"La imagen debe ser menor a 2MB",icon:"warning",confirmButtonText:"Aceptar"});return}if(!le.type.match("image.*")){Ae.fire({title:"Tipo de archivo inválido",text:"Por favor selecciona una imagen",icon:"warning",confirmButtonText:"Aceptar"});return}const pe=new FileReader;pe.onload=he=>{c(Ue=>({...Ue,profileImage:he.target.result}))},pe.readAsDataURL(le)}},Ee=async ee=>{ee.preventDefault(),te(!0);try{const le=ot(je,"users",t.uid),pe=await Gr(le);let he={...o,updatedAt:new Date};if(pe.exists()){const Ue=pe.data();Ue.hasOwnProperty("role")&&(he.role=Ue.role),Ue.hasOwnProperty("createdAt")&&(he.createdAt=Ue.createdAt),Ue.hasOwnProperty("addresses")&&(he.addresses=Ue.addresses)}else he.role="customer",he.createdAt=new Date,he.addresses=[];await ha(le,he),console.log("Profile saved, refreshing user data"),n(),Ae.fire({title:"Perfil actualizado",text:"Tu perfil se ha actualizado correctamente",icon:"success",confirmButtonText:"Aceptar"})}catch(le){console.error("Error saving profile:",le),Ae.fire({title:"Error",text:"Error al guardar el perfil: "+le.message,icon:"error",confirmButtonText:"Aceptar"})}finally{te(!1)}},G=async ee=>{if(ee.preventDefault(),k(!0),d.newPassword!==d.confirmNewPassword){Ae.fire({title:"Error",text:"Las contraseñas nuevas no coinciden",icon:"error",confirmButtonText:"Aceptar"}),k(!1);return}if(d.newPassword.length<6){Ae.fire({title:"Error",text:"La nueva contraseña debe tener al menos 6 caracteres",icon:"error",confirmButtonText:"Aceptar"}),k(!1);return}try{const le=fo.credential(t.email,d.currentPassword);await DR(t,le),await LR(t,d.newPassword),Ae.fire({title:"Contraseña actualizada",text:"Tu contraseña se ha actualizado correctamente",icon:"success",confirmButtonText:"Aceptar"}),p({currentPassword:"",newPassword:"",confirmNewPassword:""})}catch(le){console.error("Error changing password:",le);let pe="Error al cambiar la contraseña";switch(le.code){case"auth/wrong-password":pe="La contraseña actual es incorrecta";break;case"auth/too-many-requests":pe="Demasiados intentos. Por favor, inténtalo más tarde";break;default:pe="Error al cambiar la contraseña: "+le.message}Ae.fire({title:"Error",text:pe,icon:"error",confirmButtonText:"Aceptar"})}finally{k(!1)}},oe=async ee=>{if(ee.preventDefault(),S(!0),!v.name||!v.street||!v.city||!v.state||!v.zipCode||!v.country){Ae.fire({title:"Error",text:"Por favor completa todos los campos de la dirección",icon:"error",confirmButtonText:"Aceptar"}),S(!1);return}try{const le=ot(je,"users",t.uid),pe={...v,id:Date.now()};if(g.length===0||v.isDefault){pe.isDefault=!0;const he=g.map(Ue=>({...Ue,isDefault:!1}));y([...he,pe])}else y([...g,pe]);await Ur(le,{addresses:d2(pe)}),Ae.fire({title:"Dirección agregada",text:"La dirección se ha agregado correctamente",icon:"success",confirmButtonText:"Aceptar"}),_({id:Date.now(),name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1})}catch(le){console.error("Error adding address:",le),Ae.fire({title:"Error",text:"Error al agregar la dirección: "+le.message,icon:"error",confirmButtonText:"Aceptar"})}finally{S(!1)}},ge=ee=>{I(ee.id),U({...ee})},Ve=()=>{I(null),U({id:null,name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1})},V=async ee=>{if(ee.preventDefault(),S(!0),!B.name||!B.street||!B.city||!B.state||!B.zipCode||!B.country){Ae.fire({title:"Error",text:"Por favor completa todos los campos de la dirección",icon:"error",confirmButtonText:"Aceptar"}),S(!1);return}try{const le=ot(je,"users",t.uid),pe=g.find(Ue=>Ue.id===B.id);pe&&await Ur(le,{addresses:h2(pe)});const he={...B};await Ur(le,{addresses:d2(he)}),y(g.map(Ue=>Ue.id===B.id?he:Ue)),Ae.fire({title:"Dirección actualizada",text:"La dirección se ha actualizado correctamente",icon:"success",confirmButtonText:"Aceptar"}),I(null),U({id:null,name:"",street:"",city:"",state:"",zipCode:"",country:"",isDefault:!1})}catch(le){console.error("Error updating address:",le),Ae.fire({title:"Error",text:"Error al actualizar la dirección: "+le.message,icon:"error",confirmButtonText:"Aceptar"})}finally{S(!1)}},ue=async ee=>{Ae.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async le=>{if(le.isConfirmed)try{const pe=ot(je,"users",t.uid),he=g.find(Ue=>Ue.id===ee);he&&(await Ur(pe,{addresses:h2(he)}),y(g.filter(Ue=>Ue.id!==ee)),Ae.fire({title:"Dirección eliminada",text:"La dirección se ha eliminado correctamente",icon:"success",confirmButtonText:"Aceptar"}))}catch(pe){console.error("Error deleting address:",pe),Ae.fire({title:"Error",text:"Error al eliminar la dirección: "+pe.message,icon:"error",confirmButtonText:"Aceptar"})}})},ye=async ee=>{try{const le=ot(je,"users",t.uid),pe=g.map(he=>({...he,isDefault:he.id===ee}));y(pe),await Ur(le,{addresses:pe}),Ae.fire({title:"Dirección predeterminada",text:"La dirección se ha establecido como predeterminada",icon:"success",confirmButtonText:"Aceptar"})}catch(le){console.error("Error setting default address:",le),Ae.fire({title:"Error",text:"Error al establecer la dirección predeterminada: "+le.message,icon:"error",confirmButtonText:"Aceptar"})}};return F?l.jsx("div",{children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})})}):l.jsx("div",{children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"max-w-5xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Mi Perfil"}),l.jsx("div",{className:"border-b border-gray-200 mb-8",children:l.jsxs("nav",{className:"-mb-px flex space-x-8",children:[l.jsx("button",{onClick:()=>H("profile"),className:`py-4 px-1 border-b-2 font-medium text-sm ${j==="profile"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Perfil"}),l.jsx("button",{onClick:()=>H("security"),className:`py-4 px-1 border-b-2 font-medium text-sm ${j==="security"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Seguridad"}),l.jsx("button",{onClick:()=>H("addresses"),className:`py-4 px-1 border-b-2 font-medium text-sm ${j==="addresses"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Direcciones"})]})}),j==="profile"&&l.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:l.jsx("div",{className:"px-6 py-8",children:l.jsxs("form",{onSubmit:Ee,children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Foto de Perfil"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:o.profileImage?l.jsx("img",{src:o.profileImage,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-2 border-gray-300"}):l.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 border-2 border-gray-300 flex items-center justify-center",children:l.jsx("span",{className:"text-gray-500 text-3xl font-bold",children:o.displayName?.charAt(0)||o.email?.charAt(0)||"U"})})}),l.jsxs("div",{className:"ml-6",children:[l.jsxs("label",{className:"block",children:[l.jsx("span",{className:"px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:"Cambiar foto"}),l.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:ke})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"JPG, GIF o PNG. Tamaño máximo 2MB"})]})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Información Personal"}),l.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700",children:"Nombre Completo"}),l.jsx("input",{type:"text",name:"displayName",id:"displayName",value:o.displayName,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Correo Electrónico"}),l.jsx("input",{type:"email",name:"email",id:"email",value:o.email,disabled:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 bg-gray-100"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"El correo no puede ser modificado"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Teléfono"}),l.jsx("input",{type:"tel",name:"phone",id:"phone",value:o.phone,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Rol"}),l.jsx("input",{type:"text",name:"role",id:"role",value:e||"customer",disabled:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 bg-gray-100"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"El rol no puede ser modificado"})]})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:ie,className:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:ie?"Guardando...":"Guardar Cambios"})})]})})}),j==="security"&&l.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:l.jsxs("div",{className:"px-6 py-8",children:[l.jsxs("form",{onSubmit:G,children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cambiar Contraseña"}),l.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:l.jsxs("div",{children:[l.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:"Contraseña Actual"}),l.jsx("input",{type:"password",name:"currentPassword",id:"currentPassword",value:d.currentPassword,onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})}),l.jsxs("div",{className:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"Nueva Contraseña"}),l.jsx("input",{type:"password",name:"newPassword",id:"newPassword",value:d.newPassword,onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmNewPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmar Nueva Contraseña"}),l.jsx("input",{type:"password",name:"confirmNewPassword",id:"confirmNewPassword",value:d.confirmNewPassword,onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:de,className:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:de?"Guardando...":"Cambiar Contraseña"})})]}),l.jsxs("div",{className:"mt-12",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dispositivos Activos"}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:l.jsx("svg",{className:"h-6 w-6 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Este dispositivo"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Última actividad: Ahora mismo"})]}),l.jsx("div",{className:"ml-auto",children:l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activo"})})]})}),l.jsx("div",{className:"mt-4 text-sm text-gray-500",children:l.jsx("p",{children:"Para seguridad adicional, si ves un dispositivo que no reconoces, cierra la sesión en todos los dispositivos y cambia tu contraseña."})})]})]})}),j==="addresses"&&l.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:l.jsxs("div",{className:"px-6 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:T?"Editar Dirección":"Agregar Nueva Dirección"}),l.jsxs("form",{onSubmit:T?V:oe,children:[l.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"addressName",className:"block text-sm font-medium text-gray-700",children:"Nombre de la Dirección"}),l.jsx("input",{type:"text",name:"name",id:"addressName",value:T?B.name:v.name,onChange:T?C:O,placeholder:"Ej: Casa, Trabajo",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"addressStreet",className:"block text-sm font-medium text-gray-700",children:"Calle y Número"}),l.jsx("input",{type:"text",name:"street",id:"addressStreet",value:T?B.street:v.street,onChange:T?C:O,placeholder:"Ej: Av. Principal 123",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"addressCity",className:"block text-sm font-medium text-gray-700",children:"Ciudad"}),l.jsx("input",{type:"text",name:"city",id:"addressCity",value:T?B.city:v.city,onChange:T?C:O,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"addressState",className:"block text-sm font-medium text-gray-700",children:"Estado/Provincia"}),l.jsx("input",{type:"text",name:"state",id:"addressState",value:T?B.state:v.state,onChange:T?C:O,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"addressZipCode",className:"block text-sm font-medium text-gray-700",children:"Código Postal"}),l.jsx("input",{type:"text",name:"zipCode",id:"addressZipCode",value:T?B.zipCode:v.zipCode,onChange:T?C:O,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"addressCountry",className:"block text-sm font-medium text-gray-700",children:"País"}),l.jsx("input",{type:"text",name:"country",id:"addressCountry",value:T?B.country:v.country,onChange:T?C:O,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"addressIsDefault",name:"isDefault",type:"checkbox",checked:T?B.isDefault:v.isDefault,onChange:ee=>T?U(le=>({...le,isDefault:ee.target.checked})):_(le=>({...le,isDefault:ee.target.checked})),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"addressIsDefault",className:"ml-2 block text-sm text-gray-900",children:"Establecer como dirección predeterminada"})]})]}),l.jsxs("div",{className:"mt-6 flex space-x-3",children:[l.jsx("button",{type:"submit",disabled:A,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:A?"Guardando...":T?"Guardar Cambios":"Agregar Dirección"}),T&&l.jsx("button",{type:"button",onClick:Ve,className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"})]})]})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Direcciones Guardadas"}),g.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsxs("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),l.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay direcciones"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Agrega tu primera dirección usando el formulario de arriba."})]}):l.jsx("div",{className:"space-y-4",children:g.map(ee=>l.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900",children:ee.name}),l.jsx("p",{className:"text-sm text-gray-500",children:ee.street}),l.jsxs("p",{className:"text-sm text-gray-500",children:[ee.city,", ",ee.state," ",ee.zipCode]}),l.jsx("p",{className:"text-sm text-gray-500",children:ee.country}),ee.isDefault&&l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 mt-2",children:"Predeterminada"})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>ge(ee),className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-indigo-700 bg-indigo-100 hover:bg-indigo-200",children:"Editar"}),l.jsx("button",{onClick:()=>ye(ee.id),disabled:ee.isDefault,className:`inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-indigo-700 ${ee.isDefault?"bg-gray-100":"bg-indigo-100 hover:bg-indigo-200"}`,children:ee.isDefault?"Predeterminada":"Hacer Predeterminada"}),l.jsx("button",{onClick:()=>ue(ee.id),className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-red-700 bg-red-100 hover:bg-red-200",children:"Eliminar"})]})]})},ee.id))})]})]})})]})})})},SP=()=>{const[t,e]=R.useState(""),[n,s]=R.useState(""),[o,c]=R.useState(""),[d,p]=R.useState(!1),g=Cr(),{currentUser:y}=Qr();$n.useEffect(()=>{y&&g("/home")},[y,g]);const v=async()=>{c(""),p(!0);try{const T=new gs,B=(await Z1(qr,T)).user,U=ot(je,"users",B.uid);(await Gr(U)).exists()||(await ha(U,{email:B.email,displayName:B.displayName||"",profileImage:B.photoURL||"",createdAt:new Date,role:"customer"}),console.log("User info stored successfully for Google user")),g("/home")}catch(T){console.error("Google sign-in error:",T),c("Error al iniciar sesión con Google. Por favor, inténtalo de nuevo.")}finally{p(!1)}},_=async T=>{T.preventDefault(),c(""),p(!0);try{await MR(qr,t,n),g("/home")}catch(I){switch(I.code){case"auth/user-not-found":c("No se encontró una cuenta con ese correo electrónico.");break;case"auth/wrong-password":c("Contraseña incorrecta.");break;case"auth/invalid-email":c("El correo electrónico no es válido.");break;case"auth/user-disabled":c("Esta cuenta ha sido deshabilitada.");break;default:c("Error al iniciar sesión. Por favor, verifica tus credenciales.")}}finally{p(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:l.jsx("svg",{className:"h-6 w-6 text-purple-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Login"}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"See your growth and get consulting support!"})]}),o&&l.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:l.jsx("span",{className:"block sm:inline",children:o})}),l.jsx("div",{children:l.jsxs("button",{onClick:v,disabled:d,className:"w-full flex items-center justify-center gap-3 rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50",children:[l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[l.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),l.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),l.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),l.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),l.jsx("span",{children:"Sign in with Google"})]})}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"bg-white px-2 text-gray-500",children:"or Sign in with Email"})})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:_,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email*"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"mail@website.com",value:t,onChange:T=>e(T.target.value),disabled:d})})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password*"}),l.jsx("div",{className:"text-sm",children:l.jsx(He,{to:"/reset-password",className:"font-medium text-purple-600 hover:text-purple-500",children:"Forgot password?"})})]}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"Min. 8 character",value:n,onChange:T=>s(T.target.value),disabled:d})})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-full text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:d?"Logging in...":"Login"})})]}),l.jsx("div",{className:"text-center",children:l.jsxs("p",{className:"text-sm text-gray-500",children:["Not registered yet?"," ",l.jsx(He,{to:"/register",className:"font-medium text-purple-600 hover:text-purple-500",children:"Create an Account"})]})}),l.jsx("div",{className:"mt-8 text-center",children:l.jsx("p",{className:"text-xs text-gray-500",children:"©2020 Felix All rights reserved."})})]})})},CP=()=>{const[t,e]=R.useState(""),[n,s]=R.useState(""),[o,c]=R.useState(""),[d,p]=R.useState(""),[g,y]=R.useState(""),[v,_]=R.useState(!1),T=Cr(),{firebaseError:I}=Qr(),B=async()=>{p(""),y(""),_(!0);try{const j=new gs,F=(await Z1(qr,j)).user,q=ot(je,"users",F.uid);(await Gr(q)).exists()||(await ha(q,{email:F.email,displayName:F.displayName||"",profileImage:F.photoURL||"",createdAt:new Date,role:"customer"}),console.log("User info stored successfully for Google user")),T("/home")}catch(j){console.error("Google sign-up error:",j),p("Error al registrarse con Google. Por favor, inténtalo de nuevo.")}finally{_(!1)}},U=async j=>{if(j.preventDefault(),p(""),y(""),I){p(I);return}if(!qr||!je){p("Firebase no está configurado correctamente. Por favor, verifica tu archivo .env");return}if(n!==o){p("Las contraseñas no coinciden");return}if(n.length<6){p("La contraseña debe tener al menos 6 caracteres");return}_(!0);try{console.log("Attempting to create user with email:",t);const F=(await PR(qr,t,n)).user;console.log("User created successfully:",F),console.log("Storing user info in Firestore..."),await ha(ot(je,"users",F.uid),{email:F.email,displayName:"",profileImage:"",createdAt:new Date,role:"customer"}),console.log("User info stored successfully"),y("Cuenta creada exitosamente. Redirigiendo..."),setTimeout(()=>{T("/home")},2e3)}catch(H){switch(console.error("Registration error:",H),console.error("Error code:",H.code),console.error("Error message:",H.message),H.code){case"auth/email-already-in-use":p("Este correo electrónico ya está registrado.");break;case"auth/invalid-email":p("El correo electrónico no es válido.");break;case"auth/operation-not-allowed":p("El registro de usuarios está deshabilitado. Por favor, habilita la autenticación en la consola de Firebase.");break;case"auth/weak-password":p("La contraseña es muy débil.");break;default:p(`Error al crear la cuenta: ${H.message}`)}}finally{_(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:l.jsx("svg",{className:"h-6 w-6 text-purple-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Register"}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Create an account to get started!"})]}),I&&l.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[l.jsx("strong",{className:"font-bold",children:"Configuración incompleta! "}),l.jsx("span",{className:"block sm:inline",children:I})]}),d&&l.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:l.jsx("span",{className:"block sm:inline",children:d})}),g&&l.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:l.jsx("span",{className:"block sm:inline",children:g})}),l.jsx("div",{children:l.jsxs("button",{onClick:B,disabled:v||I,className:"w-full flex items-center justify-center gap-3 rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50",children:[l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[l.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),l.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),l.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),l.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),l.jsx("span",{children:"Sign up with Google"})]})}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"bg-white px-2 text-gray-500",children:"or Sign up with Email"})})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:U,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email*"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"mail@website.com",value:t,onChange:j=>e(j.target.value),disabled:I||v})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password*"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"Min. 8 character",value:n,onChange:j=>s(j.target.value),disabled:I||v})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm Password*"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"Confirm your password",value:o,onChange:j=>c(j.target.value),disabled:I||v})})]})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:v||I,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-full text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:v?"Creating Account...":"Create Account"})})]}),l.jsx("div",{className:"text-center",children:l.jsxs("p",{className:"text-sm text-gray-500",children:["Already have an account?"," ",l.jsx(He,{to:"/login",className:"font-medium text-purple-600 hover:text-purple-500",children:"Sign in"})]})}),l.jsx("div",{className:"mt-8 text-center",children:l.jsx("p",{className:"text-xs text-gray-500",children:"©2020 Felix All rights reserved."})})]})})},RP=()=>{const[t,e]=R.useState(""),[n,s]=R.useState(""),[o,c]=R.useState(""),[d,p]=R.useState(!1);Cr();const g=async y=>{y.preventDefault(),c(""),s(""),p(!0);try{await OR(qr,t),s("Se ha enviado un correo para restablecer tu contraseña. Revisa tu bandeja de entrada.")}catch(v){switch(v.code){case"auth/user-not-found":c("No se encontró una cuenta con ese correo electrónico.");break;case"auth/invalid-email":c("El correo electrónico no es válido.");break;default:c("Error al enviar el correo de restablecimiento. Por favor, inténtalo de nuevo.")}}finally{p(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsxs("div",{children:[l.jsx("div",{className:"mx-auto h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:l.jsx("svg",{className:"h-6 w-6 text-purple-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),l.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Restablecer Contraseña"}),l.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña."})]}),n&&l.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:l.jsx("span",{className:"block sm:inline",children:n})}),o&&l.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:l.jsx("span",{className:"block sm:inline",children:o})}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Correo Electrónico"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm",placeholder:"mail@website.com",value:t,onChange:y=>e(y.target.value),disabled:d})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-full text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:d?"Enviando...":"Enviar Enlace de Restablecimiento"})})]}),l.jsx("div",{className:"text-center",children:l.jsx(He,{to:"/login",className:"font-medium text-purple-600 hover:text-purple-500",children:"← Volver al inicio de sesión"})}),l.jsx("div",{className:"mt-8 text-center",children:l.jsx("p",{className:"text-xs text-gray-500",children:"©2020 Felix All rights reserved."})})]})})},V2=async()=>{try{const t=Xt(je,"users");return(await _n(t)).docs.map(s=>({id:s.id,...s.data()}))}catch(t){throw console.error("Error fetching users:",t),t}},jP=async(t,e)=>{try{const n=ot(je,"users",t);return await Ur(n,{role:e}),{id:t,role:e}}catch(n){throw console.error("Error updating user role:",n),n}},Qc=t=>{switch(t){case"pending":return"Pendiente";case"processing":return"Procesando";case"shipped":return"Enviado";case"delivered":return"Entregado";case"cancelled":return"Cancelado";default:return t}},ch=t=>{switch(t){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-indigo-100 text-indigo-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},IP=async t=>{try{const e=Xt(je,"orders"),n=fi(e,gu("userId","==",t),Ul("createdAt","desc"));return(await _n(n)).docs.map(c=>({id:c.id,...c.data()}))}catch(e){if(console.error("Error fetching orders:",e),e.code==="failed-precondition"||e.message&&e.message.includes("index"))try{const n=Xt(je,"orders"),s=fi(n,gu("userId","==",t));return(await _n(s)).docs.map(p=>({id:p.id,...p.data()})).sort((p,g)=>{const y=p.createdAt?.toDate?p.createdAt.toDate():new Date(p.createdAt);return(g.createdAt?.toDate?g.createdAt.toDate():new Date(g.createdAt))-y})}catch(n){throw console.error("Error fetching orders without index:",n),n}else throw e}},kP=async(t,e)=>{try{const n=ot(je,"orders",t);return await Ur(n,{orderStatus:e,updatedAt:new Date}),{id:t,status:e}}catch(n){throw console.error("Error updating order status:",n),n}},DP=async()=>{try{const t=Xt(je,"orders"),e=fi(t,Ul("createdAt","desc"));return(await _n(e)).docs.map(o=>({id:o.id,...o.data()}))}catch(t){if(console.error("Error fetching all orders:",t),t.code==="failed-precondition"||t.message&&t.message.includes("index"))try{const e=Xt(je,"orders");return(await _n(e)).docs.map(c=>({id:c.id,...c.data()})).sort((c,d)=>{const p=c.createdAt?.toDate?c.createdAt.toDate():new Date(c.createdAt);return(d.createdAt?.toDate?d.createdAt.toDate():new Date(d.createdAt))-p})}catch(e){throw console.error("Error fetching all orders without index:",e),e}else throw t}},U2=()=>{const[t,e]=R.useState([]),[n,s]=R.useState(!0),[o,c]=R.useState(null),[d,p]=R.useState(""),[g,y]=R.useState({code:"",discountType:"percentage",discountValue:"",isActive:!0,expiryDate:""}),[v,_]=R.useState(null),T=Xt(je,"coupons"),I=async()=>{try{const de=fi(T,Ul("createdAt","desc")),k=await _n(de);e(k.docs.map(A=>({...A.data(),id:A.id})))}catch(de){console.error("Firebase error fetching coupons: ",de),c("No se pudieron cargar los cupones. Revisa las reglas de seguridad de Firebase y la consola del navegador.")}s(!1)};R.useEffect(()=>{I()},[]);const B=de=>{p(de),setTimeout(()=>p(""),3e3)},U=de=>{const{name:k,value:A,type:S,checked:L}=de.target;y({...g,[k]:S==="checkbox"?L:A})},j=de=>{const{name:k,value:A,type:S,checked:L}=de.target;_({...v,[k]:S==="checkbox"?L:A})},H=async de=>{if(de.preventDefault(),!g.code||!g.discountValue){c("Por favor, completa todos los campos obligatorios.");return}if(g.discountType==="percentage"&&(g.discountValue<1||g.discountValue>100)){c("El porcentaje de descuento debe estar entre 1 y 100.");return}try{const k={code:g.code.toUpperCase(),discountType:g.discountType,discountValue:parseFloat(g.discountValue),isActive:g.isActive,createdAt:new Date,...g.expiryDate&&{expiryDate:new Date(g.expiryDate)}};await kf(T,k),y({code:"",discountType:"percentage",discountValue:"",isActive:!0,expiryDate:""}),c(null),B("Cupón creado exitosamente!"),I()}catch(k){console.error("Firebase error creating coupon: ",k),c("Error al crear el cupón. ¿Tienes permisos de escritura?")}},F=async(de,k)=>{if(window.confirm(`¿Estás seguro de que quieres eliminar el cupón "${k}"?`))try{const S=ot(je,"coupons",de);await $0(S),e(t.filter(L=>L.id!==de)),B("Cupón eliminado exitosamente!")}catch(S){console.error("Firebase error deleting coupon: ",S),c("Error al eliminar el cupón. ¿Tienes permisos de escritura?")}},q=async de=>{if(de.preventDefault(),!v.code||!v.discountValue){c("Por favor, completa todos los campos obligatorios.");return}if(v.discountType==="percentage"&&(v.discountValue<1||v.discountValue>100)){c("El porcentaje de descuento debe estar entre 1 y 100.");return}try{const k=ot(je,"coupons",v.id),A={code:v.code.toUpperCase(),discountType:v.discountType,discountValue:parseFloat(v.discountValue),isActive:v.isActive,updatedAt:new Date,...v.expiryDate&&{expiryDate:new Date(v.expiryDate)}};await Ur(k,A),_(null),c(null),B("Cupón actualizado exitosamente!"),I()}catch(k){console.error("Firebase error updating coupon: ",k),c("Error al actualizar el cupón. ¿Tienes permisos de escritura?")}},ie=de=>de?de instanceof Date?de.toLocaleDateString("es-CO"):de.toDate?de.toDate().toLocaleDateString("es-CO"):"N/A":"N/A",te=de=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(de||0);return l.jsxs("div",{className:"mt-8",children:[d&&l.jsxs("div",{className:"relative px-4 py-3 mb-4 text-green-700 bg-green-100 border border-green-400 rounded",role:"alert",children:[l.jsx("strong",{className:"font-bold",children:"Éxito! "}),l.jsx("span",{className:"block sm:inline",children:d})]}),o&&l.jsxs("div",{className:"relative px-4 py-3 mb-4 text-red-700 bg-red-100 border border-red-400 rounded",role:"alert",children:[l.jsx("strong",{className:"font-bold",children:"Error! "}),l.jsx("span",{className:"block sm:inline",children:o})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-8",children:[l.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:l.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:v?"Editar Cupón":"Agregar Nuevo Cupón"})}),l.jsx("div",{className:"px-4 py-5 sm:p-6",children:l.jsxs("form",{onSubmit:v?q:H,children:[l.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700",children:"Código del Cupón *"}),l.jsx("input",{type:"text",name:"code",id:"code",required:!0,value:v?v.code:g.code,onChange:v?j:U,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Ej: DESCUENTO10"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"discountType",className:"block text-sm font-medium text-gray-700",children:"Tipo de Descuento *"}),l.jsxs("select",{name:"discountType",id:"discountType",required:!0,value:v?v.discountType:g.discountType,onChange:v?j:U,className:"mt-1 block w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[l.jsx("option",{value:"percentage",children:"Porcentaje"}),l.jsx("option",{value:"fixed",children:"Monto Fijo"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"discountValue",className:"block text-sm font-medium text-gray-700",children:"Valor del Descuento *"}),l.jsx("input",{type:"number",name:"discountValue",id:"discountValue",required:!0,min:"0",step:"0.01",value:v?v.discountValue:g.discountValue,onChange:v?j:U,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:v?v.discountType==="percentage"?"Ej: 15":"Ej: 5000":g.discountType==="percentage"?"Ej: 15":"Ej: 5000"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:v?v.discountType==="percentage"?"Porcentaje de descuento (1-100%)":"Monto fijo en COP":g.discountType==="percentage"?"Porcentaje de descuento (1-100%)":"Monto fijo en COP"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"expiryDate",className:"block text-sm font-medium text-gray-700",children:"Fecha de Expiración"}),l.jsx("input",{type:"date",name:"expiryDate",id:"expiryDate",value:v?v.expiryDate:g.expiryDate,onChange:v?j:U,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),l.jsx("div",{className:"sm:col-span-2",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"isActive",name:"isActive",type:"checkbox",checked:v?v.isActive:g.isActive,onChange:v?j:U,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"Cupón Activo"})]})})]}),l.jsx("div",{className:"mt-6 flex space-x-3",children:v?l.jsxs(l.Fragment,{children:[l.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Guardar Cambios"}),l.jsx("button",{type:"button",onClick:()=>_(null),className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"})]}):l.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Crear Cupón"})})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[l.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:l.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Cupones Existentes"})}),l.jsx("div",{className:"px-4 py-5 sm:px-6",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Código"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Tipo"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Valor"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Estado"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Expiración"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-6 h-6 border-b-2 border-gray-900 rounded-full animate-spin"})})})}):o?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-red-500",children:o})}):t.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No hay cupones disponibles"})}):t.map(de=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:de.code})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:de.discountType==="percentage"?"Porcentaje":"Monto Fijo"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:de.discountType==="percentage"?`${de.discountValue}%`:te(de.discountValue)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:de.isActive?l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Activo"}):l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactivo"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:de.expiryDate?ie(de.expiryDate):"Nunca"}),l.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:[l.jsx("button",{onClick:()=>_(de),className:"mr-3 text-indigo-600 hover:text-indigo-900",children:"Editar"}),l.jsx("button",{onClick:()=>F(de.id,de.code),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},de.id))})]})})})]})]})},HT=({order:t,isOpen:e,onClose:n,formatDate:s,formatCurrency:o,getOrderStatusText:c,getStatusBadgeClass:d})=>!e||!t?null:l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-2xl mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Detalles de la Orden"}),l.jsx("button",{onClick:n,className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsxs("div",{className:"mt-2 space-y-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Información de la Orden"}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"ID de Orden"}),l.jsx("p",{className:"font-medium",children:t.id})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Fecha"}),l.jsx("p",{className:"font-medium",children:s(t.createdAt)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Estado"}),l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d(t.orderStatus||"pending")}`,children:c(t.orderStatus||"pending")})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Método de Pago"}),l.jsx("p",{className:"font-medium",children:t.paymentMethod||"N/A"}),l.jsx("p",{className:"text-sm text-gray-500",children:t.paymentStatus==="completed"?"Pagado":"Pendiente"})]})]})})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Información del Cliente"}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Nombre"}),l.jsx("p",{className:"font-medium",children:t.userEmail||"N/A"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"ID de Usuario"}),l.jsx("p",{className:"font-medium",children:t.userId?.substring(0,8)||"N/A"})]})]})})]}),t.address&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Dirección de Envío"}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("p",{className:"font-medium",children:t.address.name}),l.jsx("p",{children:t.address.street}),l.jsxs("p",{children:[t.address.city,", ",t.address.state," ",t.address.zipCode]}),l.jsx("p",{children:t.address.country})]})]}),t.coupon&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Cupón de Descuento"}),l.jsx("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Código"}),l.jsx("p",{className:"font-medium",children:t.coupon.code})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Descuento"}),l.jsx("p",{className:"font-medium",children:t.coupon.discountType==="percentage"?`${t.coupon.discountValue}%`:o(t.coupon.discountValue)})]})]})})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Productos"}),l.jsx("div",{className:"bg-gray-50 rounded-lg divide-y divide-gray-200",children:t.items?.map((p,g)=>l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 w-16 h-16 border border-gray-200 rounded-md overflow-hidden",children:l.jsx("img",{src:p.imageUrl||"https://via.placeholder.com/64x64.png?text=Moño",alt:p.name,className:"w-full h-full object-center object-cover",onError:y=>{y.target.onerror=null,y.target.src="https://via.placeholder.com/64x64.png?text=Moño"}})}),l.jsxs("div",{className:"ml-4 flex-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("h5",{className:"font-medium text-gray-900",children:p.name}),l.jsx("p",{className:"font-medium",children:o(p.price*p.quantity)})]}),l.jsx("p",{className:"text-sm text-gray-500",children:p.category}),l.jsxs("div",{className:"flex justify-between mt-1",children:[l.jsxs("p",{className:"text-sm text-gray-500",children:["Cantidad: ",p.quantity]}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Precio unitario: ",o(p.price)]})]})]})]})},g))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Resumen del Pedido"}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("p",{className:"text-gray-600",children:"Subtotal"}),l.jsx("p",{className:"font-medium",children:o(t.subtotal||0)})]}),t.coupon&&l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("p",{className:"text-gray-600",children:["Descuento (",t.coupon.code,")"]}),l.jsxs("p",{className:"font-medium text-green-600",children:["-",o(t.discount||0)]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("p",{className:"text-gray-600",children:"Envío"}),l.jsx("p",{className:"font-medium",children:"$0"})]}),l.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200",children:[l.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Total"}),l.jsx("p",{className:"text-lg font-medium text-gray-900",children:o(t.totalAmount||0)})]})]})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cerrar"})})]})})});function B2(t){return yt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function ig(t){return yt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function OP(t){return yt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function PP(t){return yt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function z2(t){return yt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(t)}function F2(t){return yt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function MP(t){return yt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function uh(t){return yt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"path",attr:{d:"M16 10a4 4 0 0 1-8 0"},child:[]}]})(t)}function ag(t){return yt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(t)}function LP(t){return yt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(t)}function og(t){return yt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function q2(t){return yt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function lg(t){return yt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const VP=()=>{const{currentUser:t,isAdmin:e}=Qr(),n=Cr(),[s,o]=R.useState(!1),[c,d]=R.useState("analytics"),[p,g]=R.useState({totalProducts:0,totalOrders:0,totalUsers:0,totalReviews:0,totalRevenue:0,recentOrders:[],recentUsers:[]}),[y,v]=R.useState(!0),[_,T]=R.useState([]),[I,B]=R.useState(!1),[U,j]=R.useState({name:"",description:"",price:"",imageUrls:[],primaryImageIndex:0,category:"",material:"",color:"",size:"",style:"",stock:0,rating:0}),[H,F]=R.useState(null),[q,ie]=R.useState(!1),[te,de]=R.useState("add"),[k,A]=R.useState([]),[S,L]=R.useState(!1),[M,O]=R.useState([]),[C,ke]=R.useState(!1),[Ee,G]=R.useState(null),[oe,ge]=R.useState(!1),[Ve,V]=R.useState([]),[ue,ye]=R.useState(!1),[ee,le]=R.useState(null),[pe,he]=R.useState(!1),[Ue,et]=R.useState({}),[On,Rs]=R.useState(!1),Xr=R.useRef(null),[js,Ye]=R.useState(null),[Is,wo]=R.useState(""),[ks,on]=R.useState(!1);R.useEffect(()=>{const P=me=>{Xr.current&&!Xr.current.contains(me.target)&&Rs(!1)};return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[]);const bo=()=>{Rs(!On)},Et=()=>{Rs(!1)},Ut=async()=>{try{await B1(qr),Et(),n("/login")}catch(P){console.error("Error signing out:",P),Ye("Error al cerrar sesión")}},Zt=P=>{wo(P),setTimeout(()=>wo(""),3e3)},Wr=P=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(P||0),Kn=P=>P?P instanceof Date?P.toLocaleDateString("es-CO"):P.toDate?P.toDate().toLocaleDateString("es-CO"):"N/A":"N/A",_o=async(P,me)=>{try{et(be=>({...be,[P]:!0})),await kP(P,me),V(Ve.map(be=>be.id===P?{...be,orderStatus:me,updatedAt:new Date}:be)),ee&&ee.id===P&&le({...ee,orderStatus:me,updatedAt:new Date}),Zt(`Estado del pedido actualizado a ${Qc(me)}`)}catch(be){console.error("Error updating order status:",be),Ye("Error al actualizar el estado del pedido")}finally{et(be=>({...be,[P]:!1}))}},Zr=async()=>{try{v(!0);const me=(await _n(Xt(je,"products"))).size,be=await _n(Xt(je,"orders")),We=be.size;let Sn=0;be.docs.forEach(Ps=>{const Ms=Ps.data();Sn+=Ms.totalAmount||0});const Bt=await V2(),ur=Bt.length,dr=(await j2()).length,hr=fi(Xt(je,"orders"),Ul("createdAt","desc"),l5(5)),rs=(await _n(hr)).docs.map(Ps=>({id:Ps.id,...Ps.data()})),At=Bt.slice(0,5);g({totalProducts:me,totalOrders:We,totalUsers:ur,totalReviews:dr,totalRevenue:Sn,recentOrders:rs,recentUsers:At})}catch(P){console.error("Error fetching dashboard stats:",P),Ye("Error al cargar las estadísticas del dashboard")}finally{v(!1)}},ar=async()=>{try{B(!0);const me=(await _n(Xt(je,"products"))).docs.map(be=>({id:be.id,...be.data()}));T(me)}catch(P){console.error("Error fetching products:",P),Ye("Error al cargar los productos")}finally{B(!1)}},Jt=async()=>{try{L(!0);const P=await V2();A(P)}catch(P){console.error("Error fetching users:",P),Ye("Error al cargar los usuarios")}finally{L(!1)}},Pn=async()=>{try{ke(!0);const P=await j2();O(P)}catch(P){console.error("Error fetching reviews:",P),Ye("Error al cargar las reseñas")}finally{ke(!1)}},ln=async()=>{try{ye(!0);const P=await DP();V(P)}catch(P){console.error("Error fetching orders:",P),Ye("Error al cargar los pedidos")}finally{ye(!1)}};R.useEffect(()=>{if(e)switch(c){case"analytics":Zr();break;case"products":ar();break;case"users":Jt();break;case"reviews":Pn();break;case"orders":ln();break;default:Zr()}},[c,e]);const Mn=P=>{j({...U,[P.target.name]:P.target.value})},An=P=>{F({...H,[P.target.name]:P.target.value})},Eo=async P=>{if(!P)return null;if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(P.type))return Ye("Por favor, sube una imagen válida (JPEG, JPG, PNG, GIF)."),null;if(P.size>1024*1024)return Ye("La imagen debe ser menor a 1MB."),null;try{on(!0);const be=await or(P);return{name:P.name,type:P.type,data:be,timestamp:Date.now()}}catch(be){return console.error("Error converting file to base64:",be),Ye("Error al procesar la imagen: "+be.message),null}finally{on(!1)}},or=P=>new Promise((me,be)=>{const We=new FileReader;We.readAsDataURL(P),We.onload=()=>me(We.result),We.onerror=Sn=>be(Sn)}),Jr=async(P=!1)=>{const me=document.createElement("input");me.type="file",me.accept="image/*",me.multiple=!0,me.onchange=async be=>{const We=Array.from(be.target.files);if(!We.length)return;const Sn=P?H.imageUrls:U.imageUrls;if(Sn.length+We.length>4){Ye(`Solo puedes subir un máximo de 4 imágenes. Actualmente tienes ${Sn.length} imágenes.`);return}const Bt=[];for(const ur of We){const ns=await Eo(ur);ns&&Bt.push(ns)}Bt.length>0&&(P?F({...H,imageUrls:[...H.imageUrls,...Bt]}):j({...U,imageUrls:[...U.imageUrls,...Bt]}),Zt(`${Bt.length} imagen(es) subida(s) exitosamente!`))},me.click()},Ln=(P,me=!1)=>{if(me){const be=[...H.imageUrls];be.splice(P,1),F({...H,imageUrls:be})}else{const be=[...U.imageUrls];be.splice(P,1),j({...U,imageUrls:be})}},Nn=(P,me=!1)=>{me?F({...H,primaryImageIndex:P}):j({...U,primaryImageIndex:P})},Rr=async P=>{if(P.preventDefault(),!U.name||!U.price){Ye("Por favor, introduce al menos un nombre y un precio.");return}try{const me=parseFloat(U.price);if(isNaN(me)){Ye("El precio debe ser un número válido.");return}const be=parseInt(U.stock);if(isNaN(be)){Ye("El stock debe ser un número válido.");return}const We=parseFloat(U.rating);if(isNaN(We)||We<0||We>5){Ye("La calificación debe ser un número entre 0 y 5.");return}await kf(Xt(je,"products"),{...U,price:me,stock:be,rating:We,createdAt:new Date}),j({name:"",description:"",price:"",stock:0,rating:0,imageUrls:[],primaryImageIndex:0,category:"",material:"",color:"",size:"",style:""}),Zt("Producto añadido exitosamente!"),ie(!1),ar()}catch(me){console.error("Firebase error: ",me),Ye("Error al crear el producto. ¿Tienes permisos de escritura?")}},Ds=async P=>{if(P.preventDefault(),!H.name||!H.price){Ye("Por favor, introduce al menos un nombre y un precio.");return}try{const me=parseFloat(H.price);if(isNaN(me)){Ye("El precio debe ser un número válido.");return}const be=parseInt(H.stock);if(isNaN(be)){Ye("El stock debe ser un número válido.");return}const We=parseFloat(H.rating);if(isNaN(We)||We<0||We>5){Ye("La calificación debe ser un número entre 0 y 5.");return}const Sn=ot(je,"products",H.id);await Ur(Sn,{...H,price:me,stock:be,rating:We,updatedAt:new Date}),Zt("Producto actualizado exitosamente!"),ie(!1),F(null),ar()}catch(me){console.error("Firebase error: ",me),Ye("Error al actualizar el producto. ¿Tienes permisos de escritura?")}},ya=async(P,me)=>{if(window.confirm(`¿Estás seguro de que quieres eliminar el producto "${me}"?`))try{const We=ot(je,"products",P);await $0(We),T(_.filter(Sn=>Sn.id!==P)),Zt("Producto eliminado exitosamente!")}catch(We){console.error("Firebase error: ",We),Ye("Error al eliminar el producto. ¿Tienes permisos de escritura?")}},es=()=>{j({name:"",description:"",price:"",imageUrls:[],primaryImageIndex:0,category:"",material:"",color:"",size:"",style:"",stock:0,rating:0}),de("add"),ie(!0)},gi=P=>{F({...P}),de("edit"),ie(!0)},wt=async(P,me)=>{try{await jP(P,me),A(k.map(be=>be.id===P?{...be,role:me,updatedAt:new Date}:be)),Zt(`Usuario actualizado a ${me==="admin"?"administrador":"cliente"} exitosamente!`)}catch(be){console.error("Firebase error updating user role: ",be),Ye("Error al actualizar el rol del usuario. ¿Tienes permisos de escritura?")}},To=P=>{const{name:me,value:be}=P.target;G({...Ee,[me]:be})},ts=P=>{G({...Ee,rating:P})},jr=async P=>{if(P.preventDefault(),Ee.rating<1||Ee.rating>5){Ye("La calificación debe estar entre 1 y 5 estrellas.");return}if(!Ee.comment||Ee.comment.trim()===""){Ye("El comentario no puede estar vacío.");return}try{await MO(Ee.id,{rating:Ee.rating,comment:Ee.comment.trim()}),O(M.map(me=>me.id===Ee.id?{...me,rating:Ee.rating,comment:Ee.comment.trim()}:me)),G(null),ge(!1),Zt("Reseña actualizada exitosamente!")}catch(me){console.error("Firebase error: ",me),Ye("Error al actualizar la reseña. ¿Tienes permisos de escritura?")}},yi=async P=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta reseña?"))try{await LO(P),O(M.filter(be=>be.id!==P)),Zt("Reseña eliminada exitosamente!")}catch(be){console.error("Firebase error: ",be),Ye("Error al eliminar la reseña. ¿Tienes permisos de escritura?")}},xi=P=>{G({...P}),ge(!0)},lr=P=>{le(P),he(!0)},$l=()=>{he(!1),le(null)},cr=[{id:"analytics",label:"Analytics",icon:l.jsx(B2,{})},{id:"products",label:"Productos",icon:l.jsx(uh,{})},{id:"users",label:"Usuarios",icon:l.jsx(q2,{})},{id:"reviews",label:"Reviews",icon:l.jsx(z2,{})},{id:"coupons",label:"Códigos Promocionales",icon:l.jsx(LP,{})},{id:"orders",label:"Pedidos",icon:l.jsx(F2,{})}],Tt=()=>{switch(c){case"analytics":return l.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[l.jsx("div",{className:"p-6 bg-white rounded-xl shadow-sm",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:l.jsx(uh,{className:"text-blue-600",size:24})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Productos"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:p.totalProducts})]})]})}),l.jsx("div",{className:"p-6 bg-white rounded-xl shadow-sm",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:l.jsx(F2,{className:"text-green-600",size:24})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Pedidos"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:p.totalOrders})]})]})}),l.jsx("div",{className:"p-6 bg-white rounded-xl shadow-sm",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:l.jsx(q2,{className:"text-purple-600",size:24})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Usuarios"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:p.totalUsers})]})]})}),l.jsx("div",{className:"p-6 bg-white rounded-xl shadow-sm",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:l.jsx(z2,{className:"text-yellow-600",size:24})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Reseñas"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:p.totalReviews})]})]})}),l.jsx("div",{className:"p-6 bg-white rounded-xl shadow-sm",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 bg-indigo-100 rounded-lg",children:l.jsx(B2,{className:"text-indigo-600",size:24})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ingresos Totales"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Wr(p.totalRevenue)})]})]})}),l.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-sm md:col-span-2 lg:col-span-3",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Pedidos Recientes"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.recentOrders.map(P=>l.jsxs("tr",{children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[P.id.substring(0,8),"..."]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P.userEmail||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Kn(P.createdAt)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Wr(P.totalAmount||0)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ch(P.orderStatus||"pending")}`,children:Qc(P.orderStatus||"pending")})})]},P.id))})]})})]}),l.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-sm md:col-span-2 lg:col-span-3",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Usuarios Recientes"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha de Registro"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.recentUsers.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P.name||P.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${P.role==="admin"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:P.role==="admin"?"Administrador":"Cliente"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Kn(P.createdAt)})]},P.id))})]})})]})]});case"products":return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestión de Productos"}),l.jsxs("button",{onClick:es,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(MP,{className:"mr-2"}),"Añadir Producto"]})]}),I?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-blue-600 rounded-full animate-spin"})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Imagen"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:P.imageUrls&&P.imageUrls.length>0?l.jsx("img",{className:"h-10 w-10 rounded-md object-cover",src:typeof P.imageUrls[P.primaryImageIndex]=="string"?P.imageUrls[P.primaryImageIndex]:P.imageUrls[P.primaryImageIndex]?.data||P.imageUrls[0],alt:P.name,onError:me=>{me.target.onerror=null,me.target.src="https://via.placeholder.com/40x40.png?text=Moño"}}):l.jsx("div",{className:"h-10 w-10 rounded-md bg-gray-200 flex items-center justify-center",children:l.jsx(uh,{className:"text-gray-500"})})})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.stock}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Wr(P.price)}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>gi(P),className:"text-blue-600 hover:text-blue-900 mr-3",title:"Editar producto",children:l.jsx(ig,{})}),l.jsx("button",{onClick:()=>ya(P.id,P.name),className:"text-red-600 hover:text-red-900",title:"Eliminar producto",children:l.jsx(og,{})})]})]},P.id))})]})})]});case"users":return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Gestión de Usuarios"}),S?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-blue-600 rounded-full animate-spin"})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${P.role==="admin"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:P.role==="admin"?"Administrador":"Cliente"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:l.jsx("button",{onClick:()=>{const me=P.role==="admin"?"customer":"admin";wt(P.id,me)},className:`px-3 py-1 text-xs rounded-md ${P.role==="admin"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-blue-100 text-blue-800 hover:bg-blue-200"}`,children:P.role==="admin"?"Hacer Cliente":"Hacer Administrador"})})]},P.id))})]})})]});case"reviews":return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[l.jsx("div",{className:"flex justify-between items-center mb-6",children:l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestión de Reseñas"})}),C?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-blue-600 rounded-full animate-spin"})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Comentario"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Calificación"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P.productName}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.userEmail}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 line-clamp-1",children:P.comment}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.jsx(yu,{rating:P.rating})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>xi(P),className:"text-blue-600 hover:text-blue-900 mr-3",title:"Editar reseña",children:l.jsx(ig,{})}),l.jsx("button",{onClick:()=>yi(P.id),className:"text-red-600 hover:text-red-900",title:"Eliminar reseña",children:l.jsx(og,{})})]})]},P.id))})]})})]});case"coupons":return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[l.jsx("div",{className:"flex justify-between items-center mb-6",children:l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestión de Códigos Promocionales"})}),l.jsx(U2,{})]});case"orders":return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[l.jsx("div",{className:"flex justify-between items-center mb-6",children:l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestión de Pedidos"})}),ue?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-blue-600 rounded-full animate-spin"})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ve.map(P=>l.jsxs("tr",{children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[P.id.substring(0,8),"..."]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P.userEmail||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Kn(P.createdAt)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Wr(P.totalAmount||0)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ch(P.orderStatus||"pending")}`,children:Qc(P.orderStatus||"pending")})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>lr(P),className:"text-blue-600 hover:text-blue-900 mr-3",title:"Ver detalles del pedido",children:l.jsx(ag,{})}),l.jsx("button",{onClick:()=>_o(P.id,P.orderStatus==="delivered"?"pending":"delivered"),className:P.orderStatus==="delivered"?"text-green-600 hover:text-green-900":"text-gray-600 hover:text-gray-900",title:"Actualizar estado del pedido",children:P.orderStatus==="delivered"?"Marcar como Pendiente":"Marcar como Entregado"})]})]},P.id))})]})})]});case"users":return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Gestión de Usuarios"}),S?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-blue-600 rounded-full animate-spin"})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha de Registro"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:l.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold",children:P.name?P.name.charAt(0).toUpperCase():P.email.charAt(0).toUpperCase()})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.name||"N/A"}),l.jsx("div",{className:"text-sm text-gray-500",children:P.email})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${P.role==="admin"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:P.role==="admin"?"Administrador":"Cliente"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Kn(P.createdAt)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:l.jsx("button",{onClick:()=>{const me=P.role==="admin"?"customer":"admin";wt(P.id,me)},className:`px-3 py-1 text-xs rounded-md ${P.role==="admin"?"bg-green-100 text-green-800 hover:bg-green-200":"bg-blue-100 text-blue-800 hover:bg-blue-200"}`,children:P.role==="admin"?"Hacer Cliente":"Hacer Administrador"})})]},P.id))})]})})]});case"reviews":return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Gestión de Reseñas"}),C?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-blue-600 rounded-full animate-spin"})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Calificación"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Comentario"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.productId||"N/A"}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.userName||"N/A"}),l.jsx("div",{className:"text-sm text-gray-500",children:P.userEmail||"N/A"})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx(yu,{rating:P.rating})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs",children:l.jsx("div",{className:"line-clamp-2",children:P.comment||"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Kn(P.createdAt)}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>xi(P),className:"text-blue-600 hover:text-blue-900 mr-3",title:"Editar reseña",children:l.jsx(ig,{})}),l.jsx("button",{onClick:()=>yi(P.id),className:"text-red-600 hover:text-red-900",title:"Eliminar reseña",children:l.jsx(og,{})})]})]},P.id))})]})})]});case"coupons":return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Gestión de Códigos Promocionales"}),l.jsx(U2,{})]});case"orders":return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Gestión de Pedidos"}),ue?l.jsx("div",{className:"flex justify-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-blue-600 rounded-full animate-spin"})}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ve.map(P=>l.jsxs("tr",{children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[P.id.substring(0,8),"..."]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P.userEmail||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Kn(P.createdAt)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Wr(P.totalAmount||0)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ch(P.orderStatus||"pending")}`,children:Qc(P.orderStatus||"pending")})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("select",{value:P.orderStatus||"pending",onChange:me=>_o(P.id,me.target.value),className:"text-xs border rounded px-2 py-1",disabled:Ue[P.id],children:[l.jsx("option",{value:"pending",children:"Pendiente"}),l.jsx("option",{value:"processing",children:"Procesando"}),l.jsx("option",{value:"shipped",children:"Enviado"}),l.jsx("option",{value:"delivered",children:"Entregado"}),l.jsx("option",{value:"cancelled",children:"Cancelado"})]}),l.jsx("button",{onClick:()=>lr(P),className:"text-blue-600 hover:text-blue-900",children:"Ver Detalles"})]})})]},P.id))})]})})]});default:return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Dashboard"}),l.jsx("p",{className:"text-gray-600",children:"Bienvenido al panel de administración moderno."})]})}};return e?l.jsxs("div",{className:"flex h-screen bg-gray-50",children:[s&&l.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>o(!1)}),l.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 ${s?"translate-x-0":"-translate-x-full"}`,children:[l.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(uh,{className:"text-blue-600",size:24}),l.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Ecommerce Admin"})]}),l.jsx("button",{className:"p-1 rounded-md lg:hidden",onClick:()=>o(!1),children:l.jsx(lg,{size:24})})]}),l.jsx("nav",{className:"mt-6",children:cr.map(P=>l.jsxs("button",{className:`flex items-center w-full px-6 py-3 text-left transition-colors duration-200 ${c===P.id?"bg-blue-50 border-l-4 border-blue-500 text-blue-600":"text-gray-600 hover:bg-gray-50"}`,onClick:()=>{d(P.id),o(!1)},children:[l.jsx("span",{className:"mr-3",children:P.icon}),l.jsx("span",{className:"font-medium",children:P.label})]},P.id))})]}),l.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[l.jsxs("header",{className:"flex items-center justify-between h-16 px-4 bg-white border-b border-gray-200 lg:px-6",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{className:"p-2 mr-2 rounded-md lg:hidden",onClick:()=>o(!0),children:l.jsx(PP,{size:24})}),l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Panel de Administración"})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("button",{onClick:()=>n("/shop"),className:"flex items-center px-3 py-2 text-sm text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:[l.jsx(ag,{className:"mr-2"}),"Ir a la tienda"]}),l.jsxs("div",{className:"relative",ref:Xr,children:[l.jsxs("div",{className:"flex items-center px-3 py-1 text-sm bg-gray-100 rounded-full cursor-pointer",onClick:bo,children:[l.jsx("div",{className:"w-8 h-8 mr-2 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:t?.email?.charAt(0).toUpperCase()||"A"}),l.jsx("span",{className:"font-medium text-gray-700",children:"Administrador"})]}),On&&l.jsx("div",{className:"absolute right-0 z-50 w-48 mt-2 bg-white rounded-md shadow-lg",children:l.jsxs("div",{className:"py-1",children:[l.jsxs("button",{onClick:()=>{n("/shop"),Et()},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[l.jsx(ag,{className:"mr-3 text-gray-400"}),"Ir a la tienda"]}),l.jsxs("button",{onClick:()=>{Ut(),Et()},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[l.jsx(OP,{className:"mr-3 text-gray-400"}),"Cerrar sesión"]})]})})]})]})]}),Is&&l.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 mx-4 mt-4 lg:mx-6",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("span",{className:"text-green-500",children:"✓"})}),l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm text-green-700",children:Is})})]})}),js&&l.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mx-4 mt-4 lg:mx-6",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("span",{className:"text-red-500",children:"✕"})}),l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm text-red-700",children:js})})]})}),l.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6 bg-gray-50",children:y?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-blue-600 rounded-full animate-spin"})}):Tt()})]}),q&&l.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:l.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[l.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity z-40","aria-hidden":"true",onClick:()=>ie(!1)}),l.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),l.jsxs("div",{className:"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full z-50",style:{boxShadow:"0 10px 30px rgba(0,0,0,0.1)",width:"650px"},children:[l.jsxs("div",{className:"px-8 py-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h3",{className:"text-2xl font-semibold text-gray-900",children:te==="add"?"Añadir Producto":"Editar Producto"}),l.jsx("p",{className:"text-sm text-gray-500 mt-2",children:te==="add"?"Ingresa los detalles del nuevo producto":"Modifica la información del producto"})]}),l.jsx("div",{className:"mt-2",children:l.jsxs("form",{onSubmit:te==="add"?Rr:Ds,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Nombre del Producto"}),l.jsx("input",{type:"text",name:"name",value:te==="add"?U.name:H?.name,onChange:te==="add"?Mn:An,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-all text-gray-900 placeholder-gray-400",placeholder:"Nombre del producto",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Descripción"}),l.jsx("textarea",{name:"description",value:te==="add"?U.description:H?.description,onChange:te==="add"?Mn:An,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-all text-gray-900 placeholder-gray-400",rows:"4",placeholder:"Descripción del producto"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Precio (COP)"}),l.jsx("input",{type:"number",name:"price",step:"0.01",min:"0",value:te==="add"?U.price:H?.price,onChange:te==="add"?Mn:An,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-all text-gray-900 placeholder-gray-400",placeholder:"0.00",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Stock"}),l.jsx("input",{type:"number",name:"stock",min:"0",value:te==="add"?U.stock:H?.stock,onChange:te==="add"?Mn:An,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-all text-gray-900 placeholder-gray-400",placeholder:"Cantidad disponible"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Calificación"}),l.jsx("input",{type:"number",name:"rating",step:"0.1",min:"0",max:"5",value:te==="add"?U.rating:H?.rating,onChange:te==="add"?Mn:An,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-all text-gray-900 placeholder-gray-400",placeholder:"0.0 - 5.0"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Material"}),l.jsx("input",{type:"text",name:"material",value:te==="add"?U.material:H?.material,onChange:te==="add"?Mn:An,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-all text-gray-900 placeholder-gray-400",placeholder:"Material del producto"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Color"}),l.jsx("input",{type:"text",name:"color",value:te==="add"?U.color:H?.color,onChange:te==="add"?Mn:An,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-all text-gray-900 placeholder-gray-400",placeholder:"Color del producto"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tamaño"}),l.jsx("input",{type:"text",name:"size",value:te==="add"?U.size:H?.size,onChange:te==="add"?Mn:An,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-all text-gray-900 placeholder-gray-400",placeholder:"Tamaño del producto"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Estilo"}),l.jsx("input",{type:"text",name:"style",value:te==="add"?U.style:H?.style,onChange:te==="add"?Mn:An,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-all text-gray-900 placeholder-gray-400",placeholder:"Estilo del producto"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Categoría"}),l.jsxs("select",{name:"category",value:te==="add"?U.category:H?.category,onChange:te==="add"?Mn:An,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-all text-gray-900",children:[l.jsx("option",{value:"",children:"Seleccionar categoría"}),l.jsx("option",{value:"Moños Elegantes",children:"Moños Elegantes"}),l.jsx("option",{value:"Moños Infantiles",children:"Moños Infantiles"}),l.jsx("option",{value:"Moños Deportivos",children:"Moños Deportivos"}),l.jsx("option",{value:"Moños Casuales",children:"Moños Casuales"}),l.jsx("option",{value:"Moños de Novia",children:"Moños de Novia"}),l.jsx("option",{value:"Moños de Gala",children:"Moños de Gala"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Imágenes"}),l.jsxs("div",{className:"mt-3",children:[l.jsx("button",{type:"button",onClick:()=>Jr(te==="edit"),className:"inline-flex items-center px-4 py-2.5 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 transition-all",disabled:ks||(te==="add"?U.imageUrls.length>=4:H?.imageUrls.length>=4),children:ks?"Subiendo...":`Añadir Imagen${te==="add"?U.imageUrls.length>0?` (${U.imageUrls.length}/4)`:"":H?.imageUrls.length>0?` (${H?.imageUrls.length}/4)`:""}`}),(te==="add"?U.imageUrls.length>=4:H?.imageUrls.length>=4)&&l.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Has alcanzado el límite máximo de 4 imágenes."}),ks&&l.jsx("div",{className:"mt-4",children:l.jsx("div",{className:"w-8 h-8 border-b-2 border-gray-900 rounded-full animate-spin"})}),te==="add"?U.imageUrls.length>0&&l.jsx("div",{className:"mt-5 grid grid-cols-2 gap-4",children:U.imageUrls.map((P,me)=>l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:typeof P=="string"?P:P.data,alt:`Preview ${me}`,className:"h-32 w-full object-cover rounded-lg",onError:be=>{be.target.onerror=null,be.target.src="https://via.placeholder.com/150x150.png?text=Imagen"}}),l.jsx("button",{type:"button",onClick:()=>Ln(me),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1.5 hover:bg-red-700 transition-colors shadow-md",children:l.jsx(lg,{size:14})}),l.jsx("button",{type:"button",onClick:()=>Nn(me),className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 text-xs px-2.5 py-1 rounded-full shadow-sm ${U.primaryImageIndex===me?"bg-gray-900 text-white":"bg-white text-gray-800 border border-gray-300"}`,children:"Principal"})]},me))}):H?.imageUrls.length>0&&l.jsx("div",{className:"mt-5 grid grid-cols-2 gap-4",children:H.imageUrls.map((P,me)=>l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:typeof P=="string"?P:P.data,alt:`Preview ${me}`,className:"h-32 w-full object-cover rounded-lg",onError:be=>{be.target.onerror=null,be.target.src="https://via.placeholder.com/150x150.png?text=Imagen"}}),l.jsx("button",{type:"button",onClick:()=>Ln(me,!0),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1.5 hover:bg-red-700 transition-colors shadow-md",children:l.jsx(lg,{size:14})}),l.jsx("button",{type:"button",onClick:()=>Nn(me,!0),className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 text-xs px-2.5 py-1 rounded-full shadow-sm ${H.primaryImageIndex===me?"bg-gray-900 text-white":"bg-white text-gray-800 border border-gray-300"}`,children:"Principal"})]},me))})]})]})]})})]}),l.jsxs("div",{className:"bg-white px-8 py-5 border-t border-gray-200 flex justify-between",children:[l.jsx("button",{type:"button",onClick:()=>ie(!1),className:"inline-flex justify-center px-5 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 transition-all",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:te==="add"?Rr:Ds,className:"inline-flex justify-center px-5 py-2.5 text-sm font-medium text-white bg-gray-900 border border-transparent rounded-lg hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 transition-all",children:te==="add"?"Añadir Producto":"Actualizar Producto"})]})]})]})}),oe&&Ee&&l.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:l.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[l.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity z-40","aria-hidden":"true",onClick:()=>ge(!1)}),l.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),l.jsxs("div",{className:"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full z-50",style:{boxShadow:"0 10px 30px rgba(0,0,0,0.1)",width:"650px"},children:[l.jsxs("div",{className:"px-8 py-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h3",{className:"text-2xl font-semibold text-gray-900",children:"Editar Reseña"}),l.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Modifica la calificación y el comentario de la reseña"})]}),l.jsx("div",{className:"mt-2",children:l.jsxs("form",{onSubmit:jr,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Calificación"}),l.jsx("div",{className:"flex items-center justify-center space-x-2",children:[1,2,3,4,5].map(P=>l.jsx("button",{type:"button",onClick:()=>ts(P),className:"text-4xl focus:outline-none transition-transform hover:scale-110",children:P<=Ee.rating?l.jsx("span",{className:"text-yellow-400",children:"★"}):l.jsx("span",{className:"text-gray-300",children:"☆"})},P))}),l.jsx("div",{className:"text-center mt-3",children:l.jsxs("span",{className:"text-sm text-gray-500",children:[Ee.rating," de 5 estrellas"]})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Comentario"}),l.jsx("textarea",{name:"comment",rows:6,value:Ee.comment,onChange:To,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-gray-900 transition-all text-gray-900 placeholder-gray-400",placeholder:"Escribe tu reseña aquí..."})]})]})})]}),l.jsxs("div",{className:"bg-white px-8 py-5 border-t border-gray-200 flex justify-between",children:[l.jsx("button",{type:"button",onClick:()=>ge(!1),className:"inline-flex justify-center px-5 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 transition-all",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:jr,className:"inline-flex justify-center px-5 py-2.5 text-sm font-medium text-white bg-gray-900 border border-transparent rounded-lg hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 transition-all",children:"Guardar Cambios"})]})]})]})}),pe&&ee&&l.jsx(HT,{order:ee,isOpen:pe,onClose:$l,formatDate:Kn,formatCurrency:Wr,getOrderStatusText:Qc,getStatusBadgeClass:ch})]}):l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Acceso Denegado"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"No tienes permisos para acceder a esta sección."})]})})},UP=()=>{const{currentUser:t}=Qr(),e=Cr(),[n,s]=R.useState([]),[o,c]=R.useState(!0),[d,p]=R.useState(null),[g,y]=R.useState(null),[v,_]=R.useState(!1),[T,I]=R.useState(null),B=A=>{switch(A){case"pending":return"Pendiente";case"processing":return"Procesando";case"shipped":return"Enviado";case"delivered":return"Entregado";case"cancelled":return"Cancelado";default:return A}},U=A=>{switch(A){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-indigo-100 text-indigo-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=A=>A?A instanceof Date?A.toLocaleDateString("es-CO"):A.toDate?A.toDate().toLocaleDateString("es-CO"):"N/A":"N/A",H=A=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(A||0),F=A=>{y(A),_(!0)},q=()=>{_(!1),y(null)},ie=A=>{I({productId:A.id,productName:A.name,rating:0,comment:""})},te=A=>{const{name:S,value:L}=A.target;I(M=>({...M,[S]:L}))},de=A=>{I(S=>({...S,rating:A}))},k=async()=>{if(T.rating===0){Ae.fire({title:"Error",text:"Por favor selecciona una calificación",icon:"error",confirmButtonText:"Aceptar"});return}if(T.comment.trim()===""){Ae.fire({title:"Error",text:"Por favor escribe un comentario",icon:"error",confirmButtonText:"Aceptar"});return}try{const A={productId:T.productId,userId:t.uid,userEmail:t.email,userName:t.displayName||t.email.split("@")[0],rating:T.rating,comment:T.comment.trim()};await PT(A),Ae.fire({title:"Reseña enviada",text:"Tu reseña ha sido enviada correctamente",icon:"success",confirmButtonText:"Aceptar"}),I(null)}catch(A){console.error("Error submitting review:",A),Ae.fire({title:"Error",text:"Hubo un error al enviar tu reseña. Por favor intenta nuevamente.",icon:"error",confirmButtonText:"Aceptar"})}};return R.useEffect(()=>{(async()=>{if(!t){e("/login");return}try{const S=await IP(t.uid);s(S)}catch(S){console.error("Error fetching user orders:",S),p("No se pudieron cargar tus órdenes. Por favor, intenta nuevamente.")}finally{c(!1)}})()},[t,e]),o?l.jsx("div",{children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})})}):l.jsxs("div",{children:[l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Pedidos"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Consulta el estado de tus pedidos recientes"})]}),d&&l.jsx("div",{className:"rounded-md bg-red-50 p-4 mb-6",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsx("h3",{className:"text-sm font-medium text-red-800",children:d})})]})}),n.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No tienes pedidos"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"Aún no has realizado ningún pedido."}),l.jsx("div",{className:"mt-6",children:l.jsx(He,{to:"/shop",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Comprar ahora"})})]}):l.jsx("div",{className:"space-y-6",children:n.map(A=>l.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[l.jsx("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Pedido #",A.id.substring(0,8)]}),l.jsxs("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:["Realizado el ",j(A.createdAt)]})]}),l.jsxs("div",{className:"mt-4 md:mt-0 flex items-center space-x-2",children:[l.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${U(A.orderStatus)}`,children:B(A.orderStatus)}),l.jsx("button",{onClick:()=>F(A),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Ver detalles"})]})]})}),l.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[l.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),l.jsx("p",{className:"text-lg font-medium text-gray-900",children:H(A.totalAmount)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Productos"}),l.jsxs("p",{className:"text-lg font-medium text-gray-900",children:[A.items?.length||0," ",A.items?.length===1?"producto":"productos"]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Método de Pago"}),l.jsx("p",{className:"text-lg font-medium text-gray-900",children:A.paymentMethod||"N/A"})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Productos en este pedido"}),l.jsx("div",{className:"space-y-4",children:A.items?.map((S,L)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 w-16 h-16 border border-gray-200 rounded-md overflow-hidden",children:l.jsx("img",{src:S.imageUrl||"https://via.placeholder.com/64x64.png?text=Moño",alt:S.name,className:"w-full h-full object-center object-cover",onError:M=>{M.target.onerror=null,M.target.src="https://via.placeholder.com/64x64.png?text=Moño"}})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("h5",{className:"text-sm font-medium text-gray-900",children:S.name}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Cantidad: ",S.quantity]})]})]}),l.jsx("button",{onClick:()=>ie(S),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Dejar reseña"})]},L))})]})]})]},A.id))})]}),T&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto bg-black bg-opacity-50",children:l.jsx("div",{className:"relative w-full max-w-md mx-auto my-8 bg-white rounded-lg shadow-xl",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Dejar una reseña"}),l.jsx("button",{onClick:()=>I(null),className:"text-2xl font-bold text-gray-400 hover:text-gray-500",children:"×"})]}),l.jsxs("div",{className:"mt-2",children:[l.jsx("h4",{className:"font-medium text-gray-900",children:T.productName}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calificación"}),l.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(A=>l.jsx("button",{type:"button",onClick:()=>de(A),className:"text-2xl focus:outline-none",children:A<=T.rating?l.jsx("span",{className:"text-yellow-400",children:"★"}):l.jsx("span",{className:"text-gray-300",children:"☆"})},A)),l.jsx("span",{className:"ml-2 text-sm text-gray-500",children:T.rating>0?`${T.rating} de 5 estrellas`:"Selecciona una calificación"})]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{htmlFor:"review-comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentario"}),l.jsx("textarea",{id:"review-comment",name:"comment",rows:4,value:T.comment,onChange:te,className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border border-gray-300 rounded-md p-3",placeholder:"Comparte tu experiencia con este producto..."})]}),l.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[l.jsx("button",{type:"button",onClick:()=>I(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"}),l.jsx("button",{onClick:k,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Enviar Reseña"})]})]})]})})}),l.jsx(HT,{order:g,isOpen:v,onClose:q,formatDate:j,formatCurrency:H,getOrderStatusText:B,getStatusBadgeClass:U})]})},BP=()=>{const{applyCoupon:t,removeCoupon:e,coupon:n}=Bl(),s=async()=>{try{const c=await t("DESCUENTO10");console.log("Coupon applied successfully:",c),alert("Coupon applied successfully!")}catch(c){console.error("Error applying coupon:",c),alert("Error applying coupon: "+c.message)}},o=()=>{e(),alert("Coupon removed!")};return l.jsxs("div",{children:[l.jsx(sf,{}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Prueba de Cupones"}),l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden p-6",children:[l.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-4",children:"Funcionalidad de Cupones"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Estado Actual"}),n?l.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[l.jsxs("p",{className:"font-medium text-green-800",children:["Cupón Aplicado: ",n.code]}),l.jsxs("p",{className:"text-sm text-green-600",children:["Descuento: ",n.discountType==="percentage"?`${n.discountValue}%`:`$${n.discountValue}`]})]}):l.jsx("p",{className:"text-gray-500",children:"No hay cupón aplicado"})]}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsx("button",{onClick:s,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Aplicar Cupón de Prueba (DESCUENTO10)"}),l.jsx("button",{onClick:o,disabled:!n,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${n?"bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500":"bg-gray-400 cursor-not-allowed"}`,children:"Remover Cupón"})]}),l.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[l.jsx("h3",{className:"text-md font-medium text-blue-800 mb-2",children:"Instrucciones"}),l.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-700 space-y-1",children:[l.jsx("li",{children:"Primero, asegúrate de haber creado un cupón de prueba en Firestore"}),l.jsx("li",{children:'Haz clic en "Aplicar Cupón de Prueba" para probar la funcionalidad'}),l.jsx("li",{children:"Verifica que el cupón se aplique correctamente"}),l.jsx("li",{children:'Haz clic en "Remover Cupón" para eliminarlo'})]})]})]})]})]})]})},zP=()=>{const{items:t,removeFromWishlist:e,loading:n}=Of();return n?l.jsx("div",{children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Mi Lista de Deseos"}),l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})})]})}):l.jsx("div",{children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Mi Lista de Deseos"}),t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Tu lista de deseos está vacía"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"Empieza a agregar productos a tu lista de deseos"}),l.jsx("div",{className:"mt-6",children:l.jsx(He,{to:"/shop",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Explorar Productos"})})]}):l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(s=>l.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[l.jsx(He,{to:`/product/${s.id}`,children:l.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden",children:l.jsx("img",{src:s.imageUrls&&s.imageUrls.length>0?typeof s.imageUrls[0]=="string"?s.imageUrls[0]:s.imageUrls[0].data:s.imageUrl||"https://via.placeholder.com/300x300.png?text=Moño",alt:s.name,className:"w-full h-64 object-cover",onError:o=>{o.target.onerror=null,o.target.src="https://via.placeholder.com/300x300.png?text=Moño"}})})}),l.jsxs("div",{className:"p-4",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:s.category})}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:s.name}),s.rating>0&&l.jsx("div",{className:"mt-2",children:l.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((o,c)=>l.jsx("svg",{className:`w-4 h-4 ${c<Math.floor(s.rating)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},c)),l.jsx("span",{className:"ml-1 text-sm text-gray-600",children:s.rating})]})}),l.jsx("div",{className:"mt-2",children:l.jsxs("span",{className:"text-lg font-semibold text-indigo-600",children:["$",parseFloat(s.price).toLocaleString("es-CO")]})}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx(He,{to:`/product/${s.id}`,className:"flex-1 bg-indigo-600 border border-transparent rounded-md py-2 px-4 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 text-center",children:"Ver Detalles"}),l.jsx("button",{onClick:()=>e(s.id),className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:l.jsx("svg",{className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},s.id))})]})})},FP=()=>l.jsx("footer",{className:"bg-gray-800 text-white py-8",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Tienda de Moños"}),l.jsx("p",{className:"text-gray-300",children:"La mejor selección de moños para todas las ocasiones."})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Enlaces Rápidos"}),l.jsxs("ul",{className:"space-y-2",children:[l.jsx("li",{children:l.jsx("a",{href:"/home",className:"text-gray-300 hover:text-white",children:"Inicio"})}),l.jsx("li",{children:l.jsx("a",{href:"/cart",className:"text-gray-300 hover:text-white",children:"Carrito"})}),l.jsx("li",{children:l.jsx("a",{href:"/login",className:"text-gray-300 hover:text-white",children:"Iniciar Sesión"})}),l.jsx("li",{children:l.jsx("a",{href:"/register",className:"text-gray-300 hover:text-white",children:"Registrarse"})})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Contacto"}),l.jsxs("address",{className:"text-gray-300 not-italic",children:[l.jsx("p",{children:"Email: psgmoños@gmail.com"}),l.jsx("p",{children:"Teléfono: (123) 456-7890"})]})]})]}),l.jsx("div",{className:"border-t border-gray-700 mt-8 pt-6 text-center text-gray-400",children:l.jsxs("p",{children:["© ",new Date().getFullYear()," Tienda de Moños. Todos los derechos reservados."]})})]})}),$T=$n.createContext(),Qr=()=>$n.useContext($T);function qP(){const[t,e]=R.useState(null),[n,s]=R.useState(null),[o,c]=R.useState(!0),[d,p]=R.useState(!1);R.useEffect(()=>FR(qr,async T=>{if(e(T),T)try{const I=ot(je,"users",T.uid),B=await Gr(I);if(B.exists()){const U=B.data();s(U),p(U.role==="admin")}else s(null),p(!1)}catch(I){console.error("Error fetching user profile:",I),s(null),p(!1)}else s(null),p(!1);c(!1)}),[]);const g={currentUser:t,userProfile:n,isAdmin:d};if(o)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})});const y=({children:_,adminOnly:T=!1})=>t?T&&!d?l.jsx(Bp,{to:"/home"}):_:l.jsx(Bp,{to:"/login"}),v=({children:_})=>t?l.jsx(Bp,{to:"/home"}):_;return l.jsx($T.Provider,{value:g,children:l.jsx(q5,{children:l.jsx(H5,{children:l.jsxs("div",{className:"flex flex-col min-h-screen",children:[l.jsxs(Ow,{children:[l.jsx(hn,{path:"/admin/*",element:null}),l.jsx(hn,{path:"*",element:l.jsx(sf,{})})]}),l.jsx("main",{className:"flex-grow",children:l.jsxs(Ow,{children:[l.jsx(hn,{path:"/",element:l.jsx(sg,{})}),l.jsx(hn,{path:"/home",element:l.jsx(sg,{})}),l.jsx(hn,{path:"/shop",element:l.jsx(sg,{})}),l.jsx(hn,{path:"/product/:id",element:l.jsx(VO,{})}),l.jsx(hn,{path:"/cart",element:l.jsx(UO,{})}),l.jsx(hn,{path:"/wishlist",element:l.jsx(zP,{})}),l.jsx(hn,{path:"/checkout",element:l.jsx(y,{children:l.jsx(AP,{})})}),l.jsx(hn,{path:"/profile",element:l.jsx(y,{children:l.jsx(NP,{})})}),l.jsx(hn,{path:"/orders",element:l.jsx(y,{children:l.jsx(UP,{})})}),l.jsx(hn,{path:"/login",element:l.jsx(v,{children:l.jsx(SP,{})})}),l.jsx(hn,{path:"/register",element:l.jsx(v,{children:l.jsx(CP,{})})}),l.jsx(hn,{path:"/reset-password",element:l.jsx(v,{children:l.jsx(RP,{})})}),l.jsx(hn,{path:"/admin",element:l.jsx(y,{adminOnly:!0,children:l.jsx(VP,{})})}),l.jsx(hn,{path:"/coupon-test",element:l.jsx(y,{adminOnly:!0,children:l.jsx(BP,{})})})]})}),l.jsx(FP,{})]})})})})}const HP={"client-id":"ECmX0zT4f25SE12Wz3vY6RNnLLG1iK_uOE1UvckTz5o2Pn9DhFtVpeKOBvJSLGu1MpPYduxBNjUWPKwP",currency:"COP",intent:"capture"};RN.createRoot(document.getElementById("root")).render(l.jsx(R.StrictMode,{children:l.jsx(iP,{options:HP,children:l.jsx(FS,{children:l.jsx(qP,{})})})}));
